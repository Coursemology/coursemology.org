/*!
 * jQuery JavaScript Library v1.8.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Sep 20 2012 21:13:05 GMT-0400 (Eastern Daylight Time)
 */
function BestInPlaceEditor(e){this.element=e,this.initOptions(),this.bindForm(),this.initNil(),jQuery(this.activator).bind("click",{editor:this},this.clickHandler)}function _jfdiFormatFunc(e,t){var i=$(t);if(!i.data("jfdiFormatted")){i.data("jfdiFormatted",!0);var n=$("br",i);n.each(function(e,t){var i=$(t);i.prev(),i.next(),$(document.createTextNode("\n")).insertBefore(i),i.remove()}),i.css("white-space","pre");var o=i.text();n.length>0&&i.addClass("multiline"),0==i.parents(".cos_code").length&&(i.wrap('<div class="cos_code"></div>'),i.addClass("cm-s-molokai")),CodeMirror.runMode(o,"python",t)}}function jfdiFormat(e){$(e).find(".jfdiCode").each(_jfdiFormatFunc)}function IsNumeric(e){return e-0==e&&e.length>0}function IsPositive(e){return IsNumeric(e)&&e-0>=0}function escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;")}function CodeViewer(e,t,i,n,o,r){function s(){function e(e){return e.stopPropagation(),$(this).hasClass("annotate")?$(this).data("lh").eq(0).click():_.end_line==$(this).data("l")&&(_.start=this,_.start_line=$(this).data("l")),!1}function t(){_.end=this,el=$(this).data("l"),_.start||(_.start_line=el);for(var e=_.start_line<el?_.start_line:el,t=_.start_line>el?_.start_line:el,i=0;i<D.length;++i){if(D[i].s>=e&&D[i].s<=t)return!1;if(D[i].s<=e&&D[i].s>=t)return!1;if(D[i].e>=e&&D[i].e<=t)return!1;if(D[i].e<=e&&D[i].e>=t)return!1;if(D[i].s<=e&&D[i].e>=t)return!1}_.end_line=$(this).data("l"),e=_.start_line<_.end_line?_.start_line:_.end_line,t=_.start_line>_.end_line?_.start_line:_.end_line,_.start&&(_.line_numbers.removeClass("hover").slice(e,t+1).addClass("hover"),k.removeClass("highlight").slice(e,t+1).addClass("highlight")),$(this).addClass("hover")}function i(){_.start||($(this).removeClass("hover"),k.removeClass("highlight"))}function n(){if(console.log(_.code_id),_.start){var e=_.start_line<_.end_line?_.start_line:_.end_line,t=_.start_line>_.end_line?_.start_line:_.end_line;_.line_numbers.removeClass("hover"),l(e+1,t+1,!1,!0),_.hideAnnotate&&_.showAnnotation(),_.start=!1}}var o=_.output.find("div.lines"),r=1;k=_.output.find("pre.line"),k.each(function(){T.push(this);var e=$('<div class="line-number line-number-'+_.code_id+'">'+r+"</div>");e.css("height",$(this).height()+"px").css("line-height",$(this).height()+3+"px").css("top",$(this).offset().top-_.topOffset+"px").data("l",r-1).appendTo(o),++r}),_.line_numbers=$(".line-number-"+_.code_id).bind("mousedown",e).hover(t,i),$(document).bind("mouseup",n)}function a(){return _ca?($("#annotate-area").remove(),$ab=$('<div id="annotate-area"></div>'),$ab.append('<p class="annotate-message">Leave an annotation:</p>'),$ta=$('<textarea class="annotate-box" id="annotate-box"></textarea>').data("s",_.start_line+1).data("e",_.end_line+1).appendTo($ab),$ab.append('<button class="btn" id="annotateButton">Annotate</button>'),this.append($ab),$ta.focus(),$("#annotateButton").on("click",function(){var e=$("#annotate-box");if("disabled"==e.attr("disabled"))return!1;var t=e.val().trim(),i=e.data("s"),n=e.data("e");""==t?e.focus():(e.attr("disabled","disabled"),$.post(_.annotation_url,{origin:document.URL,annotation:{annotable_id:_.code_id,annotable_type:"StdCodingAnswer",text:t,line_start:i,line_end:n}},function(t){e.attr("disabled",!1).val(""),m(t)}))}),void 0):!1}function l(e,t,i,n){if(console.log("create comment"),"view"==o){if(($tcb=$("#temporary-comment-box"))&&$tcb.size()&&(e!=$tcb.data("s")||t!=$tcb.data("e"))&&c.call($("#temporary-comment-box")),n="undefined"!=typeof n,"undefined"!=typeof S[e])s=S[e];else{var r=u(e,t),s=$('<div class="comment-box '+_.cb_class+'" '+(n?'id="temporary-comment-box"':"")+"/>");if(s.click(function(){C!=s&&f(s)}),!T[e-1])return!1;s.appendTo(document.body),s.css("width",E+"px").css("top",$(T[e-1]).offset().top+"px").data("top",$(T[e-1]).offset().top+_.wrapper.scrollTop()).css("minHeight",(t-e+1)*r.height()+"px").data("s",e).data("e",t),h(e,t,r,s),S[e]=s,n||D.push({s:e-1,e:t-1})}$.isFunction(i)&&i.call(s),n&&f(s)}}function c(){this.size()&&(delete S[this.data("s")],d(this.data("s"),this.data("e")),this.remove(),C=!1)}function d(e,t){k.slice(e-1,t).removeClass("annotate").unbind("mouseenter").unbind("mouesleave").unbind("click"),_.line_numbers.slice(e-1,t).removeClass("annotate").data("lh",!1)}function u(e,t){return $lh=k.slice(e-1,t).addClass("annotate"),_.line_numbers.slice(e-1,t).addClass("annotate").data("lh",$lh),$lh}function h(e,t,i,n){var o=k.slice(e-1,t);return o.addClass("annotate-active").bind("mouseenter",function(){i.addClass("hover"),n.addClass("hover")}).bind("mouseleave",function(){i.removeClass("hover"),n.removeClass("hover")}).click(function(){f(n)}),o}function f(e){if(e.is("#temporary-comment-box")){if(C&&C.is("#temporary-comment-box"))return c.call($("#temporary-comment-box")),C=!1,!1}else c.call($("#temporary-comment-box"));if(C)C==e?(C.animate({"max-height":"100px"},"slow"),C.removeClass("active",500),C=!1,$("#annotate-area").remove()):(C.animate({"max-height":"100px"},"slow"),C.removeClass("active",500),e.css({"max-height":"none"}),e.addClass("active",300),C=e);else{var t=$(".annotate-area",e).outerHeight(!0);e.animate({"max-height":t+1e3},"slow"),e.addClass("active",300),C=e}C==e&&(_.start_line=e.data("s")-1,_.end_line=e.data("e")-1,a.call(e)),_.checkScroll()}function p(){_.wrapper.bind("scroll",_.checkScroll),_.output.height()<_.wrapper.height()&&_.wrapper.height(_.output.height()+"px"),_.output.width(_.wrapper.get(0).scrollWidth);var e=function(){var e=$(document).scroll().width()-_.wrapper.offset().left-_.wrapper.width();E=e};e()}function m(e){"undefined"!=typeof Comment&&Comment.parseComment(e,_.code_id),console.log(_.code_id),console.log(e.length),console.log("parse comments");for(var t=0;t<e.length;++t)"undefined"==typeof N[e[t].id]&&(N[e[t].id]=!0,-1==e[t].s||l(e[t].s,e[t].e,function(){this.is("#temporary-comment-box")&&(this.attr("id",""),D.push({s:e[t].s-1,e:e[t].e-1})),b(e[t],this)}));_.checkScroll.call(this.wrapper)}function g(e){$obj=e.find(".comment-obj"),confirm("TO DELETE: \n\n"+$obj.attr("o")+"\n\nBY: "+$obj.attr("author"))&&$.ajax({url:_.annotation_url+"/"+$obj.attr("cid"),type:"DELETE",dataType:"json",success:function(){e.hide("slow",function(){e.remove()})}})}function v(e){$edit=e.find(".comment-edit-link"),$del=e.find(".comment-del-link"),$obj=e.find(".comment-obj"),original=$obj.attr("o"),id=$obj.attr("cid");var t=e.find(".annotate-box");comment=e.find(".comment"),0==t.size()?(t=$('<textarea class="annotate-box" style="margin-bottom: 9px; display: none" />'),t.val(original),comment.empty().append(t),t.show("slow"),$edit.empty().append('<i class="icon-ok"></i>'),$del.empty().append('<i class="icon-remove"></i>'),$del.unbind("click"),$del.bind("click",function(t){t.preventDefault(),y(e)})):$.ajax({url:_.annotation_url+"/"+$obj.attr("cid"),type:"PUT",dataType:"json",data:{text:t.val()},success:function(t){$obj.attr("o",t.o),$obj.attr("c",t.c),y(e)}})}function y(e){$edit=e.find(".comment-edit-link"),$del=e.find(".comment-del-link");var t=e.find(".annotate-box");comment=e.find(".comment"),t.size()>0&&(t.hide("slow",function(){comment.empty(),comment.html(e.find(".comment-obj").attr("c").nl2br())}),$edit.attr("title","Edit Comment"),$edit.empty().append('<i class="icon-pencil"></i>'),$del.empty().append('<i class="icon-trash"></i>'),$del.attr("title","Delete Comment"),$del.unbind("click"),$del.bind("click",function(t){t.preventDefault(),g(e)}))}function b(e,t){0==t.find(".annotate-area").size()&&t.prepend('<ul class="annotate-area code-comment-box">');var i=$('<li class="comment"/>'),n=$('<div class="comment-text-container">');if(e.edit){var o=$('<input class="comment-obj" type="hidden" o="" c="" cid="" author="" >');o.attr("o",e.o),o.attr("c",e.c),o.attr("cid",e.id),o.attr("author",e.name);var r=$('<a href="#" class="comment-edit-link"><i class="icon-pencil"></i></a>').click(function(e){e.preventDefault(),v(i)}),s=$('<a href="#" class="comment-del-link"><i class="icon-trash"></i></a>').click(function(e){e.preventDefault(),g(i)}),a=$('<div class="pull-right annotation-edit">').append(r).append(s).append(o);a.appendTo(n)}n.append('<div class="commentor">'+e.u+"</div>").append('<div class="comment">'+e.c.nl2br()+"</div>").append('<div class="timestamp">'+e.t+"</div>"),i.append('<img class="small-profile-pic" src="'+e.p+'" width="32" height="32" />').append(n).appendTo(t.find(".annotate-area")),jfdiFormat(i.find(".comment").get(0))}function w(){$.get(_.annotation_url,{annotation:{annotable_id:_.code_id,annotable_type:"StdCodingAnswer"}},function(e){m(e),setTimeout(w,4e3)})}var _=this,x="edit"==o;this.wrapper=e,this.code_id=n,this.cb_class="comment-box-"+n;var C=!1;this.checkScroll=function(){if(_.hideAnnotate)return!0;var e=_.wrapper.scrollTop();return $("."+_.cb_class).each(function(){var t=$(this),i=t.data("top");i-=e,_.fullScreenOffset&&(i-=_.fullScreenOffset),i<_.topOffset||i+20>=_.bottomOffset?t.is("#temporary-comment-box")?c.call(t):t.fadeOut("fast"):(t.is(":visible")||t.fadeIn("fast"),_.fullScreenOffset&&i+t.height()>_.bottomOffset?t.css("top","auto").css("bottom","0px"):t.css("bottom","auto").css("top",i+"px"))}),!0};var k,T=[];this.line_numbers=!1;var S={},D=[],N={};this.start=!1,this.end=!1,this.start_line=!1,this.end_line=!1,this.fullScreenOffset=!1,this.hideAnnotate=!1;var E=0;if(this.annotation_url=$("#annotation-path-"+_.code_id).val(),"undefined"!=typeof x&&x)console.log(n),$('<textarea class="code" name="code" id="code'+this.wrapper.attr("id")+'"></textarea>').val(t).appendTo(this.wrapper),this.editor=CodeMirror.fromTextArea($("#code"+this.wrapper.attr("id")).get(0),{mode:{name:r,version:3,singleLineStringErrors:!1},lineNumbers:!0,tabMode:"shift",theme:"molokai",indentUnit:4,matchBrackets:!0});else{console.log(n),this.output=$('<div class="static-code cm-s-'+i+'"'+'id="'+n+'"/>').appendTo(this.wrapper);var M=[],I=[];CodeMirror.runMode(t,r,function(e,t){"\n"==e?(str=M.join(""),""==str&&(str=" "),I.push('<pre class="line">'+str+"\n"+"</pre>"),M=[]):t?M.push('<span class="cm-'+t+'">'+e+"</span>"):M.push(e)}),M.length&&(str=M.join(""),""==str&&(str=" "),I.push('<pre class="line">'+str+"</pre>"));var A=I.join("");this.output.html('<div class="lines"></div><div class="source">'+A+"</div>"),this.topOffset=this.output.find("div.source").offset().top,this.bottomOffset=this.topOffset+this.wrapper.height(),s($("#output")),p(),w()}$("#commentButton").click(function(){if("disabled"==$("#comment-ta").attr("disabled"))return!1;var e=$("#comment-ta").val().trim();""==e?$("#comment-ta").focus():($("#comment-ta").attr("disabled","disabled"),$.post(makelink("code/_comment"),{cid:_.code_id,comment:e},function(e){e=JSON.parse(e),$("#comment-ta").attr("disabled",!1).val("").focus(),m(e)}))})}function lightboxinit(){var e,t,i;e=jQuery,i=function(){function e(){this.fadeDuration=500,this.fitImagesInViewport=!0,this.resizeDuration=700,this.showImageNumberLabel=!0,this.wrapAround=!1}return e.prototype.albumLabel=function(e,t){return"Image "+e+" of "+t},e}(),t=function(){function t(e){this.options=e,this.album=[],this.currentImageIndex=void 0,this.init()}return t.prototype.init=function(){return this.enable(),this.build()},t.prototype.enable=function(){var t=this;return e("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(i){return t.start(e(i.currentTarget)),!1})},t.prototype.build=function(){var t=this;return e("<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div></div>").appendTo(e("body")),this.$lightbox=e("#lightbox"),this.$overlay=e("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return t.end(),!1}),this.$lightbox.hide().on("click",function(i){return"lightbox"===e(i.target).attr("id")&&t.end(),!1}),this.$outerContainer.on("click",function(i){return"lightbox"===e(i.target).attr("id")&&t.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===t.currentImageIndex?t.changeImage(t.album.length-1):t.changeImage(t.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return t.currentImageIndex===t.album.length-1?t.changeImage(0):t.changeImage(t.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return t.end(),!1})},t.prototype.start=function(t){var i,n,o,r,s,a,l,c,d,u,h,f,p;if(e(window).on("resize",this.sizeOverlay),e("select, object, embed").css({visibility:"hidden"}),this.$overlay.width(e(document).width()).height(e(document).height()).fadeIn(this.options.fadeDuration),this.album=[],s=0,o=t.attr("data-lightbox"))for(f=e(t.prop("tagName")+'[data-lightbox="'+o+'"]'),r=c=0,u=f.length;u>c;r=++c)n=f[r],this.album.push({link:e(n).attr("href"),title:e(n).attr("title")}),e(n).attr("href")===t.attr("href")&&(s=r);else if("lightbox"===t.attr("rel"))this.album.push({link:t.attr("href"),title:t.attr("title")});else for(p=e(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]'),r=d=0,h=p.length;h>d;r=++d)n=p[r],this.album.push({link:e(n).attr("href"),title:e(n).attr("title")}),e(n).attr("href")===t.attr("href")&&(s=r);i=e(window),l=i.scrollTop()+i.height()/10,a=i.scrollLeft(),this.$lightbox.css({top:l+"px",left:a+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(s)},t.prototype.changeImage=function(t){var i,n,o=this;this.disableKeyboardNav(),i=this.$lightbox.find(".lb-image"),this.sizeOverlay(),this.$overlay.fadeIn(this.options.fadeDuration),e(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating"),n=new Image,n.onload=function(){i.attr("src",o.album[t].link);var r=(e(window).height()-200)/n.height,s=e(window).width()/n.width,a=r>s?s:r,l=a>=1?n.width:n.width*a,c=a>=1?n.height:n.height*a;return o.sizeContainer(l,c)},n.src=this.album[t].link,this.currentImageIndex=t},t.prototype.sizeOverlay=function(){return e("#lightboxOverlay").width(e(document).width()).height(e(document).height())},t.prototype.sizeContainer=function(e,t){var i,n,o,r,s=this;r=this.$outerContainer.outerWidth(),o=this.$outerContainer.outerHeight(),n=e+this.containerLeftPadding+this.containerRightPadding,i=t+this.containerTopPadding+this.containerBottomPadding,this.$outerContainer.animate({width:n,height:i},this.options.resizeDuration,"swing"),setTimeout(function(){s.$lightbox.find(".lb-dataContainer").width(n),s.$lightbox.find(".lb-prevLink").height(i),s.$lightbox.find(".lb-nextLink").height(i),s.showImage()},this.options.resizeDuration)},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?this.$lightbox.find(".lb-prev, .lb-next").show():(this.currentImageIndex>0&&this.$lightbox.find(".lb-prev").show(),this.currentImageIndex<this.album.length-1&&this.$lightbox.find(".lb-next").show()))},t.prototype.updateDetails=function(){var e=this;"undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast"),this.album.length>1&&this.options.showImageNumberLabel?this.$lightbox.find(".lb-number").text(this.options.albumLabel(this.currentImageIndex+1,this.album.length)).fadeIn("fast"):this.$lightbox.find(".lb-number").hide(),this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.resizeDuration,function(){return e.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){var e,t;this.album.length>this.currentImageIndex+1&&(e=new Image,e.src=this.album[this.currentImageIndex+1].link),this.currentImageIndex>0&&(t=new Image,t.src=this.album[this.currentImageIndex-1].link)},t.prototype.enableKeyboardNav=function(){e(document).on("keyup.keyboard",e.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){e(document).off(".keyboard")},t.prototype.keyboardAction=function(e){var t,i,n,o,r;t=27,i=37,n=39,r=e.keyCode,o=String.fromCharCode(r).toLowerCase(),r===t||o.match(/x|o|c/)?this.end():"p"===o||r===i?0!==this.currentImageIndex&&this.changeImage(this.currentImageIndex-1):("n"===o||r===n)&&this.currentImageIndex!==this.album.length-1&&this.changeImage(this.currentImageIndex+1)},t.prototype.end=function(){return this.disableKeyboardNav(),e(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),e("select, object, embed").css({visibility:"visible"})},t}(),e(function(){var e,n;return n=new i,e=new t(n)})}function parseFileJsonForJqTree(e,t,i){for(var n={},o="*",r=[e];r.length;){for(var s=r.shift(),a=0;a<s.subfolders.length;a++){var l=s.subfolders[a];(i||!l.is_virtual)&&r.push(l)}var c=[];if(t)for(var a=0;a<s.files.length;a++){var d=s.files[a],u=d.is_new?o:"",h={label:d.name+u,id:"file_"+d.id,url:d.url};c.push(h)}var f=s.files.length,p=s.contains_new?o:"",m=s.name+" ("+f+p+")";n[s.id]={id:s.id,label:m,url:s.url,parentId:s.parent_folder_id,children:c,isNodeFolder:!0,isVirtual:s.is_virtual}}var g;for(var v in n){var y=n[v],b=y.parentId;b?n[b].children.push(y):g=y}for(var v in n){var y=n[v];y.children.sort(function(e,t){return e.children&&!t.children?-1:!e.children&&t.children?1:e.isVirtual&&!t.isVirtual?-1:!e.isVirtual&&t.isVirtual?1:e.label.localeCompare(t.label)})}return[g]}function MaterialsFilePicker(){this.selectedMaterials={}}!function(e,t){function i(e){var t=pt[e]={};return Z.each(e.split(tt),function(e,i){t[i]=!0}),t}function n(e,i,n){if(n===t&&1===e.nodeType){var o="data-"+i.replace(gt,"-$1").toLowerCase();if(n=e.getAttribute(o),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:mt.test(n)?Z.parseJSON(n):n}catch(r){}Z.data(e,i,n)}else n=t}return n}function o(e){var t;for(t in e)if(("data"!==t||!Z.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function r(){return!1}function s(){return!0}function a(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function l(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function c(e,t,i){if(t=t||0,Z.isFunction(t))return Z.grep(e,function(e,n){var o=!!t.call(e,n,e);return o===i});if(t.nodeType)return Z.grep(e,function(e){return e===t===i});if("string"==typeof t){var n=Z.grep(e,function(e){return 1===e.nodeType});if(Ot.test(t))return Z.filter(t,n,!i);t=Z.filter(t,n)}return Z.grep(e,function(e){return Z.inArray(e,t)>=0===i})}function d(e){var t=Ft.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function u(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function h(e,t){if(1===t.nodeType&&Z.hasData(e)){var i,n,o,r=Z._data(e),s=Z._data(t,r),a=r.events;if(a){delete s.handle,s.events={};for(i in a)for(n=0,o=a[i].length;o>n;n++)Z.event.add(t,i,a[i][n])}s.data&&(s.data=Z.extend({},s.data))}}function f(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),i=t.nodeName.toLowerCase(),"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),Z.support.html5Clone&&e.innerHTML&&!Z.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&Gt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.selected=e.defaultSelected:"input"===i||"textarea"===i?t.defaultValue=e.defaultValue:"script"===i&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(Z.expando))}function p(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function m(e){Gt.test(e.type)&&(e.defaultChecked=e.checked)}function g(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,o=vi.length;o--;)if(t=vi[o]+i,t in e)return t;return n}function v(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)}function y(e,t){for(var i,n,o=[],r=0,s=e.length;s>r;r++)i=e[r],i.style&&(o[r]=Z._data(i,"olddisplay"),t?(o[r]||"none"!==i.style.display||(i.style.display=""),""===i.style.display&&v(i)&&(o[r]=Z._data(i,"olddisplay",x(i.nodeName)))):(n=ii(i,"display"),o[r]||"none"===n||Z._data(i,"olddisplay",n)));for(r=0;s>r;r++)i=e[r],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[r]||"":"none"));return e}function b(e,t,i){var n=di.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function w(e,t,i,n){for(var o=i===(n?"border":"content")?4:"width"===t?1:0,r=0;4>o;o+=2)"margin"===i&&(r+=Z.css(e,i+gi[o],!0)),n?("content"===i&&(r-=parseFloat(ii(e,"padding"+gi[o]))||0),"margin"!==i&&(r-=parseFloat(ii(e,"border"+gi[o]+"Width"))||0)):(r+=parseFloat(ii(e,"padding"+gi[o]))||0,"padding"!==i&&(r+=parseFloat(ii(e,"border"+gi[o]+"Width"))||0));return r}function _(e,t,i){var n="width"===t?e.offsetWidth:e.offsetHeight,o=!0,r=Z.support.boxSizing&&"border-box"===Z.css(e,"boxSizing");if(0>=n||null==n){if(n=ii(e,t),(0>n||null==n)&&(n=e.style[t]),ui.test(n))return n;o=r&&(Z.support.boxSizingReliable||n===e.style[t]),n=parseFloat(n)||0}return n+w(e,t,i||(r?"border":"content"),o)+"px"}function x(e){if(fi[e])return fi[e];var t=Z("<"+e+">").appendTo(z.body),i=t.css("display");return t.remove(),("none"===i||""===i)&&(ni=z.body.appendChild(ni||Z.extend(z.createElement("iframe"),{frameBorder:0,width:0,height:0})),oi&&ni.createElement||(oi=(ni.contentWindow||ni.contentDocument).document,oi.write("<!doctype html><html><body>"),oi.close()),t=oi.body.appendChild(oi.createElement(e)),i=ii(t,"display"),z.body.removeChild(ni)),fi[e]=i,i}function C(e,t,i,n){var o;if(Z.isArray(t))Z.each(t,function(t,o){i||wi.test(e)?n(e,o):C(e+"["+("object"==typeof o?t:"")+"]",o,i,n)});else if(i||"object"!==Z.type(t))n(e,t);else for(o in t)C(e+"["+o+"]",t[o],i,n)}function k(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o,r,s=t.toLowerCase().split(tt),a=0,l=s.length;if(Z.isFunction(i))for(;l>a;a++)n=s[a],r=/^\+/.test(n),r&&(n=n.substr(1)||"*"),o=e[n]=e[n]||[],o[r?"unshift":"push"](i)}}function T(e,i,n,o,r,s){r=r||i.dataTypes[0],s=s||{},s[r]=!0;for(var a,l=e[r],c=0,d=l?l.length:0,u=e===Oi;d>c&&(u||!a);c++)a=l[c](i,n,o),"string"==typeof a&&(!u||s[a]?a=t:(i.dataTypes.unshift(a),a=T(e,i,n,o,a,s)));return!u&&a||s["*"]||(a=T(e,i,n,o,"*",s)),a}function S(e,i){var n,o,r=Z.ajaxSettings.flatOptions||{};for(n in i)i[n]!==t&&((r[n]?e:o||(o={}))[n]=i[n]);o&&Z.extend(!0,e,o)}function D(e,i,n){var o,r,s,a,l=e.contents,c=e.dataTypes,d=e.responseFields;for(r in d)r in n&&(i[d[r]]=n[r]);for(;"*"===c[0];)c.shift(),o===t&&(o=e.mimeType||i.getResponseHeader("content-type"));if(o)for(r in l)if(l[r]&&l[r].test(o)){c.unshift(r);break}if(c[0]in n)s=c[0];else{for(r in n){if(!c[0]||e.converters[r+" "+c[0]]){s=r;break}a||(a=r)}s=s||a}return s?(s!==c[0]&&c.unshift(s),n[s]):void 0}function N(e,t){var i,n,o,r,s=e.dataTypes.slice(),a=s[0],l={},c=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),s[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];for(;o=s[++c];)if("*"!==o){if("*"!==a&&a!==o){if(i=l[a+" "+o]||l["* "+o],!i)for(n in l)if(r=n.split(" "),r[1]===o&&(i=l[a+" "+r[0]]||l["* "+r[0]])){i===!0?i=l[n]:l[n]!==!0&&(o=r[0],s.splice(c--,0,o));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(d){return{state:"parsererror",error:i?d:"No conversion from "+a+" to "+o}}}a=o}return{state:"success",data:t}}function E(){try{return new e.XMLHttpRequest}catch(t){}}function $(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function M(){return setTimeout(function(){Vi=t},0),Vi=Z.now()}function I(e,t){Z.each(t,function(t,i){for(var n=(Ji[t]||[]).concat(Ji["*"]),o=0,r=n.length;r>o;o++)if(n[o].call(e,t,i))return})}function A(e,t,i){var n,o=0,r=Zi.length,s=Z.Deferred().always(function(){delete a.elem}),a=function(){for(var t=Vi||M(),i=Math.max(0,l.startTime+l.duration-t),n=1-(i/l.duration||0),o=0,r=l.tweens.length;r>o;o++)l.tweens[o].run(n);return s.notifyWith(e,[l,n,i]),1>n&&r?i:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Vi||M(),duration:i.duration,tweens:[],createTween:function(t,i){var n=Z.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){for(var i=0,n=t?l.tweens.length:0;n>i;i++)l.tweens[i].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(L(c,l.opts.specialEasing);r>o;o++)if(n=Zi[o].call(l,e,c,l.opts))return n;return I(l,c),Z.isFunction(l.opts.start)&&l.opts.start.call(e,l),Z.fx.timer(Z.extend(a,{anim:l,queue:l.opts.queue,elem:e})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function L(e,t){var i,n,o,r,s;for(i in e)if(n=Z.camelCase(i),o=t[n],r=e[i],Z.isArray(r)&&(o=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),s=Z.cssHooks[n],s&&"expand"in s){r=s.expand(r),delete e[n];for(i in r)i in e||(e[i]=r[i],t[i]=o)}else t[n]=o}function P(e,t,i){var n,o,r,s,a,l,c,d,u=this,h=e.style,f={},p=[],m=e.nodeType&&v(e);i.queue||(c=Z._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,d=c.empty.fire,c.empty.fire=function(){c.unqueued||d()}),c.unqueued++,u.always(function(){u.always(function(){c.unqueued--,Z.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===Z.css(e,"display")&&"none"===Z.css(e,"float")&&(Z.support.inlineBlockNeedsLayout&&"inline"!==x(e.nodeName)?h.zoom=1:h.display="inline-block")),i.overflow&&(h.overflow="hidden",Z.support.shrinkWrapBlocks||u.done(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],Gi.exec(r)){if(delete t[n],r===(m?"hide":"show"))continue;p.push(n)}if(s=p.length)for(a=Z._data(e,"fxshow")||Z._data(e,"fxshow",{}),m?Z(e).show():u.done(function(){Z(e).hide()}),u.done(function(){var t;Z.removeData(e,"fxshow",!0);for(t in f)Z.style(e,t,f[t])}),n=0;s>n;n++)o=p[n],l=u.createTween(o,m?a[o]:0),f[o]=a[o]||Z.style(e,o),o in a||(a[o]=l.start,m&&(l.end=l.start,l.start="width"===o||"height"===o?1:0))}function O(e,t,i,n,o){return new O.prototype.init(e,t,i,n,o)}function H(e,t){var i,n={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)i=gi[o],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function R(e){return Z.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var F,j,z=e.document,B=e.location,W=e.navigator,U=e.jQuery,q=e.$,Y=Array.prototype.push,V=Array.prototype.slice,X=Array.prototype.indexOf,G=Object.prototype.toString,K=Object.prototype.hasOwnProperty,Q=String.prototype.trim,Z=function(e,t){return new Z.fn.init(e,t,F)},J=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,it=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,nt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ot=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rt=/^[\],:{}\s]*$/,st=/(?:^|:|,)(?:\s*\[)+/g,at=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,lt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ct=/^-ms-/,dt=/-([\da-z])/gi,ut=function(e,t){return(t+"").toUpperCase()},ht=function(){z.addEventListener?(z.removeEventListener("DOMContentLoaded",ht,!1),Z.ready()):"complete"===z.readyState&&(z.detachEvent("onreadystatechange",ht),Z.ready())},ft={};Z.fn=Z.prototype={constructor:Z,init:function(e,i,n){var o,r,s;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:nt.exec(e),!o||!o[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(o[1])return i=i instanceof Z?i[0]:i,s=i&&i.nodeType?i.ownerDocument||i:z,e=Z.parseHTML(o[1],s,!0),ot.test(o[1])&&Z.isPlainObject(i)&&this.attr.call(e,i,!0),Z.merge(this,e);if(r=z.getElementById(o[2]),r&&r.parentNode){if(r.id!==o[2])return n.find(e);this.length=1,this[0]=r}return this.context=z,this.selector=e,this}return Z.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return V.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,i){var n=Z.merge(this.constructor(),e);return n.prevObject=this,n.context=this.context,"find"===t?n.selector=this.selector+(this.selector?" ":"")+i:t&&(n.selector=this.selector+"."+t+"("+i+")"),n},each:function(e,t){return Z.each(this,e,t)},ready:function(e){return Z.ready.promise().done(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(V.apply(this,arguments),"slice",V.call(arguments).join(","))},map:function(e){return this.pushStack(Z.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:[].sort,splice:[].splice},Z.fn.init.prototype=Z.fn,Z.extend=Z.fn.extend=function(){var e,i,n,o,r,s,a=arguments[0]||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof a&&(d=a,a=arguments[1]||{},l=2),"object"==typeof a||Z.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(e=arguments[l]))for(i in e)n=a[i],o=e[i],a!==o&&(d&&o&&(Z.isPlainObject(o)||(r=Z.isArray(o)))?(r?(r=!1,s=n&&Z.isArray(n)?n:[]):s=n&&Z.isPlainObject(n)?n:{},a[i]=Z.extend(d,s,o)):o!==t&&(a[i]=o));return a},Z.extend({noConflict:function(t){return e.$===Z&&(e.$=q),t&&e.jQuery===Z&&(e.jQuery=U),Z},isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){if(e===!0?!--Z.readyWait:!Z.isReady){if(!z.body)return setTimeout(Z.ready,1);Z.isReady=!0,e!==!0&&--Z.readyWait>0||(j.resolveWith(z,[Z]),Z.fn.trigger&&Z(z).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray||function(e){return"array"===Z.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):ft[G.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==Z.type(e)||e.nodeType||Z.isWindow(e))return!1;try{if(e.constructor&&!K.call(e,"constructor")&&!K.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n;for(n in e);return n===t||K.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){var n;return e&&"string"==typeof e?("boolean"==typeof t&&(i=t,t=0),t=t||z,(n=ot.exec(e))?[t.createElement(n[1])]:(n=Z.buildFragment([e],t,i?null:[]),Z.merge([],(n.cacheable?Z.clone(n.fragment):n.fragment).childNodes))):null},parseJSON:function(t){return t&&"string"==typeof t?(t=Z.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):rt.test(t.replace(at,"@").replace(lt,"]").replace(st,""))?new Function("return "+t)():(Z.error("Invalid JSON: "+t),void 0)):null},parseXML:function(i){var n,o;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(o=new DOMParser,n=o.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(r){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||Z.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ct,"ms-").replace(dt,ut)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,i,n){var o,r=0,s=e.length,a=s===t||Z.isFunction(e);if(n)if(a){for(o in e)if(i.apply(e[o],n)===!1)break
}else for(;s>r&&i.apply(e[r++],n)!==!1;);else if(a){for(o in e)if(i.call(e[o],o,e[o])===!1)break}else for(;s>r&&i.call(e[r],r,e[r++])!==!1;);return e},trim:Q&&!Q.call("﻿ ")?function(e){return null==e?"":Q.call(e)}:function(e){return null==e?"":(e+"").replace(it,"")},makeArray:function(e,t){var i,n=t||[];return null!=e&&(i=Z.type(e),null==e.length||"string"===i||"function"===i||"regexp"===i||Z.isWindow(e)?Y.call(n,e):Z.merge(n,e)),n},inArray:function(e,t,i){var n;if(t){if(X)return X.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=i.length,o=e.length,r=0;if("number"==typeof n)for(;n>r;r++)e[o++]=i[r];else for(;i[r]!==t;)e[o++]=i[r++];return e.length=o,e},grep:function(e,t,i){var n,o=[],r=0,s=e.length;for(i=!!i;s>r;r++)n=!!t(e[r],r),i!==n&&o.push(e[r]);return o},map:function(e,i,n){var o,r,s=[],a=0,l=e.length,c=e instanceof Z||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||Z.isArray(e));if(c)for(;l>a;a++)o=i(e[a],a,n),null!=o&&(s[s.length]=o);else for(r in e)o=i(e[r],r,n),null!=o&&(s[s.length]=o);return s.concat.apply([],s)},guid:1,proxy:function(e,i){var n,o,r;return"string"==typeof i&&(n=e[i],i=e,e=n),Z.isFunction(e)?(o=V.call(arguments,2),r=function(){return e.apply(i,o.concat(V.call(arguments)))},r.guid=e.guid=e.guid||Z.guid++,r):t},access:function(e,i,n,o,r,s,a){var l,c=null==n,d=0,u=e.length;if(n&&"object"==typeof n){for(d in n)Z.access(e,i,d,n[d],1,s,o);r=1}else if(o!==t){if(l=a===t&&Z.isFunction(o),c&&(l?(l=i,i=function(e,t,i){return l.call(Z(e),i)}):(i.call(e,o),i=null)),i)for(;u>d;d++)i(e[d],n,l?o.call(e[d],d,i(e[d],n)):o,a);r=1}return r?e:c?i.call(e):u?i(e[0],n):s},now:function(){return(new Date).getTime()}}),Z.ready.promise=function(t){if(!j)if(j=Z.Deferred(),"complete"===z.readyState)setTimeout(Z.ready,1);else if(z.addEventListener)z.addEventListener("DOMContentLoaded",ht,!1),e.addEventListener("load",Z.ready,!1);else{z.attachEvent("onreadystatechange",ht),e.attachEvent("onload",Z.ready);var i=!1;try{i=null==e.frameElement&&z.documentElement}catch(n){}i&&i.doScroll&&function o(){if(!Z.isReady){try{i.doScroll("left")}catch(e){return setTimeout(o,50)}Z.ready()}}()}return j.promise(t)},Z.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){ft["[object "+t+"]"]=t.toLowerCase()}),F=Z(z);var pt={};Z.Callbacks=function(e){e="string"==typeof e?pt[e]||i(e):Z.extend({},e);var n,o,r,s,a,l,c=[],d=!e.once&&[],u=function(t){for(n=e.memory&&t,o=!0,l=s||0,s=0,a=c.length,r=!0;c&&a>l;l++)if(c[l].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}r=!1,c&&(d?d.length&&u(d.shift()):n?c=[]:h.disable())},h={add:function(){if(c){var t=c.length;!function i(t){Z.each(t,function(t,n){var o=Z.type(n);"function"!==o||e.unique&&h.has(n)?n&&n.length&&"string"!==o&&i(n):c.push(n)})}(arguments),r?a=c.length:n&&(s=t,u(n))}return this},remove:function(){return c&&Z.each(arguments,function(e,t){for(var i;(i=Z.inArray(t,c,i))>-1;)c.splice(i,1),r&&(a>=i&&a--,l>=i&&l--)}),this},has:function(e){return Z.inArray(e,c)>-1},empty:function(){return c=[],this},disable:function(){return c=d=n=t,this},disabled:function(){return!c},lock:function(){return d=t,n||h.disable(),this},locked:function(){return!d},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||o&&!d||(r?d.push(t):u(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(i){Z.each(t,function(t,n){var r=n[0],s=e[t];o[n[1]](Z.isFunction(s)?function(){var e=s.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r+"With"](this===o?i:this,[e])}:i[r])}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,n):n}},o={};return n.pipe=n.then,Z.each(t,function(e,r){var s=r[2],a=r[3];n[r[1]]=s.add,a&&s.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),o[r[0]]=s.fire,o[r[0]+"With"]=s.fireWith}),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,i,n,o=0,r=V.call(arguments),s=r.length,a=1!==s||e&&Z.isFunction(e.promise)?s:0,l=1===a?e:Z.Deferred(),c=function(e,i,n){return function(o){i[e]=this,n[e]=arguments.length>1?V.call(arguments):o,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(t=new Array(s),i=new Array(s),n=new Array(s);s>o;o++)r[o]&&Z.isFunction(r[o].promise)?r[o].promise().done(c(o,n,r)).fail(l.reject).progress(c(o,i,t)):--a;return a||l.resolveWith(n,r),l.promise()}}),Z.support=function(){var t,i,n,o,r,s,a,l,c,d,u,h=z.createElement("div");if(h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=h.getElementsByTagName("*"),n=h.getElementsByTagName("a")[0],n.style.cssText="top:1px;float:left;opacity:.5",!i||!i.length)return{};o=z.createElement("select"),r=o.appendChild(z.createElement("option")),s=h.getElementsByTagName("input")[0],t={leadingWhitespace:3===h.firstChild.nodeType,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.5/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===s.value,optSelected:r.selected,getSetAttribute:"t"!==h.className,enctype:!!z.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==z.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===z.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!r.disabled;try{delete h.test}catch(f){t.deleteExpando=!1}if(!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",u=function(){t.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick"),h.detachEvent("onclick",u)),s=z.createElement("input"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","checked"),s.setAttribute("name","t"),h.appendChild(s),a=z.createDocumentFragment(),a.appendChild(h.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=s.checked,a.removeChild(s),a.appendChild(h),h.attachEvent)for(c in{submit:!0,change:!0,focusin:!0})l="on"+c,d=l in h,d||(h.setAttribute(l,"return;"),d="function"==typeof h[l]),t[c+"Bubbles"]=d;return Z(function(){var i,n,o,r,s="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=z.getElementsByTagName("body")[0];a&&(i=z.createElement("div"),i.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(i,a.firstChild),n=z.createElement("div"),i.appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=n.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=d&&0===o[0].offsetHeight,n.innerHTML="",n.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===n.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==a.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(n,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(n,null)||{width:"4px"}).width,r=z.createElement("div"),r.style.cssText=n.style.cssText=s,r.style.marginRight=r.style.width="0",n.style.width="1px",n.appendChild(r),t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),"undefined"!=typeof n.style.zoom&&(n.innerHTML="",n.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===n.offsetWidth,n.style.display="block",n.style.overflow="visible",n.innerHTML="<div></div>",n.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==n.offsetWidth,i.style.zoom=1),a.removeChild(i),i=n=o=r=null)}),a.removeChild(h),i=n=o=r=s=a=h=null,t}();var mt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,gt=/([A-Z])/g;Z.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(Z.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?Z.cache[e[Z.expando]]:e[Z.expando],!!e&&!o(e)},data:function(e,i,n,o){if(Z.acceptData(e)){var r,s,a=Z.expando,l="string"==typeof i,c=e.nodeType,d=c?Z.cache:e,u=c?e[a]:e[a]&&a;if(u&&d[u]&&(o||d[u].data)||!l||n!==t)return u||(c?e[a]=u=Z.deletedIds.pop()||Z.guid++:u=a),d[u]||(d[u]={},c||(d[u].toJSON=Z.noop)),("object"==typeof i||"function"==typeof i)&&(o?d[u]=Z.extend(d[u],i):d[u].data=Z.extend(d[u].data,i)),r=d[u],o||(r.data||(r.data={}),r=r.data),n!==t&&(r[Z.camelCase(i)]=n),l?(s=r[i],null==s&&(s=r[Z.camelCase(i)])):s=r,s}},removeData:function(e,t,i){if(Z.acceptData(e)){var n,r,s,a=e.nodeType,l=a?Z.cache:e,c=a?e[Z.expando]:Z.expando;if(l[c]){if(t&&(n=i?l[c]:l[c].data)){Z.isArray(t)||(t in n?t=[t]:(t=Z.camelCase(t),t=t in n?[t]:t.split(" ")));for(r=0,s=t.length;s>r;r++)delete n[t[r]];if(!(i?o:Z.isEmptyObject)(n))return}(i||(delete l[c].data,o(l[c])))&&(a?Z.cleanData([e],!0):Z.support.deleteExpando||l!=l.window?delete l[c]:l[c]=null)}}},_data:function(e,t,i){return Z.data(e,t,i,!0)},acceptData:function(e){var t=e.nodeName&&Z.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),Z.fn.extend({data:function(e,i){var o,r,s,a,l,c=this[0],d=0,u=null;if(e===t){if(this.length&&(u=Z.data(c),1===c.nodeType&&!Z._data(c,"parsedAttrs"))){for(s=c.attributes,l=s.length;l>d;d++)a=s[d].name,a.indexOf("data-")||(a=Z.camelCase(a.substring(5)),n(c,a,u[a]));Z._data(c,"parsedAttrs",!0)}return u}return"object"==typeof e?this.each(function(){Z.data(this,e)}):(o=e.split(".",2),o[1]=o[1]?"."+o[1]:"",r=o[1]+"!",Z.access(this,function(i){return i===t?(u=this.triggerHandler("getData"+r,[o[0]]),u===t&&c&&(u=Z.data(c,e),u=n(c,e,u)),u===t&&o[1]?this.data(o[0]):u):(o[1]=i,this.each(function(){var t=Z(this);t.triggerHandler("setData"+r,o),Z.data(this,e,i),t.triggerHandler("changeData"+r,o)}),void 0)},null,i,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){Z.removeData(this,e)})}}),Z.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=Z._data(e,t),i&&(!n||Z.isArray(i)?n=Z._data(e,t,Z.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=Z.queue(e,t),n=i.length,o=i.shift(),r=Z._queueHooks(e,t),s=function(){Z.dequeue(e,t)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete r.stop,o.call(e,s,r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Z._data(e,i)||Z._data(e,i,{empty:Z.Callbacks("once memory").add(function(){Z.removeData(e,t+"queue",!0),Z.removeData(e,i,!0)})})}}),Z.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),arguments.length<n?Z.queue(this[0],e):i===t?this:this.each(function(){var t=Z.queue(this,e,i);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},delay:function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,o=1,r=Z.Deferred(),s=this,a=this.length,l=function(){--o||r.resolveWith(s,[s])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";a--;)n=Z._data(s[a],e+"queueHooks"),n&&n.empty&&(o++,n.empty.add(l));return l(),r.promise(i)}});var vt,yt,bt,wt=/[\t\r\n]/g,_t=/\r/g,xt=/^(?:button|input)$/i,Ct=/^(?:button|input|object|select|textarea)$/i,kt=/^a(?:rea|)$/i,Tt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,St=Z.support.getSetAttribute;Z.fn.extend({attr:function(e,t){return Z.access(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})},prop:function(e,t){return Z.access(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return e=Z.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,n,o,r,s,a;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(tt),i=0,n=this.length;n>i;i++)if(o=this[i],1===o.nodeType)if(o.className||1!==t.length){for(r=" "+o.className+" ",s=0,a=t.length;a>s;s++)r.indexOf(" "+t[s]+" ")<0&&(r+=t[s]+" ");o.className=Z.trim(r)}else o.className=e;return this},removeClass:function(e){var i,n,o,r,s,a,l;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(tt),a=0,l=this.length;l>a;a++)if(o=this[a],1===o.nodeType&&o.className){for(n=(" "+o.className+" ").replace(wt," "),r=0,s=i.length;s>r;r++)for(;n.indexOf(" "+i[r]+" ")>=0;)n=n.replace(" "+i[r]+" "," ");o.className=e?Z.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return Z.isFunction(e)?this.each(function(i){Z(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var o,r=0,s=Z(this),a=t,l=e.split(tt);o=l[r++];)a=n?a:!s.hasClass(o),s[a?"addClass":"removeClass"](o);else("undefined"===i||"boolean"===i)&&(this.className&&Z._data(this,"__className__",this.className),this.className=this.className||e===!1?"":Z._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(wt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,n,o,r=this[0];{if(arguments.length)return o=Z.isFunction(e),this.each(function(n){var r,s=Z(this);1===this.nodeType&&(r=o?e.call(this,n,s.val()):e,null==r?r="":"number"==typeof r?r+="":Z.isArray(r)&&(r=Z.map(r,function(e){return null==e?"":e+""})),i=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==t||(this.value=r))});if(r)return i=Z.valHooks[r.type]||Z.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==t?n:(n=r.value,"string"==typeof n?n.replace(_t,""):null==n?"":n)}}}),Z.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,i,n,o,r=e.selectedIndex,s=[],a=e.options,l="select-one"===e.type;if(0>r)return null;for(i=l?r:0,n=l?r+1:a.length;n>i;i++)if(o=a[i],!(!o.selected||(Z.support.optDisabled?o.disabled:null!==o.getAttribute("disabled"))||o.parentNode.disabled&&Z.nodeName(o.parentNode,"optgroup"))){if(t=Z(o).val(),l)return t;s.push(t)}return l&&!s.length&&a.length?Z(a[r]).val():s},set:function(e,t){var i=Z.makeArray(t);return Z(e).find("option").each(function(){this.selected=Z.inArray(Z(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attrFn:{},attr:function(e,i,n,o){var r,s,a,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return o&&Z.isFunction(Z.fn[i])?Z(e)[i](n):"undefined"==typeof e.getAttribute?Z.prop(e,i,n):(a=1!==l||!Z.isXMLDoc(e),a&&(i=i.toLowerCase(),s=Z.attrHooks[i]||(Tt.test(i)?yt:vt)),n!==t?null===n?(Z.removeAttr(e,i),void 0):s&&"set"in s&&a&&(r=s.set(e,n,i))!==t?r:(e.setAttribute(i,n+""),n):s&&"get"in s&&a&&null!==(r=s.get(e,i))?r:(r=e.getAttribute(i),null===r?t:r))},removeAttr:function(e,t){var i,n,o,r,s=0;if(t&&1===e.nodeType)for(n=t.split(tt);s<n.length;s++)o=n[s],o&&(i=Z.propFix[o]||o,r=Tt.test(o),r||Z.attr(e,o,""),e.removeAttribute(St?o:i),r&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(xt.test(e.nodeName)&&e.parentNode)Z.error("type property can't be changed");else if(!Z.support.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return vt&&Z.nodeName(e,"button")?vt.get(e,t):t in e?e.value:null},set:function(e,t,i){return vt&&Z.nodeName(e,"button")?vt.set(e,t,i):(e.value=t,void 0)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,n){var o,r,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return s=1!==a||!Z.isXMLDoc(e),s&&(i=Z.propFix[i]||i,r=Z.propHooks[i]),n!==t?r&&"set"in r&&(o=r.set(e,n,i))!==t?o:e[i]=n:r&&"get"in r&&null!==(o=r.get(e,i))?o:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):Ct.test(e.nodeName)||kt.test(e.nodeName)&&e.href?0:t}}}}),yt={get:function(e,i){var n,o=Z.prop(e,i);return o===!0||"boolean"!=typeof o&&(n=e.getAttributeNode(i))&&n.nodeValue!==!1?i.toLowerCase():t},set:function(e,t,i){var n;return t===!1?Z.removeAttr(e,i):(n=Z.propFix[i]||i,n in e&&(e[n]=!0),e.setAttribute(i,i.toLowerCase())),i}},St||(bt={name:!0,id:!0,coords:!0},vt=Z.valHooks.button={get:function(e,i){var n;return n=e.getAttributeNode(i),n&&(bt[i]?""!==n.value:n.specified)?n.value:t},set:function(e,t,i){var n=e.getAttributeNode(i);return n||(n=z.createAttribute(i),e.setAttributeNode(n)),n.value=t+""}},Z.each(["width","height"],function(e,t){Z.attrHooks[t]=Z.extend(Z.attrHooks[t],{set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}})}),Z.attrHooks.contenteditable={get:vt.get,set:function(e,t,i){""===t&&(t="false"),vt.set(e,t,i)}}),Z.support.hrefNormalized||Z.each(["href","src","width","height"],function(e,i){Z.attrHooks[i]=Z.extend(Z.attrHooks[i],{get:function(e){var n=e.getAttribute(i,2);return null===n?t:n}})}),Z.support.style||(Z.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),Z.support.optSelected||(Z.propHooks.selected=Z.extend(Z.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),Z.support.enctype||(Z.propFix.enctype="encoding"),Z.support.checkOn||Z.each(["radio","checkbox"],function(){Z.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]=Z.extend(Z.valHooks[this],{set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}})});var Dt=/^(?:textarea|input|select)$/i,Nt=/^([^\.]*|)(?:\.(.+)|)$/,Et=/(?:^|\s)hover(\.\S+|)\b/,$t=/^key/,Mt=/^(?:mouse|contextmenu)|click/,It=/^(?:focusinfocus|focusoutblur)$/,At=function(e){return Z.event.special.hover?e:e.replace(Et,"mouseenter$1 mouseleave$1")};Z.event={add:function(e,i,n,o,r){var s,a,l,c,d,u,h,f,p,m,g;if(3!==e.nodeType&&8!==e.nodeType&&i&&n&&(s=Z._data(e))){for(n.handler&&(p=n,n=p.handler,r=p.selector),n.guid||(n.guid=Z.guid++),l=s.events,l||(s.events=l={}),a=s.handle,a||(s.handle=a=function(e){return"undefined"==typeof Z||e&&Z.event.triggered===e.type?t:Z.event.dispatch.apply(a.elem,arguments)},a.elem=e),i=Z.trim(At(i)).split(" "),c=0;c<i.length;c++)d=Nt.exec(i[c])||[],u=d[1],h=(d[2]||"").split(".").sort(),g=Z.event.special[u]||{},u=(r?g.delegateType:g.bindType)||u,g=Z.event.special[u]||{},f=Z.extend({type:u,origType:d[1],data:o,handler:n,guid:n.guid,selector:r,needsContext:r&&Z.expr.match.needsContext.test(r),namespace:h.join(".")},p),m=l[u],m||(m=l[u]=[],m.delegateCount=0,g.setup&&g.setup.call(e,o,h,a)!==!1||(e.addEventListener?e.addEventListener(u,a,!1):e.attachEvent&&e.attachEvent("on"+u,a))),g.add&&(g.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),r?m.splice(m.delegateCount++,0,f):m.push(f),Z.event.global[u]=!0;e=null}},global:{},remove:function(e,t,i,n,o){var r,s,a,l,c,d,u,h,f,p,m,g=Z.hasData(e)&&Z._data(e);if(g&&(h=g.events)){for(t=Z.trim(At(t||"")).split(" "),r=0;r<t.length;r++)if(s=Nt.exec(t[r])||[],a=l=s[1],c=s[2],a){for(f=Z.event.special[a]||{},a=(n?f.delegateType:f.bindType)||a,p=h[a]||[],d=p.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u=0;u<p.length;u++)m=p[u],!o&&l!==m.origType||i&&i.guid!==m.guid||c&&!c.test(m.namespace)||n&&n!==m.selector&&("**"!==n||!m.selector)||(p.splice(u--,1),m.selector&&p.delegateCount--,f.remove&&f.remove.call(e,m));0===p.length&&d!==p.length&&(f.teardown&&f.teardown.call(e,c,g.handle)!==!1||Z.removeEvent(e,a,g.handle),delete h[a])}else for(a in h)Z.event.remove(e,a+t[r],i,n,!0);Z.isEmptyObject(h)&&(delete g.handle,Z.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,o,r){if(!o||3!==o.nodeType&&8!==o.nodeType){var s,a,l,c,d,u,h,f,p,m,g=i.type||i,v=[];if(!It.test(g+Z.event.triggered)&&(g.indexOf("!")>=0&&(g=g.slice(0,-1),a=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),o&&!Z.event.customEvent[g]||Z.event.global[g]))if(i="object"==typeof i?i[Z.expando]?i:new Z.Event(g,i):new Z.Event(g),i.type=g,i.isTrigger=!0,i.exclusive=a,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u=g.indexOf(":")<0?"on"+g:"",o){if(i.result=t,i.target||(i.target=o),n=null!=n?Z.makeArray(n):[],n.unshift(i),h=Z.event.special[g]||{},!h.trigger||h.trigger.apply(o,n)!==!1){if(p=[[o,h.bindType||g]],!r&&!h.noBubble&&!Z.isWindow(o)){for(m=h.delegateType||g,c=It.test(m+g)?o:o.parentNode,d=o;c;c=c.parentNode)p.push([c,m]),d=c;d===(o.ownerDocument||z)&&p.push([d.defaultView||d.parentWindow||e,m])}for(l=0;l<p.length&&!i.isPropagationStopped();l++)c=p[l][0],i.type=p[l][1],f=(Z._data(c,"events")||{})[i.type]&&Z._data(c,"handle"),f&&f.apply(c,n),f=u&&c[u],f&&Z.acceptData(c)&&f.apply&&f.apply(c,n)===!1&&i.preventDefault();return i.type=g,r||i.isDefaultPrevented()||h._default&&h._default.apply(o.ownerDocument,n)!==!1||"click"===g&&Z.nodeName(o,"a")||!Z.acceptData(o)||u&&o[g]&&("focus"!==g&&"blur"!==g||0!==i.target.offsetWidth)&&!Z.isWindow(o)&&(d=o[u],d&&(o[u]=null),Z.event.triggered=g,o[g](),Z.event.triggered=t,d&&(o[u]=d)),i.result}}else{s=Z.cache;for(l in s)s[l].events&&s[l].events[g]&&Z.event.trigger(i,n,s[l].handle.elem,!0)}}},dispatch:function(i){i=Z.event.fix(i||e.event);var n,o,r,s,a,l,c,d,u,h=(Z._data(this,"events")||{})[i.type]||[],f=h.delegateCount,p=V.call(arguments),m=!i.exclusive&&!i.namespace,g=Z.event.special[i.type]||{},v=[];if(p[0]=i,i.delegateTarget=this,!g.preDispatch||g.preDispatch.call(this,i)!==!1){if(f&&(!i.button||"click"!==i.type))for(r=i.target;r!=this;r=r.parentNode||this)if(r.disabled!==!0||"click"!==i.type){for(a={},c=[],n=0;f>n;n++)d=h[n],u=d.selector,a[u]===t&&(a[u]=d.needsContext?Z(u,this).index(r)>=0:Z.find(u,this,null,[r]).length),a[u]&&c.push(d);c.length&&v.push({elem:r,matches:c})}for(h.length>f&&v.push({elem:this,matches:h.slice(f)}),n=0;n<v.length&&!i.isPropagationStopped();n++)for(l=v[n],i.currentTarget=l.elem,o=0;o<l.matches.length&&!i.isImmediatePropagationStopped();o++)d=l.matches[o],(m||!i.namespace&&!d.namespace||i.namespace_re&&i.namespace_re.test(d.namespace))&&(i.data=d.data,i.handleObj=d,s=((Z.event.special[d.origType]||{}).handle||d.handler).apply(l.elem,p),s!==t&&(i.result=s,s===!1&&(i.preventDefault(),i.stopPropagation())));return g.postDispatch&&g.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,o,r,s=i.button,a=i.fromElement;return null==e.pageX&&null!=i.clientX&&(n=e.target.ownerDocument||z,o=n.documentElement,r=n.body,e.pageX=i.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=i.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?i.toElement:a),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,i,n=e,o=Z.event.fixHooks[e.type]||{},r=o.props?this.props.concat(o.props):this.props;for(e=Z.Event(n),t=r.length;t;)i=r[--t],e[i]=n[i];return e.target||(e.target=n.srcElement||z),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,n):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){Z.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,n){var o=Z.extend(new Z.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?Z.event.trigger(o,null,t):Z.event.dispatch.call(t,o),o.isDefaultPrevented()&&i.preventDefault()}},Z.event.handle=Z.event.dispatch,Z.removeEvent=z.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&("undefined"==typeof e[n]&&(e[n]=null),e.detachEvent(n,i))},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?s:r):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),this[Z.expando]=!0,void 0):new Z.Event(e,t)},Z.Event.prototype={preventDefault:function(){this.isDefaultPrevented=s;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=s;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()},isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r},Z.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,r=e.handleObj;return r.selector,(!o||o!==n&&!Z.contains(n,o))&&(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),Z.support.submitBubbles||(Z.event.special.submit={setup:function(){return Z.nodeName(this,"form")?!1:(Z.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=Z.nodeName(i,"input")||Z.nodeName(i,"button")?i.form:t;n&&!Z._data(n,"_submit_attached")&&(Z.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),Z._data(n,"_submit_attached",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Z.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return Z.nodeName(this,"form")?!1:(Z.event.remove(this,"._submit"),void 0)}}),Z.support.changeBubbles||(Z.event.special.change={setup:function(){return Dt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(Z.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),Z.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Z.event.simulate("change",this,e,!0)})),!1):(Z.event.add(this,"beforeactivate._change",function(e){var t=e.target;Dt.test(t.nodeName)&&!Z._data(t,"_change_attached")&&(Z.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||Z.event.simulate("change",this.parentNode,e,!0)}),Z._data(t,"_change_attached",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return Z.event.remove(this,"._change"),!Dt.test(this.nodeName)}}),Z.support.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){0===i++&&z.addEventListener(e,n,!0)},teardown:function(){0===--i&&z.removeEventListener(e,n,!0)}}}),Z.fn.extend({on:function(e,i,n,o,s){var a,l;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(l in e)this.on(l,i,n,e[l],s);return this}if(null==n&&null==o?(o=i,n=i=t):null==o&&("string"==typeof i?(o=n,n=t):(o=n,n=i,i=t)),o===!1)o=r;else if(!o)return this;return 1===s&&(a=o,o=function(e){return Z().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,o,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var o,s;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,Z(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(s in e)this.off(s,i,e[s]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=r),this.each(function(){Z.event.remove(this,e,n,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return Z(this.context).on(e,this.selector,t,i),this},die:function(e,t){return Z(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?Z.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,i=e.guid||Z.guid++,n=0,o=function(i){var o=(Z._data(this,"lastToggle"+e.guid)||0)%n;return Z._data(this,"lastToggle"+e.guid,o+1),i.preventDefault(),t[o].apply(this,arguments)||!1};for(o.guid=i;n<t.length;)t[n++].guid=i;return this.click(o)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)},$t.test(t)&&(Z.event.fixHooks[t]=Z.event.keyHooks),Mt.test(t)&&(Z.event.fixHooks[t]=Z.event.mouseHooks)}),/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
function(e,t){function i(e,t,i,n){i=i||[],t=t||M;var o,r,s,a,l=t.nodeType;if(!e||"string"!=typeof e)return i;if(1!==l&&9!==l)return[];if(s=_(t),!s&&!n&&(o=it.exec(e)))if(a=o[1]){if(9===l){if(r=t.getElementById(a),!r||!r.parentNode)return i;if(r.id===a)return i.push(r),i}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(a))&&x(t,r)&&r.id===a)return i.push(r),i}else{if(o[2])return O.apply(i,H.call(t.getElementsByTagName(e),0)),i;if((a=o[3])&&ht&&t.getElementsByClassName)return O.apply(i,H.call(t.getElementsByClassName(a),0)),i}return m(e.replace(Q,"$1"),t,i,n,s)}function n(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function o(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function r(e){return F(function(t){return t=+t,F(function(i,n){for(var o,r=e([],i.length,t),s=r.length;s--;)i[o=r[s]]&&(i[o]=!(n[o]=i[o]))})})}function s(e,t,i){if(e===t)return i;for(var n=e.nextSibling;n;){if(n===t)return-1;n=n.nextSibling}return 1}function a(e,t){var n,o,r,s,a,l,c,d=B[E][e];if(d)return t?0:d.slice(0);for(a=e,l=[],c=b.preFilter;a;){(!n||(o=J.exec(a)))&&(o&&(a=a.slice(o[0].length)),l.push(r=[])),n=!1,(o=et.exec(a))&&(r.push(n=new $(o.shift())),a=a.slice(n.length),n.type=o[0].replace(Q," "));for(s in b.filter)!(o=at[s].exec(a))||c[s]&&!(o=c[s](o,M,!0))||(r.push(n=new $(o.shift())),a=a.slice(n.length),n.type=s,n.matches=o);if(!n)break}return t?a.length:a?i.error(e):B(e,l).slice(0)}function l(e,t,i){var n=t.dir,o=i&&"parentNode"===t.dir,r=L++;return t.first?function(t,i,r){for(;t=t[n];)if(o||1===t.nodeType)return e(t,i,r)}:function(t,i,s){if(s){for(;t=t[n];)if((o||1===t.nodeType)&&e(t,i,s))return t}else for(var a,l=A+" "+r+" ",c=l+v;t=t[n];)if(o||1===t.nodeType){if((a=t[E])===c)return t.sizset;if("string"==typeof a&&0===a.indexOf(l)){if(t.sizset)return t}else{if(t[E]=c,e(t,i,s))return t.sizset=!0,t;t.sizset=!1}}}}function c(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function d(e,t,i,n,o){for(var r,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(r=e[a])&&(!i||i(r,n,o))&&(s.push(r),c&&t.push(a));return s}function u(e,t,i,n,o,r){return n&&!n[E]&&(n=u(n)),o&&!o[E]&&(o=u(o,r)),F(function(r,s,a,l){if(!r||!o){var c,u,h,f=[],m=[],g=s.length,v=r||p(t||"*",a.nodeType?[a]:a,[],r),y=!e||!r&&t?v:d(v,f,e,a,l),b=i?o||(r?e:g||n)?[]:s:y;if(i&&i(y,b,a,l),n)for(h=d(b,m),n(h,[],a,l),c=h.length;c--;)(u=h[c])&&(b[m[c]]=!(y[m[c]]=u));if(r)for(c=e&&b.length;c--;)(u=b[c])&&(r[f[c]]=!(s[f[c]]=u));else b=d(b===s?b.splice(g,b.length):b),o?o(null,s,b,l):O.apply(s,b)}})}function h(e){for(var t,i,n,o=e.length,r=b.relative[e[0].type],s=r||b.relative[" "],a=r?1:0,d=l(function(e){return e===t},s,!0),f=l(function(e){return R.call(t,e)>-1},s,!0),p=[function(e,i,n){return!r&&(n||i!==S)||((t=i).nodeType?d(e,i,n):f(e,i,n))}];o>a;a++)if(i=b.relative[e[a].type])p=[l(c(p),i)];else{if(i=b.filter[e[a].type].apply(null,e[a].matches),i[E]){for(n=++a;o>n&&!b.relative[e[n].type];n++);return u(a>1&&c(p),a>1&&e.slice(0,a-1).join("").replace(Q,"$1"),i,n>a&&h(e.slice(a,n)),o>n&&h(e=e.slice(n)),o>n&&e.join(""))}p.push(i)}return c(p)}function f(e,t){var n=t.length>0,o=e.length>0,r=function(s,a,l,c,u){var h,f,p,m=[],g=0,y="0",w=s&&[],_=null!=u,x=S,C=s||o&&b.find.TAG("*",u&&a.parentNode||a),k=A+=null==x?1:Math.E;for(_&&(S=a!==M&&a,v=r.el);null!=(h=C[y]);y++){if(o&&h){for(f=0;p=e[f];f++)if(p(h,a,l)){c.push(h);break}_&&(A=k,v=++r.el)}n&&((h=!p&&h)&&g--,s&&w.push(h))}if(g+=y,n&&y!==g){for(f=0;p=t[f];f++)p(w,m,a,l);if(s){if(g>0)for(;y--;)w[y]||m[y]||(m[y]=P.call(c));m=d(m)}O.apply(c,m),_&&!s&&m.length>0&&g+t.length>1&&i.uniqueSort(c)}return _&&(A=k,S=x),w};return r.el=0,n?F(r):r}function p(e,t,n,o){for(var r=0,s=t.length;s>r;r++)i(e,t[r],n,o);return n}function m(e,t,i,n,o){var r,s,l,c,d,u=a(e);if(u.length,!n&&1===u.length){if(s=u[0]=u[0].slice(0),s.length>2&&"ID"===(l=s[0]).type&&9===t.nodeType&&!o&&b.relative[s[1].type]){if(t=b.find.ID(l.matches[0].replace(st,""),t,o)[0],!t)return i;e=e.slice(s.shift().length)}for(r=at.POS.test(e)?-1:s.length-1;r>=0&&(l=s[r],!b.relative[c=l.type]);r--)if((d=b.find[c])&&(n=d(l.matches[0].replace(st,""),nt.test(s[0].type)&&t.parentNode||t,o))){if(s.splice(r,1),e=n.length&&s.join(""),!e)return O.apply(i,H.call(n,0)),i;break}}return C(e,u)(n,t,o,i,nt.test(e)),i}function g(){}var v,y,b,w,_,x,C,k,T,S,D=!0,N="undefined",E=("sizcache"+Math.random()).replace(".",""),$=String,M=e.document,I=M.documentElement,A=0,L=0,P=[].pop,O=[].push,H=[].slice,R=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},F=function(e,t){return e[E]=null==t||t,e},j=function(){var e={},t=[];return F(function(i,n){return t.push(i)>b.cacheLength&&delete e[t.shift()],e[i]=n},e)},z=j(),B=j(),W=j(),U="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",Y=q.replace("w","w#"),V="([*^$|!~]?=)",X="\\["+U+"*("+q+")"+U+"*(?:"+V+U+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+Y+")|)|)"+U+"*\\]",G=":("+q+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+X+")|[^:]|\\\\.)*|.*))\\)|)",K=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+U+"*((?:-\\d)?\\d*)"+U+"*\\)|)(?=[^-]|$)",Q=new RegExp("^"+U+"+|((?:^|[^\\\\])(?:\\\\.)*)"+U+"+$","g"),J=new RegExp("^"+U+"*,"+U+"*"),et=new RegExp("^"+U+"*([\\x20\\t\\r\\n\\f>+~])"+U+"*"),tt=new RegExp(G),it=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,nt=/[\x20\t\r\n\f]*[+~]/,ot=/h\d/i,rt=/input|select|textarea|button/i,st=/\\(?!\\)/g,at={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),NAME:new RegExp("^\\[name=['\"]?("+q+")['\"]?\\]"),TAG:new RegExp("^("+q.replace("w","w*")+")"),ATTR:new RegExp("^"+X),PSEUDO:new RegExp("^"+G),POS:new RegExp(K,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+U+"*(even|odd|(([+-]|)(\\d*)n|)"+U+"*(?:([+-]|)"+U+"*(\\d+)|))"+U+"*\\)|)","i"),needsContext:new RegExp("^"+U+"*[>+~]|"+K,"i")},lt=function(e){var t=M.createElement("div");try{return e(t)}catch(i){return!1}finally{t=null}},ct=lt(function(e){return e.appendChild(M.createComment("")),!e.getElementsByTagName("*").length}),dt=lt(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==N&&"#"===e.firstChild.getAttribute("href")}),ut=lt(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),ht=lt(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),ft=lt(function(e){e.id=E+0,e.innerHTML="<a name='"+E+"'></a><div name='"+E+"'></div>",I.insertBefore(e,I.firstChild);var t=M.getElementsByName&&M.getElementsByName(E).length===2+M.getElementsByName(E+0).length;return y=!M.getElementById(E),I.removeChild(e),t});try{H.call(I.childNodes,0)[0].nodeType}catch(pt){H=function(e){for(var t,i=[];t=this[e];e++)i.push(t);return i}}i.matches=function(e,t){return i(e,null,null,t)},i.matchesSelector=function(e,t){return i(t,null,null,[e]).length>0},w=i.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=w(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n];n++)i+=w(t);return i},_=i.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},x=i.contains=I.contains?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&1===n.nodeType&&i.contains&&i.contains(n))}:I.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},i.attr=function(e,t){var i,n=_(e);return n||(t=t.toLowerCase()),(i=b.attrHandle[t])?i(e):n||ut?e.getAttribute(t):(i=e.getAttributeNode(t),i?"boolean"==typeof e[t]?e[t]?t:null:i.specified?i.value:null:null)},b=i.selectors={cacheLength:50,createPseudo:F,match:at,attrHandle:dt?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:y?function(e,t,i){if(typeof t.getElementById!==N&&!i){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}}:function(e,i,n){if(typeof i.getElementById!==N&&!n){var o=i.getElementById(e);return o?o.id===e||typeof o.getAttributeNode!==N&&o.getAttributeNode("id").value===e?[o]:t:[]}},TAG:ct?function(e,t){return typeof t.getElementsByTagName!==N?t.getElementsByTagName(e):void 0}:function(e,t){var i=t.getElementsByTagName(e);if("*"===e){for(var n,o=[],r=0;n=i[r];r++)1===n.nodeType&&o.push(n);return o}return i},NAME:ft&&function(e,t){return typeof t.getElementsByName!==N?t.getElementsByName(name):void 0},CLASS:ht&&function(e,t,i){return typeof t.getElementsByClassName===N||i?void 0:t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(st,""),e[3]=(e[4]||e[5]||"").replace(st,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||i.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&i.error(e[0]),e},PSEUDO:function(e){var t,i;return at.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(tt.test(t)&&(i=a(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(t=t.slice(0,i),e[0]=e[0].slice(0,i)),e[2]=t),e.slice(0,3))}},filter:{ID:y?function(e){return e=e.replace(st,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(st,""),function(t){var i=typeof t.getAttributeNode!==N&&t.getAttributeNode("id");return i&&i.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(st,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=z[E][e];return t||(t=z(e,new RegExp("(^|"+U+")"+e+"("+U+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==N&&e.getAttribute("class")||"")}},ATTR:function(e,t,n){return function(o){var r=i.attr(o,e);return null==r?"!="===t:t?(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.substr(r.length-n.length)===n:"~="===t?(" "+r+" ").indexOf(n)>-1:"|="===t?r===n||r.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n){return"nth"===e?function(e){var t,o,r=e.parentNode;if(1===i&&0===n)return!0;if(r)for(o=0,t=r.firstChild;t&&(1!==t.nodeType||(o++,e!==t));t=t.nextSibling);return o-=n,o===i||0===o%i&&o/i>=0}:function(t){var i=t;switch(e){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===e)return!0;i=t;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var n,o=b.pseudos[e]||b.setFilters[e.toLowerCase()]||i.error("unsupported pseudo: "+e);return o[E]?o(t):o.length>1?(n=[e,e,"",t],b.setFilters.hasOwnProperty(e.toLowerCase())?F(function(e,i){for(var n,r=o(e,t),s=r.length;s--;)n=R.call(e,r[s]),e[n]=!(i[n]=r[s])}):function(e){return o(e,0,n)}):o}},pseudos:{not:F(function(e){var t=[],i=[],n=C(e.replace(Q,"$1"));return n[E]?F(function(e,t,i,o){for(var r,s=n(e,null,o,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))}):function(e,o,r){return t[0]=e,n(t,null,r,i),!i.pop()}}),has:F(function(e){return function(t){return i(e,t).length>0}}),contains:F(function(e){return function(t){return(t.textContent||t.innerText||w(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!b.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return ot.test(e.nodeName)},text:function(e){var t,i;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(i=e.getAttribute("type"))||i.toLowerCase()===t)},radio:n("radio"),checkbox:n("checkbox"),file:n("file"),password:n("password"),image:n("image"),submit:o("submit"),reset:o("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return rt.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return!(e!==t.activeElement||t.hasFocus&&!t.hasFocus()||!e.type&&!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:r(function(){return[0]}),last:r(function(e,t){return[t-1]}),eq:r(function(e,t,i){return[0>i?i+t:i]}),even:r(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:r(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:r(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:r(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},k=I.compareDocumentPosition?function(e,t){return e===t?(T=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return T=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,n,o=[],r=[],a=e.parentNode,l=t.parentNode,c=a;if(a===l)return s(e,t);if(!a)return-1;if(!l)return 1;for(;c;)o.unshift(c),c=c.parentNode;for(c=l;c;)r.unshift(c),c=c.parentNode;i=o.length,n=r.length;for(var d=0;i>d&&n>d;d++)if(o[d]!==r[d])return s(o[d],r[d]);return d===i?s(e,r[d],-1):s(o[d],t,1)},[0,0].sort(k),D=!T,i.uniqueSort=function(e){var t,i=1;if(T=D,e.sort(k),T)for(;t=e[i];i++)t===e[i-1]&&e.splice(i--,1);return e},i.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},C=i.compile=function(e,t){var i,n=[],o=[],r=W[E][e];if(!r){for(t||(t=a(e)),i=t.length;i--;)r=h(t[i]),r[E]?n.push(r):o.push(r);r=W(e,f(o,n))}return r},M.querySelectorAll&&function(){var e,t=m,n=/'|\\/g,o=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,r=[":focus"],s=[":active",":focus"],l=I.matchesSelector||I.mozMatchesSelector||I.webkitMatchesSelector||I.oMatchesSelector||I.msMatchesSelector;lt(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||r.push("\\["+U+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||r.push(":checked")}),lt(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&r.push("[*^$]="+U+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||r.push(":enabled",":disabled")}),r=new RegExp(r.join("|")),m=function(e,i,o,s,l){if(!(s||l||r&&r.test(e))){var c,d,u=!0,h=E,f=i,p=9===i.nodeType&&e;if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){for(c=a(e),(u=i.getAttribute("id"))?h=u.replace(n,"\\$&"):i.setAttribute("id",h),h="[id='"+h+"'] ",d=c.length;d--;)c[d]=h+c[d].join("");f=nt.test(e)&&i.parentNode||i,p=c.join(",")}if(p)try{return O.apply(o,H.call(f.querySelectorAll(p),0)),o}catch(m){}finally{u||i.removeAttribute("id")}}return t(e,i,o,s,l)},l&&(lt(function(t){e=l.call(t,"div");try{l.call(t,"[test!='']:sizzle"),s.push("!=",G)}catch(i){}}),s=new RegExp(s.join("|")),i.matchesSelector=function(t,n){if(n=n.replace(o,"='$1']"),!(_(t)||s.test(n)||r&&r.test(n)))try{var a=l.call(t,n);if(a||e||t.document&&11!==t.document.nodeType)return a}catch(c){}return i(n,null,null,[t]).length>0})}(),b.pseudos.nth=b.pseudos.eq,b.filters=g.prototype=b.pseudos,b.setFilters=new g,i.attr=Z.attr,Z.find=i,Z.expr=i.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=i.uniqueSort,Z.text=i.getText,Z.isXMLDoc=i.isXML,Z.contains=i.contains}(e);var Lt=/Until$/,Pt=/^(?:parents|prev(?:Until|All))/,Ot=/^.[^:#\[\.,]*$/,Ht=Z.expr.match.needsContext,Rt={children:!0,contents:!0,next:!0,prev:!0};Z.fn.extend({find:function(e){var t,i,n,o,r,s,a=this;if("string"!=typeof e)return Z(e).filter(function(){for(t=0,i=a.length;i>t;t++)if(Z.contains(a[t],this))return!0});for(s=this.pushStack("","find",e),t=0,i=this.length;i>t;t++)if(n=s.length,Z.find(e,this[t],s),t>0)for(o=n;o<s.length;o++)for(r=0;n>r;r++)if(s[r]===s[o]){s.splice(o--,1);break}return s},has:function(e){var t,i=Z(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(Z.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(c(this,e,!1),"not",e)},filter:function(e){return this.pushStack(c(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?Ht.test(e)?Z(e,this.context).index(this[0])>=0:Z.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var i,n=0,o=this.length,r=[],s=Ht.test(e)||"string"!=typeof e?Z(e,t||this.context):0;o>n;n++)for(i=this[n];i&&i.ownerDocument&&i!==t&&11!==i.nodeType;){if(s?s.index(i)>-1:Z.find.matchesSelector(i,e)){r.push(i);break}i=i.parentNode}return r=r.length>1?Z.unique(r):r,this.pushStack(r,"closest",e)},index:function(e){return e?"string"==typeof e?Z.inArray(this[0],Z(e)):Z.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?Z(e,t):Z.makeArray(e&&e.nodeType?[e]:e),n=Z.merge(this.get(),i);return this.pushStack(a(i[0])||a(n[0])?n:Z.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.fn.andSelf=Z.fn.addBack,Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,i){return Z.dir(e,"parentNode",i)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,i){return Z.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return Z.dir(e,"previousSibling",i)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return Z.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(i,n){var o=Z.map(this,t,i);return Lt.test(e)||(n=i),n&&"string"==typeof n&&(o=Z.filter(n,o)),o=this.length>1&&!Rt[e]?Z.unique(o):o,this.length>1&&Pt.test(e)&&(o=o.reverse()),this.pushStack(o,e,V.call(arguments).join(","))}}),Z.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?Z.find.matchesSelector(t[0],e)?[t[0]]:[]:Z.find.matches(e,t)},dir:function(e,i,n){for(var o=[],r=e[i];r&&9!==r.nodeType&&(n===t||1!==r.nodeType||!Z(r).is(n));)1===r.nodeType&&o.push(r),r=r[i];return o},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var Ft="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",jt=/ jQuery\d+="(?:null|\d+)"/g,zt=/^\s+/,Bt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Wt=/<([\w:]+)/,Ut=/<tbody/i,qt=/<|&#?\w+;/,Yt=/<(?:script|style|link)/i,Vt=/<(?:script|object|embed|option|style)/i,Xt=new RegExp("<(?:"+Ft+")[\\s/>]","i"),Gt=/^(?:checkbox|radio)$/,Kt=/checked\s*(?:[^=]|=\s*.checked.)/i,Qt=/\/(java|ecma)script/i,Zt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Jt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ei=d(z),ti=ei.appendChild(z.createElement("div"));Jt.optgroup=Jt.option,Jt.tbody=Jt.tfoot=Jt.colgroup=Jt.caption=Jt.thead,Jt.th=Jt.td,Z.support.htmlSerialize||(Jt._default=[1,"X<div>","</div>"]),Z.fn.extend({text:function(e){return Z.access(this,function(e){return e===t?Z.text(this):this.empty().append((this[0]&&this[0].ownerDocument||z).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(Z.isFunction(e))return this.each(function(t){Z(this).wrapAll(e.call(this,t))});if(this[0]){var t=Z(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return Z.isFunction(e)?this.each(function(t){Z(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Z(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(i){Z(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=Z.clean(arguments);return this.pushStack(Z.merge(e,this),"before",this.selector)}},after:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=Z.clean(arguments);return this.pushStack(Z.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)(!e||Z.filter(e,[i]).length)&&(t||1!==i.nodeType||(Z.cleanData(i.getElementsByTagName("*")),Z.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&Z.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return Z.access(this,function(e){var i=this[0]||{},n=0,o=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(jt,""):t;if(!("string"!=typeof e||Yt.test(e)||!Z.support.htmlSerialize&&Xt.test(e)||!Z.support.leadingWhitespace&&zt.test(e)||Jt[(Wt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Bt,"<$1></$2>");try{for(;o>n;n++)i=this[n]||{},1===i.nodeType&&(Z.cleanData(i.getElementsByTagName("*")),i.innerHTML=e);i=0}catch(r){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return a(this[0])?this.length?this.pushStack(Z(Z.isFunction(e)?e():e),"replaceWith",e):this:Z.isFunction(e)?this.each(function(t){var i=Z(this),n=i.html();i.replaceWith(e.call(this,t,n))}):("string"!=typeof e&&(e=Z(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;Z(this).remove(),t?Z(t).before(e):Z(i).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,n){e=[].concat.apply([],e);var o,r,s,a,l=0,c=e[0],d=[],h=this.length;if(!Z.support.checkClone&&h>1&&"string"==typeof c&&Kt.test(c))return this.each(function(){Z(this).domManip(e,i,n)});if(Z.isFunction(c))return this.each(function(o){var r=Z(this);e[0]=c.call(this,o,i?r.html():t),r.domManip(e,i,n)});if(this[0]){if(o=Z.buildFragment(e,this,d),s=o.fragment,r=s.firstChild,1===s.childNodes.length&&(s=r),r)for(i=i&&Z.nodeName(r,"tr"),a=o.cacheable||h-1;h>l;l++)n.call(i&&Z.nodeName(this[l],"table")?u(this[l],"tbody"):this[l],l===a?s:Z.clone(s,!0,!0));s=r=null,d.length&&Z.each(d,function(e,t){t.src?Z.ajax?Z.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):Z.error("no ajax"):Z.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Zt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),Z.buildFragment=function(e,i,n){var o,r,s,a=e[0];return i=i||z,i=!i.nodeType&&i[0]||i,i=i.ownerDocument||i,!(1===e.length&&"string"==typeof a&&a.length<512&&i===z&&"<"===a.charAt(0))||Vt.test(a)||!Z.support.checkClone&&Kt.test(a)||!Z.support.html5Clone&&Xt.test(a)||(r=!0,o=Z.fragments[a],s=o!==t),o||(o=i.createDocumentFragment(),Z.clean(e,i,o,n),r&&(Z.fragments[a]=s&&o)),{fragment:o,cacheable:r}},Z.fragments={},Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(i){var n,o=0,r=[],s=Z(i),a=s.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===a)return s[t](this[0]),this;for(;a>o;o++)n=(o>0?this.clone(!0):this).get(),Z(s[o])[t](n),r=r.concat(n);return this.pushStack(r,e,s.selector)}}),Z.extend({clone:function(e,t,i){var n,o,r,s;if(Z.support.html5Clone||Z.isXMLDoc(e)||!Xt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(ti.innerHTML=e.outerHTML,ti.removeChild(s=ti.firstChild)),!(Z.support.noCloneEvent&&Z.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(f(e,s),n=p(e),o=p(s),r=0;n[r];++r)o[r]&&f(n[r],o[r]);if(t&&(h(e,s),i))for(n=p(e),o=p(s),r=0;n[r];++r)h(n[r],o[r]);return n=o=null,s},clean:function(e,t,i,n){var o,r,s,a,l,c,u,h,f,p,g,v=t===z&&ei,y=[];for(t&&"undefined"!=typeof t.createDocumentFragment||(t=z),o=0;null!=(s=e[o]);o++)if("number"==typeof s&&(s+=""),s){if("string"==typeof s)if(qt.test(s)){for(v=v||d(t),u=t.createElement("div"),v.appendChild(u),s=s.replace(Bt,"<$1></$2>"),a=(Wt.exec(s)||["",""])[1].toLowerCase(),l=Jt[a]||Jt._default,c=l[0],u.innerHTML=l[1]+s+l[2];c--;)u=u.lastChild;if(!Z.support.tbody)for(h=Ut.test(s),f="table"!==a||h?"<table>"!==l[1]||h?[]:u.childNodes:u.firstChild&&u.firstChild.childNodes,r=f.length-1;r>=0;--r)Z.nodeName(f[r],"tbody")&&!f[r].childNodes.length&&f[r].parentNode.removeChild(f[r]);!Z.support.leadingWhitespace&&zt.test(s)&&u.insertBefore(t.createTextNode(zt.exec(s)[0]),u.firstChild),s=u.childNodes,u.parentNode.removeChild(u)}else s=t.createTextNode(s);s.nodeType?y.push(s):Z.merge(y,s)}if(u&&(s=u=v=null),!Z.support.appendChecked)for(o=0;null!=(s=y[o]);o++)Z.nodeName(s,"input")?m(s):"undefined"!=typeof s.getElementsByTagName&&Z.grep(s.getElementsByTagName("input"),m);if(i)for(p=function(e){return!e.type||Qt.test(e.type)?n?n.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):void 0},o=0;null!=(s=y[o]);o++)Z.nodeName(s,"script")&&p(s)||(i.appendChild(s),"undefined"!=typeof s.getElementsByTagName&&(g=Z.grep(Z.merge([],s.getElementsByTagName("script")),p),y.splice.apply(y,[o+1,0].concat(g)),o+=g.length));return y},cleanData:function(e,t){for(var i,n,o,r,s=0,a=Z.expando,l=Z.cache,c=Z.support.deleteExpando,d=Z.event.special;null!=(o=e[s]);s++)if((t||Z.acceptData(o))&&(n=o[a],i=n&&l[n])){if(i.events)for(r in i.events)d[r]?Z.event.remove(o,r):Z.removeEvent(o,r,i.handle);l[n]&&(delete l[n],c?delete o[a]:o.removeAttribute?o.removeAttribute(a):o[a]=null,Z.deletedIds.push(n))}}}),function(){var e,t;Z.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=Z.uaMatch(W.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),Z.browser=t,Z.sub=function(){function e(t,i){return new e.fn.init(t,i)}Z.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,n){return n&&n instanceof Z&&!(n instanceof e)&&(n=e(n)),Z.fn.init.call(this,i,n,t)},e.fn.init.prototype=e.fn;var t=e(z);return e}}();var ii,ni,oi,ri=/alpha\([^)]*\)/i,si=/opacity=([^)]*)/,ai=/^(top|right|bottom|left)$/,li=/^(none|table(?!-c[ea]).+)/,ci=/^margin/,di=new RegExp("^("+J+")(.*)$","i"),ui=new RegExp("^("+J+")(?!px)[a-z%]+$","i"),hi=new RegExp("^([-+])=("+J+")","i"),fi={},pi={position:"absolute",visibility:"hidden",display:"block"},mi={letterSpacing:0,fontWeight:400},gi=["Top","Right","Bottom","Left"],vi=["Webkit","O","Moz","ms"],yi=Z.fn.toggle;Z.fn.extend({css:function(e,i){return Z.access(this,function(e,i,n){return n!==t?Z.style(e,i,n):Z.css(e,i)},e,i,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e,t){var i="boolean"==typeof e;return Z.isFunction(e)&&Z.isFunction(t)?yi.apply(this,arguments):this.each(function(){(i?e:v(this))?Z(this).show():Z(this).hide()})}}),Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=ii(e,"opacity");return""===i?"1":i}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":Z.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,a,l=Z.camelCase(i),c=e.style;if(i=Z.cssProps[l]||(Z.cssProps[l]=g(c,l)),a=Z.cssHooks[i]||Z.cssHooks[l],n===t)return a&&"get"in a&&(r=a.get(e,!1,o))!==t?r:c[i];if(s=typeof n,"string"===s&&(r=hi.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(Z.css(e,i)),s="number"),!(null==n||"number"===s&&isNaN(n)||("number"!==s||Z.cssNumber[l]||(n+="px"),a&&"set"in a&&(n=a.set(e,n,o))===t)))try{c[i]=n}catch(d){}}},css:function(e,i,n,o){var r,s,a,l=Z.camelCase(i);return i=Z.cssProps[l]||(Z.cssProps[l]=g(e.style,l)),a=Z.cssHooks[i]||Z.cssHooks[l],a&&"get"in a&&(r=a.get(e,!0,o)),r===t&&(r=ii(e,i)),"normal"===r&&i in mi&&(r=mi[i]),n||o!==t?(s=parseFloat(r),n||Z.isNumeric(s)?s||0:r):r},swap:function(e,t,i){var n,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];n=i.call(e);for(o in t)e.style[o]=r[o];return n}}),e.getComputedStyle?ii=function(t,i){var n,o,r,s,a=e.getComputedStyle(t,null),l=t.style;return a&&(n=a[i],""!==n||Z.contains(t.ownerDocument,t)||(n=Z.style(t,i)),ui.test(n)&&ci.test(i)&&(o=l.width,r=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=n,n=a.width,l.width=o,l.minWidth=r,l.maxWidth=s)),n}:z.documentElement.currentStyle&&(ii=function(e,t){var i,n,o=e.currentStyle&&e.currentStyle[t],r=e.style;return null==o&&r&&r[t]&&(o=r[t]),ui.test(o)&&!ai.test(t)&&(i=r.left,n=e.runtimeStyle&&e.runtimeStyle.left,n&&(e.runtimeStyle.left=e.currentStyle.left),r.left="fontSize"===t?"1em":o,o=r.pixelLeft+"px",r.left=i,n&&(e.runtimeStyle.left=n)),""===o?"auto":o}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,i,n){return i?0===e.offsetWidth&&li.test(ii(e,"display"))?Z.swap(e,pi,function(){return _(e,t,n)}):_(e,t,n):void 0},set:function(e,i,n){return b(e,i,n?w(e,t,n,Z.support.boxSizing&&"border-box"===Z.css(e,"boxSizing")):0)}}}),Z.support.opacity||(Z.cssHooks.opacity={get:function(e,t){return si.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,o=Z.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,t>=1&&""===Z.trim(r.replace(ri,""))&&i.removeAttribute&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=ri.test(r)?r.replace(ri,o):r+" "+o)}}),Z(function(){Z.support.reliableMarginRight||(Z.cssHooks.marginRight={get:function(e,t){return Z.swap(e,{display:"inline-block"},function(){return t?ii(e,"marginRight"):void 0})}}),!Z.support.pixelPosition&&Z.fn.position&&Z.each(["top","left"],function(e,t){Z.cssHooks[t]={get:function(e,i){if(i){var n=ii(e,t);return ui.test(n)?Z(e).position()[t]+"px":n}}}})}),Z.expr&&Z.expr.filters&&(Z.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!Z.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ii(e,"display"))},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(i){var n,o="string"==typeof i?i.split(" "):[i],r={};for(n=0;4>n;n++)r[e+gi[n]+t]=o[n]||o[n-2]||o[0];return r}},ci.test(e)||(Z.cssHooks[e+t].set=b)});var bi=/%20/g,wi=/\[\]$/,_i=/\r?\n/g,xi=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ci=/^(?:select|textarea)/i;Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?Z.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Ci.test(this.nodeName)||xi.test(this.type))}).map(function(e,t){var i=Z(this).val();return null==i?null:Z.isArray(i)?Z.map(i,function(e){return{name:t.name,value:e.replace(_i,"\r\n")}}):{name:t.name,value:i.replace(_i,"\r\n")}}).get()}}),Z.param=function(e,i){var n,o=[],r=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){r(this.name,this.value)
});else for(n in e)C(n,e[n],i,r);return o.join("&").replace(bi,"+")};var ki,Ti,Si=/#.*$/,Di=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ni=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Ei=/^(?:GET|HEAD)$/,$i=/^\/\//,Mi=/\?/,Ii=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ai=/([?&])_=[^&]*/,Li=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pi=Z.fn.load,Oi={},Hi={},Ri=["*/"]+["*"];try{Ti=B.href}catch(Fi){Ti=z.createElement("a"),Ti.href="",Ti=Ti.href}ki=Li.exec(Ti.toLowerCase())||[],Z.fn.load=function(e,i,n){if("string"!=typeof e&&Pi)return Pi.apply(this,arguments);if(!this.length)return this;var o,r,s,a=this,l=e.indexOf(" ");return l>=0&&(o=e.slice(l,e.length),e=e.slice(0,l)),Z.isFunction(i)?(n=i,i=t):i&&"object"==typeof i&&(r="POST"),Z.ajax({url:e,type:r,dataType:"html",data:i,complete:function(e,t){n&&a.each(n,s||[e.responseText,t,e])}}).done(function(e){s=arguments,a.html(o?Z("<div>").append(e.replace(Ii,"")).find(o):e)}),this},Z.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z.each(["get","post"],function(e,i){Z[i]=function(e,n,o,r){return Z.isFunction(n)&&(r=r||o,o=n,n=t),Z.ajax({type:i,url:e,data:n,success:o,dataType:r})}}),Z.extend({getScript:function(e,i){return Z.get(e,t,i,"script")},getJSON:function(e,t,i){return Z.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?S(e,Z.ajaxSettings):(t=e,e=Z.ajaxSettings),S(e,t),e},ajaxSettings:{url:Ti,isLocal:Ni.test(ki[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Ri},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:k(Oi),ajaxTransport:k(Hi),ajax:function(e,i){function n(e,i,n,s){var c,u,y,b,_,C=i;2!==w&&(w=2,l&&clearTimeout(l),a=t,r=s||"",x.readyState=e>0?4:0,n&&(b=D(h,x,n)),e>=200&&300>e||304===e?(h.ifModified&&(_=x.getResponseHeader("Last-Modified"),_&&(Z.lastModified[o]=_),_=x.getResponseHeader("Etag"),_&&(Z.etag[o]=_)),304===e?(C="notmodified",c=!0):(c=N(h,b),C=c.state,u=c.data,y=c.error,c=!y)):(y=C,(!C||e)&&(C="error",0>e&&(e=0))),x.status=e,x.statusText=(i||C)+"",c?m.resolveWith(f,[u,C,x]):m.rejectWith(f,[x,C,y]),x.statusCode(v),v=t,d&&p.trigger("ajax"+(c?"Success":"Error"),[x,h,c?u:y]),g.fireWith(f,[x,C]),d&&(p.trigger("ajaxComplete",[x,h]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var o,r,s,a,l,c,d,u,h=Z.ajaxSetup({},i),f=h.context||h,p=f!==h&&(f.nodeType||f instanceof Z)?Z(f):Z.event,m=Z.Deferred(),g=Z.Callbacks("once memory"),v=h.statusCode||{},y={},b={},w=0,_="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!w){var i=e.toLowerCase();e=b[i]=b[i]||e,y[e]=t}return this},getAllResponseHeaders:function(){return 2===w?r:null},getResponseHeader:function(e){var i;if(2===w){if(!s)for(s={};i=Di.exec(r);)s[i[1].toLowerCase()]=i[2];i=s[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return w||(h.mimeType=e),this},abort:function(e){return e=e||_,a&&a.abort(e),n(0,e),this}};if(m.promise(x),x.success=x.done,x.error=x.fail,x.complete=g.add,x.statusCode=function(e){if(e){var t;if(2>w)for(t in e)v[t]=[v[t],e[t]];else t=e[x.status],x.always(t)}return this},h.url=((e||h.url)+"").replace(Si,"").replace($i,ki[1]+"//"),h.dataTypes=Z.trim(h.dataType||"*").toLowerCase().split(tt),null==h.crossDomain&&(c=Li.exec(h.url.toLowerCase())||!1,h.crossDomain=c&&c.join(":")+(c[3]?"":"http:"===c[1]?80:443)!==ki.join(":")+(ki[3]?"":"http:"===ki[1]?80:443)),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Z.param(h.data,h.traditional)),T(Oi,h,i,x),2===w)return x;if(d=h.global,h.type=h.type.toUpperCase(),h.hasContent=!Ei.test(h.type),d&&0===Z.active++&&Z.event.trigger("ajaxStart"),!h.hasContent&&(h.data&&(h.url+=(Mi.test(h.url)?"&":"?")+h.data,delete h.data),o=h.url,h.cache===!1)){var C=Z.now(),k=h.url.replace(Ai,"$1_="+C);h.url=k+(k===h.url?(Mi.test(h.url)?"&":"?")+"_="+C:"")}(h.data&&h.hasContent&&h.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(o=o||h.url,Z.lastModified[o]&&x.setRequestHeader("If-Modified-Since",Z.lastModified[o]),Z.etag[o]&&x.setRequestHeader("If-None-Match",Z.etag[o])),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ri+"; q=0.01":""):h.accepts["*"]);for(u in h.headers)x.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(h.beforeSend.call(f,x,h)===!1||2===w))return x.abort();_="abort";for(u in{success:1,error:1,complete:1})x[u](h[u]);if(a=T(Hi,h,i,x)){x.readyState=1,d&&p.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},h.timeout));try{w=1,a.send(y,n)}catch(S){if(!(2>w))throw S;n(-1,S)}}else n(-1,"No Transport");return x},active:0,lastModified:{},etag:{}});var ji=[],zi=/\?/,Bi=/(=)\?(?=&|$)|\?\?/,Wi=Z.now();Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ji.pop()||Z.expando+"_"+Wi++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(i,n,o){var r,s,a,l=i.data,c=i.url,d=i.jsonp!==!1,u=d&&Bi.test(c),h=d&&!u&&"string"==typeof l&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bi.test(l);return"jsonp"===i.dataTypes[0]||u||h?(r=i.jsonpCallback=Z.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,s=e[r],u?i.url=c.replace(Bi,"$1"+r):h?i.data=l.replace(Bi,"$1"+r):d&&(i.url+=(zi.test(c)?"&":"?")+i.jsonp+"="+r),i.converters["script json"]=function(){return a||Z.error(r+" was not called"),a[0]},i.dataTypes[0]="json",e[r]=function(){a=arguments},o.always(function(){e[r]=s,i[r]&&(i.jsonpCallback=n.jsonpCallback,ji.push(r)),a&&Z.isFunction(s)&&s(a[0]),a=s=t}),"script"):void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=z.head||z.getElementsByTagName("head")[0]||z.documentElement;return{send:function(o,r){i=z.createElement("script"),i.async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,o){(o||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=t,o||r(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var Ui,qi=e.ActiveXObject?function(){for(var e in Ui)Ui[e](0,1)}:!1,Yi=0;Z.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&E()||$()}:E,function(e){Z.extend(Z.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(Z.ajaxSettings.xhr()),Z.support.ajax&&Z.ajaxTransport(function(i){if(!i.crossDomain||Z.support.cors){var n;return{send:function(o,r){var s,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(a in o)l.setRequestHeader(a,o[a])}catch(c){}l.send(i.hasContent&&i.data||null),n=function(e,o){var a,c,d,u,h;try{if(n&&(o||4===l.readyState))if(n=t,s&&(l.onreadystatechange=Z.noop,qi&&delete Ui[s]),o)4!==l.readyState&&l.abort();else{a=l.status,d=l.getAllResponseHeaders(),u={},h=l.responseXML,h&&h.documentElement&&(u.xml=h);try{u.text=l.responseText}catch(e){}try{c=l.statusText}catch(f){c=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=u.text?200:404}}catch(p){o||r(-1,p)}u&&r(a,c,u,d)},i.async?4===l.readyState?setTimeout(n,0):(s=++Yi,qi&&(Ui||(Ui={},Z(e).unload(qi)),Ui[s]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}});var Vi,Xi,Gi=/^(?:toggle|show|hide)$/,Ki=new RegExp("^(?:([-+])=|)("+J+")([a-z%]*)$","i"),Qi=/queueHooks$/,Zi=[P],Ji={"*":[function(e,t){var i,n,o=this.createTween(e,t),r=Ki.exec(t),s=o.cur(),a=+s||0,l=1,c=20;if(r){if(i=+r[2],n=r[3]||(Z.cssNumber[e]?"":"px"),"px"!==n&&a){a=Z.css(o.elem,e,!0)||i||1;do l=l||".5",a/=l,Z.style(o.elem,e,a+n);while(l!==(l=o.cur()/s)&&1!==l&&--c)}o.unit=n,o.start=a,o.end=r[1]?a+(r[1]+1)*i:i}return o}]};Z.Animation=Z.extend(A,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,o=e.length;o>n;n++)i=e[n],Ji[i]=Ji[i]||[],Ji[i].unshift(t)},prefilter:function(e,t){t?Zi.unshift(e):Zi.push(e)}}),Z.Tween=O,O.prototype={constructor:O,init:function(e,t,i,n,o,r){this.elem=e,this.prop=i,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(Z.cssNumber[i]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,i=O.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,!1,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.each(["toggle","show","hide"],function(e,t){var i=Z.fn[t];Z.fn[t]=function(n,o,r){return null==n||"boolean"==typeof n||!e&&Z.isFunction(n)&&Z.isFunction(o)?i.apply(this,arguments):this.animate(H(t,!0),n,o,r)}}),Z.fn.extend({fadeTo:function(e,t,i,n){return this.filter(v).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=Z.isEmptyObject(e),r=Z.speed(t,i,n),s=function(){var t=A(this,Z.extend({},e),r);o&&t.stop(!0)};return o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(e,i,n){var o=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",r=Z.timers,s=Z._data(this);if(i)s[i]&&s[i].stop&&o(s[i]);else for(i in s)s[i]&&s[i].stop&&Qi.test(i)&&o(s[i]);for(i=r.length;i--;)r[i].elem!==this||null!=e&&r[i].queue!==e||(r[i].anim.stop(n),t=!1,r.splice(i,1));(t||!n)&&Z.dequeue(this,e)})}}),Z.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),Z.speed=function(e,t,i){var n=e&&"object"==typeof e?Z.extend({},e):{complete:i||!i&&t||Z.isFunction(e)&&e,duration:e,easing:i&&t||t&&!Z.isFunction(t)&&t};return n.duration=Z.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in Z.fx.speeds?Z.fx.speeds[n.duration]:Z.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){Z.isFunction(n.old)&&n.old.call(this),n.queue&&Z.dequeue(this,n.queue)},n},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.timers=[],Z.fx=O.prototype.init,Z.fx.tick=function(){for(var e,t=Z.timers,i=0;i<t.length;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||Z.fx.stop()},Z.fx.timer=function(e){e()&&Z.timers.push(e)&&!Xi&&(Xi=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.interval=13,Z.fx.stop=function(){clearInterval(Xi),Xi=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fx.step={},Z.expr&&Z.expr.filters&&(Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length});var en=/^(?:body|html)$/i;Z.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var i,n,o,r,s,a,l,c={top:0,left:0},d=this[0],u=d&&d.ownerDocument;if(u)return(n=u.body)===d?Z.offset.bodyOffset(d):(i=u.documentElement,Z.contains(i,d)?("undefined"!=typeof d.getBoundingClientRect&&(c=d.getBoundingClientRect()),o=R(u),r=i.clientTop||n.clientTop||0,s=i.clientLeft||n.clientLeft||0,a=o.pageYOffset||i.scrollTop,l=o.pageXOffset||i.scrollLeft,{top:c.top+a-r,left:c.left+l-s}):c)},Z.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return Z.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(Z.css(e,"marginTop"))||0,i+=parseFloat(Z.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var n=Z.css(e,"position");"static"===n&&(e.style.position="relative");var o,r,s=Z(e),a=s.offset(),l=Z.css(e,"top"),c=Z.css(e,"left"),d=("absolute"===n||"fixed"===n)&&Z.inArray("auto",[l,c])>-1,u={},h={};d?(h=s.position(),o=h.top,r=h.left):(o=parseFloat(l)||0,r=parseFloat(c)||0),Z.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(u.top=t.top-a.top+o),null!=t.left&&(u.left=t.left-a.left+r),"using"in t?t.using.call(e,u):s.css(u)}},Z.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),i=this.offset(),n=en.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(Z.css(e,"marginTop"))||0,i.left-=parseFloat(Z.css(e,"marginLeft"))||0,n.top+=parseFloat(Z.css(t[0],"borderTopWidth"))||0,n.left+=parseFloat(Z.css(t[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||z.body;e&&!en.test(e.nodeName)&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||z.body})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);Z.fn[e]=function(o){return Z.access(this,function(e,o,r){var s=R(e);return r===t?s?i in s?s[i]:s.document.documentElement[o]:e[o]:(s?s.scrollTo(n?Z(s).scrollLeft():r,n?r:Z(s).scrollTop()):e[o]=r,void 0)},e,o,arguments.length,null)}}),Z.each({Height:"height",Width:"width"},function(e,i){Z.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,o){Z.fn[o]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(o===!0||r===!0?"margin":"border");return Z.access(this,function(i,n,o){var r;return Z.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(r=i.documentElement,Math.max(i.body["scroll"+e],r["scroll"+e],i.body["offset"+e],r["offset"+e],r["client"+e])):o===t?Z.css(i,n,o,a):Z.style(i,n,o,a)},i,s?o:t,s,null)}})}),e.jQuery=e.$=Z,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Z})}(window),function(e,t){var i=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return"rails"===e.namespace}).length};i()&&e.error("jquery-ujs has already been loaded!");var n;e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var i=e('meta[name="csrf-token"]').attr("content");i&&t.setRequestHeader("X-CSRF-Token",i)},fire:function(t,i,n){var o=e.Event(i);return t.trigger(o,n),o.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(i){var o,r,s,a,l,c,d,u;if(n.fire(i,"ajax:before")){if(a=i.data("cross-domain"),l=a===t?null:a,c=i.data("with-credentials")||null,d=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){o=i.attr("method"),r=i.attr("action"),s=i.serializeArray();var h=i.data("ujs:submit-button");h&&(s.push(h),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(o=i.data("method"),r=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):(o=i.data("method"),r=n.href(i),s=i.data("params")||null);u={type:o||"GET",data:s,dataType:d,beforeSend:function(e,o){return o.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),n.fire(i,"ajax:beforeSend",[e,o])},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},xhrFields:{withCredentials:c},crossDomain:l},r&&(u.url=r);var f=n.ajax(u);return i.trigger("ajax:send",f),f}return!1},handleMethod:function(i){var o=n.href(i),r=i.data("method"),s=i.attr("target"),a=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+o+'"></form>'),d='<input name="_method" value="'+r+'" type="hidden" />';l!==t&&a!==t&&(d+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&c.attr("target",s),c.hide().append(d).appendTo("body"),c.submit()},disableFormElements:function(t){t.find(n.disableSelector).each(function(){var t=e(this),i=t.is("button")?"html":"val";t.data("ujs:enable-with",t[i]()),t[i](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(n.enableSelector).each(function(){var t=e(this),i=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[i](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,i=e.data("confirm"),o=!1;return i?(n.fire(e,"confirm")&&(o=n.confirm(i),t=n.fire(e,"confirm:complete",[o])),o&&t):!0},blankInputs:function(t,i,n){var o,r,s=e(),a=i||"input,textarea",l=t.find(a);return l.each(function(){if(o=e(this),r=o.is(":checkbox,:radio")?o.is(":checked"):o.val(),!r==!n){if(o.is(":radio")&&l.filter('input:radio:checked[name="'+o.attr("name")+'"]').length)return!0;s=s.add(o)}}),s.length?s:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(i,n){var o=i.data("events"),r=!0;return o!==t&&o.submit!==t&&e.each(o.submit,function(e,t){return"function"==typeof t.handler?r=t.handler(n):void 0}),r},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},n.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),e(document).delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),e(document).delegate(n.linkClickSelector,"click.rails",function(i){var o=e(this),r=o.data("method"),s=o.data("params");if(!n.allowAction(o))return n.stopEverything(i);if(o.is(n.linkDisableSelector)&&n.disableElement(o),o.data("remote")!==t){if(!(!i.metaKey&&!i.ctrlKey||r&&"GET"!==r||s))return!0;var a=n.handleRemote(o);return a===!1?n.enableElement(o):a.error(function(){n.enableElement(o)}),!1}return o.data("method")?(n.handleMethod(o),!1):void 0}),e(document).delegate(n.inputChangeSelector,"change.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),e(document).delegate(n.formSubmitSelector,"submit.rails",function(i){var o=e(this),r=o.data("remote")!==t,s=n.blankInputs(o,n.requiredInputSelector),a=n.nonBlankInputs(o,n.fileInputSelector);if(!n.allowAction(o))return n.stopEverything(i);if(s&&o.attr("novalidate")==t&&n.fire(o,"ajax:aborted:required",[s]))return n.stopEverything(i);if(r){if(a){setTimeout(function(){n.disableFormElements(o)},13);var l=n.fire(o,"ajax:aborted:file",[a]);return l||setTimeout(function(){n.enableFormElements(o)},13),l}return!e.support.submitBubbles&&e().jquery<"1.7"&&n.callFormSubmitBindings(o,i)===!1?n.stopEverything(i):(n.handleRemote(o),!1)}setTimeout(function(){n.disableFormElements(o)},13)}),e(document).delegate(n.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var o=i.attr("name"),r=o?{name:o,value:i.val()}:null;i.closest("form").data("ujs:submit-button",r)}),e(document).delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),e(document).delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){csrf_token=e("meta[name=csrf-token]").attr("content"),csrf_param=e("meta[name=csrf-param]").attr("content"),e('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery),/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.effects.core.js, jquery.effects.blind.js, jquery.effects.bounce.js, jquery.effects.clip.js, jquery.effects.drop.js, jquery.effects.explode.js, jquery.effects.fade.js, jquery.effects.fold.js, jquery.effects.highlight.js, jquery.effects.pulsate.js, jquery.effects.scale.js, jquery.effects.shake.js, jquery.effects.slide.js, jquery.effects.transfer.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
function(e,t){function i(t,i){var o=t.nodeName.toLowerCase();if("area"===o){var r,s=t.parentNode,a=s.name;return t.href&&a&&"map"===s.nodeName.toLowerCase()?(r=e("img[usemap=#"+a+"]")[0],!!r&&n(r)):!1}return(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"==o?t.href||i:i)&&n(t)}function n(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.8.23",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,o,r=e(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(o=parseInt(r.css("zIndex"),10),!isNaN(o)&&0!==o))return o;r=r.parent()}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function o(t,i,n,o){return e.each(r,function(){i-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,n&&(i-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),o&&(i-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),i}var r="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(s,o(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(s,o(this,t,!0,i)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),o=isNaN(n);return(o||n>=0)&&i(t,!o)}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));i.offsetHeight,e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"}),e.curCSS||(e.curCSS=e.css),e.extend(e.ui,{plugin:{add:function(t,i,n){var o=e.ui[t].prototype;for(var r in n)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([i,n[r]])},call:function(e,t,i){var n=e.plugins[t];if(n&&e.element[0].parentNode)for(var o=0;o<n.length;o++)e.options[n[o][0]]&&n[o][1].apply(e.element,i)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return t[n]>0?!0:(t[n]=1,o=t[n]>0,t[n]=0,o)},isOverAxis:function(e,t,i){return e>t&&t+i>e},isOver:function(t,i,n,o,r,s){return e.ui.isOverAxis(t,n,r)&&e.ui.isOverAxis(i,o,s)}}))}(jQuery),function(e,t){if(e.cleanData){var i=e.cleanData;e.cleanData=function(t){for(var n,o=0;null!=(n=t[o]);o++)try{e(n).triggerHandler("remove")}catch(r){}i(t)}}else{var n=e.fn.remove;e.fn.remove=function(t,i){return this.each(function(){return i||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),n.call(e(this),t,i)})}}e.widget=function(t,i,n){var o,r=t.split(".")[0];t=t.split(".")[1],o=r+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o]=function(i){return!!e.data(i,t)},e[r]=e[r]||{},e[r][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var s=new i;s.options=e.extend(!0,{},s.options),e[r][t].prototype=e.extend(!0,s,{namespace:r,widgetName:t,widgetEventPrefix:e[r][t].prototype.widgetEventPrefix||t,widgetBaseClass:o},n),e.widget.bridge(t,e[r][t])},e.widget.bridge=function(i,n){e.fn[i]=function(o){var r="string"==typeof o,s=Array.prototype.slice.call(arguments,1),a=this;return o=!r&&s.length?e.extend.apply(null,[!0,o].concat(s)):o,r&&"_"===o.charAt(0)?a:(r?this.each(function(){var n=e.data(this,i),r=n&&e.isFunction(n[o])?n[o].apply(n,s):n;return r!==n&&r!==t?(a=r,!1):void 0}):this.each(function(){var t=e.data(this,i);t?t.option(o||{})._init():e.data(this,i,new n(o,this))}),a)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,i){e.data(i,this.widgetName,this),this.element=e(i),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(i,n){var o=i;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof i){if(n===t)return this.options[i];o={},o[i]=n}return this._setOptions(o),this},_setOptions:function(t){var i=this;return e.each(t,function(e,t){i._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent,r)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(e.isFunction(s)&&s.call(this.element[0],i,n)===!1||i.isDefaultPrevented())}}}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,o=1==i.which,r="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return o&&!r&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(i.iframeFix&&e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var n=this.element[0],o=!1;n&&(n=n.parentNode);)n==document&&(o=!0);if(!o&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var r=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]!=this.element[0]&&!/(fixed|absolute)/.test(n.css("position"))&&n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var i=e(t.containment),n=i[0];if(!n)return;var o=(i.offset(),"hidden"!=e(n).css("overflow"));this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(o?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(o?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,o=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*n),left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*n)}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName),r=t.pageX,s=t.pageY;if(this.originalPosition){var a;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();a=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else a=this.containment;t.pageX-this.offset.click.left<a[0]&&(r=a[0]+this.offset.click.left),t.pageY-this.offset.click.top<a[1]&&(s=a[1]+this.offset.click.top),t.pageX-this.offset.click.left>a[2]&&(r=a[2]+this.offset.click.left),t.pageY-this.offset.click.top>a[3]&&(s=a[3]+this.offset.click.top)}if(i.grid){var c=i.grid[1]?this.originalPageY+Math.round((s-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;s=a?c-this.offset.click.top<a[1]||c-this.offset.click.top>a[3]?c-this.offset.click.top<a[1]?c+i.grid[1]:c-i.grid[1]:c:c;var d=i.grid[0]?this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;r=a?d-this.offset.click.left<a[0]||d-this.offset.click.left>a[2]?d-this.offset.click.left<a[0]?d+i.grid[0]:d-i.grid[0]:d:d}}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.23"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("draggable"),o=n.options,r=e.extend({},i,{item:n.element});n.sortables=[],e(o.connectToSortable).each(function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,r))})},stop:function(t,i){var n=e(this).data("draggable"),o=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,o))})},drag:function(t,i){var n=e(this).data("draggable"),o=this;e.each(n.sortables,function(){this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(o).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),o=e(this).data("draggable").options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(t,i){var n=e(this).data("draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("draggable");t.scrollParent[0]!=document&&"HTML"!=t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("draggable"),n=i.options,o=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(n.axis&&"x"==n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"==n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"==n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"==n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){for(var n=e(this).data("draggable"),o=n.options,r=o.snapTolerance,s=i.offset.left,a=s+n.helperProportions.width,l=i.offset.top,c=l+n.helperProportions.height,d=n.snapElements.length-1;d>=0;d--){var u=n.snapElements[d].left,h=u+n.snapElements[d].width,f=n.snapElements[d].top,p=f+n.snapElements[d].height;if(s>u-r&&h+r>s&&l>f-r&&p+r>l||s>u-r&&h+r>s&&c>f-r&&p+r>c||a>u-r&&h+r>a&&l>f-r&&p+r>l||a>u-r&&h+r>a&&c>f-r&&p+r>c){if("inner"!=o.snapMode){var m=Math.abs(f-c)<=r,g=Math.abs(p-l)<=r,v=Math.abs(u-a)<=r,y=Math.abs(h-s)<=r;m&&(i.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left-n.margins.left),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left)}var b=m||g||v||y;if("outer"!=o.snapMode){var m=Math.abs(f-l)<=r,g=Math.abs(p-c)<=r,v=Math.abs(u-s)<=r,y=Math.abs(h-a)<=r;m&&(i.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u}).left-n.margins.left),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left)}!n.snapElements[d].snapping&&(m||g||v||y||b)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=m||g||v||y||b}else n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t=e(this).data("draggable").options,i=e.makeArray(e(t.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(i.length){var n=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=n+e}),this[0].style.zIndex=n+i.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),o=e(this).data("draggable").options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(t,i){var n=e(this).data("draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;i<t.length;i++)t[i]==this&&t.splice(i,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return!1;var o=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.23"}),e.ui.intersect=function(t,i,n){if(!i.offset)return!1;var o=(t.positionAbs||t.position.absolute).left,r=o+t.helperProportions.width,s=(t.positionAbs||t.position.absolute).top,a=s+t.helperProportions.height,l=i.offset.left,c=l+i.proportions.width,d=i.offset.top,u=d+i.proportions.height;switch(n){case"fit":return o>=l&&c>=r&&s>=d&&u>=a;case"intersect":return l<o+t.helperProportions.width/2&&r-t.helperProportions.width/2<c&&d<s+t.helperProportions.height/2&&a-t.helperProportions.height/2<u;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,f=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,p=e.ui.isOver(f,h,d,l,i.proportions.height,i.proportions.width);return p;case"touch":return(s>=d&&u>=s||a>=d&&u>=a||d>s&&a>u)&&(o>=l&&c>=o||r>=l&&c>=r||l>o&&r>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var s=0;s<n.length;s++)if(!(n[s].options.disabled||t&&!n[s].accept.call(n[s].element[0],t.currentItem||t.element))){for(var a=0;a<r.length;a++)if(r[a]==n[s].element[0]){n[s].proportions.height=0;continue e}n[s].visible="none"!=n[s].element.css("display"),n[s].visible&&("mousedown"==o&&n[s]._activate.call(n[s],i),n[s].offset=n[s].element.offset(),n[s].proportions={width:n[s].element[0].offsetWidth,height:n[s].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))
}),n},dragStart:function(t,i){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n=e.ui.intersect(t,this,this.options.tolerance),o=n||1!=this.isover?n&&0==this.isover?"isover":null:"isout";if(o){var r;if(this.options.greedy){var s=this.element.parents(":data(droppable):eq(0)");s.length&&(r=e.data(s[0],"droppable"),r.greedyChild="isover"==o?1:0)}r&&"isover"==o&&(r.isover=0,r.isout=1,r._out.call(r,i)),this[o]=1,this["isout"==o?"isover":"isout"]=0,this["isover"==o?"_over":"_out"].call(this,i),r&&"isout"==o&&(r.isout=0,r.isover=1,r._over.call(r,i))}}})},dragStop:function(t,i){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,i=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var n=this.handles.split(",");this.handles={};for(var o=0;o<n.length;o++){var r=e.trim(n[o]),s="ui-resizable-"+r,a=e('<div class="ui-resizable-handle '+s+'"></div>');a.css({zIndex:i.zIndex}),"se"==r&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(a)}}this._renderAxis=function(t){t=t||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n=e(this.handles[i],this.element),o=0;o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth();var r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");t.css(r,o),this._proportionallyResize()}e(this.handles[i]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),i.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){i.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())},function(){i.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var i=this.element;i.after(this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var n in this.handles)e(this.handles[n])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(i){var n=this.options,o=this.element.position(),r=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(r.is(".ui-draggable")||/absolute/.test(r.css("position")))&&r.css({position:"absolute",top:o.top,left:o.left}),this._renderProxy();var s=t(this.helper.css("left")),a=t(this.helper.css("top"));n.containment&&(s+=e(n.containment).scrollLeft()||0,a+=e(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:a},this.size=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalPosition={left:s,top:a},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),r.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i=this.helper,n=(this.options,this.originalMousePosition),o=this.axis,r=t.pageX-n.left||0,s=t.pageY-n.top||0,a=this._change[o];if(!a)return!1;var l=a.apply(this,[t,r,s]);return e.browser.msie&&e.browser.version<7,this.sizeDiff,this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(l=this._updateRatio(l,t)),l=this._respectSize(l,t),this._propagate("resize",t),i.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var i=this.options,n=this;if(this._helper){var o=this._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&e.ui.hasScroll(o[0],"left")?0:n.sizeDiff.height,a=r?0:n.sizeDiff.width,l={width:n.helper.width()-a,height:n.helper.height()-s},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,d=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;i.animate||this.element.css(e.extend(l,{top:d,left:c})),n.helper.height(n.size.height),n.helper.width(n.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,o,r,s,a=this.options;s={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,o=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,r=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),o>s.minHeight&&(s.minHeight=o),n<s.maxWidth&&(s.maxWidth=n),r<s.maxHeight&&(s.maxHeight=r)),this._vBoundaries=s},_updateCache:function(e){this.options,this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=(this.options,this.position),n=this.size,o=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==o&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"==o&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e,t){var n=(this.helper,this._vBoundaries),o=(this._aspectRatio||t.shiftKey,this.axis),r=i(e.width)&&n.maxWidth&&n.maxWidth<e.width,s=i(e.height)&&n.maxHeight&&n.maxHeight<e.height,a=i(e.width)&&n.minWidth&&n.minWidth>e.width,l=i(e.height)&&n.minHeight&&n.minHeight>e.height;a&&(e.width=n.minWidth),l&&(e.height=n.minHeight),r&&(e.width=n.maxWidth),s&&(e.height=n.maxHeight);var c=this.originalPosition.left+this.originalSize.width,d=this.position.top+this.size.height,u=/sw|nw|w/.test(o),h=/nw|ne|n/.test(o);a&&u&&(e.left=c-n.minWidth),r&&u&&(e.left=c-n.maxWidth),l&&h&&(e.top=d-n.minHeight),s&&h&&(e.top=d-n.maxHeight);var f=!e.width&&!e.height;return f&&!e.left&&e.top?e.top=null:f&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(this.options,this._proportionallyResizeElements.length)for(var t=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var n=this._proportionallyResizeElements[i];if(!this.borderDif){var o=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],r=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];this.borderDif=e.map(o,function(e,t){var i=parseInt(e,10)||0,n=parseInt(r[t],10)||0;return i+n})}e.browser.msie&&(e(t).is(":hidden")||e(t).parents(":hidden").length)||n.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,i=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var n=e.browser.msie&&e.browser.version<7,o=n?1:0,r=n?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+r,height:this.element.outerHeight()+r,position:"absolute",left:this.elementOffset.left-o+"px",top:this.elementOffset.top-o+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=(this.options,this.originalSize),n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=(this.options,this.originalSize),o=this.originalPosition;return{top:o.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!=t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.23"}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("resizable"),o=n.options,r=n.originalSize,s=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0},l=function(t,n){e(t).each(function(){var t=e(this),o=e(this).data("resizable-alsoresize"),r={},s=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var i=(o[t]||0)+(a[t]||0);i&&i>=0&&(r[t]=i||null)}),t.css(r)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize):e.each(o.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("resizable"),n=i.options,o=i._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&e.ui.hasScroll(o[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-s},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,d=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,d&&c?{top:d,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&e(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i=e(this).data("resizable"),n=i.options,o=i.element,r=n.containment,s=r instanceof e?r.get(0):/parent/.test(r)?o.parent().get(0):r;if(s)if(i.containerElement=e(s),/document/.test(r)||r==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var a=e(s),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,i){l[e]=t(a.css("padding"+i))}),i.containerOffset=a.offset(),i.containerPosition=a.position(),i.containerSize={height:a.innerHeight()-l[3],width:a.innerWidth()-l[1]};var c=i.containerOffset,d=i.containerSize.height,u=i.containerSize.width,h=e.ui.hasScroll(s,"left")?s.scrollWidth:u,f=e.ui.hasScroll(s)?s.scrollHeight:d;i.parentData={element:s,left:c.left,top:c.top,width:h,height:f}}},resize:function(t){var i=e(this).data("resizable"),n=i.options,o=(i.containerSize,i.containerOffset),r=(i.size,i.position),s=i._aspectRatio||t.shiftKey,a={top:0,left:0},l=i.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(a=o),r.left<(i._helper?o.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-o.left:i.position.left-a.left),s&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=n.helper?o.left:0),r.top<(i._helper?o.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-o.top:i.position.top),s&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?o.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top;var c=Math.abs((i._helper?i.offset.left-a.left:i.offset.left-a.left)+i.sizeDiff.width),d=Math.abs((i._helper?i.offset.top-a.top:i.offset.top-o.top)+i.sizeDiff.height),u=i.containerElement.get(0)==i.element.parent().get(0),h=/relative|absolute/.test(i.containerElement.css("position"));u&&h&&(c-=i.parentData.left),c+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-c,s&&(i.size.height=i.size.width/i.aspectRatio)),d+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-d,s&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var t=e(this).data("resizable"),i=t.options,n=(t.position,t.containerOffset),o=t.containerPosition,r=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(r.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(r.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("resizable");t.options,t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("resizable");t.options,t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t){var i=e(this).data("resizable"),n=i.options,o=i.size,r=i.originalSize,s=i.originalPosition,a=i.axis;n._aspectRatio||t.shiftKey,n.grid="number"==typeof n.grid?[n.grid,n.grid]:n.grid;var l=Math.round((o.width-r.width)/(n.grid[0]||1))*(n.grid[0]||1),c=Math.round((o.height-r.height)/(n.grid[1]||1))*(n.grid[1]||1);/^(se|s|e)$/.test(a)?(i.size.width=r.width+l,i.size.height=r.height+c):/^(ne)$/.test(a)?(i.size.width=r.width+l,i.size.height=r.height+c,i.position.top=s.top-c):/^(sw)$/.test(a)?(i.size.width=r.width+l,i.size.height=r.height+c,i.position.left=s.left-l):(i.size.width=r.width+l,i.size.height=r.height+c,i.position.top=s.top-c,i.position.left=s.left-l)}});var t=function(e){return parseInt(e,10)||0},i=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var i;this.refresh=function(){i=e(t.options.filter,t.element[0]),i.addClass("ui-selectee"),i.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(t){var i=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var n=this.options;this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,!t.metaKey&&!t.ctrlKey&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().andSelf().each(function(){var n=e.data(this,"selectable-item");if(n){var o=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected");return n.$element.removeClass(o?"ui-unselecting":"ui-selected").addClass(o?"ui-selecting":"ui-unselecting"),n.unselecting=!o,n.selecting=o,n.selected=o,o?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1}})}},_mouseDrag:function(t){var i=this;if(this.dragged=!0,!this.options.disabled){var n=this.options,o=this.opos[0],r=this.opos[1],s=t.pageX,a=t.pageY;if(o>s){var l=s;s=o,o=l}if(r>a){var l=a;a=r,r=l}return this.helper.css({left:o,top:r,width:s-o,height:a-r}),this.selectees.each(function(){var l=e.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var c=!1;"touch"==n.tolerance?c=!(l.left>s||l.right<o||l.top>a||l.bottom<r):"fit"==n.tolerance&&(c=l.left>o&&l.right<s&&l.top>r&&l.bottom<a),c?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&((t.metaKey||t.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&!t.metaKey&&!t.ctrlKey&&!l.startselected&&(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",t,{unselecting:l.element})))}}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,this.options,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.23"})}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var o=null,r=this;if(e(t.target).parents().each(function(){return e.data(this,n.widgetName+"-item")==r?(o=e(this),!1):void 0}),e.data(t.target,n.widgetName+"-item")==r&&(o=e(t.target)),!o)return!1;if(this.options.handle&&!i){var s=!1;if(e(this.options.handle,o).find("*").andSelf().each(function(){this==t.target&&(s=!0)}),!s)return!1}return this.currentItem=o,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,i,n){var o=this.options,r=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",o.cursor)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,r._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-e(document).scrollTop()<i.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),t.pageX-e(document).scrollLeft()<i.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),n!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var o=this.items.length-1;o>=0;o--){var r=this.items[o],s=r.item[0],a=this._intersectsWithPointer(r);if(a&&s!=this.currentItem[0]&&this.placeholder[1==a?"next":"prev"]()[0]!=s&&!e.ui.contains(this.placeholder[0],s)&&("semi-dynamic"==this.options.type?!e.ui.contains(this.element[0],s):!0)){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,o=n.placeholder.offset();n.reverting=!0,e(this.helper).animate({left:o.left-this.offset.parent.left-n.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:o.top-this.offset.parent.top-n.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,t._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,t._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=e.left,s=r+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,d=this.offset.click.left,u=n+c>a&&l>n+c&&t+d>r&&s>t+d;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?u:r<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=i&&n,r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return o?this.floating?s&&"right"==s||"down"==r?2:1:r&&("down"==r?2:1):!1},_intersectsWithSides:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"==r&&n||"left"==r&&!n:o&&("down"==o&&i||"up"==o&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i=[],n=[],o=this._connectWith();if(o&&t)for(var r=o.length-1;r>=0;r--)for(var s=e(o[r]),a=s.length-1;a>=0;a--){var l=e.data(s[a],this.widgetName);l&&l!=this&&!l.options.disabled&&n.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}n.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var r=n.length-1;r>=0;r--)n[r][0].each(function(){i.push(this)});return e(i)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data("+this.widgetName+"-item)"),t=0;t<this.items.length;t++)for(var i=0;i<e.length;i++)e[i]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];
var i=this.items,n=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],o=this._connectWith();if(o&&this.ready)for(var r=o.length-1;r>=0;r--)for(var s=e(o[r]),a=s.length-1;a>=0;a--){var l=e.data(s[a],this.widgetName);l&&l!=this&&!l.options.disabled&&(n.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var r=n.length-1;r>=0;r--)for(var c=n[r][1],d=n[r][0],a=0,u=d.length;u>a;a++){var h=e(d[a]);h.data(this.widgetName+"-item",c),i.push({item:h,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var n=this.items[i];if(n.instance==this.currentContainer||!this.currentContainer||n.item[0]==this.currentItem[0]){var o=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;t||(n.width=o.outerWidth(),n.height=o.outerHeight());var r=o.offset();n.left=r.left,n.top=r.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var r=this.containers[i].element.offset();this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(t){var i=t||this,n=i.options;if(!n.placeholder||n.placeholder.constructor==String){var o=n.placeholder;n.placeholder={element:function(){var t=e(document.createElement(i.currentItem[0].nodeName)).addClass(o||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return o||(t.style.visibility="hidden"),t},update:function(e,t){(!o||n.forcePlaceholderSize)&&(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}}i.placeholder=e(n.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),n.placeholder.update(i,i.placeholder)},_contactContainers:function(t){for(var i=null,n=null,o=this.containers.length-1;o>=0;o--)if(!e.ui.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(i&&e.ui.contains(this.containers[o].element[0],i.element[0]))continue;i=this.containers[o],n=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",t,this._uiHash(this)),this.containers[o].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1;else if(this.currentContainer!=this.containers[n]){for(var r=1e4,s=null,a=this.positionAbs[this.containers[n].floating?"left":"top"],l=this.items.length-1;l>=0;l--)if(e.ui.contains(this.containers[n].element[0],this.items[l].item[0])){var c=this.containers[n].floating?this.items[l].item.offset().left:this.items[l].item.offset().top;Math.abs(c-a)<r&&(r=Math.abs(c-a),s=this.items[l],this.direction=c-a>0?"down":"up")}if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[n],s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[n].element,!0),this._trigger("change",t,this._uiHash()),this.containers[n]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(""==n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var i=e(t.containment)[0],n=e(t.containment).offset(),o="hidden"!=e(i).css("overflow");this.containment=[n.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0)-this.margins.top,n.left+(o?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(o?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,o=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*n),left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*n)}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var r=t.pageX,s=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),i.grid)){var a=this.originalPageY+Math.round((s-this.originalPageY)/i.grid[1])*i.grid[1];s=this.containment?a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3]?a-this.offset.click.top<this.containment[1]?a+i.grid[1]:a-i.grid[1]:a:a;var l=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0];r=this.containment?l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2]?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l:l}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this,r=this.counter;window.setTimeout(function(){r==o.counter&&o.refreshPositions(!n)},0)},_clear:function(t,i){this.reverting=!1;var n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var o in this._storedCSS)("auto"==this._storedCSS[o]||"static"==this._storedCSS[o])&&(this._storedCSS[o]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!i&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!i&&n.push(function(e){this._trigger("update",e,this._uiHash())}),!e.ui.contains(this.element[0],this.currentItem[0])){i||n.push(function(e){this._trigger("remove",e,this._uiHash())});for(var o=this.containers.length-1;o>=0;o--)e.ui.contains(this.containers[o].element[0],this.currentItem[0])&&!i&&(n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[o])),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[o])))}for(var o=this.containers.length-1;o>=0;o--)i||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",t,this._uiHash());for(var o=0;o<n.length;o++)n[o].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var o=0;o<n.length;o++)n[o].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.23"})}(jQuery),jQuery.effects||function(e,t){function i(t){var i;return t&&t.constructor==Array&&3==t.length?t:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)]:(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3])]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:(i=/rgba\(0, 0, 0, 0\)/.exec(t))?c.transparent:c[e.trim(t).toLowerCase()]}function n(t,n){var o;do{if(o=(e.curCSS||e.css)(t,n),""!=o&&"transparent"!=o||e.nodeName(t,"body"))break;n="backgroundColor"}while(t=t.parentNode);return i(o)}function o(){var e,t,i=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,n={};if(i&&i.length&&i[0]&&i[i[0]])for(var o=i.length;o--;)e=i[o],"string"==typeof i[e]&&(t=e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n[t]=i[e]);else for(e in i)"string"==typeof i[e]&&(n[e]=i[e]);return n}function r(t){var i,n;for(i in t)n=t[i],(null==n||e.isFunction(n)||i in u||/scrollbar/.test(i)||!/color/i.test(i)&&isNaN(parseFloat(n)))&&delete t[i];return t}function s(e,t){var i,n={_:0};for(i in t)e[i]!=t[i]&&(n[i]=t[i]);return n}function a(t,i,n,o){return"object"==typeof t&&(o=i,n=null,i=t,t=i.effect),e.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(o=n,n=i,i={}),e.isFunction(n)&&(o=n,n=null),i=i||{},n=n||i.duration,n=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,o=o||i.complete,[t,i,n,o]}function l(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects[t]?!1:!0}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,o){e.fx.step[o]=function(e){e.colorInit||(e.start=n(e.elem,o),e.end=i(e.end),e.colorInit=!0),e.elem.style[o]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},d=["add","remove","toggle"],u={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,i,n,a){return e.isFunction(n)&&(a=n,n=null),this.queue(function(){var l,c=e(this),u=c.attr("style")||" ",h=r(o.call(this)),f=c.attr("class")||"";e.each(d,function(e,i){t[i]&&c[i+"Class"](t[i])}),l=r(o.call(this)),c.attr("class",f),c.animate(s(h,l),{queue:!1,duration:i,easing:n,complete:function(){e.each(d,function(e,i){t[i]&&c[i+"Class"](t[i])}),"object"==typeof c.attr("style")?(c.attr("style").cssText="",c.attr("style").cssText=u):c.attr("style",u),a&&a.apply(this,arguments),e.dequeue(this)}})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,n,o){return i?e.effects.animateClass.apply(this,[{add:t},i,n,o]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,i,n,o){return i?e.effects.animateClass.apply(this,[{remove:t},i,n,o]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(i,n,o,r,s){return"boolean"==typeof n||n===t?o?e.effects.animateClass.apply(this,[n?{add:i}:{remove:i},o,r,s]):this._toggleClass(i,n):e.effects.animateClass.apply(this,[{toggle:i},n,o,r])},switchClass:function(t,i,n,o,r){return e.effects.animateClass.apply(this,[{add:i,remove:t},n,o,r])}}),e.extend(e.effects,{version:"1.8.23",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data("ec.storage."+t[i],e[0].style[t[i]])},restore:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.css(t[i],e.data("ec.storage."+t[i]))},setMode:function(e,t){return"toggle"==t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o=document.activeElement;try{o.id}catch(r){o=document.body}return t.wrap(n),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),n=t.parent(),"static"==t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(i).show()},removeWrapper:function(t){var i,n=document.activeElement;return t.parent().is(".ui-effects-wrapper")?(i=t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus(),i):t},setTransition:function(t,i,n,o){return o=o||{},e.each(i,function(e,i){var r=t.cssUnit(i);r[0]>0&&(o[i]=r[0]*n+r[1])}),o}}),e.fn.extend({effect:function(t){var i=a.apply(this,arguments),n={options:i[1],duration:i[2],callback:i[3]},o=n.options.mode,r=e.effects[t];return e.fx.off||!r?o?this[o](n.duration,n.callback):this.each(function(){n.callback&&n.callback.call(this)}):r.call(this,n)},_show:e.fn.show,show:function(e){if(l(e))return this._show.apply(this,arguments);var t=a.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:e.fn.hide,hide:function(e){if(l(e))return this._hide.apply(this,arguments);var t=a.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(l(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var i=a.apply(this,arguments);return i[1].mode="toggle",this.effect.apply(this,i)},cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}});var h={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){h[t]=function(t){return Math.pow(t,e+2)}}),e.extend(h,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(h,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:i(-2*e+2)/-2+1}})}(jQuery),function(e){e.effects.blind=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],o=e.effects.setMode(i,t.options.mode||"hide"),r=t.options.direction||"vertical";e.effects.save(i,n),i.show();var s=e.effects.createWrapper(i).css({overflow:"hidden"}),a="vertical"==r?"height":"width",l="vertical"==r?s.height():s.width();"show"==o&&s.css(a,0);var c={};c[a]="show"==o?l:0,s.animate(c,t.duration,t.options.easing,function(){"hide"==o&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(e){e.effects.bounce=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],o=e.effects.setMode(i,t.options.mode||"effect"),r=t.options.direction||"up",s=t.options.distance||20,a=t.options.times||5,l=t.duration||250;/show|hide/.test(o)&&n.push("opacity"),e.effects.save(i,n),i.show(),e.effects.createWrapper(i);var c="up"==r||"down"==r?"top":"left",d="up"==r||"left"==r?"pos":"neg",s=t.options.distance||("top"==c?i.outerHeight(!0)/3:i.outerWidth(!0)/3);if("show"==o&&i.css("opacity",0).css(c,"pos"==d?-s:s),"hide"==o&&(s/=2*a),"hide"!=o&&a--,"show"==o){var u={opacity:1};u[c]=("pos"==d?"+=":"-=")+s,i.animate(u,l/2,t.options.easing),s/=2,a--}for(var h=0;a>h;h++){var f={},p={};f[c]=("pos"==d?"-=":"+=")+s,p[c]=("pos"==d?"+=":"-=")+s,i.animate(f,l/2,t.options.easing).animate(p,l/2,t.options.easing),s="hide"==o?2*s:s/2}if("hide"==o){var u={opacity:0};u[c]=("pos"==d?"-=":"+=")+s,i.animate(u,l/2,t.options.easing,function(){i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)})}else{var f={},p={};f[c]=("pos"==d?"-=":"+=")+s,p[c]=("pos"==d?"+=":"-=")+s,i.animate(f,l/2,t.options.easing).animate(p,l/2,t.options.easing,function(){e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)})}i.queue("fx",function(){i.dequeue()}),i.dequeue()})}}(jQuery),function(e){e.effects.clip=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(i,t.options.mode||"hide"),r=t.options.direction||"vertical";e.effects.save(i,n),i.show();var s=e.effects.createWrapper(i).css({overflow:"hidden"}),a="IMG"==i[0].tagName?s:i,l={size:"vertical"==r?"height":"width",position:"vertical"==r?"top":"left"},c="vertical"==r?a.height():a.width();"show"==o&&(a.css(l.size,0),a.css(l.position,c/2));var d={};d[l.size]="show"==o?c:0,d[l.position]="show"==o?0:c/2,a.animate(d,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==o&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.drop=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right","opacity"],o=e.effects.setMode(i,t.options.mode||"hide"),r=t.options.direction||"left";e.effects.save(i,n),i.show(),e.effects.createWrapper(i);var s="up"==r||"down"==r?"top":"left",a="up"==r||"left"==r?"pos":"neg",l=t.options.distance||("top"==s?i.outerHeight(!0)/2:i.outerWidth(!0)/2);"show"==o&&i.css("opacity",0).css(s,"pos"==a?-l:l);var c={opacity:"show"==o?1:0};c[s]=("show"==o?"pos"==a?"+=":"-=":"pos"==a?"-=":"+=")+l,i.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==o&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.explode=function(t){return this.queue(function(){var i=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,n=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode="toggle"==t.options.mode?e(this).is(":visible")?"hide":"show":t.options.mode;var o=e(this).show().css("visibility","hidden"),r=o.offset();r.top-=parseInt(o.css("marginTop"),10)||0,r.left-=parseInt(o.css("marginLeft"),10)||0;for(var s=o.outerWidth(!0),a=o.outerHeight(!0),l=0;i>l;l++)for(var c=0;n>c;c++)o.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-c*(s/n),top:-l*(a/i)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:s/n,height:a/i,left:r.left+c*(s/n)+("show"==t.options.mode?(c-Math.floor(n/2))*(s/n):0),top:r.top+l*(a/i)+("show"==t.options.mode?(l-Math.floor(i/2))*(a/i):0),opacity:"show"==t.options.mode?0:1}).animate({left:r.left+c*(s/n)+("show"==t.options.mode?0:(c-Math.floor(n/2))*(s/n)),top:r.top+l*(a/i)+("show"==t.options.mode?0:(l-Math.floor(i/2))*(a/i)),opacity:"show"==t.options.mode?1:0},t.duration||500);setTimeout(function(){"show"==t.options.mode?o.css({visibility:"visible"}):o.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(o[0]),o.dequeue(),e("div.ui-effects-explode").remove()},t.duration||500)})}}(jQuery),function(e){e.effects.fade=function(t){return this.queue(function(){var i=e(this),n=e.effects.setMode(i,t.options.mode||"hide");i.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.fold=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],o=e.effects.setMode(i,t.options.mode||"hide"),r=t.options.size||15,s=!!t.options.horizFirst,a=t.duration?t.duration/2:e.fx.speeds._default/2;e.effects.save(i,n),i.show();var l=e.effects.createWrapper(i).css({overflow:"hidden"}),c="show"==o!=s,d=c?["width","height"]:["height","width"],u=c?[l.width(),l.height()]:[l.height(),l.width()],h=/([0-9]+)%/.exec(r);h&&(r=parseInt(h[1],10)/100*u["hide"==o?0:1]),"show"==o&&l.css(s?{height:0,width:r}:{height:r,width:0});var f={},p={};f[d[0]]="show"==o?u[0]:r,p[d[1]]="show"==o?u[1]:0,l.animate(f,a,t.options.easing).animate(p,a,t.options.easing,function(){"hide"==o&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(e){e.effects.highlight=function(t){return this.queue(function(){var i=e(this),n=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(i,t.options.mode||"show"),r={backgroundColor:i.css("backgroundColor")};"hide"==o&&(r.opacity=0),e.effects.save(i,n),i.show().css({backgroundImage:"none",backgroundColor:t.options.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==o&&i.hide(),e.effects.restore(i,n),"show"==o&&!e.support.opacity&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.pulsate=function(t){return this.queue(function(){var i=e(this),n=e.effects.setMode(i,t.options.mode||"show"),o=2*(t.options.times||5)-1,r=t.duration?t.duration/2:e.fx.speeds._default/2,s=i.is(":visible"),a=0;s||(i.css("opacity",0).show(),a=1),("hide"==n&&s||"show"==n&&!s)&&o--;for(var l=0;o>l;l++)i.animate({opacity:a},r,t.options.easing),a=(a+1)%2;i.animate({opacity:a},r,t.options.easing,function(){0==a&&i.hide(),t.callback&&t.callback.apply(this,arguments)}),i.queue("fx",function(){i.dequeue()}).dequeue()})}}(jQuery),function(e){e.effects.puff=function(t){return this.queue(function(){var i=e(this),n=e.effects.setMode(i,t.options.mode||"hide"),o=parseInt(t.options.percent,10)||150,r=o/100,s={height:i.height(),width:i.width()};e.extend(t.options,{fade:!0,mode:n,percent:"hide"==n?o:100,from:"hide"==n?s:{height:s.height*r,width:s.width*r}}),i.effect("scale",t.options,t.duration,t.callback),i.dequeue()})},e.effects.scale=function(t){return this.queue(function(){var i=e(this),n=e.extend(!0,{},t.options),o=e.effects.setMode(i,t.options.mode||"effect"),r=parseInt(t.options.percent,10)||(0==parseInt(t.options.percent,10)?0:"hide"==o?0:100),s=t.options.direction||"both",a=t.options.origin;"effect"!=o&&(n.origin=a||["middle","center"],n.restore=!0);var l={height:i.height(),width:i.width()};i.from=t.options.from||("show"==o?{height:0,width:0}:l);var c={y:"horizontal"!=s?r/100:1,x:"vertical"!=s?r/100:1};i.to={height:l.height*c.y,width:l.width*c.x},t.options.fade&&("show"==o&&(i.from.opacity=0,i.to.opacity=1),"hide"==o&&(i.from.opacity=1,i.to.opacity=0)),n.from=i.from,n.to=i.to,n.mode=o,i.effect("size",n,t.duration,t.callback),i.dequeue()})},e.effects.size=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right","width","height","overflow","opacity"],o=["position","top","bottom","left","right","overflow","opacity"],r=["width","height","overflow"],s=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=e.effects.setMode(i,t.options.mode||"effect"),d=t.options.restore||!1,u=t.options.scale||"both",h=t.options.origin,f={height:i.height(),width:i.width()};if(i.from=t.options.from||f,i.to=t.options.to||f,h){var p=e.effects.getBaseline(h,f);i.from.top=(f.height-i.from.height)*p.y,i.from.left=(f.width-i.from.width)*p.x,i.to.top=(f.height-i.to.height)*p.y,i.to.left=(f.width-i.to.width)*p.x}var m={from:{y:i.from.height/f.height,x:i.from.width/f.width},to:{y:i.to.height/f.height,x:i.to.width/f.width}};("box"==u||"both"==u)&&(m.from.y!=m.to.y&&(n=n.concat(a),i.from=e.effects.setTransition(i,a,m.from.y,i.from),i.to=e.effects.setTransition(i,a,m.to.y,i.to)),m.from.x!=m.to.x&&(n=n.concat(l),i.from=e.effects.setTransition(i,l,m.from.x,i.from),i.to=e.effects.setTransition(i,l,m.to.x,i.to))),("content"==u||"both"==u)&&m.from.y!=m.to.y&&(n=n.concat(s),i.from=e.effects.setTransition(i,s,m.from.y,i.from),i.to=e.effects.setTransition(i,s,m.to.y,i.to)),e.effects.save(i,d?n:o),i.show(),e.effects.createWrapper(i),i.css("overflow","hidden").css(i.from),("content"==u||"both"==u)&&(a=a.concat(["marginTop","marginBottom"]).concat(s),l=l.concat(["marginLeft","marginRight"]),r=n.concat(a).concat(l),i.find("*[width]").each(function(){var i=e(this);d&&e.effects.save(i,r);var n={height:i.height(),width:i.width()};i.from={height:n.height*m.from.y,width:n.width*m.from.x},i.to={height:n.height*m.to.y,width:n.width*m.to.x},m.from.y!=m.to.y&&(i.from=e.effects.setTransition(i,a,m.from.y,i.from),i.to=e.effects.setTransition(i,a,m.to.y,i.to)),m.from.x!=m.to.x&&(i.from=e.effects.setTransition(i,l,m.from.x,i.from),i.to=e.effects.setTransition(i,l,m.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.options.easing,function(){d&&e.effects.restore(i,r)})})),i.animate(i.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){0===i.to.opacity&&i.css("opacity",i.from.opacity),"hide"==c&&i.hide(),e.effects.restore(i,d?n:o),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.shake=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],o=(e.effects.setMode(i,t.options.mode||"effect"),t.options.direction||"left"),r=t.options.distance||20,s=t.options.times||3,a=t.duration||t.options.duration||140;e.effects.save(i,n),i.show(),e.effects.createWrapper(i);var l="up"==o||"down"==o?"top":"left",c="up"==o||"left"==o?"pos":"neg",d={},u={},h={};d[l]=("pos"==c?"-=":"+=")+r,u[l]=("pos"==c?"+=":"-=")+2*r,h[l]=("pos"==c?"-=":"+=")+2*r,i.animate(d,a,t.options.easing);for(var f=1;s>f;f++)i.animate(u,a,t.options.easing).animate(h,a,t.options.easing);i.animate(u,a,t.options.easing).animate(d,a/2,t.options.easing,function(){e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)}),i.queue("fx",function(){i.dequeue()}),i.dequeue()})}}(jQuery),function(e){e.effects.slide=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],o=e.effects.setMode(i,t.options.mode||"show"),r=t.options.direction||"left";
e.effects.save(i,n),i.show(),e.effects.createWrapper(i).css({overflow:"hidden"});var s="up"==r||"down"==r?"top":"left",a="up"==r||"left"==r?"pos":"neg",l=t.options.distance||("top"==s?i.outerHeight(!0):i.outerWidth(!0));"show"==o&&i.css(s,"pos"==a?isNaN(l)?"-"+l:-l:l);var c={};c[s]=("show"==o?"pos"==a?"+=":"-=":"pos"==a?"-=":"+=")+l,i.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==o&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.transfer=function(t){return this.queue(function(){var i=e(this),n=e(t.options.to),o=n.offset(),r={top:o.top,left:o.left,height:n.innerHeight(),width:n.innerWidth()},s=i.offset(),a=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:s.top,left:s.left,height:i.innerHeight(),width:i.innerWidth(),position:"absolute"}).animate(r,t.duration,t.options.easing,function(){a.remove(),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(e){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,i=t.options;if(t.running=0,t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),t.headers=t.element.find(i.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){i.disabled||e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){i.disabled||e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){i.disabled||e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){i.disabled||e(this).removeClass("ui-state-focus")}),t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),i.navigation){var n=t.element.find("a").filter(i.navigationFilter).eq(0);if(n.length){var o=n.closest(".ui-accordion-header");t.active=o.length?o:n.closest(".ui-accordion-content").prev()}}t.active=t._findActive(t.active||i.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),t.active.next().addClass("ui-accordion-content-active"),t._createIcons(),t.resize(),t.element.attr("role","tablist"),t.headers.attr("role","tab").bind("keydown.accordion",function(e){return t._keydown(e)}).next().attr("role","tabpanel"),t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0),e.browser.safari||t.headers.find("a").attr("tabIndex",-1),i.event&&t.headers.bind(i.event.split(" ").join(".accordion ")+".accordion",function(e){t._clickHandler.call(t,e,this),e.preventDefault()})},_createIcons:function(){var t=this.options;t.icons&&(e("<span></span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var i=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(t.autoHeight||t.fillHeight)&&i.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"active"==t&&this.activate(i),"icons"==t&&(this._destroyIcons(),i&&this._createIcons()),"disabled"==t&&this.headers.add(this.headers.next())[i?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(!(this.options.disabled||t.altKey||t.ctrlKey)){var i=e.ui.keyCode,n=this.headers.length,o=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(o+1)%n];break;case i.LEFT:case i.UP:r=this.headers[(o-1+n)%n];break;case i.SPACE:case i.ENTER:this._clickHandler({target:t.target},t.target),t.preventDefault()}return r?(e(t.target).attr("tabIndex",-1),e(r).attr("tabIndex",0),r.focus(),!1):!0}},resize:function(){var t,i=this.options;if(i.fillSpace){if(e.browser.msie){var n=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}t=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",n),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else i.autoHeight&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).height("").height())}).height(t));return this},activate:function(e){this.options.active=e;var t=this._findActive(e)[0];return this._clickHandler({target:t},t),this},_findActive:function(t){return t?"number"==typeof t?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,i){var n=this.options;if(!n.disabled){if(!t.target){if(!n.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(n.icons.headerSelected).addClass(n.icons.header),this.active.next().addClass("ui-accordion-content-active");var o=this.active.next(),r={options:n,newHeader:e([]),oldHeader:n.active,newContent:e([]),oldContent:o},s=this.active=e([]);return this._toggle(s,o,r),void 0}var a=e(t.currentTarget||i),l=a[0]===this.active[0];if(n.active=n.collapsible&&l?!1:this.headers.index(a),!(this.running||!n.collapsible&&l)){var c=this.active,s=a.next(),o=this.active.next(),r={options:n,newHeader:l&&n.collapsible?e([]):a,oldHeader:this.active,newContent:l&&n.collapsible?e([]):s,oldContent:o},d=this.headers.index(this.active[0])>this.headers.index(a[0]);this.active=l?e([]):a,this._toggle(s,o,r,l,d),c.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(n.icons.headerSelected).addClass(n.icons.header),l||(a.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(n.icons.header).addClass(n.icons.headerSelected),a.next().addClass("ui-accordion-content-active"))}}},_toggle:function(t,i,n,o,r){var s=this,a=s.options;s.toShow=t,s.toHide=i,s.data=n;var l=function(){return s?s._completed.apply(s,arguments):void 0};if(s._trigger("changestart",null,s.data),s.running=0===i.size()?t.size():i.size(),a.animated){var c={};c=a.collapsible&&o?{toShow:e([]),toHide:i,complete:l,down:r,autoHeight:a.autoHeight||a.fillSpace}:{toShow:t,toHide:i,complete:l,down:r,autoHeight:a.autoHeight||a.fillSpace},a.proxied||(a.proxied=a.animated),a.proxiedDuration||(a.proxiedDuration=a.duration),a.animated=e.isFunction(a.proxied)?a.proxied(c):a.proxied,a.duration=e.isFunction(a.proxiedDuration)?a.proxiedDuration(c):a.proxiedDuration;var d=e.ui.accordion.animations,u=a.duration,h=a.animated;h&&!d[h]&&!e.easing[h]&&(h="slide"),d[h]||(d[h]=function(e){this.slide(e,{easing:h,duration:u||700})}),d[h](c)}else a.collapsible&&o?t.toggle():(i.hide(),t.show()),l(!0);i.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(e){this.running=e?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),e.extend(e.ui.accordion,{version:"1.8.23",animations:{slide:function(t,i){if(t=e.extend({easing:"swing",duration:300},t,i),!t.toHide.size())return t.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},t),void 0;if(!t.toShow.size())return t.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},t),void 0;var n,o=t.toShow.css("overflow"),r=0,s={},a={},l=["height","paddingTop","paddingBottom"],c=t.toShow;n=c[0].style.width,c.width(c.parent().width()-parseFloat(c.css("paddingLeft"))-parseFloat(c.css("paddingRight"))-(parseFloat(c.css("borderLeftWidth"))||0)-(parseFloat(c.css("borderRightWidth"))||0)),e.each(l,function(i,n){a[n]="hide";var o=(""+e.css(t.toShow[0],n)).match(/^([\d+-.]+)(.*)$/);s[n]={value:o[1],unit:o[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(a,{step:function(e,i){"height"==i.prop&&(r=0===i.end-i.start?0:(i.now-i.start)/(i.end-i.start)),t.toShow[0].style[i.prop]=r*s[i.prop].value+s[i.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css({width:n,overflow:o}),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t,i=this,n=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(!i.options.disabled&&!i.element.propAttr("readOnly")){t=!1;var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:i._move("previousPage",n);break;case o.PAGE_DOWN:i._move("nextPage",n);break;case o.UP:i._keyEvent("previous",n);break;case o.DOWN:i._keyEvent("next",n);break;case o.ENTER:case o.NUMPAD_ENTER:i.menu.active&&(t=!0,n.preventDefault());case o.TAB:if(!i.menu.active)return;i.menu.select(n);break;case o.ESCAPE:i.element.val(i.term),i.close(n);break;default:clearTimeout(i.searching),i.searching=setTimeout(function(){i.term!=i.element.val()&&(i.selectedItem=null,i.search(null,n))},i.options.delay)}}}).bind("keypress.autocomplete",function(e){t&&(t=!1,e.preventDefault())}).bind("focus.autocomplete",function(){i.options.disabled||(i.selectedItem=null,i.previous=i.element.val())}).bind("blur.autocomplete",function(e){i.options.disabled||(clearTimeout(i.searching),i.closing=setTimeout(function(){i.close(e),i._change(e)},150))}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",n)[0]).mousedown(function(t){var n=i.menu.element[0];e(t.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(t){t.target!==i.element[0]&&t.target!==n&&!e.ui.contains(n,t.target)&&i.close()})},1),setTimeout(function(){clearTimeout(i.closing)},13)}).menu({focus:function(e,t){var n=t.item.data("item.autocomplete");!1!==i._trigger("focus",e,{item:n})&&/^key/.test(e.originalEvent.type)&&i.element.val(n.value)},selected:function(e,t){var o=t.item.data("item.autocomplete"),r=i.previous;i.element[0]!==n.activeElement&&(i.element.focus(),i.previous=r,setTimeout(function(){i.previous=r,i.selectedItem=o},1)),!1!==i._trigger("select",e,{item:o})&&i.element.val(o.value),i.term=i.element.val(),i.close(e),i.selectedItem=o},blur:function(){i.menu.element.is(":visible")&&i.element.val()!==i.term&&i.element.val(i.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),i.beforeunloadHandler=function(){i.element.removeAttr("autocomplete")},e(window).bind("beforeunload",i.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(e(i||"body",this.element[0].ownerDocument)[0]),"disabled"===t&&i&&this.xhr&&this.xhr.abort()},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,o){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},search:function(e,t){return e=null!=e?e:this.element.val(),this.term=this.element.val(),e.length<this.options.minLength?this.close(t):(clearTimeout(this.closing),this._trigger("search",t)!==!1?this._search(e):void 0)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(n){i===t&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close()},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.deactivate(),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItem(t,i)})},_renderItem:function(t,i){return e("<li></li>").data("item.autocomplete",i).append(e("<a></a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)?(this.element.val(this.term),this.menu.deactivate(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(i){e(i.target).closest(".ui-menu-item a").length&&(i.preventDefault(),t.select(i))}),this.refresh()},refresh:function(){var t=this,i=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");i.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(i){t.activate(i,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){if(this.deactivate(),this.hasScroll()){var i=t.offset().top-this.element.offset().top,n=this.element.scrollTop(),o=this.element.height();0>i?this.element.scrollTop(n+i):i>=o&&this.element.scrollTop(n+i-o+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,i){if(!this.active)return this.activate(i,this.element.children(t)),void 0;var n=this.active[e+"All"](".ui-menu-item").eq(0);n.length?this.activate(i,n):this.activate(i,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last())return this.activate(t,this.element.children(".ui-menu-item:first")),void 0;var i=this.active.offset().top,n=this.element.height(),o=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i-n+e(this).height();return 10>t&&t>-10});o.length||(o=this.element.children(".ui-menu-item:last")),this.activate(t,o)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first())return this.activate(t,this.element.children(".ui-menu-item:last")),void 0;var i=this.active.offset().top,n=this.element.height(),o=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i+n-e(this).height();return 10>t&&t>-10});o.length||(o=this.element.children(".ui-menu-item:first")),this.activate(t,o)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),function(e){var t,i,n,o,r="ui-button ui-widget ui-state-default ui-corner-all",s="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},c=function(t){var i=t.name,n=t.form,o=e([]);return i&&(o=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),o};e.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var s=this,a=this.options,d="checkbox"===this.type||"radio"===this.type,u="ui-state-hover"+(d?"":" ui-state-active"),h="ui-state-focus";null===a.label&&(a.label=this.buttonElement.html()),this.buttonElement.addClass(r).attr("role","button").bind("mouseenter.button",function(){a.disabled||(e(this).addClass("ui-state-hover"),this===t&&e(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){a.disabled||e(this).removeClass(u)}).bind("click.button",function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus.button",function(){s.buttonElement.addClass(h)}).bind("blur.button",function(){s.buttonElement.removeClass(h)}),d&&(this.element.bind("change.button",function(){o||s.refresh()}),this.buttonElement.bind("mousedown.button",function(e){a.disabled||(o=!1,i=e.pageX,n=e.pageY)}).bind("mouseup.button",function(e){a.disabled||(i!==e.pageX||n!==e.pageY)&&(o=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return a.disabled||o?!1:(e(this).toggleClass("ui-state-active"),s.buttonElement.attr("aria-pressed",s.element[0].checked),void 0)}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(a.disabled||o)return!1;e(this).addClass("ui-state-active"),s.buttonElement.attr("aria-pressed","true");var t=s.element[0];c(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){return a.disabled?!1:(e(this).addClass("ui-state-active"),t=this,e(document).one("mouseup",function(){t=null}),void 0)}).bind("mouseup.button",function(){return a.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown.button",function(t){return a.disabled?!1:((t.keyCode==e.ui.keyCode.SPACE||t.keyCode==e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup.button",function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){if(this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type){var e=this.element.parents().filter(":last"),t="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible");var i=this.element.is(":checked");i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",i)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(r+" "+s+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){return e.Widget.prototype._setOption.apply(this,arguments),"disabled"===t?(i?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(a),i=e("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,o=n.primary&&n.secondary,r=[];n.primary||n.secondary?(this.options.text&&r.push("ui-button-text-icon"+(o?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(r.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",i))):r.push("ui-button-text-only"),t.addClass(r.join(" "))}}),e.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,i){"disabled"===t&&this.buttons.button("option",t,i),e.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),e.Widget.prototype.destroy.call(this)}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.bind("mouseout",function(e){var i=$(e.target).closest(t);i.length&&i.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(i){var n=$(i.target).closest(t);!$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])&&n.length&&(n.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),n.addClass("ui-state-hover"),n.hasClass("ui-datepicker-prev")&&n.addClass("ui-datepicker-prev-hover"),n.hasClass("ui-datepicker-next")&&n.addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var i in t)(null==t[i]||t[i]==undefined)&&(e[i]=t[i]);return e}function isArray(e){return e&&($.browser.safari&&"object"==typeof e&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.23"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var i=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[n?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var o=this._get(t,"showOn");if(("focus"==o||"both"==o)&&e.focus(this._showDatepicker),"button"==o||"both"==o){var r=this._get(t,"buttonText"),s=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:s,alt:r,title:r}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==s?r:$("<img/>").attr({src:s,alt:r,title:r}))),e[n?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var n=function(e){for(var t=0,i=0,n=0;n<e.length;n++)e[n].length>t&&(t=e[n].length,i=n);return i};t.setMonth(n(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(n(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,n,o){var r=this._dialogInst;if(!r){this.uuid+=1;var s="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+s+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),r=this._dialogInst=this._newInst(this._dialogInput,!1),r.settings={},$.data(this._dialogInput[0],PROP_NAME,r)}if(extendRemove(r.settings,n||{}),t=t&&t.constructor==Date?this._formatDate(r,t):t,this._dialogInput.val(t),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,!this._pos){var a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop;
this._pos=[a/2-100+c,l/2-150+d]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),r.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,r),this},_destroyDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==n?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==n||"span"==n)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==n||"span"==n){var o=t.children("."+this._inlineClass);o.children().removeClass("ui-state-disabled"),o.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==n||"span"==n){var o=t.children("."+this._inlineClass);o.children().addClass("ui-state-disabled"),o.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):n?"all"==t?$.extend({},n.settings):this._get(n,t):null;var o=t||{};if("string"==typeof t&&(o={},o[t]=i),n){this._curInst==n&&this._hideDatepicker();var r=this._getDateDatepicker(e,!0),s=this._getMinMaxDate(n,"min"),a=this._getMinMaxDate(n,"max");extendRemove(n.settings,o),null!==s&&o.dateFormat!==undefined&&o.minDate===undefined&&(n.settings.minDate=this._formatDate(n,s)),null!==a&&o.dateFormat!==undefined&&o.maxDate===undefined&&(n.settings.maxDate=this._formatDate(n,a)),this._attachments($(e),n),this._autoSize(n),this._setDate(n,r),this._updateAlternate(n),this._updateDatepicker(n)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),i=!0,n=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var o=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);o[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,o[0]);var r=$.datepicker._get(t,"onSelect");if(r){var s=$.datepicker._formatDate(t);r.apply(t.input?t.input[0]:null,[s,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),n=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var i=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));i&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(n){$.datepicker.log(n)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(t,"beforeShow"),n=i?i.apply(e,[e,t]):{};if(n!==!1){extendRemove(t.settings,n),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var o=!1;$(e).parents().each(function(){return o|="fixed"==$(this).css("position"),!o}),o&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var r={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),r=$.datepicker._checkOffset(t,r,o),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),!t.inline){var s=$.datepicker._get(t,"showAnim"),a=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var i=$.datepicker._getBorders(t.dpDiv);e.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[s]?t.dpDiv.show(s,$.datepicker._get(t,"showOptions"),a,l):t.dpDiv[s||"show"](s?a:null,l),(!s||!a)&&l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){var t=this;t.maxRows=4;var i=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-i[0],top:-i[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var o=this._getNumberOfMonths(e),r=o[1],s=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&e.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",s*r+"em"),e.dpDiv[(1!=o[0]||1!=o[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var a=e.yearshtml;setTimeout(function(){a===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),a=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,a=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?n-r:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+s?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>a&&a>n?Math.abs(t.left+n-a):0),t.top-=Math.min(t.top,t.top+o>l&&l>o?Math.abs(o+s):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];var n=$(e).offset();return[n.left,n.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var i=this._get(t,"showAnim"),n=this._get(t,"duration"),o=function(){$.datepicker._tidyDialog(t)};$.effects&&$.effects[i]?t.dpDiv.hide(i,$.datepicker._get(t,"showOptions"),n,o):t.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?n:null,o),i||o(),this._datepickerShowing=!1;var r=this._get(t,"onClose");r&&r.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),i=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var n=$(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,t+("M"==i?this._get(o,"showCurrentAtPos"):0),i),this._updateDatepicker(o))},_gotoToday:function(e){var t=$(e),i=this._getInst(t[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var n=new Date;i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()}this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var n=$(e),o=this._getInst(n[0]);o["selected"+("M"==i?"Month":"Year")]=o["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,t,i,n){var o=$(e);if(!$(n).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(o[0])){var r=this._getInst(o[0]);r.selectedDay=r.currentDay=$("a",n).html(),r.selectedMonth=r.currentMonth=t,r.selectedYear=r.currentYear=i,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]),this._selectDate(t,"")},_selectDate:function(e,t){var i=$(e),n=this._getInst(i[0]);t=null!=t?t:this._formatDate(n),n.input&&n.input.val(t),this._updateAlternate(n);var o=this._get(n,"onSelect");o?o.apply(n.input?n.input[0]:null,[t,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),o=this.formatDate(i,n,this._getFormatConfig(e));$(t).each(function(){$(this).val(o)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(e,t,i){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var n=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;n="string"!=typeof n?n:(new Date).getFullYear()%100+parseInt(n,10);for(var o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,d=-1,u=-1,h=!1,f=function(t){var i=y+1<e.length&&e.charAt(y+1)==t;return i&&y++,i},p=function(e){var i=f(e),n="@"==e?14:"!"==e?20:"y"==e&&i?4:"o"==e?3:2,o=new RegExp("^\\d{1,"+n+"}"),r=t.substring(v).match(o);if(!r)throw"Missing number at position "+v;return v+=r[0].length,parseInt(r[0],10)},m=function(e,i,n){var o=$.map(f(e)?n:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),r=-1;if($.each(o,function(e,i){var n=i[1];return t.substr(v,n.length).toLowerCase()==n.toLowerCase()?(r=i[0],v+=n.length,!1):void 0}),-1!=r)return r+1;throw"Unknown name at position "+v},g=function(){if(t.charAt(v)!=e.charAt(y))throw"Unexpected literal at position "+v;v++},v=0,y=0;y<e.length;y++)if(h)"'"!=e.charAt(y)||f("'")?g():h=!1;else switch(e.charAt(y)){case"d":d=p("d");break;case"D":m("D",o,r);break;case"o":u=p("o");break;case"m":c=p("m");break;case"M":c=m("M",s,a);break;case"y":l=p("y");break;case"@":var b=new Date(p("@"));l=b.getFullYear(),c=b.getMonth()+1,d=b.getDate();break;case"!":var b=new Date((p("!")-this._ticksTo1970)/1e4);l=b.getFullYear(),c=b.getMonth()+1,d=b.getDate();break;case"'":f("'")?g():h=!0;break;default:g()}if(v<t.length)throw"Extra/unparsed characters found in date: "+t.substring(v);if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(n>=l?0:-100)),u>-1)for(c=1,d=u;;){var w=this._getDaysInMonth(l,c-1);if(w>=d)break;c++,d-=w}var b=this._daylightSavingAdjust(new Date(l,c-1,d));if(b.getFullYear()!=l||b.getMonth()+1!=c||b.getDate()!=d)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,s=(i?i.monthNames:null)||this._defaults.monthNames,a=function(t){var i=h+1<e.length&&e.charAt(h+1)==t;return i&&h++,i},l=function(e,t,i){var n=""+t;if(a(e))for(;n.length<i;)n="0"+n;return n},c=function(e,t,i,n){return a(e)?n[t]:i[t]},d="",u=!1;if(t)for(var h=0;h<e.length;h++)if(u)"'"!=e.charAt(h)||a("'")?d+=e.charAt(h):u=!1;else switch(e.charAt(h)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=c("D",t.getDay(),n,o);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=c("M",t.getMonth(),r,s);break;case"y":d+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":a("'")?d+="'":u=!0;break;default:d+=e.charAt(h)}return d},_possibleChars:function(e){for(var t="",i=!1,n=function(t){var i=o+1<e.length&&e.charAt(o+1)==t;return i&&o++,i},o=0;o<e.length;o++)if(i)"'"!=e.charAt(o)||n("'")?t+=e.charAt(o):i=!1;else switch(e.charAt(o)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":n("'")?t+="'":i=!0;break;default:t+=e.charAt(o)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,n,o=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null;i=n=this._getDefaultDate(e);var s=this._getFormatConfig(e);try{i=this.parseDate(o,r,s)||n}catch(a){this.log(a),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,i){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},o=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(i){}for(var n=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),r=n.getMonth(),s=n.getDate(),a=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(t);l;){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(o,r));break;case"y":case"Y":o+=parseInt(l[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(o,r))}l=a.exec(t)}return new Date(o,r,s)},r=null==t||""===t?i:"string"==typeof t?o(t):"number"==typeof t?isNaN(t)?i:n(t):new Date(t.getTime());return r=r&&"Invalid Date"==r.toString()?i:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,o=e.selectedMonth,r=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth(),e.drawYear=e.selectedYear=e.currentYear=s.getFullYear(),(o!=e.selectedMonth||r!=e.selectedYear)&&!i&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),n=this._get(e,"showButtonPanel"),o=this._get(e,"hideIfNoPrevNext"),r=this._get(e,"navigationAsDateFormat"),s=this._getNumberOfMonths(e),a=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=s[0]||1!=s[1],d=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),u=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),f=e.drawMonth-a,p=e.drawYear;if(0>f&&(f+=12,p--),h){var m=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-s[0]*s[1]+1,h.getDate()));for(m=u&&u>m?u:m;this._daylightSavingAdjust(new Date(p,f,1))>m;)f--,0>f&&(f=11,p--)}e.drawMonth=f,e.drawYear=p;var g=this._get(e,"prevText");g=r?this.formatDate(g,this._daylightSavingAdjust(new Date(p,f-l,1)),this._getFormatConfig(e)):g;var v=this._canAdjustMonth(e,-1,p,f)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>":o?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>",y=this._get(e,"nextText");y=r?this.formatDate(y,this._daylightSavingAdjust(new Date(p,f+l,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,p,f)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+y+"</span></a>":o?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),_=this._get(e,"gotoCurrent")&&e.currentDay?d:t;w=r?this.formatDate(w,_,this._getFormatConfig(e)):w;var x=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",C=n?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?x:"")+(this._isInRange(e,_)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(i?"":x)+"</div>":"",k=parseInt(this._get(e,"firstDay"),10);k=isNaN(k)?0:k;for(var T=this._get(e,"showWeek"),S=this._get(e,"dayNames"),D=(this._get(e,"dayNamesShort"),this._get(e,"dayNamesMin")),N=this._get(e,"monthNames"),E=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),I=this._get(e,"showOtherMonths"),A=this._get(e,"selectOtherMonths"),L=(this._get(e,"calculateWeek")||this.iso8601Week,this._getDefaultDate(e)),P="",O=0;O<s[0];O++){var H="";this.maxRows=4;for(var R=0;R<s[1];R++){var F=this._daylightSavingAdjust(new Date(p,f,e.selectedDay)),j=" ui-corner-all",z="";if(c){if(z+='<div class="ui-datepicker-group',s[1]>1)switch(R){case 0:z+=" ui-datepicker-group-first",j=" ui-corner-"+(i?"right":"left");break;case s[1]-1:z+=" ui-datepicker-group-last",j=" ui-corner-"+(i?"left":"right");break;default:z+=" ui-datepicker-group-middle",j=""}z+='">'}z+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+j+'">'+(/all|left/.test(j)&&0==O?i?b:v:"")+(/all|right/.test(j)&&0==O?i?v:b:"")+this._generateMonthYearHeader(e,f,p,u,h,O>0||R>0,N,E)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";for(var B=T?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",W=0;7>W;W++){var U=(W+k)%7;B+="<th"+((W+k+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+S[U]+'">'+D[U]+"</span></th>"}z+=B+"</tr></thead><tbody>";var q=this._getDaysInMonth(p,f);p==e.selectedYear&&f==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,q));var Y=(this._getFirstDayOfMonth(p,f)-k+7)%7,V=Math.ceil((Y+q)/7),X=c?this.maxRows>V?this.maxRows:V:V;this.maxRows=X;for(var G=this._daylightSavingAdjust(new Date(p,f,1-Y)),K=0;X>K;K++){z+="<tr>";for(var Q=T?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"",W=0;7>W;W++){var Z=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],J=G.getMonth()!=f,et=J&&!A||!Z[0]||u&&u>G||h&&G>h;Q+='<td class="'+((W+k+6)%7>=5?" ui-datepicker-week-end":"")+(J?" ui-datepicker-other-month":"")+(G.getTime()==F.getTime()&&f==e.selectedMonth&&e._keyEvent||L.getTime()==G.getTime()&&L.getTime()==F.getTime()?" "+this._dayOverClass:"")+(et?" "+this._unselectableClass+" ui-state-disabled":"")+(J&&!I?"":" "+Z[1]+(G.getTime()==d.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(J&&!I||!Z[2]?"":' title="'+Z[2]+'"')+(et?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(J&&!I?"&#xa0;":et?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==d.getTime()?" ui-state-active":"")+(J?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}z+=Q+"</tr>"}f++,f>11&&(f=0,p++),z+="</tbody></table>"+(c?"</div>"+(s[0]>0&&R==s[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),H+=z}P+=H}return P+=C+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,P},_generateMonthYearHeader:function(e,t,i,n,o,r,s,a){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),d=this._get(e,"showMonthAfterYear"),u='<div class="ui-datepicker-title">',h="";if(r||!l)h+='<span class="ui-datepicker-month">'+s[t]+"</span>";else{var f=n&&n.getFullYear()==i,p=o&&o.getFullYear()==i;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var m=0;12>m;m++)(!f||m>=n.getMonth())&&(!p||m<=o.getMonth())&&(h+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+a[m]+"</option>");h+="</select>"}if(d||(u+=h+(!r&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!c)u+='<span class="ui-datepicker-year">'+i+"</span>";else{var g=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},b=y(g[0]),w=Math.max(b,y(g[1]||""));for(b=n?Math.max(b,n.getFullYear()):b,w=o?Math.min(w,o.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';w>=b;b++)e.yearshtml+='<option value="'+b+'"'+(b==i?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",u+=e.yearshtml,e.yearshtml=null}return u+=this._get(e,"yearSuffix"),d&&(u+=(!r&&l&&c?"":"&#xa0;")+h),u+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"==i?t:0),o=e.drawMonth+("M"==i?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(n,o))+("D"==i?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,o,r)));e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),o=i&&i>t?i:t;return o=n&&o>n?n:o},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var o=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(i,n+(0>t?t:o[0]*o[1]),1));return 0>t&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max");return(!i||t.getTime()>=i.getTime())&&(!n||t.getTime()<=n.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var o=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),o,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.23",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},o={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var t=this,n=t.options,o=n.title||"&#160;",r=e.ui.dialog.getTitleId(t.element),s=(t.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass(i+n.dialogClass).css({zIndex:n.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){n.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===e.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}).attr({role:"dialog","aria-labelledby":r}).mousedown(function(e){t.moveToTop(!1,e)}),a=(t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(s),(t.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(s)),l=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).focus(function(){l.addClass("ui-state-focus")}).blur(function(){l.removeClass("ui-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(a);(t.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(n.closeText).appendTo(l),e("<span></span>").addClass("ui-dialog-title").attr("id",r).html(o).prependTo(a),e.isFunction(n.beforeclose)&&!e.isFunction(n.beforeClose)&&(n.beforeClose=n.beforeclose),a.find("*").add(a).disableSelection(),n.draggable&&e.fn.draggable&&t._makeDraggable(),n.resizable&&e.fn.resizable&&t._makeResizable(),t._createButtons(n.buttons),t._isOpen=!1,e.fn.bgiframe&&s.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;return e.overlay&&e.overlay.destroy(),e.uiDialog.hide(),e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),e.uiDialog.remove(),e.originalTitle&&e.element.attr("title",e.originalTitle),e},widget:function(){return this.uiDialog},close:function(t){var i,n,o=this;
if(!1!==o._trigger("beforeClose",t))return o.overlay&&o.overlay.destroy(),o.uiDialog.unbind("keypress.ui-dialog"),o._isOpen=!1,o.options.hide?o.uiDialog.hide(o.options.hide,function(){o._trigger("close",t)}):(o.uiDialog.hide(),o._trigger("close",t)),e.ui.dialog.overlay.resize(),o.options.modal&&(i=0,e(".ui-dialog").each(function(){this!==o.uiDialog[0]&&(n=e(this).css("z-index"),isNaN(n)||(i=Math.max(i,n)))}),e.ui.dialog.maxZ=i),o},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var n,o=this,r=o.options;return r.modal&&!t||!r.stack&&!r.modal?o._trigger("focus",i):(r.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=r.zIndex),o.overlay&&(e.ui.dialog.maxZ+=1,o.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ)),n={scrollTop:o.element.scrollTop(),scrollLeft:o.element.scrollLeft()},e.ui.dialog.maxZ+=1,o.uiDialog.css("z-index",e.ui.dialog.maxZ),o.element.attr(n),o._trigger("focus",i),o)},open:function(){if(!this._isOpen){var t=this,i=t.options,n=t.uiDialog;return t.overlay=i.modal?new e.ui.dialog.overlay(t):null,t._size(),t._position(i.position),n.show(i.show),t.moveToTop(!0),i.modal&&n.bind("keydown.ui-dialog",function(t){if(t.keyCode===e.ui.keyCode.TAB){var i=e(":tabbable",this),n=i.filter(":first"),o=i.filter(":last");return t.target!==o[0]||t.shiftKey?t.target===n[0]&&t.shiftKey?(o.focus(1),!1):void 0:(n.focus(1),!1)}}),e(t.element.find(":tabbable").get().concat(n.find(".ui-dialog-buttonpane :tabbable").get().concat(n.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t}},_createButtons:function(t){var i=this,n=!1,o=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),r=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(o);i.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof t&&null!==t&&e.each(t,function(){return!(n=!0)}),n&&(e.each(t,function(t,n){n=e.isFunction(n)?{click:n,text:t}:n;var o=e('<button type="button"></button>').click(function(){n.click.apply(i.element[0],arguments)}).appendTo(r);e.each(n,function(e,t){"click"!==e&&(e in o?o[e](t):o.attr(e,t))}),e.fn.button&&o.button()}),o.appendTo(i.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i,n=this,o=n.options,r=e(document);n.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,s){i="auto"===o.height?"auto":e(this).height(),e(this).height(e(this).height()).addClass("ui-dialog-dragging"),n._trigger("dragStart",r,t(s))},drag:function(e,i){n._trigger("drag",e,t(i))},stop:function(s,a){o.position=[a.position.left-r.scrollLeft(),a.position.top-r.scrollTop()],e(this).removeClass("ui-dialog-dragging").height(i),n._trigger("dragStop",s,t(a)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function n(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}i=i===t?this.options.resizable:i;var o=this,r=o.options,s=o.uiDialog.css("position"),a="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";o.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:o.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:o._minHeight(),handles:a,start:function(t,i){e(this).addClass("ui-dialog-resizing"),o._trigger("resizeStart",t,n(i))},resize:function(e,t){o._trigger("resize",e,n(t))},stop:function(t,i){e(this).removeClass("ui-dialog-resizing"),r.height=e(this).height(),r.width=e(this).width(),o._trigger("resizeStop",t,n(i)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var i,n=[],o=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(n=t.split?t.split(" "):[t[0],t[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(o[e]=n[e],n[e]=t)}),t={my:n.join(" "),at:n.join(" "),offset:o.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},t)),i||this.uiDialog.hide()},_setOptions:function(t){var i=this,r={},s=!1;e.each(t,function(e,t){i._setOption(e,t),e in n&&(s=!0),e in o&&(r[e]=t)}),s&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,n){var o=this,r=o.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":o._createButtons(n);break;case"closeText":o.uiDialogTitlebarCloseText.text(""+n);break;case"dialogClass":r.removeClass(o.options.dialogClass).addClass(i+n);break;case"disabled":n?r.addClass("ui-dialog-disabled"):r.removeClass("ui-dialog-disabled");break;case"draggable":var s=r.is(":data(draggable)");s&&!n&&r.draggable("destroy"),!s&&n&&o._makeDraggable();break;case"position":o._position(n);break;case"resizable":var a=r.is(":data(resizable)");a&&!n&&r.resizable("destroy"),a&&"string"==typeof n&&r.resizable("option","handles",n),!a&&n!==!1&&o._makeResizable(n);break;case"title":e(".ui-dialog-title",o.uiDialogTitlebar).html(""+(n||"&#160;"))}e.Widget.prototype._setOption.apply(o,arguments)},_size:function(){var t,i,n=this.options,o=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).height(),i=Math.max(0,n.minHeight-t),"auto"===n.height)if(e.support.minHeight)this.element.css({minHeight:i,height:"auto"});else{this.uiDialog.show();var r=this.element.css("height","auto").height();o||this.uiDialog.hide(),this.element.height(Math.max(r,i))}else this.element.height(Math.max(n.height-t,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{version:"1.8.23",uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){0===this.instances.length&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){return e(t.target).zIndex()<e.ui.dialog.overlay.maxZ?!1:void 0})},1),e(document).bind("keydown.dialog-overlay",function(i){t.options.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===e.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var i=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var i=e.inArray(t,this.instances);-1!=i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.remove();var n=0;e.each(this.instances,function(){n=Math.max(n,this.css("z-index"))}),this.maxZ=n},height:function(){var t,i;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),i>t?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,i;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),i>t?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e){e.ui=e.ui||{};var t=/left|center|right/,i=/top|center|bottom/,n="center",o={},r=e.fn.position,s=e.fn.offset;e.fn.position=function(s){if(!s||!s.of)return r.apply(this,arguments);s=e.extend({},s);var a,l,c,d=e(s.of),u=d[0],h=(s.collision||"flip").split(" "),f=s.offset?s.offset.split(" "):[0,0];return 9===u.nodeType?(a=d.width(),l=d.height(),c={top:0,left:0}):u.setTimeout?(a=d.width(),l=d.height(),c={top:d.scrollTop(),left:d.scrollLeft()}):u.preventDefault?(s.at="left top",a=l=0,c={top:s.of.pageY,left:s.of.pageX}):(a=d.outerWidth(),l=d.outerHeight(),c=d.offset()),e.each(["my","at"],function(){var e=(s[this]||"").split(" ");1===e.length&&(e=t.test(e[0])?e.concat([n]):i.test(e[0])?[n].concat(e):[n,n]),e[0]=t.test(e[0])?e[0]:n,e[1]=i.test(e[1])?e[1]:n,s[this]=e}),1===h.length&&(h[1]=h[0]),f[0]=parseInt(f[0],10)||0,1===f.length&&(f[1]=f[0]),f[1]=parseInt(f[1],10)||0,"right"===s.at[0]?c.left+=a:s.at[0]===n&&(c.left+=a/2),"bottom"===s.at[1]?c.top+=l:s.at[1]===n&&(c.top+=l/2),c.left+=f[0],c.top+=f[1],this.each(function(){var t,i=e(this),r=i.outerWidth(),d=i.outerHeight(),u=parseInt(e.curCSS(this,"marginLeft",!0))||0,p=parseInt(e.curCSS(this,"marginTop",!0))||0,m=r+u+(parseInt(e.curCSS(this,"marginRight",!0))||0),g=d+p+(parseInt(e.curCSS(this,"marginBottom",!0))||0),v=e.extend({},c);"right"===s.my[0]?v.left-=r:s.my[0]===n&&(v.left-=r/2),"bottom"===s.my[1]?v.top-=d:s.my[1]===n&&(v.top-=d/2),o.fractions||(v.left=Math.round(v.left),v.top=Math.round(v.top)),t={left:v.left-u,top:v.top-p},e.each(["left","top"],function(i,n){e.ui.position[h[i]]&&e.ui.position[h[i]][n](v,{targetWidth:a,targetHeight:l,elemWidth:r,elemHeight:d,collisionPosition:t,collisionWidth:m,collisionHeight:g,offset:f,my:s.my,at:s.at})}),e.fn.bgiframe&&i.bgiframe(),i.offset(e.extend(v,{using:s.using}))})},e.ui.position={fit:{left:function(t,i){var n=e(window),o=i.collisionPosition.left+i.collisionWidth-n.width()-n.scrollLeft();t.left=o>0?t.left-o:Math.max(t.left-i.collisionPosition.left,t.left)},top:function(t,i){var n=e(window),o=i.collisionPosition.top+i.collisionHeight-n.height()-n.scrollTop();t.top=o>0?t.top-o:Math.max(t.top-i.collisionPosition.top,t.top)}},flip:{left:function(t,i){if(i.at[0]!==n){var o=e(window),r=i.collisionPosition.left+i.collisionWidth-o.width()-o.scrollLeft(),s="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,a="left"===i.at[0]?i.targetWidth:-i.targetWidth,l=-2*i.offset[0];t.left+=i.collisionPosition.left<0?s+a+l:r>0?s+a+l:0}},top:function(t,i){if(i.at[1]!==n){var o=e(window),r=i.collisionPosition.top+i.collisionHeight-o.height()-o.scrollTop(),s="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,a="top"===i.at[1]?i.targetHeight:-i.targetHeight,l=-2*i.offset[1];t.top+=i.collisionPosition.top<0?s+a+l:r>0?s+a+l:0}}}},e.offset.setOffset||(e.offset.setOffset=function(t,i){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var n=e(t),o=n.offset(),r=parseInt(e.curCSS(t,"top",!0),10)||0,s=parseInt(e.curCSS(t,"left",!0),10)||0,a={top:i.top-o.top+r,left:i.left-o.left+s};"using"in i?i.using.call(t,a):n.css(a)},e.fn.offset=function(t){var i=this[0];return i&&i.ownerDocument?t?e.isFunction(t)?this.each(function(i){e(this).offset(t.call(this,i,e(this).offset()))}):this.each(function(){e.offset.setOffset(this,t)}):s.call(this):null}),e.curCSS||(e.curCSS=e.css),function(){var t,i,n,r,s,a=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(var c in n)t.style[c]=n[c];t.appendChild(l),i=a||document.documentElement,i.insertBefore(t,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",r=e(l).offset(function(e,t){return t}).offset(),t.innerHTML="",i.removeChild(t),s=r.top+r.left+(a?2e3:0),o.fractions=s>21&&22>s}()}(jQuery),function(e,t){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(t,i){"value"===t&&(this.options.value=i,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}}),e.extend(e.ui.progressbar,{version:"1.8.23"})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var i=this,n=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",s=n.values&&n.values.length||1,a=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(n.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),n.range&&(n.range===!0&&(n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&2!==n.values.length&&(n.values=[n.values[0],n.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===n.range||"max"===n.range?" ui-slider-range-"+n.range:"")));for(var l=o.length;s>l;l+=1)a.push(r);this.handles=o.add(e(a.join("")).appendTo(i.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){n.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(n){var o,r,s,a,l=e(this).data("index.ui-slider-handle");if(!i.options.disabled){switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n.preventDefault(),!i._keySliding&&(i._keySliding=!0,e(this).addClass("ui-state-active"),o=i._start(n,l),o===!1))return}switch(a=i.options.step,r=s=i.options.values&&i.options.values.length?i.values(l):i.value(),n.keyCode){case e.ui.keyCode.HOME:s=i._valueMin();break;case e.ui.keyCode.END:s=i._valueMax();break;case e.ui.keyCode.PAGE_UP:s=i._trimAlignValue(r+(i._valueMax()-i._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:s=i._trimAlignValue(r-(i._valueMax()-i._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===i._valueMax())return;s=i._trimAlignValue(r+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===i._valueMin())return;s=i._trimAlignValue(r-a)}i._slide(n,l,s)}}).keyup(function(t){var n=e(this).data("index.ui-slider-handle");i._keySliding&&(i._keySliding=!1,i._stop(t,n),i._change(t,n),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var i,n,o,r,s,a,l,c,d,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,s=this,this.handles.each(function(t){var i=Math.abs(n-s.values(t));o>i&&(o=i,r=e(this),a=t)}),u.range===!0&&this.values(1)===u.min&&(a+=1,r=e(this.handles[a])),l=this._start(t,a),l===!1?!1:(this._mouseSliding=!0,s._handleIndex=a,r.addClass("ui-state-active").focus(),c=r.offset(),d=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=d?{left:0,top:0}:{left:t.pageX-c.left-r.width()/2,top:t.pageY-c.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,o,r;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),r=this._valueMin()+n*o,this._trimAlignValue(r)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,o,r;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(o=this.values(),o[t]=i,r=this._trigger("slide",e,{handle:this.handles[t],value:i,values:o}),n=this.values(t?0:1),r!==!1&&this.values(t,i,!0))):i!==this.value()&&(r=this._trigger("slide",e,{handle:this.handles[t],value:i}),r!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var n,o,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,o=arguments[0],r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(o[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,i){var n,o=0;switch(e.isArray(this.options.values)&&(o=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;o>n;n+=1)this._change(null,n);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,o,r,s=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(n){t=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),d["horizontal"===l.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[c?"animate":"css"](d,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:t+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:t-i+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:t+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:t-i+"%"},{queue:!1,duration:a.animate}))),i=t}):(n=this.value(),o=this._valueMin(),r=this._valueMax(),t=r!==o?100*((n-o)/(r-o)):0,d["horizontal"===l.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[c?"animate":"css"](d,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:t+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:t+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:a.animate}))}}),e.extend(e.ui.slider,{version:"1.8.23"})}(jQuery),function(e,t){function i(){return++o}function n(){return++r}var o=0,r=0;e.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,t){if("selected"==e){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+i()},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+n());return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(i){function n(t,i){t.css("display",""),!e.support.opacity&&i.opacity&&t[0].style.removeAttribute("filter")}var o=this,r=this.options,s=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=e(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]),this.anchors.each(function(t,i){var n,a=e(i).attr("href"),l=a.split("#")[0];if(l&&(l===location.toString().split("#")[0]||(n=e("base")[0])&&l===n.href)&&(a=i.hash,i.href=a),s.test(a))o.panels=o.panels.add(o.element.find(o._sanitizeSelector(a)));else if(a&&"#"!==a){e.data(i,"href.tabs",a),e.data(i,"load.tabs",a.replace(/#.*$/,""));var c=o._tabId(i);i.href="#"+c;var d=o.element.find("#"+c);d.length||(d=e(r.panelTemplate).attr("id",c).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(o.panels[t-1]||o.list),d.data("destroy.tabs",!0)),o.panels=o.panels.add(d)}else r.disabled.push(t)}),i?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),r.selected===t?(location.hash&&this.anchors.each(function(e,t){return t.hash==location.hash?(r.selected=e,!1):void 0}),"number"!=typeof r.selected&&r.cookie&&(r.selected=parseInt(o._cookie(),10)),"number"!=typeof r.selected&&this.lis.filter(".ui-tabs-selected").length&&(r.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),r.selected=r.selected||(this.lis.length?0:-1)):null===r.selected&&(r.selected=-1),r.selected=r.selected>=0&&this.anchors[r.selected]||r.selected<0?r.selected:0,r.disabled=e.unique(r.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e){return o.lis.index(e)}))).sort(),-1!=e.inArray(r.selected,r.disabled)&&r.disabled.splice(e.inArray(r.selected,r.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),r.selected>=0&&this.anchors.length&&(o.element.find(o._sanitizeSelector(o.anchors[r.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(r.selected).addClass("ui-tabs-selected ui-state-active"),o.element.queue("tabs",function(){o._trigger("show",null,o._ui(o.anchors[r.selected],o.element.find(o._sanitizeSelector(o.anchors[r.selected].hash))[0]))}),this.load(r.selected)),e(window).bind("unload",function(){o.lis.add(o.anchors).unbind(".tabs"),o.lis=o.anchors=o.panels=null})):r.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[r.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),r.cookie&&this._cookie(r.selected,r.cookie);for(var a,l=0;a=this.lis[l];l++)e(a)[-1==e.inArray(l,r.disabled)||e(a).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(r.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==r.event){var c=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},d=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){c("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){d("hover",e(this))}),this.anchors.bind("focus.tabs",function(){c("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){d("focus",e(this).closest("li"))})}var u,h;r.fx&&(e.isArray(r.fx)?(u=r.fx[0],h=r.fx[1]):u=h=r.fx);var f=h?function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.hide().removeClass("ui-tabs-hide").animate(h,h.duration||"normal",function(){n(i,h),o._trigger("show",null,o._ui(t,i[0]))})}:function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.removeClass("ui-tabs-hide"),o._trigger("show",null,o._ui(t,i[0]))},p=u?function(e,t){t.animate(u,u.duration||"normal",function(){o.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),n(t,u),o.element.dequeue("tabs")})}:function(e,t){o.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),o.element.dequeue("tabs")};this.anchors.bind(r.event+".tabs",function(){var t=this,i=e(t).closest("li"),n=o.panels.filter(":not(.ui-tabs-hide)"),s=o.element.find(o._sanitizeSelector(t.hash));if(i.hasClass("ui-tabs-selected")&&!r.collapsible||i.hasClass("ui-state-disabled")||i.hasClass("ui-state-processing")||o.panels.filter(":animated").length||o._trigger("select",null,o._ui(this,s[0]))===!1)return this.blur(),!1;if(r.selected=o.anchors.index(this),o.abort(),r.collapsible){if(i.hasClass("ui-tabs-selected"))return r.selected=-1,r.cookie&&o._cookie(r.selected,r.cookie),o.element.queue("tabs",function(){p(t,n)}).dequeue("tabs"),this.blur(),!1;if(!n.length)return r.cookie&&o._cookie(r.selected,r.cookie),o.element.queue("tabs",function(){f(t,s)}),o.load(o.anchors.index(this)),this.blur(),!1}if(r.cookie&&o._cookie(r.selected,r.cookie),!s.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";n.length&&o.element.queue("tabs",function(){p(t,n)}),o.element.queue("tabs",function(){f(t,s)}),o.load(o.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var i=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){i.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie),this},add:function(i,n,o){o===t&&(o=this.anchors.length);var r=this,s=this.options,a=e(s.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,n)),l=i.indexOf("#")?this._tabId(e("a",a)[0]):i.replace("#","");a.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var c=r.element.find("#"+l);return c.length||(c=e(s.panelTemplate).attr("id",l).data("destroy.tabs",!0)),c.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),o>=this.lis.length?(a.appendTo(this.list),c.appendTo(this.list[0].parentNode)):(a.insertBefore(this.lis[o]),c.insertBefore(this.panels[o])),s.disabled=e.map(s.disabled,function(e){return e>=o?++e:e}),this._tabify(),1==this.anchors.length&&(s.selected=0,a.addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){r._trigger("show",null,r._ui(r.anchors[0],r.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[o],this.panels[o])),this},remove:function(t){t=this._getIndex(t);var i=this.options,n=this.lis.eq(t).remove(),o=this.panels.eq(t).remove();return n.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),i.disabled=e.map(e.grep(i.disabled,function(e){return e!=t}),function(e){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(n.find("a")[0],o[0])),this},enable:function(t){t=this._getIndex(t);var i=this.options;if(-1!=e.inArray(t,i.disabled))return this.lis.eq(t).removeClass("ui-state-disabled"),i.disabled=e.grep(i.disabled,function(e){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])),this},disable:function(e){e=this._getIndex(e);var t=this.options;return e!=t.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),t.disabled.push(e),t.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(e){if(e=this._getIndex(e),-1==e){if(!this.options.collapsible||-1==this.options.selected)return this;e=this.options.selected
}return this.anchors.eq(e).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var i=this,n=this.options,o=this.anchors.eq(t)[0],r=e.data(o,"load.tabs");if(this.abort(),!r||0!==this.element.queue("tabs").length&&e.data(o,"cache.tabs"))return this.element.dequeue("tabs"),void 0;if(this.lis.eq(t).addClass("ui-state-processing"),n.spinner){var s=e("span",o);s.data("label.tabs",s.html()).html(n.spinner)}return this.xhr=e.ajax(e.extend({},n.ajaxOptions,{url:r,success:function(r,s){i.element.find(i._sanitizeSelector(o.hash)).html(r),i._cleanup(),n.cache&&e.data(o,"cache.tabs",!0),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{n.ajaxOptions.success(r,s)}catch(a){}},error:function(e,r){i._cleanup(),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{n.ajaxOptions.error(e,r,t,o)}catch(s){}}})),i.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.8.23"}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,t){var i=this,n=this.options,o=i._rotate||(i._rotate=function(t){clearTimeout(i.rotation),i.rotation=setTimeout(function(){var e=n.selected;i.select(++e<i.anchors.length?e:0)},e),t&&t.stopPropagation()}),r=i._unrotate||(i._unrotate=t?function(){o()}:function(e){e.clientX&&i.rotate(null)});return e?(this.element.bind("tabsshow",o),this.anchors.bind(n.event+".tabs",r),o()):(clearTimeout(i.rotation),this.element.unbind("tabsshow",o),this.anchors.unbind(n.event+".tabs",r),delete this._rotate,delete this._unrotate),this}})}(jQuery),/*
 * jQuery UI Widget 1.10.0+amd
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e,t){var i=0,n=Array.prototype.slice,o=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(r){}o(t)},e.widget=function(t,i,n){var o,r,s,a,l={},c=t.split(".")[0];t=t.split(".")[1],o=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[c]=e[c]||{},r=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new s(e,t)},e.extend(s,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},o=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=r,t}}(),void 0):(l[t]=n,void 0)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete r._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(i){for(var o,r,s=n.call(arguments,1),a=0,l=s.length;l>a;a++)for(o in s[a])r=s[a][o],s[a].hasOwnProperty(o)&&r!==t&&(i[o]=e.isPlainObject(r)?e.isPlainObject(i[o])?e.widget.extend({},i[o],r):e.widget.extend({},r):r);return i},e.widget.bridge=function(i,o){var r=o.prototype.widgetFullName||i;e.fn[i]=function(s){var a="string"==typeof s,l=n.call(arguments,1),c=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var n,o=e.data(this,r);return o?e.isFunction(o[s])&&"_"!==s.charAt(0)?(n=o[s].apply(o,l),n!==o&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+s+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+s+"'")}):this.each(function(){var t=e.data(this,r);t?t.option(s||{})._init():e.data(this,r,new o(s,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var o,r,s,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},o=i.split("."),i=o.shift(),o.length){for(r=a[i]=e.widget.extend({},this.options[i]),s=0;s<o.length-1;s++)r[o[s]]=r[o[s]]||{},r=r[o[s]];if(i=o.pop(),n===t)return r[i]===t?null:r[i];r[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,s){function a(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+r.eventNamespace,d=l[2];d?o.delegate(d,c,a):i.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?i:o.effect||i:t;o=o||{},"number"==typeof o&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,r):n.queue(function(i){e(this)[t](),r&&r.call(n[0]),i()})}})}),/*
 * JavaScript Load Image 1.2.1
 * https://github.com/blueimp/JavaScript-Load-Image
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";var t=function(e,i,n){var o,r,s=document.createElement("img");return s.onerror=i,s.onload=function(){!r||n&&n.noRevoke||t.revokeObjectURL(r),i(t.scale(s,n))},o=window.Blob&&e instanceof Blob||window.File&&e instanceof File?r=t.createObjectURL(e):e,o?(s.src=o,s):t.readFile(e,function(e){s.src=e})},i=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.scale=function(e,t){t=t||{};var i=document.createElement("canvas"),n=e.width,o=e.height,r=Math.max((t.minWidth||n)/n,(t.minHeight||o)/o);return r>1&&(n=parseInt(n*r,10),o=parseInt(o*r,10)),r=Math.min((t.maxWidth||n)/n,(t.maxHeight||o)/o),1>r&&(n=parseInt(n*r,10),o=parseInt(o*r,10)),e.getContext||t.canvas&&i.getContext?(i.width=n,i.height=o,i.getContext("2d").drawImage(e,0,0,n,o),i):(e.width=n,e.height=o,e)},t.createObjectURL=function(e){return i?i.createObjectURL(e):!1},t.revokeObjectURL=function(e){return i?i.revokeObjectURL(e):!1},t.readFile=function(e,t){if(window.FileReader&&FileReader.prototype.readAsDataURL){var i=new FileReader;return i.onload=function(e){t(e.target.result)},i.readAsDataURL(e),i}return!1},"function"==typeof define&&define.amd?define(function(){return t}):e.loadImage=t}(this),/*
 * JavaScript Canvas to Blob 2.0.3
 * https://github.com/blueimp/JavaScript-Canvas-to-Blob
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 *
 * Based on stackoverflow user Stoive's code snippet:
 * http://stackoverflow.com/q/4998908
 */
function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,i=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),n=i&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),o=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,r=(i||o)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,r,s,a,l,c;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),r=new ArrayBuffer(t.length),s=new Uint8Array(r),a=0;a<t.length;a+=1)s[a]=t.charCodeAt(a);return l=e.split(",")[0].split(":")[1].split(";")[0],i?new Blob([n?s:r],{type:l}):(c=new o,c.append(r),c.getBlob(l))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,t){e(this.mozGetAsFile("blob",t))}:t.toDataURL&&r&&(t.toBlob=function(e,t){e(r(this.toDataURL(t)))})),"function"==typeof define&&define.amd?define(function(){return r}):e.dataURLtoBlob=r}(this),/*
 * JavaScript Templates 2.1.0
 * https://github.com/blueimp/JavaScript-Templates
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 *
 * Inspired by John Resig's JavaScript Micro-Templating:
 * http://ejohn.org/blog/javascript-micro-templating/
 */
function(e){"use strict";var t=function(e,i){var n=/[^\w\-\.:]/.test(e)?new Function(t.arg+",tmpl","var _e=tmpl.encode"+t.helper+",_s='"+e.replace(t.regexp,t.func)+"';return _s;"):t.cache[e]=t.cache[e]||t(t.load(e));return i?n(i,t):function(e){return n(e,t)}};t.cache={},t.load=function(e){return document.getElementById(e).innerHTML},t.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,t.func=function(e,t,i,n,o,r){return t?{"\n":"\\n","\r":"\\r","	":"\\t"," ":" "}[e]||"\\"+e:i?"="===i?"'+_e("+n+")+'":"'+("+n+"||'')+'":o?"';":r?"_s+='":void 0},t.encReg=/[<>&"'\x00]/g,t.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},t.encode=function(e){return String(e||"").replace(t.encReg,function(e){return t.encMap[e]||""})},t.arg="o",t.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return t}):e.tmpl=t}(this),/*
 * jQuery Iframe Transport Plugin 1.6.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(i){if(i.async){var n,o,r;return{send:function(s,a){n=e('<form style="display:none;"></form>'),n.attr("accept-charset",i.formAcceptCharset),r=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+r+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+r+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+r+"_method=PATCH",i.type="POST"),o=e('<iframe src="javascript:false;" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var t,r=e.isArray(i.paramName)?i.paramName:[i.paramName];o.unbind("load").bind("load",function(){var t;try{if(t=o.contents(),!t.length||!t[0].firstChild)throw new Error}catch(i){t=void 0}a(200,"success",{iframe:t}),e('<iframe src="javascript:false;"></iframe>').appendTo(n),n.remove()}),n.prop("target",o.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after(function(e){return t[e]}),i.paramName&&i.fileInput.each(function(t){e(this).prop("name",r[t]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),n.submit(),t&&t.length&&i.fileInput.each(function(i,n){var o=e(t[i]);e(n).prop("name",o.prop("name")),o.replaceWith(n)})}),n.append(o).appendTo(document.body)},abort:function(){o&&o.unbind("load").prop("src","javascript".concat(":false;")),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),/*
 * jQuery File Upload Plugin 5.21
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.propHooks.elements={get:function(t){return e.nodeName(t,"form")?e.grep(t.elements,function(t){return!e.nodeName(t,"input")||"file"!==t.type}):null}},e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(e){return e.serializeArray()},add:function(e,t){t.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date,this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=8*(t-this.loaded)*(1e3/n),this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:t.formData?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_onProgress:function(e,t){if(e.lengthComputable){var i,n,o=+new Date;if(t._time&&t.progressInterval&&o-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=o,i=t.total||this._getTotal(t.files),n=parseInt(e.loaded/e.total*(t.chunkSize||i),10)+(t.uploadedBytes||0),this._loaded+=n-(t.loaded||t.uploadedBytes||0),t.lengthComputable=!0,t.loaded=n,t.total=i,t.bitrate=t._bitrateTimer.getBitrate(o,n,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(o,this._loaded,t.bitrateInterval)})}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).bind("progress",function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)}),t.xhr=function(){return n})},_initXHRData:function(t){var i,n=t.files[0],o=t.multipart||!e.support.xhrFileUpload,r=t.paramName[0];t.headers=t.headers||{},t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:r,value:t.blob}):e.each(t.files,function(e,n){i.push({name:t.paramName[e]||r,value:n})})):(t.formData instanceof FormData?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"',i.append(r,t.blob,n.name)):e.each(t.files,function(e,n){(window.Blob&&n instanceof Blob||window.File&&n instanceof File)&&i.append(t.paramName[e]||r,n,n.name)})),t.data=i):(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"',t.contentType=n.type,t.data=t.blob||n),t.blob=null},_initIframeSettings:function(t){t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&e("<a></a>").prop("href",t.url).prop("host")!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e,"iframe")},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",o=(t.prop("files")||[1]).length;o;)n.push(i),o-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var o=e.Deferred(),r=o.promise();return i=i||this.options.context||r,t===!0?o.resolveWith(i,n):t===!1&&o.rejectWith(i,n),r.abort=o.promise,this._enhancePromise(r)},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){var n,o,r=this,s=t.files[0],a=s.size,l=t.uploadedBytes=t.uploadedBytes||0,c=t.maxChunkSize||a,d=s.slice||s.webkitSlice||s.mozSlice,u=e.Deferred(),h=u.promise();return this._isXHRUpload(t)&&d&&(l||a>c)&&!t.data?i?!0:l>=a?(s.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,t.context,[null,"error",s.error])):(o=function(){var i=e.extend({},t);i.blob=d.call(s,l,l+c,s.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,r._initXHRData(i),r._initProgressListener(i),n=(r._trigger("chunksend",null,i)!==!1&&e.ajax(i)||r._getXHRPromise(!1,i.context)).done(function(n,s,c){l=r._getUploadedBytes(c)||l+i.chunkSize,(!i.loaded||i.loaded<i.total)&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=s,i.jqXHR=c,r._trigger("chunkdone",null,i),r._trigger("chunkalways",null,i),a>l?o():u.resolveWith(i.context,[n,s,c])}).fail(function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,r._trigger("chunkfail",null,i),r._trigger("chunkalways",null,i),u.rejectWith(i.context,[e,t,n])})},this._enhancePromise(h),h.abort=function(){return n.abort()},o(),h):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer),this._active+=1,this._loaded+=t.uploadedBytes||0,this._total+=this._getTotal(t.files)},_onDone:function(t,i,n,o){if(!this._isXHRUpload(o)||!o.loaded||o.loaded<o.total){var r=this._getTotal(o.files)||1;this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:r,total:r}),o)}o.result=t,o.textStatus=i,o.jqXHR=n,this._trigger("done",null,o)},_onFail:function(e,t,i,n){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,this._trigger("fail",null,n),n.recalculateProgress&&(this._loaded-=n.loaded||n.uploadedBytes||0,this._total-=n.total||this._getTotal(n.files))},_onAlways:function(e,t,i,n){this._active-=1,this._trigger("always",null,n),0===this._active&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(t,i){var n,o,r,s,a=this,l=a._getAJAXSettings(i),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,n=n||((o||a._trigger("send",t,l)===!1)&&a._getXHRPromise(!1,l.context,o)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){a._onDone(e,t,i,l)}).fail(function(e,t,i){a._onFail(e,t,i,l)}).always(function(e,t,i){if(a._sending-=1,a._onAlways(e,t,i,l),l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var n,o=a._slots.shift();o;){if(n=o.state?"pending"===o.state():!o.isRejected()){o.resolve();break}o=a._slots.shift()}})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(r=e.Deferred(),this._slots.push(r),s=r.pipe(c)):s=this._sequence=this._sequence.pipe(c,c),s.abort=function(){return o=[void 0,"abort","abort"],n?n.abort():(r&&r.rejectWith(l.context,o),c())},this._enhancePromise(s)):c()},_onAdd:function(t,i){var n,o,r,s,a=this,l=!0,c=e.extend({},this.options,i),d=c.limitMultiFileUploads,u=this._getParamName(c);if((c.singleFileUploads||d)&&this._isXHRUpload(c))if(!c.singleFileUploads&&d)for(r=[],n=[],s=0;s<i.files.length;s+=d)r.push(i.files.slice(s,s+d)),o=u.slice(s,s+d),o.length||(o=u),n.push(o);else n=u;else r=[i.files],n=[u];return i.originalFiles=i.files,e.each(r||i.files,function(o,s){var c=e.extend({},i);return c.files=r?s:[s],c.paramName=n[o],c.submit=function(){return c.jqXHR=this.jqXHR=a._trigger("submit",t,this)!==!1&&a._onSend(t,this),this.jqXHR},l=a._trigger("add",t,c)}),l},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,n){return n===t[0]?i[0]:n}),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,i){var n,o=this,r=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),r.resolve([e])};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,r.resolve(t._file)):t.file(function(e){e.relativePath=i,r.resolve(e)},s):t.isDirectory?(n=t.createReader(),n.readEntries(function(e){o._handleFileTreeEntries(e,i+t.name+"/").done(function(e){r.resolve(e)}).fail(s)},s)):r.resolve([]),r.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,n,o=t.prop("webkitEntries")||t.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(n=t.prop("value"),!n)return e.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(e){n.files=e,i.options.replaceFileInput&&i._replaceFileInput(n.fileInput),i._trigger("change",t,n)!==!1&&i._onAdd(t,n)})},_onPaste:function(t){var i=t.originalEvent.clipboardData,n=i&&i.items||[],o={files:[]};return e.each(n,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&o.files.push(i)}),this._trigger("paste",t,o)===!1||this._onAdd(t,o)===!1?!1:void 0},_onDrop:function(e){var t=this,i=e.dataTransfer=e.originalEvent.dataTransfer,n={};i&&i.files&&i.files.length&&e.preventDefault(),this._getDroppedFiles(i).always(function(i){n.files=i,t._trigger("drop",e,n)!==!1&&t._onAdd(e,n)})},_onDragOver:function(t){var i=t.dataTransfer=t.originalEvent.dataTransfer;return this._trigger("dragover",t)===!1?!1:(i&&-1!==e.inArray("Files",i.types)&&(i.dropEffect="copy",t.preventDefault()),void 0)},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var n=-1!==e.inArray(t,this._refreshOptionsList);n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_create:function(){var t=this.options;e.extend(t,e(this.element[0].cloneNode(!1)).data()),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,o=this,r=e.Deferred(),s=r.promise();return s.abort=function(){return n=!0,i?i.abort():(r.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always(function(e){n||(t.files=e,i=o._onSend(null,t).then(function(e,t,i){r.resolve(e,t,i)},function(e,t,i){r.reject(e,t,i)}))}),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),/*
 * jQuery File Upload File Processing Plugin 1.2.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","canvas-to-blob","./jquery.fileupload"],e):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{process:[],add:function(t,i){e(this).fileupload("process",i).done(function(){i.submit()})}},processActions:{load:function(i,n){var o=this,r=i.files[i.index],s=e.Deferred();return window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype.toBlob&&("number"!==e.type(n.maxFileSize)||r.size<n.maxFileSize)&&(!n.fileTypes||n.fileTypes.test(r.type))?t(r,function(e){return e.src?(i.img=e,s.resolveWith(o,[i]),void 0):s.rejectWith(o,[i])}):s.rejectWith(o,[i]),s.promise()},resize:function(i,n){var o,r=i.img;return n=e.extend({canvas:!0},n),r&&(o=t.scale(r,n),(o.width!==r.width||o.height!==r.height)&&(i.canvas=o)),i},save:function(t){if(!t.canvas)return t;var i=this,n=t.files[t.index],o=n.name,r=e.Deferred(),s=function(e){e.name||(n.type===e.type?e.name=n.name:n.name&&(e.name=n.name.replace(/\..+$/,"."+e.type.substr(6)))),t.files[t.index]=e,r.resolveWith(i,[t])};return t.canvas.mozGetAsFile?s(t.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(n.type)&&o||(o&&o.replace(/\..+$/,"")||"blob")+".png",n.type)):t.canvas.toBlob(s,n.type),r.promise()}},_processFile:function(t,i,n){var o=this,r=e.Deferred().resolveWith(o,[{files:t,index:i}]),s=r.promise();return o._processing+=1,e.each(n.process,function(e,t){s=s.pipe(function(e){return o.processActions[t.action].call(this,e,t)})}),s.always(function(){o._processing-=1,0===o._processing&&o.element.removeClass("fileupload-processing")}),1===o._processing&&o.element.addClass("fileupload-processing"),s},process:function(t){var i=this,n=e.extend({},this.options,t);return n.process&&n.process.length&&this._isXHRUpload(n)&&e.each(t.files,function(o){i._processingQueue=i._processingQueue.pipe(function(){var r=e.Deferred();return i._processFile(t.files,o,n).always(function(){r.resolveWith(i)}),r.promise()})}),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})}),/*
 * jQuery File Upload User Interface Plugin 7.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","tmpl","load-image","./jquery.fileupload-fp"],e):e(window.jQuery,window.tmpl,window.loadImage)}(function(e,t,i){"use strict";e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{autoUpload:!1,maxNumberOfFiles:void 0,maxFileSize:void 0,minFileSize:void 0,acceptFileTypes:/.+$/i,previewSourceFileTypes:/^image\/(gif|jpeg|png)$/,previewSourceMaxFileSize:5e6,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:!0,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!1,dataType:"json",add:function(t,i){var n=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),o=n.options,r=i.files;e(this).fileupload("process",i).done(function(){n._adjustMaxNumberOfFiles(-r.length),i.maxNumberOfFilesAdjusted=!0,i.files.valid=i.isValidated=n._validate(r),i.context=n._renderUpload(r).data("data",i),o.filesContainer[o.prependFiles?"prepend":"append"](i.context),n._renderPreviews(i),n._forceReflow(i.context),n._transition(i.context).done(function(){n._trigger("added",t,i)!==!1&&(o.autoUpload||i.autoUpload)&&i.autoUpload!==!1&&i.isValidated&&i.submit()})})},send:function(t,i){var n=e(this).data("blueimp-fileupload")||e(this).data("fileupload");return i.isValidated||(i.maxNumberOfFilesAdjusted||(n._adjustMaxNumberOfFiles(-i.files.length),i.maxNumberOfFilesAdjusted=!0),n._validate(i.files))?(i.context&&i.dataType&&"iframe"===i.dataType.substr(0,6)&&i.context.find(".progress").addClass(!e.support.transition&&"progress-animated").attr("aria-valuenow",100).find(".bar").css("width","100%"),n._trigger("sent",t,i)):!1},done:function(t,i){var n,o,r=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),s=r._getFilesFromResponse(i);i.context?i.context.each(function(o){var a=s[o]||{error:"Empty file upload result"},l=r._addFinishedDeferreds();a.error&&r._adjustMaxNumberOfFiles(1),r._transition(e(this)).done(function(){var o=e(this);n=r._renderDownload([a]).replaceAll(o),r._forceReflow(n),r._transition(n).done(function(){i.context=e(this),r._trigger("completed",t,i),r._trigger("finished",t,i),l.resolve()})})}):(s.length&&(e.each(s,function(e,t){i.maxNumberOfFilesAdjusted&&t.error?r._adjustMaxNumberOfFiles(1):i.maxNumberOfFilesAdjusted||t.error||r._adjustMaxNumberOfFiles(-1)}),i.maxNumberOfFilesAdjusted=!0),n=r._renderDownload(s).appendTo(r.options.filesContainer),r._forceReflow(n),o=r._addFinishedDeferreds(),r._transition(n).done(function(){i.context=e(this),r._trigger("completed",t,i),r._trigger("finished",t,i),o.resolve()}))},fail:function(t,i){var n,o,r=e(this).data("blueimp-fileupload")||e(this).data("fileupload");i.maxNumberOfFilesAdjusted&&r._adjustMaxNumberOfFiles(i.files.length),i.context?i.context.each(function(s){if("abort"!==i.errorThrown){var a=i.files[s];a.error=a.error||i.errorThrown||!0,o=r._addFinishedDeferreds(),r._transition(e(this)).done(function(){var s=e(this);n=r._renderDownload([a]).replaceAll(s),r._forceReflow(n),r._transition(n).done(function(){i.context=e(this),r._trigger("failed",t,i),r._trigger("finished",t,i),o.resolve()})})}else o=r._addFinishedDeferreds(),r._transition(e(this)).done(function(){e(this).remove(),r._trigger("failed",t,i),r._trigger("finished",t,i),o.resolve()})}):"abort"!==i.errorThrown?(i.context=r._renderUpload(i.files).appendTo(r.options.filesContainer).data("data",i),r._forceReflow(i.context),o=r._addFinishedDeferreds(),r._transition(i.context).done(function(){i.context=e(this),r._trigger("failed",t,i),r._trigger("finished",t,i),o.resolve()})):(r._trigger("failed",t,i),r._trigger("finished",t,i),r._addFinishedDeferreds().resolve())},progress:function(e,t){if(t.context){var i=parseInt(100*(t.loaded/t.total),10);t.context.find(".progress").attr("aria-valuenow",i).find(".bar").css("width",i+"%")}},progressall:function(t,i){var n=e(this),o=parseInt(100*(i.loaded/i.total),10),r=n.find(".fileupload-progress"),s=r.find(".progress-extended");s.length&&s.html((n.data("blueimp-fileupload")||n.data("fileupload"))._renderExtendedProgress(i)),r.find(".progress").attr("aria-valuenow",o).find(".bar").css("width",o+"%")},start:function(t){var i=e(this).data("blueimp-fileupload")||e(this).data("fileupload");i._resetFinishedDeferreds(),i._transition(e(this).find(".fileupload-progress")).done(function(){i._trigger("started",t)})},stop:function(t){var i=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),n=i._addFinishedDeferreds();e.when.apply(e,i._getFinishedDeferreds()).done(function(){i._trigger("stopped",t)}),i._transition(e(this).find(".fileupload-progress")).done(function(){e(this).find(".progress").attr("aria-valuenow","0").find(".bar").css("width","0%"),e(this).find(".progress-extended").html("&nbsp;"),n.resolve()})},destroy:function(t,i){var n=e(this).data("blueimp-fileupload")||e(this).data("fileupload");i.url&&(e.ajax(i),n._adjustMaxNumberOfFiles(1)),n._transition(i.context).done(function(){e(this).remove(),n._trigger("destroyed",t,i)})}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(t){return t||(t=e.Deferred()),this._finishedUploads.push(t),t},_getFinishedDeferreds:function(){return this._finishedUploads},_getFilesFromResponse:function(t){return t.result&&e.isArray(t.result.files)?t.result.files:[]},_enableDragToDesktop:function(){var t=e(this),i=t.prop("href"),n=t.prop("download"),o="application/octet-stream";t.bind("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",[o,n,i].join(":"))}catch(t){}})},_adjustMaxNumberOfFiles:function(e){"number"==typeof this.options.maxNumberOfFiles&&(this.options.maxNumberOfFiles+=e,this.options.maxNumberOfFiles<1?this._disableFileInputButton():this._enableFileInputButton())},_formatFileSize:function(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" GB":e>=1e6?(e/1e6).toFixed(2)+" MB":(e/1e3).toFixed(2)+" KB"},_formatBitrate:function(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" Gbit/s":e>=1e6?(e/1e6).toFixed(2)+" Mbit/s":e>=1e3?(e/1e3).toFixed(2)+" kbit/s":e.toFixed(2)+" bit/s"},_formatTime:function(e){var t=new Date(1e3*e),i=parseInt(e/86400,10);return i=i?i+"d ":"",i+("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+":"+("0"+t.getUTCSeconds()).slice(-2)},_formatPercentage:function(e){return(100*e).toFixed(2)+" %"},_renderExtendedProgress:function(e){return this._formatBitrate(e.bitrate)+" | "+this._formatTime(8*(e.total-e.loaded)/e.bitrate)+" | "+this._formatPercentage(e.loaded/e.total)+" | "+this._formatFileSize(e.loaded)+" / "+this._formatFileSize(e.total)},_hasError:function(e){return e.error?e.error:this.options.maxNumberOfFiles<0?"Maximum number of files exceeded":this.options.acceptFileTypes.test(e.type)||this.options.acceptFileTypes.test(e.name)?this.options.maxFileSize&&e.size>this.options.maxFileSize?"File is too big":"number"==typeof e.size&&e.size<this.options.minFileSize?"File is too small":null:"Filetype not allowed"},_validate:function(t){var i=this,n=!!t.length;return e.each(t,function(e,t){t.error=i._hasError(t),t.error&&(n=!1)}),n},_renderTemplate:function(t,i){if(!t)return e();var n=t({files:i,formatFileSize:this._formatFileSize,options:this.options});return n instanceof e?n:e(this.options.templatesContainer).html(n).children()},_renderPreview:function(t,n){var o=this,r=this.options,s=e.Deferred();return(i&&i(t,function(t){n.append(t),o._forceReflow(n),o._transition(n).done(function(){s.resolveWith(n)}),e.contains(o.document[0].body,n[0])||s.resolveWith(n)},{maxWidth:r.previewMaxWidth,maxHeight:r.previewMaxHeight,canvas:r.previewAsCanvas})||s.resolveWith(n))&&s},_renderPreviews:function(t){var i=this,n=this.options;return t.context.find(".preview span").each(function(o,r){var s=t.files[o];n.previewSourceFileTypes.test(s.type)&&("number"!==e.type(n.previewSourceMaxFileSize)||s.size<n.previewSourceMaxFileSize)&&(i._processingQueue=i._processingQueue.pipe(function(){var n=e.Deferred(),o=e.Event("previewdone",{target:r});return i._renderPreview(s,e(r)).done(function(){i._trigger(o.type,o,t),n.resolveWith(i)}),n.promise()}))}),this._processingQueue},_renderUpload:function(e){return this._renderTemplate(this.options.uploadTemplate,e)},_renderDownload:function(e){return this._renderTemplate(this.options.downloadTemplate,e).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(t){t.preventDefault();var i=e(t.currentTarget),n=i.closest(".template-upload"),o=n.data("data");o&&o.submit&&!o.jqXHR&&o.submit()&&i.prop("disabled",!0)},_cancelHandler:function(t){t.preventDefault();var i=e(t.currentTarget).closest(".template-upload"),n=i.data("data")||{};n.jqXHR?n.jqXHR.abort():(n.errorThrown="abort",this._trigger("fail",t,n))},_deleteHandler:function(t){t.preventDefault();var i=e(t.currentTarget);this._trigger("destroy",t,e.extend({context:i.closest(".template-download"),type:"DELETE",dataType:this.options.dataType},i.data()))},_forceReflow:function(t){return e.support.transition&&t.length&&t[0].offsetWidth},_transition:function(t){var i=e.Deferred();return e.support.transition&&t.hasClass("fade")?t.bind(e.support.transition.end,function(n){n.target===t[0]&&(t.unbind(e.support.transition.end),i.resolveWith(t))}).toggleClass("in"):(t.toggleClass("in"),i.resolveWith(t)),i},_initButtonBarEventHandlers:function(){var t=this.element.find(".fileupload-buttonbar"),i=this.options.filesContainer;this._on(t.find(".start"),{click:function(e){e.preventDefault(),i.find(".start button").click()}}),this._on(t.find(".cancel"),{click:function(e){e.preventDefault(),i.find(".cancel button").click()}}),this._on(t.find(".delete"),{click:function(e){e.preventDefault(),i.find(".delete input:checked").siblings("button").click(),t.find(".toggle").prop("checked",!1)}}),this._on(t.find(".toggle"),{change:function(t){i.find(".delete input").prop("checked",e(t.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar button"),"click"),this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super(),this._on(this.options.filesContainer,{"click .start button":this._startHandler,"click .cancel button":this._cancelHandler,"click .delete button":this._deleteHandler}),this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers(),this._off(this.options.filesContainer,"click"),this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var e=this.options;e.templatesContainer=this.document[0].createElement(e.filesContainer.prop("nodeName")),t&&(e.uploadTemplateId&&(e.uploadTemplate=t(e.uploadTemplateId)),e.downloadTemplateId&&(e.downloadTemplate=t(e.downloadTemplateId)))},_initFilesContainer:function(){var t=this.options;void 0===t.filesContainer?t.filesContainer=this.element.find(".files"):t.filesContainer instanceof e||(t.filesContainer=e(t.filesContainer))},_stringToRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_initRegExpOptions:function(){var t=this.options;"string"===e.type(t.acceptFileTypes)&&(t.acceptFileTypes=this._stringToRegExp(t.acceptFileTypes)),"string"===e.type(t.previewSourceFileTypes)&&(t.previewSourceFileTypes=this._stringToRegExp(t.previewSourceFileTypes))},_initSpecialOptions:function(){this._super(),this._initFilesContainer(),this._initTemplates(),this._initRegExpOptions()},_setOption:function(e,t){this._super(e,t),"maxNumberOfFiles"===e&&this._adjustMaxNumberOfFiles(0)},_create:function(){this._super(),this._refreshOptionsList.push("filesContainer","uploadTemplateId","downloadTemplateId"),this._processingQueue||(this._processingQueue=e.Deferred().resolveWith(this).promise(),this.process=function(){return this._processingQueue}),this._resetFinishedDeferreds()},enable:function(){var e=!1;this.options.disabled&&(e=!0),this._super(),e&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton()),this._super()}})}),/*
 * jQuery File Upload Plugin Localization Example 6.5.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
window.locale={fileupload:{errors:{maxFileSize:"File is too big",minFileSize:"File is too small",acceptFileTypes:"Filetype not allowed",maxNumberOfFiles:"Max number of files exceeded",uploadedBytes:"Uploaded bytes exceed file size",emptyResult:"Empty file upload result"},error:"Error",start:"Start",cancel:"Cancel",destroy:"Delete"}},/*
Copyright 2013 Marco Braak

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
function(){var e,t,i,n,o,r,s,a,l,c,d,u,h,f,p,m,g,v,y,b,w,_,x,C,k,T,S,D,N=[].slice,E={}.hasOwnProperty,$=function(e,t){function i(){this.constructor=e}for(var n in t)E.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};e=this.jQuery,g=function(){function t(t,i){this.$el=e(t),this.options=e.extend({},this.defaults,i)}return t.prototype.defaults={},t.prototype.destroy=function(){return this._deinit()},t.prototype._init=function(){return null},t.prototype._deinit=function(){return null},t.register=function(i,n){var o,r,s,a;return a=function(){return"simple_widget_"+n},r=function(t,n){var o,r,s,l,c;for(o=a(),l=0,c=t.length;c>l;l++)r=t[l],s=new i(r,n),e.data(r,o)||e.data(r,o,s),s._init();return t},s=function(i){var n,o,r,s,l,c;for(n=a(),c=[],s=0,l=i.length;l>s;s++)o=i[s],r=e.data(o,n),r&&r instanceof t&&r.destroy(),c.push(e.removeData(o,n));return c},o=function(i,n,o){var r,s,l,c,d,u;for(s=null,d=0,u=i.length;u>d;d++)r=i[d],l=e.data(r,a()),l&&l instanceof t&&(c=l[n],c&&"function"==typeof c&&(s=c.apply(l,o)));return s},e.fn[n]=function(){var e,t,i,n,a;return i=arguments[0],t=2<=arguments.length?N.call(arguments,1):[],e=this,void 0===i||"object"==typeof i?(a=i,r(e,a)):"string"==typeof i&&"_"!==i[0]?(n=i,"destroy"===n?s(e):o(e,n,t)):void 0}},t}(),this.SimpleWidget=g,c=function(t){function i(){return T=i.__super__.constructor.apply(this,arguments)}return $(i,t),i.is_mouse_handled=!1,i.prototype._init=function(){return this.$el.bind("mousedown.mousewidget",e.proxy(this._mouseDown,this)),this.$el.bind("touchstart.mousewidget",e.proxy(this._touchStart,this)),this.is_mouse_started=!1,this.mouse_delay=0,this._mouse_delay_timer=null,this._is_mouse_delay_met=!0,this.mouse_down_info=null},i.prototype._deinit=function(){var t;return this.$el.unbind("mousedown.mousewidget"),this.$el.unbind("touchstart.mousewidget"),t=e(document),t.unbind("mousemove.mousewidget"),t.unbind("mouseup.mousewidget")},i.prototype._mouseDown=function(e){var t;if(1===e.which)return t=this._handleMouseDown(e,this._getPositionInfo(e)),t&&e.preventDefault(),t},i.prototype._handleMouseDown=function(e,t){return!i.is_mouse_handled&&(this.is_mouse_started&&this._handleMouseUp(t),this.mouse_down_info=t,this._mouseCapture(t))?(this._handleStartMouse(),this.is_mouse_handled=!0,!0):void 0},i.prototype._handleStartMouse=function(){var t;return t=e(document),t.bind("mousemove.mousewidget",e.proxy(this._mouseMove,this)),t.bind("touchmove.mousewidget",e.proxy(this._touchMove,this)),t.bind("mouseup.mousewidget",e.proxy(this._mouseUp,this)),t.bind("touchend.mousewidget",e.proxy(this._touchEnd,this)),this.mouse_delay?this._startMouseDelayTimer():void 0},i.prototype._startMouseDelayTimer=function(){var e=this;return this._mouse_delay_timer&&clearTimeout(this._mouse_delay_timer),this._mouse_delay_timer=setTimeout(function(){return e._is_mouse_delay_met=!0},this.mouse_delay),this._is_mouse_delay_met=!1},i.prototype._mouseMove=function(e){return this._handleMouseMove(e,this._getPositionInfo(e))},i.prototype._handleMouseMove=function(e,t){return this.is_mouse_started?(this._mouseDrag(t),e.preventDefault()):this.mouse_delay&&!this._is_mouse_delay_met?!0:(this.is_mouse_started=this._mouseStart(this.mouse_down_info)!==!1,this.is_mouse_started?this._mouseDrag(t):this._handleMouseUp(t),!this.is_mouse_started)},i.prototype._getPositionInfo=function(e){return{page_x:e.pageX,page_y:e.pageY,target:e.target,original_event:e}},i.prototype._mouseUp=function(e){return this._handleMouseUp(this._getPositionInfo(e))},i.prototype._handleMouseUp=function(t){var i;i=e(document),i.unbind("mousemove.mousewidget"),i.unbind("touchmove.mousewidget"),i.unbind("mouseup.mousewidget"),i.unbind("touchend.mousewidget"),this.is_mouse_started&&(this.is_mouse_started=!1,this._mouseStop(t))},i.prototype._mouseCapture=function(){return!0},i.prototype._mouseStart=function(){return null},i.prototype._mouseDrag=function(){return null},i.prototype._mouseStop=function(){return null},i.prototype.setMouseDelay=function(e){return this.mouse_delay=e},i.prototype._touchStart=function(e){var t;if(!(e.originalEvent.touches.length>1))return t=e.originalEvent.changedTouches[0],this._handleMouseDown(e,this._getPositionInfo(t))},i.prototype._touchMove=function(e){var t;if(!(e.originalEvent.touches.length>1))return t=e.originalEvent.changedTouches[0],this._handleMouseMove(e,this._getPositionInfo(t))},i.prototype._touchEnd=function(e){var t;if(!(e.originalEvent.touches.length>1))return t=e.originalEvent.changedTouches[0],this._handleMouseUp(this._getPositionInfo(t))},i}(g),this.Tree={},e=this.jQuery,h={getName:function(e){return h.strings[e-1]},nameToIndex:function(e){var t,i,n;for(t=i=1,n=h.strings.length;n>=1?n>=i:i>=n;t=n>=1?++i:--i)if(h.strings[t-1]===e)return t;return 0}},h.BEFORE=1,h.AFTER=2,h.INSIDE=3,h.NONE=4,h.strings=["before","after","inside","none"],this.Tree.Position=h,d=function(){function t(e,i,n){null==i&&(i=!1),null==n&&(n=t),this.setData(e),this.children=[],this.parent=null,i&&(this.id_mapping={},this.tree=this,this.node_class=n)}return t.prototype.setData=function(e){var t,i,n;if("object"!=typeof e)return this.name=e;n=[];for(t in e)i=e[t],"label"===t?n.push(this.name=i):n.push(this[t]=i);return n},t.prototype.initFromData=function(e){var t,i,n=this;return i=function(e){return n.setData(e),e.children?t(e.children):void 0},t=function(e){var t,i,o,r;for(o=0,r=e.length;r>o;o++)t=e[o],i=new n.tree.node_class(""),i.initFromData(t),n.addChild(i);return null},i(e),null},t.prototype.loadFromData=function(e){var t,i,n,o;for(this.removeChildren(),n=0,o=e.length;o>n;n++)i=e[n],t=new this.tree.node_class(i),this.addChild(t),"object"==typeof i&&i.children&&t.loadFromData(i.children);return null},t.prototype.addChild=function(e){return this.children.push(e),e._setParent(this)},t.prototype.addChildAtPosition=function(e,t){return this.children.splice(t,0,e),e._setParent(this)},t.prototype._setParent=function(e){return this.parent=e,this.tree=e.tree,this.tree.addNodeToIndex(this)},t.prototype.removeChild=function(e){return e.removeChildren(),this._removeChild(e)},t.prototype._removeChild=function(e){return this.children.splice(this.getChildIndex(e),1),this.tree.removeNodeFromIndex(e)},t.prototype.getChildIndex=function(t){return e.inArray(t,this.children)},t.prototype.hasChildren=function(){return 0!==this.children.length},t.prototype.isFolder=function(){return this.hasChildren()||this.load_on_demand},t.prototype.iterate=function(e){var t,i=this;return t=function(n,o){var r,s,a,l,c;if(n.children){for(c=n.children,a=0,l=c.length;l>a;a++)r=c[a],s=e(r,o),i.hasChildren()&&s&&t(r,o+1);return null}},t(this,0),null},t.prototype.moveNode=function(e,t,i){return e.isParentOf(t)?void 0:(e.parent._removeChild(e),i===h.AFTER?t.parent.addChildAtPosition(e,t.parent.getChildIndex(t)+1):i===h.BEFORE?t.parent.addChildAtPosition(e,t.parent.getChildIndex(t)):i===h.INSIDE?t.addChildAtPosition(e,0):void 0)},t.prototype.getData=function(){var e;return e=function(t){var i,n,o,r,s,a,l;for(i=[],a=0,l=t.length;l>a;a++){o=t[a],r={};for(n in o)s=o[n],"parent"!==n&&"children"!==n&&"element"!==n&&"tree"!==n&&Object.prototype.hasOwnProperty.call(o,n)&&(r[n]=s);o.hasChildren()&&(r.children=e(o.children)),i.push(r)}return i},e(this.children)},t.prototype.getNodeByName=function(e){var t;return t=null,this.iterate(function(i){return i.name===e?(t=i,!1):!0}),t},t.prototype.addAfter=function(e){var t,i;return this.parent?(i=new this.tree.node_class(e),t=this.parent.getChildIndex(this),this.parent.addChildAtPosition(i,t+1),i):null},t.prototype.addBefore=function(e){var t,i;return this.parent?(i=new this.tree.node_class(e),t=this.parent.getChildIndex(this),this.parent.addChildAtPosition(i,t),i):null},t.prototype.addParent=function(e){var t,i,n,o,r,s;if(this.parent){for(i=new this.tree.node_class(e),i._setParent(this.tree),n=this.parent,s=n.children,o=0,r=s.length;r>o;o++)t=s[o],i.addChild(t);return n.children=[],n.addChild(i),i}return null},t.prototype.remove=function(){return this.parent?(this.parent.removeChild(this),this.parent=null):void 0},t.prototype.append=function(e){var t;return t=new this.tree.node_class(e),this.addChild(t),t},t.prototype.prepend=function(e){var t;return t=new this.tree.node_class(e),this.addChildAtPosition(t,0),t},t.prototype.isParentOf=function(e){var t;for(t=e.parent;t;){if(t===this)return!0;t=t.parent}return!1},t.prototype.getLevel=function(){var e,t;for(e=0,t=this;t.parent;)e+=1,t=t.parent;return e},t.prototype.getNodeById=function(e){return this.id_mapping[e]},t.prototype.addNodeToIndex=function(e){return null!=e.id?this.id_mapping[e.id]=e:void 0},t.prototype.removeNodeFromIndex=function(e){return null!=e.id?delete this.id_mapping[e.id]:void 0},t.prototype.removeChildren=function(){var e=this;return this.iterate(function(t){return e.tree.removeNodeFromIndex(t),!0}),this.children=[]},t.prototype.getPreviousSibling=function(){var e;return this.parent?(e=this.parent.getChildIndex(this)-1,e>=0?this.parent.children[e]:null):null},t.prototype.getNextSibling=function(){var e;return this.parent?(e=this.parent.getChildIndex(this)+1,e<this.parent.children.length?this.parent.children[e]:null):null},t}(),this.Tree.Node=d,/*
  Copyright 2013 Marco Braak
  
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  
      http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  */
a=function(t){function n(){return S=n.__super__.constructor.apply(this,arguments)}return $(n,t),n.prototype.defaults={autoOpen:!1,saveState:!1,dragAndDrop:!1,selectable:!0,useContextMenu:!0,onCanSelectNode:null,onSetStateFromStorage:null,onGetStateFromStorage:null,onCreateLi:null,onIsMoveHandle:null,onCanMove:null,onCanMoveTo:null,onLoadFailed:null,autoEscape:!0,dataUrl:null,closedIcon:"&#x25ba;",openedIcon:"&#x25bc;",slide:!0,nodeClass:d,dataFilter:null,keyboardSupport:!0},n.prototype.toggle=function(e,t){return null==t&&(t=!0),e.is_open?this.closeNode(e,t):this.openNode(e,t)},n.prototype.getTree=function(){return this.tree},n.prototype.selectNode=function(e){return this._selectNode(e,!1)},n.prototype._selectNode=function(e,t){var i,n,o,r,s=this;if(null==t&&(t=!1),this.select_node_handler){if(i=function(){return s.options.onCanSelectNode?s.options.selectable&&s.options.onCanSelectNode(e):s.options.selectable},o=function(){var t;return t=e.parent,t&&t.parent&&!t.is_open?s.openNode(t,!1):void 0},r=function(){return s.options.saveState?s.save_state_handler.saveState():void 0},!e)return this._deselectCurrentNode(),r(),void 0;if(i())return this.select_node_handler.isNodeSelected(e)?t&&(this._deselectCurrentNode(),this._triggerEvent("tree.select",{node:null,previous_node:e})):(n=this.getSelectedNode(),this._deselectCurrentNode(),this.addToSelection(e),this._triggerEvent("tree.select",{node:e,deselected_node:n}),o()),r()}},n.prototype.getSelectedNode=function(){return this.select_node_handler.getSelectedNode()},n.prototype.toJson=function(){return JSON.stringify(this.tree.getData())},n.prototype.loadData=function(e,t){return this._loadData(e,t)},n.prototype.loadDataFromUrl=function(t,i,n){return"string"!==e.type(t)&&(n=i,i=t,t=null),this._loadDataFromUrl(t,i,n)},n.prototype._loadDataFromUrl=function(t,i,n){var r,s,a,l,c=this;return r=null,s=function(){var e;return i?(e=new o(i,c),r=e.getLi()):r=c.element,r.addClass("jqtree-loading")},l=function(){return r?r.removeClass("jqtree-loading"):void 0},a=function(){return"string"===e.type(t)&&(t={url:t}),t.method?void 0:t.method="get"},s(),t||(t=this._getDataUrlInfo(i)),a(),e.ajax({url:t.url,data:t.data,type:t.method.toUpperCase(),cache:!1,dataType:"json",success:function(t){var o;return o=e.isArray(t)||"object"==typeof t?t:e.parseJSON(t),c.options.dataFilter&&(o=c.options.dataFilter(o)),l(),c._loadData(o,i),n&&e.isFunction(n)?n():void 0},error:function(e){return l(),c.options.onLoadFailed?c.options.onLoadFailed(e):void 0}})},n.prototype._loadData=function(e,t){var i,n,o,r;if(this._triggerEvent("tree.load_data",{tree_data:e}),t){for(n=this.select_node_handler.getSelectedNodes(t),o=0,r=n.length;r>o;o++)i=n[o],this.select_node_handler.removeFromSelection(i);t.loadFromData(e),t.load_on_demand=!1,this._refreshElements(t.parent)}else this._initTree(e);return this.is_dragging?this.dnd_handler.refreshHitAreas():void 0},n.prototype.getNodeById=function(e){return this.tree.getNodeById(e)},n.prototype.getNodeByName=function(e){return this.tree.getNodeByName(e)},n.prototype.openNode=function(e,t){return null==t&&(t=!0),this._openNode(e,t)},n.prototype._openNode=function(e,t,i){var n,r,s=this;if(null==t&&(t=!0),n=function(e,t,i){var n;return n=new o(e,s),n.open(i,t)},e.isFolder()){if(e.load_on_demand)return this._loadFolderOnDemand(e,t,i);for(r=e.parent;r&&!r.is_open;)r.parent&&n(r,!1,null),r=r.parent;return n(e,t,i),this._saveState()}},n.prototype._loadFolderOnDemand=function(e,t,i){var n=this;return null==t&&(t=!0),this._loadDataFromUrl(null,e,function(){return n._openNode(e,t,i)})},n.prototype.closeNode=function(e,t){return null==t&&(t=!0),e.isFolder()?(new o(e,this).close(t),this._saveState()):void 0},n.prototype.isDragging=function(){return this.is_dragging},n.prototype.refreshHitAreas=function(){return this.dnd_handler.refreshHitAreas()},n.prototype.addNodeAfter=function(e,t){var i;return i=t.addAfter(e),this._refreshElements(t.parent),i},n.prototype.addNodeBefore=function(e,t){var i;return i=t.addBefore(e),this._refreshElements(t.parent),i},n.prototype.addParentNode=function(e,t){var i;return i=t.addParent(e),this._refreshElements(i.parent),i},n.prototype.removeNode=function(e){var t;return t=e.parent,t?(this.select_node_handler.removeFromSelection(e,!0),e.remove(),this._refreshElements(t.parent)):void 0},n.prototype.appendNode=function(e,t){var i,n;return t||(t=this.tree),i=t.isFolder(),n=t.append(e),i?this._refreshElements(t):this._refreshElements(t.parent),n},n.prototype.prependNode=function(e,t){var i;return t||(t=this.tree),i=t.prepend(e),this._refreshElements(t),i},n.prototype.updateNode=function(e,t){var i;return i=t.id&&t.id!==e.id,i&&this.tree.removeNodeFromIndex(e),e.setData(t),i&&this.tree.addNodeToIndex(e),this._refreshElements(e.parent),this._selectCurrentNode()},n.prototype.moveNode=function(e,t,i){var n;return n=h.nameToIndex(i),this.tree.moveNode(e,t,n),this._refreshElements()},n.prototype.getStateFromStorage=function(){return this.save_state_handler.getStateFromStorage()},n.prototype.addToSelection=function(e){return this.select_node_handler.addToSelection(e),this._getNodeElementForNode(e).select()},n.prototype.getSelectedNodes=function(){return this.select_node_handler.getSelectedNodes()},n.prototype.isNodeSelected=function(e){return this.select_node_handler.isNodeSelected(e)},n.prototype.removeFromSelection=function(e){return this.select_node_handler.removeFromSelection(e),this._getNodeElementForNode(e).deselect()},n.prototype.scrollToNode=function(t){var i,n;return i=e(t.element),n=i.offset().top-this.$el.offset().top,this.scroll_handler.scrollTo(n)},n.prototype.getState=function(){return this.save_state_handler.getState()},n.prototype.setState=function(e){return this.save_state_handler.setState(e),this._refreshElements()},n.prototype._init=function(){return n.__super__._init.call(this),this.element=this.$el,this.mouse_delay=300,this.is_initialized=!1,"undefined"!=typeof f&&null!==f?this.save_state_handler=new f(this):this.options.saveState=!1,"undefined"!=typeof m&&null!==m&&(this.select_node_handler=new m(this)),"undefined"!=typeof i&&null!==i?this.dnd_handler=new i(this):this.options.dragAndDrop=!1,"undefined"!=typeof p&&null!==p&&(this.scroll_handler=new p(this)),"undefined"!=typeof l&&null!==l&&"undefined"!=typeof m&&null!==m&&(this.key_handler=new l(this)),this._initData(),this.element.click(e.proxy(this._click,this)),this.element.dblclick(e.proxy(this._dblclick,this)),this.options.useContextMenu?this.element.bind("contextmenu",e.proxy(this._contextmenu,this)):void 0},n.prototype._deinit=function(){return this.element.empty(),this.element.unbind(),this.key_handler.deinit(),this.tree=null,n.__super__._deinit.call(this)},n.prototype._initData=function(){return this.options.data?this._loadData(this.options.data):this._loadDataFromUrl(this._getDataUrlInfo())},n.prototype._getDataUrlInfo=function(t){var i,n,o=this;return i=this.options.dataUrl||this.element.data("url"),n=function(){var e,n,r;return r={url:i},t&&t.id?(e={node:t.id},r.data=e):(n=o._getNodeIdToBeSelected(),n&&(e={selected_node:n},r.data=e)),r},e.isFunction(i)?i(t):"string"===e.type(i)?n():i},n.prototype._getNodeIdToBeSelected=function(){return this.options.saveState?this.save_state_handler.getNodeIdToBeSelected():null},n.prototype._initTree=function(e){return this.tree=new this.options.nodeClass(null,!0,this.options.nodeClass),this.select_node_handler&&this.select_node_handler.clear(),this.tree.loadFromData(e),this._openNodes(),this._refreshElements(),this.is_initialized?void 0:(this.is_initialized=!0,this._triggerEvent("tree.init"))},n.prototype._openNodes=function(){var e;if(!(this.options.saveState&&this.save_state_handler.restoreState()||this.options.autoOpen===!1))return e=this.options.autoOpen===!0?-1:parseInt(this.options.autoOpen),this.tree.iterate(function(t,i){return t.hasChildren()&&(t.is_open=!0),i!==e})},n.prototype._refreshElements=function(t){var i,n,o,r,s,a,l,c,d,u=this;return null==t&&(t=null),l=function(e){return u.options.autoEscape?y(e):e},s=function(t){var i;return i=t?"jqtree-tree":"",e('<ul class="jqtree_common '+i+'"></ul>')},o=function(e){var t;return t=e.isFolder()?n(e):r(e),u.options.onCreateLi&&u.options.onCreateLi(e,t),t},r=function(t){var i,n,o;return o=["jqtree_common"],u.select_node_handler&&u.select_node_handler.isNodeSelected(t)&&o.push("jqtree-selected"),i=o.join(" "),n=l(t.name),e('<li class="'+i+'"><div class="jqtree-element jqtree_common"><span class="jqtree-title jqtree_common">'+n+"</span></div></li>")},n=function(t){var i,n,o,r,s,a;return s=function(){var e;return e=["jqtree-toggler"],t.is_open||e.push("jqtree-closed"),e.join(" ")},a=function(){var e;return e=["jqtree-folder"],t.is_open||e.push("jqtree-closed"),u.select_node_handler&&u.select_node_handler.isNodeSelected(t)&&e.push("jqtree-selected"),e.join(" ")},n=s(),r=a(),o=l(t.name),i=t.is_open?u.options.openedIcon:u.options.closedIcon,e('<li class="jqtree_common '+r+'"><div class="jqtree-element jqtree_common"><a class="jqtree_common '+n+'">'+i+'</a><span class="jqtree_common jqtree-title">'+o+"</span></div></li>")},a=function(e,t,i){var n,r,l,c,d;for(r=s(i),e.append(r),c=0,d=t.length;d>c;c++)l=t[c],n=o(l),r.append(n),l.element=n[0],n.data("node",l),l.hasChildren()&&a(n,l.children,!1,l.is_open);return null},t&&t.parent?(c=!1,d=this._getNodeElementForNode(t),d.getUl().remove(),i=d.$element):(t=this.tree,i=this.element,i.empty(),c=!0),a(i,t.children,c,c),this._triggerEvent("tree.refresh")},n.prototype._click=function(e){var t,i,n;if(t=this._getClickTarget(e.target)){if("button"===t.type)return this.toggle(t.node,this.options.slide),e.preventDefault(),e.stopPropagation();if("label"===t.type&&(n=t.node,i=this._triggerEvent("tree.click",{node:n}),!i.isDefaultPrevented()))return this._selectNode(n,!0)}},n.prototype._dblclick=function(e){var t;return t=this._getClickTarget(e.target),t&&"label"===t.type?this._triggerEvent("tree.dblclick",{node:t.node}):void 0},n.prototype._getClickTarget=function(t){var i,n,o,r;if(o=e(t),i=o.closest(".jqtree-toggler"),i.length){if(r=this._getNode(i))return{type:"button",node:r}}else if(n=o.closest(".jqtree-element"),n.length&&(r=this._getNode(n)))return{type:"label",node:r};return null},n.prototype._getNode=function(e){var t;return t=e.closest("li"),0===t.length?null:t.data("node")},n.prototype._getNodeElementForNode=function(e){return e.isFolder()?new o(e,this):new u(e,this)},n.prototype._getNodeElement=function(e){var t;return t=this._getNode(e),t?this._getNodeElementForNode(t):null},n.prototype._contextmenu=function(t){var i,n;return i=e(t.target).closest("ul.jqtree-tree .jqtree-element"),i.length&&(n=this._getNode(i))?(t.preventDefault(),t.stopPropagation(),this._triggerEvent("tree.contextmenu",{node:n,click_event:t}),!1):void 0},n.prototype._saveState=function(){return this.options.saveState?this.save_state_handler.saveState():void 0},n.prototype._mouseCapture=function(e){return this.options.dragAndDrop?this.dnd_handler.mouseCapture(e):!1},n.prototype._mouseStart=function(e){return this.options.dragAndDrop?this.dnd_handler.mouseStart(e):!1},n.prototype._mouseDrag=function(e){var t;return this.options.dragAndDrop?(t=this.dnd_handler.mouseDrag(e),this.scroll_handler&&this.scroll_handler.checkScrolling(),t):!1},n.prototype._mouseStop=function(e){return this.options.dragAndDrop?this.dnd_handler.mouseStop(e):!1},n.prototype._triggerEvent=function(t,i){var n;return n=e.Event(t),e.extend(n,i),this.element.trigger(n),n},n.prototype.testGenerateHitAreas=function(e){return this.dnd_handler.current_item=this._getNodeElementForNode(e),this.dnd_handler.generateHitAreas(),this.dnd_handler.hit_areas},n.prototype._selectCurrentNode=function(){var e,t;return e=this.getSelectedNode(),e&&(t=this._getNodeElementForNode(e))?t.select():void 0},n.prototype._deselectCurrentNode=function(){var e;return e=this.getSelectedNode(),e?this.removeFromSelection(e):void 0},n}(c),g.register(a,"tree"),u=function(){function i(e,t){this.init(e,t)}return i.prototype.init=function(t,i){return this.node=t,this.tree_widget=i,this.$element=e(t.element)},i.prototype.getUl=function(){return this.$element.children("ul:first")},i.prototype.getSpan=function(){return this.$element.children(".jqtree-element").find("span.jqtree-title")},i.prototype.getLi=function(){return this.$element},i.prototype.addDropHint=function(e){return e===h.INSIDE?new t(this.$element):new r(this.node,this.$element,e)},i.prototype.select=function(){return this.getLi().addClass("jqtree-selected")},i.prototype.deselect=function(){return this.getLi().removeClass("jqtree-selected")},i}(),o=function(e){function i(){return D=i.__super__.constructor.apply(this,arguments)}return $(i,e),i.prototype.open=function(e,t){var i,n,o=this;return null==t&&(t=!0),this.node.is_open?void 0:(this.node.is_open=!0,i=this.getButton(),i.removeClass("jqtree-closed"),i.html(this.tree_widget.options.openedIcon),n=function(){return o.getLi().removeClass("jqtree-closed"),e&&e(),o.tree_widget._triggerEvent("tree.open",{node:o.node})},t?this.getUl().slideDown("fast",n):(this.getUl().show(),n()))},i.prototype.close=function(e){var t,i,n=this;return null==e&&(e=!0),this.node.is_open?(this.node.is_open=!1,t=this.getButton(),t.addClass("jqtree-closed"),t.html(this.tree_widget.options.closedIcon),i=function(){return n.getLi().addClass("jqtree-closed"),n.tree_widget._triggerEvent("tree.close",{node:n.node})},e?this.getUl().slideUp("fast",i):(this.getUl().hide(),i())):void 0},i.prototype.getButton=function(){return this.$element.children(".jqtree-element").find("a.jqtree-toggler")},i.prototype.addDropHint=function(e){return this.node.is_open||e!==h.INSIDE?new r(this.node,this.$element,e):new t(this.$element)},i}(u),y=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},k=function(e,t){var i,n,o,r;for(i=o=0,r=e.length;r>o;i=++o)if(n=e[i],n===t)return i;return-1},b=function(e,t){return e.indexOf?e.indexOf(t):k(e,t)},this.Tree.indexOf=b,this.Tree._indexOf=k,(null==this.JSON||null==this.JSON.stringify||"function"!=typeof this.JSON.stringify)&&(w=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},x=function(e){return w.lastIndex=0,w.test(e)?'"'+e.replace(w,function(e){var t;return t=_[e],"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},C=function(e,t){var i,n,o,r,s,a,l;switch(s=t[e],typeof s){case"string":return x(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(o=[],"[object Array]"===Object.prototype.toString.apply(s)){for(i=a=0,l=s.length;l>a;i=++a)r=s[i],o[i]=C(i,s)||"null";return 0===o.length?"[]":"["+o.join(",")+"]"}for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r=C(n,s),r&&o.push(x(n)+":"+r));return 0===o.length?"{}":"{"+o.join(",")+"}"}},null==this.JSON&&(this.JSON={}),this.JSON.stringify=function(e){return C("",{"":e})}),f=function(){function t(e){this.tree_widget=e}return t.prototype.saveState=function(){var t;return t=JSON.stringify(this.getState()),this.tree_widget.options.onSetStateFromStorage?this.tree_widget.options.onSetStateFromStorage(t):this.supportsLocalStorage()?localStorage.setItem(this.getCookieName(),t):e.cookie?(e.cookie.raw=!0,e.cookie(this.getCookieName(),t,{path:"/"})):void 0},t.prototype.restoreState=function(){var t;return t=this.getStateFromStorage(),t?(this.setState(e.parseJSON(t)),!0):!1},t.prototype.getStateFromStorage=function(){return this.tree_widget.options.onGetStateFromStorage?this.tree_widget.options.onGetStateFromStorage():this.supportsLocalStorage()?localStorage.getItem(this.getCookieName()):e.cookie?(e.cookie.raw=!0,e.cookie(this.getCookieName())):null},t.prototype.getState=function(){var e,t,i;return e=[],this.tree_widget.tree.iterate(function(t){return t.is_open&&t.id&&t.hasChildren()&&e.push(t.id),!0}),t=this.tree_widget.getSelectedNode(),i=t?t.id:"",{open_nodes:e,selected_node:i}},t.prototype.setState=function(e){var t,i,n;return e&&(t=e.open_nodes,n=e.selected_node,this.tree_widget.tree.iterate(function(e){return e.is_open=e.id&&e.hasChildren()&&b(t,e.id)>=0,!0}),n&&this.tree_widget.select_node_handler&&(this.tree_widget.select_node_handler.clear(),i=this.tree_widget.getNodeById(n)))?this.tree_widget.select_node_handler.addToSelection(i):void 0},t.prototype.getCookieName=function(){return"string"==typeof this.tree_widget.options.saveState?this.tree_widget.options.saveState:"tree"},t.prototype.supportsLocalStorage=function(){var e;return e=function(){var e,t;if("undefined"==typeof localStorage||null===localStorage)return!1;try{t="_storage_test",sessionStorage.setItem(t,!0),sessionStorage.removeItem(t)}catch(i){return e=i,!1}return!0},null==this._supportsLocalStorage&&(this._supportsLocalStorage=e()),this._supportsLocalStorage},t.prototype.getNodeIdToBeSelected=function(){var t,i;return i=this.getStateFromStorage(),i?(t=e.parseJSON(i),t.selected_node):null},t}(),m=function(){function e(e){this.tree_widget=e,this.clear()}return e.prototype.getSelectedNode=function(){var e;return e=this.getSelectedNodes(),e.length?e[0]:!1},e.prototype.getSelectedNodes=function(){var e,t,i;if(this.selected_single_node)return[this.selected_single_node];i=[];for(e in this.selected_nodes)t=this.tree_widget.getNodeById(e),t&&i.push(t);return i},e.prototype.isNodeSelected=function(e){return e.id?this.selected_nodes[e.id]:this.selected_single_node?this.selected_single_node.element===e.element:!1},e.prototype.clear=function(){return this.selected_nodes={},this.selected_single_node=null},e.prototype.removeFromSelection=function(e,t){var i=this;if(null==t&&(t=!1),e.id){if(delete this.selected_nodes[e.id],t)return e.iterate(function(){return delete i.selected_nodes[e.id],!0})}else if(e.element===this.selected_single_node.element)return this.selected_single_node=null},e.prototype.addToSelection=function(e){return e.id?this.selected_nodes[e.id]=!0:this.selected_single_node=e},e}(),i=function(){function t(e){this.tree_widget=e,this.hovered_area=null,this.$ghost=null,this.hit_areas=[],this.is_dragging=!1}return t.prototype.mouseCapture=function(t){var i,n;return i=e(t.target),this.tree_widget.options.onIsMoveHandle&&!this.tree_widget.options.onIsMoveHandle(i)?null:(n=this.tree_widget._getNodeElement(i),n&&this.tree_widget.options.onCanMove&&(this.tree_widget.options.onCanMove(n.node)||(n=null)),this.current_item=n,null!==this.current_item)},t.prototype.mouseStart=function(t){var i;return this.refreshHitAreas(),i=e(t.target).offset(),this.drag_element=new n(this.current_item.node,t.page_x-i.left,t.page_y-i.top,this.tree_widget.element),this.is_dragging=!0,this.current_item.$element.addClass("jqtree-moving"),!0},t.prototype.mouseDrag=function(e){var t,i;return this.drag_element.move(e.page_x,e.page_y),t=this.findHoveredArea(e.page_x,e.page_y),i=this.canMoveToArea(t),t?this.hovered_area!==t&&(this.hovered_area=t,this.mustOpenFolderTimer(t)&&this.startOpenFolderTimer(t.node),i&&this.updateDropHint()):(this.removeHover(),this.removeDropHint(),this.stopOpenFolderTimer()),!0},t.prototype.canMoveToArea=function(e){var t;return e?this.tree_widget.options.onCanMoveTo?(t=h.getName(e.position),this.tree_widget.options.onCanMoveTo(this.current_item.node,e.node,t)):!0:!1},t.prototype.mouseStop=function(e){return this.moveItem(e),this.clear(),this.removeHover(),this.removeDropHint(),this.removeHitAreas(),this.current_item&&this.current_item.$element.removeClass("jqtree-moving"),this.is_dragging=!1,!1},t.prototype.refreshHitAreas=function(){return this.removeHitAreas(),this.generateHitAreas()},t.prototype.removeHitAreas=function(){return this.hit_areas=[]},t.prototype.clear=function(){return this.drag_element.remove(),this.drag_element=null},t.prototype.removeDropHint=function(){return this.previous_ghost?this.previous_ghost.remove():void 0},t.prototype.removeHover=function(){return this.hovered_area=null},t.prototype.generateHitAreas=function(){var e;return e=new s(this.tree_widget.tree,this.current_item.node,this.getTreeDimensions().bottom),this.hit_areas=e.generate()},t.prototype.findHoveredArea=function(e,t){var i,n,o,r,s;if(n=this.getTreeDimensions(),e<n.left||t<n.top||e>n.right||t>n.bottom)return null;for(r=0,o=this.hit_areas.length;o>r;)if(s=r+o>>1,i=this.hit_areas[s],t<i.top)o=s;else{if(!(t>i.bottom))return i;r=s+1}return null},t.prototype.mustOpenFolderTimer=function(e){var t;return t=e.node,t.isFolder()&&!t.is_open&&e.position===h.INSIDE},t.prototype.updateDropHint=function(){var e;if(this.hovered_area)return this.removeDropHint(),e=this.tree_widget._getNodeElementForNode(this.hovered_area.node),this.previous_ghost=e.addDropHint(this.hovered_area.position)},t.prototype.startOpenFolderTimer=function(e){var t,i=this;return t=function(){return i.tree_widget._openNode(e,i.tree_widget.options.slide,function(){return i.refreshHitAreas(),i.updateDropHint()})},this.open_folder_timer=setTimeout(t,500)},t.prototype.stopOpenFolderTimer=function(){return this.open_folder_timer?(clearTimeout(this.open_folder_timer),this.open_folder_timer=null):void 0},t.prototype.moveItem=function(e){var t,i,n,o,r,s,a=this;return this.hovered_area&&this.hovered_area.position!==h.NONE&&this.canMoveToArea(this.hovered_area)&&(n=this.current_item.node,s=this.hovered_area.node,o=this.hovered_area.position,r=n.parent,o===h.INSIDE&&(this.hovered_area.node.is_open=!0),t=function(){return a.tree_widget.tree.moveNode(n,s,o),a.tree_widget.element.empty(),a.tree_widget._refreshElements()},i=this.tree_widget._triggerEvent("tree.move",{move_info:{moved_node:n,target_node:s,position:h.getName(o),previous_parent:r,do_move:t,original_event:e.original_event}}),!i.isDefaultPrevented())?t():void 0},t.prototype.getTreeDimensions=function(){var e;return e=this.tree_widget.element.offset(),{left:e.left,top:e.top,right:e.left+this.tree_widget.element.width(),bottom:e.top+this.tree_widget.element.height()+16}},t}(),v=function(){function t(e){this.tree=e}return t.prototype.iterate=function(){var t,i,n=this;return t=!0,i=function(o,r){var s,a,l,c,d,u,h,f;if(d=(o.is_open||!o.element)&&o.hasChildren(),o.element){if(s=e(o.element),!s.is(":visible"))return;t&&(n.handleFirstNode(o,s),t=!1),o.hasChildren()?o.is_open?n.handleOpenFolder(o,s)||(d=!1):n.handleClosedFolder(o,r,s):n.handleNode(o,r,s)}if(d){for(l=o.children.length,f=o.children,c=u=0,h=f.length;h>u;c=++u)a=f[c],c===l-1?i(o.children[c],null):i(o.children[c],o.children[c+1]);if(o.is_open)return n.handleAfterOpenFolder(o,r,s)}},i(this.tree,null)},t.prototype.handleNode=function(){},t.prototype.handleOpenFolder=function(){},t.prototype.handleClosedFolder=function(){},t.prototype.handleAfterOpenFolder=function(){},t.prototype.handleFirstNode=function(){},t}(),s=function(t){function i(e,t,n){i.__super__.constructor.call(this,e),this.current_node=t,this.tree_bottom=n}return $(i,t),i.prototype.generate=function(){return this.positions=[],this.last_top=0,this.iterate(),this.generateHitAreas(this.positions)},i.prototype.getTop=function(e){return e.offset().top},i.prototype.addPosition=function(e,t,i){return this.positions.push({top:i,node:e,position:t}),this.last_top=i},i.prototype.handleNode=function(e,t,i){var n;return n=this.getTop(i),e===this.current_node?this.addPosition(e,h.NONE,n):this.addPosition(e,h.INSIDE,n),t===this.current_node||e===this.current_node?this.addPosition(e,h.NONE,n):this.addPosition(e,h.AFTER,n)},i.prototype.handleOpenFolder=function(e,t){return e===this.current_node?!1:(e.children[0]!==this.current_node&&this.addPosition(e,h.INSIDE,this.getTop(t)),!0)},i.prototype.handleClosedFolder=function(e,t,i){var n;return n=this.getTop(i),e===this.current_node?this.addPosition(e,h.NONE,n):(this.addPosition(e,h.INSIDE,n),t!==this.current_node?this.addPosition(e,h.AFTER,n):void 0)},i.prototype.handleAfterOpenFolder=function(e,t){return e===this.current_node||t===this.current_node?this.addPosition(e,h.NONE,this.last_top):this.addPosition(e,h.AFTER,this.last_top)},i.prototype.handleFirstNode=function(t){return t!==this.current_node?this.addPosition(t,h.BEFORE,this.getTop(e(t.element))):void 0},i.prototype.generateHitAreas=function(e){var t,i,n,o,r,s;for(o=-1,t=[],i=[],r=0,s=e.length;s>r;r++)n=e[r],n.top!==o&&t.length&&(t.length&&this.generateHitAreasForGroup(i,t,o,n.top),o=n.top,t=[]),t.push(n);return this.generateHitAreasForGroup(i,t,o,this.tree_bottom),i},i.prototype.generateHitAreasForGroup=function(e,t,i,n){var o,r,s,a,l;for(o=(n-i)/t.length,r=i,a=0,l=t.length;l>a;a++)s=t[a],e.push({top:r,bottom:r+o,node:s.node,position:s.position}),r+=o;return null},i}(v),n=function(){function t(t,i,n,o){this.offset_x=i,this.offset_y=n,this.$element=e('<span class="jqtree-title jqtree-dragging">'+t.name+"</span>"),this.$element.css("position","absolute"),o.append(this.$element)}return t.prototype.move=function(e,t){return this.$element.offset({left:e-this.offset_x,top:t-this.offset_y})},t.prototype.remove=function(){return this.$element.remove()},t}(),r=function(){function t(t,i,n){this.$element=i,this.node=t,this.$ghost=e('<li class="jqtree_common jqtree-ghost"><span class="jqtree_common jqtree-circle"></span><span class="jqtree_common jqtree-line"></span></li>'),n===h.AFTER?this.moveAfter():n===h.BEFORE?this.moveBefore():n===h.INSIDE&&(t.isFolder()&&t.is_open?this.moveInsideOpenFolder():this.moveInside())}return t.prototype.remove=function(){return this.$ghost.remove()},t.prototype.moveAfter=function(){return this.$element.after(this.$ghost)},t.prototype.moveBefore=function(){return this.$element.before(this.$ghost)},t.prototype.moveInsideOpenFolder=function(){return e(this.node.children[0].element).before(this.$ghost)},t.prototype.moveInside=function(){return this.$element.after(this.$ghost),this.$ghost.addClass("jqtree-inside")},t}(),t=function(){function t(t){var i,n;i=t.children(".jqtree-element"),n=t.width()-4,this.$hint=e('<span class="jqtree-border"></span>'),i.append(this.$hint),this.$hint.css({width:n,height:i.height()-4})}return t.prototype.remove=function(){return this.$hint.remove()},t}(),p=function(){function t(e){this.tree_widget=e,this.previous_top=-1,this._initScrollParent()}return t.prototype._initScrollParent=function(){var t,i,n,o=this;return i=function(){var t,i,n,r,s,a,l,c,d,u;for(i=["overflow","overflow-y"],r=null,d=o.tree_widget.$el.parents(),s=0,l=d.length;l>s;s++)for(n=d[s],a=0,c=i.length;c>a;a++)if(t=i[a],"auto"===(u=e.css(n,t))||"scroll"===u)return e(n);return null},n=function(){return o.scroll_parent_top=0,o.$scroll_parent=null},"fixed"===this.tree_widget.$el.css("position")&&n(),t=i(),t&&t.length&&"HTML"!==t[0].tagName?(this.$scroll_parent=t,this.scroll_parent_top=this.$scroll_parent.offset().top):n()},t.prototype.checkScrolling=function(){var e;return e=this.tree_widget.dnd_handler.hovered_area,e&&e.top!==this.previous_top?(this.previous_top=e.top,this.$scroll_parent?this._handleScrollingWithScrollParent(e):this._handleScrollingWithDocument(e)):void 0},t.prototype._handleScrollingWithScrollParent=function(e){var t;return t=this.scroll_parent_top+this.$scroll_parent[0].offsetHeight-e.bottom,20>t?(this.$scroll_parent[0].scrollTop+=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1):e.top-this.scroll_parent_top<20?(this.$scroll_parent[0].scrollTop-=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1):void 0},t.prototype._handleScrollingWithDocument=function(t){var i;return i=t.top-e(document).scrollTop(),20>i?e(document).scrollTop(e(document).scrollTop()-20):e(window).height()-(t.bottom-e(document).scrollTop())<20?e(document).scrollTop(e(document).scrollTop()+20):void 0},t.prototype.scrollTo=function(t){var i;return this.$scroll_parent?this.$scroll_parent[0].scrollTop=t:(i=this.tree_widget.$el.offset().top,e(document).scrollTop(t+i))},t.prototype.isScrolledIntoView=function(t){var i,n,o,r,s;return i=e(t),this.$scroll_parent?(s=0,r=this.$scroll_parent.height(),o=i.offset().top-this.scroll_parent_top,n=o+i.height()):(s=e(window).scrollTop(),r=s+e(window).height(),o=i.offset().top,n=o+i.height()),r>=n&&o>=s},t}(),l=function(){function t(t){this.tree_widget=t,t.options.keyboardSupport&&e(document).bind("keydown.jqtree",e.proxy(this.handleKeyDown,this))}var i,n,o,r;return n=37,r=38,o=39,i=40,t.prototype.deinit=function(){return e(document).unbind("keydown.jqtree")},t.prototype.handleKeyDown=function(t){var s,a,l,c,d,u,h,f=this;if(e(document.activeElement).is("textarea,input"))return!0;if(s=this.tree_widget.getSelectedNode(),h=function(t){return t?(f.tree_widget.selectNode(t),f.tree_widget.scroll_handler&&!f.tree_widget.scroll_handler.isScrolledIntoView(e(t.element).find(".jqtree-element"))&&f.tree_widget.scrollToNode(t),!1):!0},l=function(){return h(f.getNextNode(s))},u=function(){return h(f.getPreviousNode(s))},d=function(){return s.hasChildren()&&!s.is_open?(f.tree_widget.openNode(s),!1):!0},c=function(){return s.hasChildren()&&s.is_open?(f.tree_widget.closeNode(s),!1):!0},!s)return!0;switch(a=t.which){case i:return l();case r:return u();case o:return d();case n:return c()}},t.prototype.getNextNode=function(e,t){var i;return null==t&&(t=!0),t&&e.hasChildren()&&e.is_open?e.children[0]:e.parent?(i=e.getNextSibling(),i?i:this.getNextNode(e.parent,!1)):null},t.prototype.getPreviousNode=function(e){var t;return e.parent?(t=e.getPreviousSibling(),t?t.hasChildren()&&t.is_open?this.getLastChild(t):t:e.parent.parent?e.parent:null):null},t.prototype.getLastChild=function(e){var t;return e.hasChildren()?(t=e.children[e.children.length-1],t.hasChildren()&&t.is_open?this.getLastChild(t):t):null},t}()}.call(this),/* ============================================================
 * bootstrap-dropdown.js v2.1.0
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";function t(){i(e(n)).removeClass("open")}function i(t){var i,n=t.attr("data-target");return n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),i=e(n),i.length||(i=t.parent()),i}var n="[data-toggle=dropdown]",o=function(t){var i=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};o.prototype={constructor:o,toggle:function(){var n,o,r=e(this);if(!r.is(".disabled, :disabled"))return n=i(r),o=n.hasClass("open"),t(),o||(n.toggleClass("open"),r.focus()),!1},keydown:function(t){var n,o,r,s,a;if(/(38|40|27)/.test(t.keyCode)&&(n=e(this),t.preventDefault(),t.stopPropagation(),!n.is(".disabled, :disabled"))){if(r=i(n),s=r.hasClass("open"),!s||s&&27==t.keyCode)return n.click();o=e("[role=menu] li:not(.divider) a",r),o.length&&(a=o.index(o.filter(":focus")),38==t.keyCode&&a>0&&a--,40==t.keyCode&&a<o.length-1&&a++,~a||(a=0),o.eq(a).focus())}}},e.fn.dropdown=function(t){return this.each(function(){var i=e(this),n=i.data("dropdown");n||i.data("dropdown",n=new o(this)),"string"==typeof t&&n[t].call(i)})},e.fn.dropdown.Constructor=o,e(function(){e("html").on("click.dropdown.data-api touchstart.dropdown.data-api",t),e("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",n,o.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",n+", [role=menu]",o.prototype.keydown)})}(window.jQuery),/* ===================================================
 * bootstrap-transition.js v2.1.0
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){e(function(){"use strict";e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in i)if(void 0!==t.style[e])return i[e]}();return e&&{end:e}}()})}(window.jQuery),/* =============================================================
 * bootstrap-collapse.js v2.1.0
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,i),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,i,n,o;if(!this.transitioning){if(t=this.dimension(),i=e.camelCase(["scroll",t].join("-")),n=this.$parent&&this.$parent.find("> .accordion-group > .in"),n&&n.length){if(o=n.data("collapse"),o&&o.transitioning)return;n.collapse("hide"),o||n.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][i])}},hide:function(){var t;this.transitioning||(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,i,n){var o=this,r=function(){"show"==i.type&&o.reset(),o.transitioning=0,o.$element.trigger(n)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,r):r())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},e.fn.collapse=function(i){return this.each(function(){var n=e(this),o=n.data("collapse"),r="object"==typeof i&&i;o||n.data("collapse",o=new t(this,r)),"string"==typeof i&&o[i]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e(function(){e("body").on("click.collapse.data-api","[data-toggle=collapse]",function(t){var i,n=e(this),o=n.attr("data-target")||t.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),r=e(o).data("collapse")?"toggle":n.data();n[e(o).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(o).collapse(r)})})}(window.jQuery),/* ============================================================
 * bootstrap-button.js v2.1.0
 * http://twitter.github.com/bootstrap/javascript.html#buttons
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,i)};t.prototype.setState=function(e){var t="disabled",i=this.$element,n=i.data(),o=i.is("input")?"val":"html";e+="Text",n.resetText||i.data("resetText",i[o]()),i[o](n[e]||this.options[e]),setTimeout(function(){"loadingText"==e?i.addClass(t).attr(t,t):i.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.parent('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")},e.fn.button=function(i){return this.each(function(){var n=e(this),o=n.data("button"),r="object"==typeof i&&i;o||n.data("button",o=new t(this,r)),"toggle"==i?o.toggle():i&&o.setState(i)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){var i=e(t.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")})})}(window.jQuery),/* ===========================================================
 * bootstrap-tooltip.js v2.1.0
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,n){var o,r;this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(o="hover"==this.options.trigger?"mouseenter":"focus",r="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show),void 0):i.show()},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide),void 0):i.hide()},show:function(){var e,t,i,n,o,r,s;if(this.hasContent()&&this.enabled){switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(r),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),i=this.getPosition(t),n=e[0].offsetWidth,o=e[0].offsetHeight,t?r.split(" ")[1]:r){case"bottom":s={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":s={top:i.top-o,left:i.left+i.width/2-n/2};break;case"left":s={top:i.top+i.height/2-o/2,left:i.left-n};break;case"right":s={top:i.top+i.height/2-o/2,left:i.left+i.width}}e.css(s).addClass(r).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){i.off(e.support.transition.end).remove()},500);i.one(e.support.transition.end,function(){clearTimeout(t),i.remove()})}var i=this.tip();return i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():i.remove(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},e.fn.tooltip=function(i){return this.each(function(){var n=e(this),o=n.data("tooltip"),r="object"==typeof i&&i;o||n.data("tooltip",o=new t(this,r)),"string"==typeof i&&o[i]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!0}}(window.jQuery),/* ==========================================================
 * bootstrap-affix.js v2.1.0
 * http://twitter.github.com/bootstrap/javascript.html#affix
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t=function(t,i){this.options=e.extend({},e.fn.affix.defaults,i),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,i=e(document).height(),n=this.$window.scrollTop(),o=this.$element.offset(),r=this.options.offset,s=r.bottom,a=r.top,l="affix affix-top affix-bottom";"object"!=typeof r&&(s=a=r),"function"==typeof a&&(a=r.top()),"function"==typeof s&&(s=r.bottom()),t=null!=this.unpin&&n+this.unpin<=o.top?!1:null!=s&&o.top+this.$element.height()>=i-s?"bottom":null!=a&&a>=n?"top":!1,this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?o.top-n:null,this.$element.removeClass(l).addClass("affix"+(t?"-"+t:"")))}},e.fn.affix=function(i){return this.each(function(){var n=e(this),o=n.data("affix"),r="object"==typeof i&&i;o||n.data("affix",o=new t(this,r)),"string"==typeof i&&o[i]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),i=t.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),t.affix(i)})})}(window.jQuery),/* =============================================================
 * bootstrap-scrollspy.js v2.1.0
 * http://twitter.github.com/bootstrap/javascript.html#scrollspy
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================== */
!function(e){"use strict";function t(t,i){var n,o=e.proxy(this.process,this),r=e(t).is("body")?e(window):e(t);this.options=e.extend({},e.fn.scrollspy.defaults,i),this.$scrollElement=r.on("scroll.scroll-spy.data-api",o),this.selector=(this.options.target||(n=e(t).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t,i=this;this.offsets=e([]),this.targets=e([]),t=this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),n=/^#\w/.test(i)&&e(i);return n&&n.length&&[[n.position().top,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=i-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(t>=n)return s!=(e=r.last()[0])&&this.activate(e);for(e=o.length;e--;)s!=r[e]&&t>=o[e]&&(!o[e+1]||t<=o[e+1])&&this.activate(r[e])},activate:function(t){var i,n;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parent("li").addClass("active"),i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}},e.fn.scrollspy=function(i){return this.each(function(){var n=e(this),o=n.data("scrollspy"),r="object"==typeof i&&i;o||n.data("scrollspy",o=new t(this,r)),"string"==typeof i&&o[i]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),/* =========================================================
 * bootstrap-colorpicker.js 
 * http://www.eyecon.ro/bootstrap-colorpicker
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(e){var t=function(e){this.value={h:1,s:1,b:1,a:1},this.setColor(e)};t.prototype={constructor:t,setColor:function(t){t=t.toLowerCase();var i=this;e.each(n.stringParsers,function(e,o){var r=o.re.exec(t),s=r&&o.parse(r),a=o.space||"rgba";return s?(i.value="hsla"===a?n.RGBtoHSB.apply(null,n.HSLtoRGB.apply(null,s)):n.RGBtoHSB.apply(null,s),!1):void 0})},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,i,n){e||(e=this.value.h,t=this.value.s,i=this.value.b),e*=360;var o,r,s,a,l;return e=e%360/60,l=i*t,a=l*(1-Math.abs(e%2-1)),o=r=s=i-l,e=~~e,o+=[l,a,0,0,a,l][e],r+=[a,l,l,a,0,0][e],s+=[0,0,a,l,l,a][e],{r:Math.round(255*o),g:Math.round(255*r),b:Math.round(255*s),a:n||this.value.a}},toHex:function(e,t,i,n){var o=this.toRGB(e,t,i,n);return"#"+(1<<24|parseInt(o.r)<<16|parseInt(o.g)<<8|parseInt(o.b)).toString(16).substr(1)},toHSL:function(e,t,i,n){e||(e=this.value.h,t=this.value.s,i=this.value.b);var o=e,r=(2-t)*i,s=t*i;return s/=r>0&&1>=r?r:2-r,r/=2,s>1&&(s=1),{h:o,s:s,l:r,a:n||this.value.a}}};var i=function(t,i){this.element=e(t);var o=i.format||this.element.data("color-format")||"hex";this.format=n.translateFormats[o],this.isInput=this.element.is("input"),this.component=this.element.is(".color")?this.element.find(".add-on"):!1,this.picker=e(n.template).appendTo("body").on("mousedown",e.proxy(this.mousedown,this)),this.isInput?this.element.on({focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this)}):this.component?this.component.on({click:e.proxy(this.show,this)}):this.element.on({click:e.proxy(this.show,this)}),("rgba"===o||"hsla"===o)&&(this.picker.addClass("alpha"),this.alpha=this.picker.find(".colorpicker-alpha")[0].style),this.component?(this.picker.find(".colorpicker-color").hide(),this.preview=this.element.find("i")[0].style):this.preview=this.picker.find("div:last")[0].style,this.base=this.picker.find("div:first")[0].style,this.update()};i.prototype={constructor:i,show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),e(window).on("resize",e.proxy(this.place,this)),this.isInput||t&&(t.stopPropagation(),t.preventDefault()),e(document).on({mousedown:e.proxy(this.hide,this)}),this.element.trigger({type:"show",color:this.color})},update:function(){this.color=new t(this.isInput?this.element.prop("value"):this.element.data("color")),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor()},setValue:function(e){this.color=new t(e),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color})},hide:function(){this.picker.hide(),e(window).off("resize",this.place),this.isInput?this.element.prop("value",this.format.call(this)):(e(document).off({mousedown:this.hide}),this.component&&this.element.find("input").prop("value",this.format.call(this)),this.element.data("color",this.format.call(this))),this.element.trigger({type:"hide",color:this.color})},place:function(){var e=this.component?this.component.offset():this.element.offset();this.picker.css({top:e.top+this.height,left:e.left})},previewColor:function(){try{this.preview.backgroundColor=this.format.call(this)}catch(e){this.preview.backgroundColor=this.color.toHex()}this.base.backgroundColor=this.color.toHex(this.color.value.h,1,1,1),this.alpha&&(this.alpha.backgroundColor=this.color.toHex())},pointer:null,slider:null,mousedown:function(t){t.stopPropagation(),t.preventDefault();var i=e(t.target),o=i.closest("div");if(!o.is(".colorpicker")){if(o.is(".colorpicker-saturation"))this.slider=e.extend({},n.sliders.saturation);else if(o.is(".colorpicker-hue"))this.slider=e.extend({},n.sliders.hue);else{if(!o.is(".colorpicker-alpha"))return!1;this.slider=e.extend({},n.sliders.alpha)}var r=o.offset();this.slider.knob=o.find("i")[0].style,this.slider.left=t.pageX-r.left,this.slider.top=t.pageY-r.top,this.pointer={left:t.pageX,top:t.pageY},e(document).on({mousemove:e.proxy(this.mousemove,this),mouseup:e.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(this.slider.maxLeft,this.slider.left+((e.pageX||this.pointer.left)-this.pointer.left))),i=Math.max(0,Math.min(this.slider.maxTop,this.slider.top+((e.pageY||this.pointer.top)-this.pointer.top)));return this.slider.knob.left=t+"px",this.slider.knob.top=i+"px",this.slider.callLeft&&this.color[this.slider.callLeft].call(this.color,t/100),this.slider.callTop&&this.color[this.slider.callTop].call(this.color,i/100),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){return t.stopPropagation(),t.preventDefault(),e(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),!1}},e.fn.colorpicker=function(t,n){return this.each(function(){var o=e(this),r=o.data("colorpicker"),s="object"==typeof t&&t;r||o.data("colorpicker",r=new i(this,e.extend({},e.fn.colorpicker.defaults,s))),"string"==typeof t&&r[t](n)})},e.fn.colorpicker.defaults={},e.fn.colorpicker.Constructor=i;var n={translateFormats:{rgb:function(){var e=this.color.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.color.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hsl:function(){var e=this.color.toHSL();return"hsl("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%)"},hsla:function(){var e=this.color.toHSL();return"hsla("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%,"+e.a+")"},hex:function(){return this.color.toHex()}},sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},RGBtoHSB:function(e,t,i,n){e/=255,t/=255,i/=255;var o,r,s,a;return s=Math.max(e,t,i),a=s-Math.min(e,t,i),o=0===a?null:s==e?(t-i)/a:s==t?(i-e)/a+2:(e-t)/a+4,o=60*((o+360)%6)/360,r=0===a?0:a/s,{h:o||1,s:r,b:s,a:n||1}},HueToRGB:function(e,t,i){return 0>i?i+=1:i>1&&(i-=1),1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e},HSLtoRGB:function(e,t,i,o){0>t&&(t=0);var r;r=.5>=i?i*(1+t):i+t-i*t;var s=2*i-r,a=e+1/3,l=e,c=e-1/3,d=Math.round(255*n.HueToRGB(s,r,a)),u=Math.round(255*n.HueToRGB(s,r,l)),h=Math.round(255*n.HueToRGB(s,r,c));return[d,u,h,o||1]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}}],template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'}}(window.jQuery),/**
 * @license
 * =========================================================
 * bootstrap-datetimepicker.js
 * http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Contributions:
 *  - Andrew Rowls
 *  - Thiago de Arruda
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================
 */
function(e){function t(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function i(e,t,i){return t<e.length?e:Array(t-e.length+1).join(i||" ")+e}function n(e,t,i,n,o,r){return t&&i?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><ul><li'+(r?' class="collapse in"':"")+">"+'<div class="datepicker">'+f.template+"</div>"+"</li>"+'<li class="picker-switch accordion-toggle"><a><i class="'+e+'"></i></a></li>'+"<li"+(r?' class="collapse"':"")+">"+'<div class="timepicker">'+p.getTemplate(n,o)+"</div>"+"</li>"+"</ul>"+"</div>":i?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+p.getTemplate(n,o)+"</div>"+"</div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+f.template+"</div>"+"</div>"}function o(){return new Date(Date.UTC.apply(Date,arguments))}void 0!=window.orientation;var r=function(e,t){this.id=s++,this.init(e,t)};r.prototype={constructor:r,init:function(t,i){var o;if(!i.pickTime&&!i.pickDate)throw new Error("Must choose at least one picker");if(this.options=i,this.$element=e(t),this.language=i.language in a?i.language:"en",this.pickDate=i.pickDate,this.pickTime=i.pickTime,this.isInput=this.$element.is("input"),this.component=!1,(this.$element.find(".input-append")||this.$element.find(".input-prepend"))&&(this.component=this.$element.find(".add-on")),this.format=i.format,this.format||(this.format=this.isInput?this.$element.data("format"):this.$element.find("input").data("format"),this.format||(this.format="MM/dd/yyyy")),this._compileFormat(),this.component&&(o=this.component.find("i")),this.pickTime&&(o&&o.length&&(this.timeIcon=o.data("time-icon")),this.timeIcon||(this.timeIcon="icon-time"),o.addClass(this.timeIcon)),this.pickDate&&(o&&o.length&&(this.dateIcon=o.data("date-icon")),this.dateIcon||(this.dateIcon="icon-calendar"),o.removeClass(this.timeIcon),o.addClass(this.dateIcon)),this.widget=e(n(this.timeIcon,i.pickDate,i.pickTime,i.pick12HourFormat,i.pickSeconds,i.collapse)).appendTo("body"),this.minViewMode=i.minViewMode||this.$element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=i.viewMode||this.$element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=i.weekStart||this.$element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.setStartDate(i.startDate||this.$element.data("date-startdate")),this.setEndDate(i.endDate||this.$element.data("date-enddate")),this.fillDow(),this.fillMonths(),this.fillHours(),this.fillMinutes(),this.fillSeconds(),this.update(),this.showMode(),this._attachDatePickerEvents()},show:function(e){this.widget.show(),this.height=this.component?this.component.outerHeight():this.$element.outerHeight(),this.place(),this.$element.trigger({type:"show",date:this._date}),this._attachDatePickerGlobalEvents(),e&&(e.stopPropagation(),e.preventDefault())},disable:function(){this.$element.find("input").prop("disabled",!0),this._detachDatePickerEvents()},enable:function(){this.$element.find("input").prop("disabled",!1),this._attachDatePickerEvents()},hide:function(){for(var e=this.widget.find(".collapse"),t=0;t<e.length;t++){var i=e.eq(t).data("collapse");if(i&&i.transitioning)return}this.widget.hide(),this.viewMode=this.startViewMode,this.showMode(),this.set(),this.$element.trigger({type:"hide",date:this._date}),this._detachDatePickerGlobalEvents()},set:function(){var e="";if(this._unset||(e=this.formatDate(this._date)),this.isInput)this.$element.val(e),this._resetMaskPos(this.$element);else{if(this.component){var t=this.$element.find("input");t.val(e),this._resetMaskPos(t)}this.$element.data("date",e)}},setValue:function(e){this._unset=e?!1:!0,"string"==typeof e?this._date=this.parseDate(e):e&&(this._date=new Date(e)),this.set(),this.viewDate=o(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},getDate:function(){return this._unset?null:new Date(this._date.valueOf())},setDate:function(e){e?this.setValue(e.valueOf()):this.setValue(null)},setStartDate:function(e){e instanceof Date?this.startDate=e:"string"==typeof e?(this.startDate=new o(e),this.startDate.getUTCFullYear()||(this.startDate=-1/0)):this.startDate=-1/0,this.viewDate&&this.update()},setEndDate:function(e){e instanceof Date?this.endDate=e:"string"==typeof e?(this.endDate=new o(e),this.endDate.getUTCFullYear()||(this.endDate=1/0)):this.endDate=1/0,this.viewDate&&this.update()},getLocalDate:function(){if(this._unset)return null;var e=this._date;return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())},setLocalDate:function(e){e?this.setValue(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())):this.setValue(null)},place:function(){var t="absolute",i=this.component?this.component.offset():this.$element.offset();this.width=this.component?this.component.outerWidth():this.$element.outerWidth(),i.top=i.top+this.height;var n=e(window);void 0!=this.options.width&&this.widget.width(this.options.width),"left"==this.options.orientation&&(this.widget.addClass("left-oriented"),i.left=i.left-this.widget.width()+20),this._isInFixed()&&(t="fixed",i.top-=n.scrollTop(),i.left-=n.scrollLeft()),n.width()<i.left+this.widget.outerWidth()?(i.right=n.width()-i.left-this.width,i.left="auto",this.widget.addClass("pull-right")):(i.right="auto",this.widget.removeClass("pull-right")),this.widget.css({position:t,top:i.top,left:i.left,right:i.right})},notifyChange:function(){this.$element.trigger({type:"changeDate",date:this.getDate(),localDate:this.getLocalDate()})},update:function(e){var t=e;if(!t&&(t=this.isInput?this.$element.val():this.$element.find("input").val(),t&&(this._date=this.parseDate(t)),!this._date)){var i=new Date;this._date=o(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())}this.viewDate=o(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},fillDow:function(){for(var t=this.weekStart,i=e("<tr>");t<this.weekStart+7;)i.append('<th class="dow">'+a[this.language].daysMin[t++%7]+"</th>");this.widget.find(".datepicker-days thead").append(i)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+a[this.language].monthsShort[t++]+"</span>";this.widget.find(".datepicker-months td").append(e)},fillDate:function(){var t=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),n=o(this._date.getUTCFullYear(),this._date.getUTCMonth(),this._date.getUTCDate(),0,0,0,0),r="object"==typeof this.startDate?this.startDate.getUTCFullYear():-1/0,s="object"==typeof this.startDate?this.startDate.getUTCMonth():-1,l="object"==typeof this.endDate?this.endDate.getUTCFullYear():1/0,c="object"==typeof this.endDate?this.endDate.getUTCMonth():12;this.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-days th:eq(1)").text(a[this.language].months[i]+" "+t);var d=o(t,i-1,28,0,0,0,0),u=f.getDaysInMonth(d.getUTCFullYear(),d.getUTCMonth());d.setUTCDate(u),d.setUTCDate(u-(d.getUTCDay()-this.weekStart+7)%7),(t==r&&s>=i||r>t)&&this.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(t==l&&i>=c||t>l)&&this.widget.find(".datepicker-days th:eq(2)").addClass("disabled");var h=new Date(d.valueOf());h.setUTCDate(h.getUTCDate()+42),h=h.valueOf();for(var p,m,g=[];d.valueOf()<h;)d.getUTCDay()===this.weekStart&&(p=e("<tr>"),g.push(p)),m="",d.getUTCFullYear()<t||d.getUTCFullYear()==t&&d.getUTCMonth()<i?m+=" old":(d.getUTCFullYear()>t||d.getUTCFullYear()==t&&d.getUTCMonth()>i)&&(m+=" new"),d.valueOf()===n.valueOf()&&(m+=" active"),d.valueOf()+864e5<=this.startDate&&(m+=" disabled"),d.valueOf()>this.endDate&&(m+=" disabled"),p.append('<td class="day'+m+'">'+d.getUTCDate()+"</td>"),d.setUTCDate(d.getUTCDate()+1);this.widget.find(".datepicker-days tbody").empty().append(g);var v=this._date.getUTCFullYear(),y=this.widget.find(".datepicker-months").find("th:eq(1)").text(t).end().find("span").removeClass("active");v===t&&y.eq(this._date.getUTCMonth()).addClass("active"),r>v-1&&this.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),v+1>l&&this.widget.find(".datepicker-months th:eq(2)").addClass("disabled");for(var b=0;12>b;b++)t==r&&s>b||r>t?e(y[b]).addClass("disabled"):(t==l&&b>c||t>l)&&e(y[b]).addClass("disabled");g="",t=10*parseInt(t/10,10);var w=this.widget.find(".datepicker-years").find("th:eq(1)").text(t+"-"+(t+9)).end().find("td");this.widget.find(".datepicker-years").find("th").removeClass("disabled"),r>t&&this.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),t+9>l&&this.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),t-=1;for(var b=-1;11>b;b++)g+='<span class="year'+(-1===b||10===b?" old":"")+(v===t?" active":"")+(r>t||t>l?" disabled":"")+'">'+t+"</span>",t+=1;w.html(g)},fillHours:function(){var e=this.widget.find(".timepicker .timepicker-hours table");e.parent().hide();var t="";if(this.options.pick12HourFormat)for(var n=1,o=0;3>o;o+=1){t+="<tr>";for(var r=0;4>r;r+=1){var s=n.toString();t+='<td class="hour">'+i(s,2,"0")+"</td>",n++}t+="</tr>"}else for(var n=0,o=0;6>o;o+=1){t+="<tr>";for(var r=0;4>r;r+=1){var s=n.toString();t+='<td class="hour">'+i(s,2,"0")+"</td>",n++}t+="</tr>"}e.html(t)},fillMinutes:function(){var e=this.widget.find(".timepicker .timepicker-minutes table");e.parent().hide();for(var t="",n=0,o=0;5>o;o++){t+="<tr>";for(var r=0;4>r;r+=1){var s=n.toString();t+='<td class="minute">'+i(s,2,"0")+"</td>",n+=3}t+="</tr>"}e.html(t)},fillSeconds:function(){var e=this.widget.find(".timepicker .timepicker-seconds table");e.parent().hide();for(var t="",n=0,o=0;5>o;o++){t+="<tr>";for(var r=0;4>r;r+=1){var s=n.toString();t+='<td class="second">'+i(s,2,"0")+"</td>",n+=3}t+="</tr>"}e.html(t)},fillTime:function(){if(this._date){var e=this.widget.find(".timepicker span[data-time-component]");e.closest("table");var t=this.options.pick12HourFormat,n=this._date.getUTCHours(),o="AM";t&&(n>=12&&(o="PM"),0===n?n=12:12!=n&&(n%=12),this.widget.find(".timepicker [data-action=togglePeriod]").text(o)),n=i(n.toString(),2,"0");var r=i(this._date.getUTCMinutes().toString(),2,"0"),s=i(this._date.getUTCSeconds().toString(),2,"0");e.filter("[data-time-component=hours]").text(n),e.filter("[data-time-component=minutes]").text(r),e.filter("[data-time-component=seconds]").text(s)}},click:function(t){t.stopPropagation(),t.preventDefault(),this._unset=!1;var i=e(t.target).closest("span, td, th");if(1===i.length&&!i.is(".disabled"))switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var n=this.viewDate,r=f.modes[this.viewMode].navFnc,s=f.modes[this.viewMode].navStep;"prev"===i[0].className&&(s=-1*s),n["set"+r](n["get"+r]()+s),this.fillDate(),this.set()}break;case"span":if(i.is(".month")){var a=i.parent().find("span").index(i);this.viewDate.setUTCMonth(a)}else{var l=parseInt(i.text(),10)||0;this.viewDate.setUTCFullYear(l)}0!==this.viewMode&&(this._date=o(this.viewDate.getUTCFullYear(),this.viewDate.getUTCMonth(),this.viewDate.getUTCDate(),this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.notifyChange()),this.showMode(-1),this.fillDate(),this.set();break;case"td":if(i.is(".day")){var c=parseInt(i.text(),10)||1,a=this.viewDate.getUTCMonth(),l=this.viewDate.getUTCFullYear();i.is(".old")?0===a?(a=11,l-=1):a-=1:i.is(".new")&&(11==a?(a=0,l+=1):a+=1),this._date=o(l,a,c,this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.viewDate=o(l,a,Math.min(28,c),0,0,0,0),this.fillDate(),this.set(),this.notifyChange()}}},actions:{incrementHours:function(){this._date.setUTCHours(this._date.getUTCHours()+1)},incrementMinutes:function(){this._date.setUTCMinutes(this._date.getUTCMinutes()+1)},incrementSeconds:function(){this._date.setUTCSeconds(this._date.getUTCSeconds()+1)},decrementHours:function(){this._date.setUTCHours(this._date.getUTCHours()-1)},decrementMinutes:function(){this._date.setUTCMinutes(this._date.getUTCMinutes()-1)},decrementSeconds:function(){this._date.setUTCSeconds(this._date.getUTCSeconds()-1)},togglePeriod:function(){var e=this._date.getUTCHours();e>=12?e-=12:e+=12,this._date.setUTCHours(e)},showPicker:function(){this.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),this.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var i=e(t.target),n=parseInt(i.text(),10);if(this.options.pick12HourFormat){var o=this._date.getUTCHours();o>=12?12!=n&&(n=(n+12)%24):12===n?n=0:n%=12}this._date.setUTCHours(n),this.actions.showPicker.call(this)},selectMinute:function(t){var i=e(t.target),n=parseInt(i.text(),10);this._date.setUTCMinutes(n),this.actions.showPicker.call(this)},selectSecond:function(t){var i=e(t.target),n=parseInt(i.text(),10);this._date.setUTCSeconds(n),this.actions.showPicker.call(this)}},doAction:function(t){t.stopPropagation(),t.preventDefault(),this._date||(this._date=o(1970,0,0,0,0,0,0));var i=e(t.currentTarget).data("action"),n=this.actions[i].apply(this,arguments);return this.set(),this.fillTime(),this.notifyChange(),n},stopEvent:function(e){e.stopPropagation(),e.preventDefault()},keydown:function(t){var i=this,n=t.which,o=e(t.target);(8==n||46==n)&&setTimeout(function(){i._resetMaskPos(o)})},keypress:function(t){var i=t.which;if(8!=i&&46!=i){var n=e(t.target),o=String.fromCharCode(i),r=n.val()||"";r+=o;var s=this._mask[this._maskPos];if(!s)return!1;if(s.end==r.length){if(!s.pattern.test(r.slice(s.start))){for(r=r.slice(0,r.length-1);(s=this._mask[this._maskPos])&&s.character;)r+=s.character,this._maskPos++;return r+=o,s.end!=r.length?(n.val(r),!1):s.pattern.test(r.slice(s.start))?(n.val(r),this._maskPos++,!1):(n.val(r.slice(0,s.start)),!1)}this._maskPos++}}},change:function(t){var i=e(t.target),n=i.val();this._formatPattern.test(n)?(this.update(),this.setValue(this._date.getTime()),this.notifyChange(),this.set()):n&&n.trim()?(this.setValue(this._date.getTime()),this._date?this.set():i.val("")):this._date&&(this.setValue(null),this.notifyChange(),this._unset=!0),this._resetMaskPos(i)},showMode:function(e){e&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+e))),this.widget.find(".datepicker > div").hide().filter(".datepicker-"+f.modes[this.viewMode].clsName).show()},destroy:function(){this._detachDatePickerEvents(),this._detachDatePickerGlobalEvents(),this.widget.remove(),this.$element.removeData("datetimepicker"),this.component.removeData("datetimepicker")},formatDate:function(e){return this.format.replace(h,function(t){var n,o,r,s=t.length;if("ms"===t&&(s=1),o=l[t].property,"Hours12"===o)r=e.getUTCHours(),0===r?r=12:12!==r&&(r%=12);else{if("Period12"===o)return e.getUTCHours()>=12?"PM":"AM";n="get"+o,r=e[n]()}return"getUTCMonth"===n&&(r+=1),"getUTCYear"===n&&(r=r+1900-2e3),i(r.toString(),s,"0")})},parseDate:function(e){var t,i,n,o,r={};if(!(t=this._formatPattern.exec(e)))return null;for(i=1;i<t.length;i++)n=this._propertiesByIndex[i],n&&(o=t[i],/^\d+$/.test(o)&&(o=parseInt(o,10)),r[n]=o);return this._finishParsingDate(r)},_resetMaskPos:function(e){for(var t=e.val(),i=0;i<this._mask.length;i++){if(this._mask[i].end>t.length){this._maskPos=i;break}if(this._mask[i].end===t.length){this._maskPos=i+1;break}}},_finishParsingDate:function(e){var t,i,n,r,s,a,l;return t=e.UTCFullYear,e.UTCYear&&(t=2e3+e.UTCYear),t||(t=1970),i=e.UTCMonth?e.UTCMonth-1:0,n=e.UTCDate||1,r=e.UTCHours||0,s=e.UTCMinutes||0,a=e.UTCSeconds||0,l=e.UTCMilliseconds||0,e.Hours12&&(r=e.Hours12),e.Period12&&(/pm/i.test(e.Period12)?12!=r&&(r=(r+12)%24):r%=12),o(t,i,n,r,s,a,l)},_compileFormat:function(){for(var e,i,n=[],o=[],r=this.format,s={},a=0,c=0;e=u.exec(r);)i=e[0],i in l?(a++,s[a]=l[i].property,n.push("\\s*"+l[i].getPattern(this)+"\\s*"),o.push({pattern:new RegExp(l[i].getPattern(this)),property:l[i].property,start:c,end:c+=i.length})):(n.push(t(i)),o.push({pattern:new RegExp(t(i)),character:i,start:c,end:++c})),r=r.slice(i.length);this._mask=o,this._maskPos=0,this._formatPattern=new RegExp("^\\s*"+n.join("")+"\\s*$"),this._propertiesByIndex=s},_attachDatePickerEvents:function(){var t=this;this.widget.on("click",".datepicker *",e.proxy(this.click,this)),this.widget.on("click","[data-action]",e.proxy(this.doAction,this)),this.widget.on("mousedown",e.proxy(this.stopEvent,this)),this.pickDate&&this.pickTime&&this.widget.on("click.togglePicker",".accordion-toggle",function(i){i.stopPropagation();var n=e(this),o=n.closest("ul"),r=o.find(".collapse.in"),s=o.find(".collapse:not(.in)");if(r&&r.length){var a=r.data("collapse");if(a&&a.transitioning)return;r.collapse("hide"),s.collapse("show"),n.find("i").toggleClass(t.timeIcon+" "+t.dateIcon),t.$element.find(".add-on i").toggleClass(t.timeIcon+" "+t.dateIcon)}}),this.isInput?(this.$element.on({focus:e.proxy(this.show,this),change:e.proxy(this.change,this)}),this.options.maskInput&&this.$element.on({keydown:e.proxy(this.keydown,this),keypress:e.proxy(this.keypress,this)})):(this.$element.on({change:e.proxy(this.change,this)},"input"),this.options.maskInput&&this.$element.on({keydown:e.proxy(this.keydown,this),keypress:e.proxy(this.keypress,this)},"input"),this.component?this.component.on("click",e.proxy(this.show,this)):this.$element.on("click",e.proxy(this.show,this)))},_attachDatePickerGlobalEvents:function(){e(window).on("resize.datetimepicker"+this.id,e.proxy(this.place,this)),this.isInput||e(document).on("mousedown.datetimepicker"+this.id,e.proxy(this.hide,this))},_detachDatePickerEvents:function(){this.widget.off("click",".datepicker *",this.click),this.widget.off("click","[data-action]"),this.widget.off("mousedown",this.stopEvent),this.pickDate&&this.pickTime&&this.widget.off("click.togglePicker"),this.isInput?(this.$element.off({focus:this.show,change:this.change}),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress})):(this.$element.off({change:this.change},"input"),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress},"input"),this.component?this.component.off("click",this.show):this.$element.off("click",this.show))},_detachDatePickerGlobalEvents:function(){e(window).off("resize.datetimepicker"+this.id),this.isInput||e(document).off("mousedown.datetimepicker"+this.id)},_isInFixed:function(){if(this.$element){for(var t=this.$element.parents(),i=!1,n=0;n<t.length;n++)if("fixed"==e(t[n]).css("position")){i=!0;break}return i}return!1}},e.fn.datetimepicker=function(t,i){return this.each(function(){var n=e(this),o=n.data("datetimepicker"),s="object"==typeof t&&t;o||n.data("datetimepicker",o=new r(this,e.extend({},e.fn.datetimepicker.defaults,s))),"string"==typeof t&&o[t](i)})},e.fn.datetimepicker.defaults={maskInput:!1,pickDate:!0,pickTime:!0,pick12HourFormat:!1,pickSeconds:!0,startDate:-1/0,endDate:1/0,collapse:!0},e.fn.datetimepicker.Constructor=r;var s=0,a=e.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},l={dd:{property:"UTCDate",getPattern:function(){return"(0?[1-9]|[1-2][0-9]|3[0-1])\\b"}},MM:{property:"UTCMonth",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},yy:{property:"UTCYear",getPattern:function(){return"(\\d{2})\\b"}},yyyy:{property:"UTCFullYear",getPattern:function(){return"(\\d{4})\\b"}},hh:{property:"UTCHours",getPattern:function(){return"(0?[0-9]|1[0-9]|2[0-3])\\b"}},mm:{property:"UTCMinutes",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ss:{property:"UTCSeconds",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ms:{property:"UTCMilliseconds",getPattern:function(){return"([0-9]{1,3})\\b"}},HH:{property:"Hours12",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},PP:{property:"Period12",getPattern:function(){return"(AM|PM|am|pm|Am|aM|Pm|pM)\\b"}}},c=[];for(var d in l)c.push(d);c[c.length-1]+="\\b",c.push(".");var u=new RegExp(c.join("\\b|"));c.pop();var h=new RegExp(c.join("\\b|"),"g"),f={modes:[{clsName:"days",navFnc:"UTCMonth",navStep:1},{clsName:"months",navFnc:"UTCFullYear",navStep:1},{clsName:"years",navFnc:"UTCFullYear",navStep:10}],isLeapYear:function(e){return 0===e%4&&0!==e%100||0===e%400},getDaysInMonth:function(e,t){return[31,f.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};f.template='<div class="datepicker-days"><table class="table-condensed">'+f.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+f.headTemplate+f.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+f.headTemplate+f.contTemplate+"</table>"+"</div>";var p={hourTemplate:'<span data-action="showHours" data-time-component="hours" class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds" data-time-component="seconds" class="timepicker-second"></span>'};p.getTemplate=function(e,t){return'<div class="timepicker-picker"><table class="table-condensed"'+(e?' data-hour-format="12"':"")+">"+"<tr>"+'<td><a href="#" class="btn" data-action="incrementHours"><i class="icon-chevron-up"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" class="btn" data-action="incrementMinutes"><i class="icon-chevron-up"></i></a></td>'+(t?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><i class="icon-chevron-up"></i></a></td>':"")+(e?'<td class="separator"></td>':"")+"</tr>"+"<tr>"+"<td>"+p.hourTemplate+"</td> "+'<td class="separator">:</td>'+"<td>"+p.minuteTemplate+"</td> "+(t?'<td class="separator">:</td><td>'+p.secondTemplate+"</td>":"")+(e?'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>':"")+"</tr>"+"<tr>"+'<td><a href="#" class="btn" data-action="decrementHours"><i class="icon-chevron-down"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" class="btn" data-action="decrementMinutes"><i class="icon-chevron-down"></i></a></td>'+(t?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><i class="icon-chevron-down"></i></a></td>':"")+(e?'<td class="separator"></td>':"")+"</tr>"+"</table>"+"</div>"+'<div class="timepicker-hours" data-action="selectHour">'+'<table class="table-condensed">'+"</table>"+"</div>"+'<div class="timepicker-minutes" data-action="selectMinute">'+'<table class="table-condensed">'+"</table>"+"</div>"+(t?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")}}(window.jQuery),!function(e){var t=function(i,n,o){o&&(o.stopPropagation(),o.preventDefault()),this.$element=e(i),this.$newElement=null,this.button=null,this.options=e.extend({},e.fn.selectpicker.defaults,this.$element.data(),"object"==typeof n&&n),null==this.options.title&&(this.options.title=this.$element.attr("title")),this.val=t.prototype.val,this.render=t.prototype.render,this.refresh=t.prototype.refresh,this.selectAll=t.prototype.selectAll,this.deselectAll=t.prototype.deselectAll,this.init()};t.prototype={constructor:t,init:function(){this.options.container?this.$element.css("visibility","hidden"):this.$element.hide(),this.multiple=this.$element.prop("multiple");var t=void 0!==this.$element.attr("class")?this.$element.attr("class").split(/\s+/):"",i=this.$element.attr("id");if(this.$element.after(this.createView()),this.$newElement=this.$element.next(".bootstrap-select"),this.options.container&&this.selectPosition(),this.button=this.$newElement.find("> button"),void 0!==i){var n=this;this.button.attr("data-id",i),e('label[for="'+i+'"]').click(function(){n.$newElement.find("button[data-id="+i+"]").focus()})}for(var o=0;o<t.length;o++)"selectpicker"!=t[o]&&this.$newElement.addClass(t[o]);this.multiple&&this.$newElement.addClass("show-tick"),this.button.addClass(this.options.style),this.checkDisabled(),this.checkTabIndex(),this.clickListener(),this.render(),this.setSize()},createDropdown:function(){var t="<div class='btn-group bootstrap-select'><button type='button' class='btn dropdown-toggle' data-toggle='dropdown'><span class='filter-option pull-left'></span>&nbsp;<span class='caret'></span></button><ul class='dropdown-menu' role='menu'></ul></div>";return e(t)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul").append(t),e},reloadLi:function(){this.destroyLi(),$li=this.createLi(),this.$newElement.find("ul").append($li)},destroyLi:function(){this.$newElement.find("li").remove()},createLi:function(){var t=this,i=[],n=[],o="";if(this.$element.find("option").each(function(){i.push(e(this).text())}),this.$element.find("option").each(function(){var i=e(this),o=void 0!==i.attr("class")?i.attr("class"):"",r=i.text(),s=void 0!==i.data("subtext")?'<small class="muted">'+i.data("subtext")+"</small>":"",a=void 0!==i.data("icon")?'<i class="'+i.data("icon")+'"></i> ':"";if((i.is(":disabled")||i.parent().is(":disabled"))&&(a="<span>"+a+"</span>"),r=a+'<span class="text">'+r+s+"</span>",t.options.hideDisabled&&(i.is(":disabled")||i.parent().is(":disabled")))n.push('<a style="min-height: 0; padding: 0"></a>');else if(i.parent().is("optgroup")&&1!=i.data("divider"))if(0==i.index()){var l=i.parent().attr("label"),c=void 0!==i.parent().data("subtext")?'<small class="muted">'+i.parent().data("subtext")+"</small>":"",d=i.parent().data("icon")?'<i class="'+i.parent().data("icon")+'"></i> ':"";l=d+'<span class="text">'+l+c+"</span>",0!=i[0].index?n.push('<div class="div-contain"><div class="divider"></div></div><dt>'+l+"</dt>"+t.createA(r,"opt "+o)):n.push("<dt>"+l+"</dt>"+t.createA(r,"opt "+o))}else n.push(t.createA(r,"opt "+o));else 1==i.data("divider")?n.push('<div class="div-contain"><div class="divider"></div></div>'):1==e(this).data("hidden")?n.push(""):n.push(t.createA(r,o))}),i.length>0)for(var r=0;r<i.length;r++)this.$element.find("option").eq(r),o+="<li rel="+r+">"+n[r]+"</li>";return this.multiple||0!=this.$element.find("option:selected").length||t.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),e(o)},createA:function(e,t){return'<a tabindex="0" class="'+t+'">'+e+'<i class="icon-ok check-mark"></i>'+"</a>"},render:function(){var t=this;this.$element.find("option").each(function(i){t.setDisabled(i,e(this).is(":disabled")||e(this).parent().is(":disabled")),t.setSelected(i,e(this).is(":selected"))});var i=this.$element.find("option:selected").map(function(){return void 0!=e(this).attr("title")?e(this).attr("title"):e(this).text()}).toArray(),n=this.multiple?i.join(", "):i[0];if(t.multiple&&t.options.selectedTextFormat.indexOf("count")>-1){var o=t.options.selectedTextFormat.split(">");(o.length>1&&i.length>o[1]||1==o.length&&i.length>=2)&&(n=i.length+" of "+this.$element.find("option").length+" selected")}n||(n=void 0!=t.options.title?t.options.title:t.options.noneSelectedText),t.$newElement.find(".filter-option").html(n)},setSize:function(){function t(){var t=s-e(window).scrollTop(),r=window.innerHeight,c=l+parseInt(n.css("margin-top"))+parseInt(n.css("margin-bottom"))+2,d=r-t-a-c;menuHeight=d,i.$newElement.hasClass("dropup")&&(menuHeight=t-c),minHeight=n.find("li").length+n.find("dt").length>3?3*o+c-2:0,n.css({"max-height":menuHeight+"px","overflow-y":"auto","min-height":minHeight+"px"})}var i=this,n=this.$newElement.find(".dropdown-menu");n.find("li > a");var o=this.$newElement.addClass("open").find(".dropdown-menu li > a").outerHeight();this.$newElement.removeClass("open");var r=n.find("li .divider").outerHeight(!0),s=this.$newElement.offset().top,a=this.$newElement.outerHeight(),l=parseInt(n.css("padding-top"))+parseInt(n.css("padding-bottom"))+parseInt(n.css("border-top-width"))+parseInt(n.css("border-bottom-width")),c=this.options.hideDisabled?":not(.disabled)":"";if("auto"==this.options.size)t(),e(window).resize(t),e(window).scroll(t);else if(this.options.size&&"auto"!=this.options.size&&n.find("li"+c).length>this.options.size){var d=n.find("li"+c+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index(),u=n.find("li").slice(0,d+1).find(".div-contain").length;menuHeight=o*this.options.size+u*r+l,n.css({"max-height":menuHeight+"px","overflow-y":"auto"})}if("auto"==this.options.width){this.$newElement.find(".dropdown-menu").css("min-width","0");var h=this.$newElement.find(".dropdown-menu").css("width");this.$newElement.css("width",h),this.options.container&&this.$element.css("width",h)}else this.options.width&&"auto"!=this.options.width&&(this.$newElement.css("width",this.options.width),this.options.container&&this.$element.css("width",this.options.width))},selectPosition:function(){var e=this.$element.offset().top,t=this.$element.offset().left;this.$newElement.appendTo(this.options.container),this.$newElement.css({position:"absolute",top:e+"px",left:t+"px"})},refresh:function(){this.reloadLi(),this.render(),this.setSize(),this.checkDisabled(),this.options.container&&this.selectPosition()},setSelected:function(e,t){t?this.$newElement.find("li").eq(e).addClass("selected"):this.$newElement.find("li").eq(e).removeClass("selected")},setDisabled:function(e,t){t?this.$newElement.find("li").eq(e).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):this.$newElement.find("li").eq(e).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")||this.$element.attr("readonly")},checkDisabled:function(){this.isDisabled()?(this.button.addClass("disabled"),this.button.click(function(e){e.preventDefault()}),this.button.attr("tabindex","-1")):!this.isDisabled()&&this.button.hasClass("disabled")&&(this.button.removeClass("disabled"),this.button.click(function(){return!0}),this.button.removeAttr("tabindex"))},checkTabIndex:function(){if(this.$element.is("[tabindex]")){var e=this.$element.attr("tabindex");this.button.attr("tabindex",e)}},clickListener:function(){var t=this;e("body").on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()}),this.$newElement.on("click","li a",function(i){var n=e(this).parent().index(),o=e(this).parent(),r=o.parents(".bootstrap-select"),s=t.$element.val();if(t.multiple&&i.stopPropagation(),i.preventDefault(),t.$element.not(":disabled")&&!e(this).parent().hasClass("disabled")){if(t.multiple){var a=t.$element.find("option").eq(n).prop("selected");a?t.$element.find("option").eq(n).removeAttr("selected"):t.$element.find("option").eq(n).prop("selected",!0).attr("selected","selected")}else t.$element.find("option").removeAttr("selected"),t.$element.find("option").eq(n).prop("selected",!0).attr("selected","selected");r.find(".filter-option").html(o.text()),r.find("button").focus(),s!=t.$element.val()&&t.$element.trigger("change"),t.render()}}),this.$newElement.on("click","li.disabled a, li dt, li .div-contain",function(t){t.preventDefault(),t.stopPropagation(),$select=e(this).parent().parents(".bootstrap-select"),$select.find("button").focus()}),this.$element.on("change",function(){t.render()})},val:function(e){return void 0!=e?(this.$element.val(e),this.$element.trigger("change"),this.$element):this.$element.val()},selectAll:function(){this.$element.find("option").prop("selected",!0).attr("selected","selected"),this.render()
},deselectAll:function(){this.$element.find("option").prop("selected",!1).removeAttr("selected"),this.render()},keydown:function(t){var i,n,o,r,s,a,l,c,d;if(i=e(this),o=i.parent(),n=e("[role=menu] li:not(.divider):visible a",o),n.length){if(/(38|40)/.test(t.keyCode))r=n.index(n.filter(":focus")),a=n.parent(":not(.disabled)").first().index(),l=n.parent(":not(.disabled)").last().index(),s=n.eq(r).parent().nextAll(":not(.disabled)").eq(0).index(),c=n.eq(r).parent().prevAll(":not(.disabled)").eq(0).index(),d=n.eq(s).parent().prevAll(":not(.disabled)").eq(0).index(),38==t.keyCode&&(r!=d&&r>c&&(r=c),a>r&&(r=a)),40==t.keyCode&&(r!=d&&s>r&&(r=s),r>l&&(r=l)),n.eq(r).focus();else{var u={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},h=[];n.each(function(){e(this).parent().is(":not(.disabled)")&&e.trim(e(this).text().toLowerCase()).substring(0,1)==u[t.keyCode]&&h.push(e(this).parent().index())});var f=e(document).data("keycount");f++,e(document).data("keycount",f);var p=e.trim(e(":focus").text().toLowerCase()).substring(0,1);p!=u[t.keyCode]?(f=1,e(document).data("keycount",f)):f>=h.length&&e(document).data("keycount",0),n.eq(h[f-1]).focus()}/(13)/.test(t.keyCode)&&(e(":focus").click(),o.addClass("open"),e(document).data("keycount",0))}}},e.fn.selectpicker=function(i,n){var o,r=arguments,s=this.each(function(){if(e(this).is("select")){var s=e(this),a=s.data("selectpicker"),l="object"==typeof i&&i;if(a){if(l)for(var c in l)a.options[c]=l[c]}else s.data("selectpicker",a=new t(this,l,n));"string"==typeof i&&(property=i,a[property]instanceof Function?([].shift.apply(r),o=a[property].apply(a,r)):o=a.options[property])}});return void 0!=o?o:s},e.fn.selectpicker.defaults={style:null,size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",width:null,container:!1,hideDisabled:!1},e(document).data("keycount",0).on("keydown","[data-toggle=dropdown], [role=menu]",t.prototype.keydown)}(window.jQuery),/* =========================================================
 * bootstrap-modal.js v2.1.0
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(e){"use strict";var t=function(t,i){this.options=i,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,i=e.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(e("body").addClass("modal-open"),this.isShown=!0,this.escape(),this.backdrop(function(){var i=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),i&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1).focus(),t.enforceFocus(),i?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,e("body").removeClass("modal-open"),this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,i=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(i),t.hideModal()})},hideModal:function(){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&i;this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(document.body),"static"!=this.options.backdrop&&this.$backdrop.click(e.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),n?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}},e.fn.modal=function(i){return this.each(function(){var n=e(this),o=n.data("modal"),r=e.extend({},e.fn.modal.defaults,n.data(),"object"==typeof i&&i);o||n.data("modal",o=new t(this,r)),"string"==typeof i?o[i]():r.show&&o.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var i=e(this),n=i.attr("href"),o=e(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},o.data(),i.data());t.preventDefault(),o.modal(r).one("hide",function(){i.focus()})})})}(window.jQuery);/**
 * @license wysihtml5 v0.3.0
 * https://github.com/xing/wysihtml5
 *
 * Author: Christopher Blum (https://github.com/tiff)
 *
 * Copyright (C) 2012 XING AG
 * Licensed under the MIT license (MIT)
 *
 */
var wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"﻿",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};/**
 * @license Rangy, a cross-browser JavaScript range and selection library
 * http://code.google.com/p/rangy/
 *
 * Copyright 2011, Tim Down
 * Licensed under the MIT license.
 * Version: 1.2.2
 * Build date: 13 November 2011
 */
window.rangy=function(){function e(e,t){var i=typeof e[t];return i==u||!(i!=d||!e[t])||"unknown"==i}function t(e,t){return!(typeof e[t]!=d||!e[t])}function i(e,t){return typeof e[t]!=h}function n(e){return function(t,i){for(var n=i.length;n--;)if(!e(t,i[n]))return!1;return!0}}function o(e){return e&&v(e,g)&&b(e,m)}function r(e){window.alert("Rangy not supported in your browser. Reason: "+e),w.initialized=!0,w.supported=!1}function s(e){var t="Rangy warning: "+e;w.config.alertOnWarn?window.alert(t):typeof window.console!=h&&typeof window.console.log!=h&&window.console.log(t)}function a(){if(!w.initialized){var i,n=!1,s=!1;e(document,"createRange")&&(i=document.createRange(),v(i,p)&&b(i,f)&&(n=!0),i.detach());var a=t(document,"body")?document.body:document.getElementsByTagName("body")[0];a&&e(a,"createTextRange")&&(i=a.createTextRange(),o(i)&&(s=!0)),n||s||r("Neither Range nor TextRange are implemented"),w.initialized=!0,w.features={implementsDomRange:n,implementsTextRange:s};for(var l=x.concat(_),c=0,d=l.length;d>c;++c)try{l[c](w)}catch(u){t(window,"console")&&e(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",u)}}}function l(e){e=e||window,a();for(var t=0,i=C.length;i>t;++t)C[t](e)}function c(e){this.name=e,this.initialized=!1,this.supported=!1}var d="object",u="function",h="undefined",f=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],p=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],m=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],g=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],v=n(e),y=n(t),b=n(i),w={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:e,isHostObject:t,isHostProperty:i,areHostMethods:v,areHostObjects:y,areHostProperties:b,isTextRange:o},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};w.fail=r,w.warn=s,{}.hasOwnProperty?w.util.extend=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}:r("hasOwnProperty not supported");var _=[],x=[];w.init=a,w.addInitListener=function(e){w.initialized?e(w):_.push(e)};var C=[];w.addCreateMissingNativeApiListener=function(e){C.push(e)},w.createMissingNativeApi=l,c.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+e)},c.prototype.warn=function(e){w.warn("Module "+this.name+": "+e)},c.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},w.createModule=function(e,t){var i=new c(e);w.modules[e]=i,x.push(function(e){t(e,i),i.initialized=!0,i.supported=!0})},w.requireModules=function(e){for(var t,i,n=0,o=e.length;o>n;++n){if(i=e[n],t=w.modules[i],!(t&&t instanceof c))throw new Error("Module '"+i+"' not found");if(!t.supported)throw new Error("Module '"+i+"' not supported")}};var k=!1,T=function(){k||(k=!0,w.initialized||a())};return typeof window==h?(r("No window found"),void 0):typeof document==h?(r("No document found"),void 0):(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",T,!1),e(window,"addEventListener")?window.addEventListener("load",T,!1):e(window,"attachEvent")?window.attachEvent("onload",T):r("Window does not have required addEventListener or attachEvent method"),w)}(),rangy.createModule("DomUtil",function(e,t){function i(e){var t;return typeof e.namespaceURI==T||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function n(e){var t=e.parentNode;return 1==t.nodeType?t:null}function o(e){for(var t=0;e=e.previousSibling;)t++;return t}function r(e){var t;return c(e)?e.length:(t=e.childNodes)?t.length:0}function s(e,t){var i,n=[];for(i=e;i;i=i.parentNode)n.push(i);for(i=t;i;i=i.parentNode)if(E(n,i))return i;return null}function a(e,t,i){for(var n=i?t:t.parentNode;n;){if(n===e)return!0;n=n.parentNode}return!1}function l(e,t,i){for(var n,o=i?e:e.parentNode;o;){if(n=o.parentNode,n===t)return o;o=n}return null}function c(e){var t=e.nodeType;return 3==t||4==t||8==t}function d(e,t){var i=t.nextSibling,n=t.parentNode;return i?n.insertBefore(e,i):n.appendChild(e),e}function u(e,t){var i=e.cloneNode(!1);return i.deleteData(0,t),e.deleteData(t,e.length-t),d(i,e),i}function h(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=T)return e.ownerDocument;if(typeof e.document!=T)return e.document;if(e.parentNode)return h(e.parentNode);throw new Error("getDocument: no document found for node")}function f(e){var t=h(e);if(typeof t.defaultView!=T)return t.defaultView;if(typeof t.parentWindow!=T)return t.parentWindow;throw new Error("Cannot get a window object for node")}function p(e){if(typeof e.contentDocument!=T)return e.contentDocument;if(typeof e.contentWindow!=T)return e.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function m(e){if(typeof e.contentWindow!=T)return e.contentWindow;if(typeof e.contentDocument!=T)return e.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function g(e){return S.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]}function v(e){for(var t;t=e.parentNode;)e=t;return e}function y(e,t,i,n){var r,a,c,d,u;if(e==i)return t===n?0:n>t?-1:1;if(r=l(i,e,!0))return t<=o(r)?-1:1;if(r=l(e,i,!0))return o(r)<n?-1:1;if(a=s(e,i),c=e===a?a:l(e,a,!0),d=i===a?a:l(i,a,!0),c===d)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(u=a.firstChild;u;){if(u===c)return-1;if(u===d)return 1;u=u.nextSibling}throw new Error("Should not be here!")}function b(e){for(var t,i=h(e).createDocumentFragment();t=e.firstChild;)i.appendChild(t);return i}function w(e){if(!e)return"[No node]";if(c(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">["+e.childNodes.length+"]"}return e.nodeName}function _(e){this.root=e,this._next=e}function x(e){return new _(e)}function C(e,t){this.node=e,this.offset=t}function k(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var T="undefined",S=e.util;S.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),S.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var D=document.createElement("div");S.areHostMethods(D,["insertBefore","appendChild","cloneNode"]||!S.areHostObjects(D,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),S.isHostProperty(D,"innerHTML")||t.fail("Element is missing innerHTML property");var N=document.createTextNode("test");S.areHostMethods(N,["splitText","deleteData","insertData","appendData","cloneNode"]||!S.areHostObjects(D,["previousSibling","nextSibling","childNodes","parentNode"])||!S.areHostProperties(N,["data"]))||t.fail("Incomplete Text Node implementation");var E=function(e,t){for(var i=e.length;i--;)if(e[i]===t)return!0;return!1};_.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,i=this._current=this._next;if(this._current)if(e=i.firstChild)this._next=e;else{for(t=null;i!==this.root&&!(t=i.nextSibling);)i=i.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},C.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+w(this.node)+":"+this.offset+")]"}},k.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},k.prototype.toString=function(){return this.message},e.dom={arrayContains:E,isHtmlNamespace:i,parentElement:n,getNodeIndex:o,getNodeLength:r,getCommonAncestor:s,isAncestorOf:a,getClosestAncestorIn:l,isCharacterDataNode:c,insertAfter:d,splitDataNode:u,getDocument:h,getWindow:f,getIframeWindow:m,getIframeDocument:p,getBody:g,getRootContainer:v,comparePoints:y,inspectNode:w,fragmentFromNodeChildren:b,createIterator:x,DomPosition:C},e.DOMException=k}),rangy.createModule("DomRange",function(e){function t(e,t){return 3!=e.nodeType&&(O.isAncestorOf(e,t.startContainer,!0)||O.isAncestorOf(e,t.endContainer,!0))}function i(e){return O.getDocument(e.startContainer)}function n(e,t,i){var n=e._listeners[t];if(n)for(var o=0,r=n.length;r>o;++o)n[o].call(e,{target:e,args:i})}function o(e){return new H(e.parentNode,O.getNodeIndex(e))}function r(e){return new H(e.parentNode,O.getNodeIndex(e)+1)}function s(e,t,i){var n=11==e.nodeType?e.firstChild:e;return O.isCharacterDataNode(t)?i==t.length?O.insertAfter(e,t):t.parentNode.insertBefore(e,0==i?t:O.splitDataNode(t,i)):i>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[i]),n}function a(e){for(var t,n,o,r=i(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(o=e.getSubtreeIterator(),n.appendChild(a(o)),o.detach(!0)),10==n.nodeType)throw new R("HIERARCHY_REQUEST_ERR");r.appendChild(n)}return r}function l(e,t,i){var n,o;i=i||{stop:!1};for(var r,s;r=e.next();)if(e.isPartiallySelectedSubtree()){if(t(r)===!1)return i.stop=!0,void 0;if(s=e.getSubtreeIterator(),l(s,t,i),s.detach(!0),i.stop)return}else for(n=O.createIterator(r);o=n.next();)if(t(o)===!1)return i.stop=!0,void 0}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach(!0)):e.remove()}function d(e){for(var t,n,o=i(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(d(n)),n.detach(!0)):e.remove(),10==t.nodeType)throw new R("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function u(e,t,i){var n,o=!(!t||!t.length),r=!!i;o&&(n=new RegExp("^("+t.join("|")+")$"));var s=[];return l(new f(e,!1),function(e){o&&!n.test(e.nodeType)||r&&!i(e)||s.push(e)}),s}function h(e){var t="undefined"==typeof e.getName?"Range":e.getName();return"["+t+"("+O.inspectNode(e.startContainer)+":"+e.startOffset+", "+O.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function f(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var i=e.commonAncestorContainer;this.sc===this.ec&&O.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==i||O.isCharacterDataNode(this.sc)?O.getClosestAncestorIn(this.sc,i,!0):this.sc.childNodes[this.so],this._last=this.ec!==i||O.isCharacterDataNode(this.ec)?O.getClosestAncestorIn(this.ec,i,!0):this.ec.childNodes[this.eo-1])}}function p(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function m(e,t,i){this.nodes=u(e,t,i),this._next=this.nodes[0],this._position=0}function g(e){return function(t,i){for(var n,o=i?t:t.parentNode;o;){if(n=o.nodeType,O.arrayContains(e,n))return o;o=o.parentNode}return null}}function v(e,t){if(V(e,t))throw new p("INVALID_NODE_TYPE_ERR")}function y(e){if(!e.startContainer)throw new R("INVALID_STATE_ERR")}function b(e,t){if(!O.arrayContains(t,e.nodeType))throw new p("INVALID_NODE_TYPE_ERR")}function w(e,t){if(0>t||t>(O.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new R("INDEX_SIZE_ERR")}function _(e,t){if(q(e,!0)!==q(t,!0))throw new R("WRONG_DOCUMENT_ERR")}function x(e){if(Y(e,!0))throw new R("NO_MODIFICATION_ALLOWED_ERR")}function C(e,t){if(!e)throw new R(t)}function k(e){return!O.arrayContains(j,e.nodeType)&&!q(e,!0)}function T(e,t){return t<=(O.isCharacterDataNode(e)?e.length:e.childNodes.length)}function S(e){if(y(e),k(e.startContainer)||k(e.endContainer)||!T(e.startContainer,e.startOffset)||!T(e.endContainer,e.endOffset))throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function D(){}function N(e){e.START_TO_START=J,e.START_TO_END=et,e.END_TO_END=tt,e.END_TO_START=it,e.NODE_BEFORE=nt,e.NODE_AFTER=ot,e.NODE_BEFORE_AND_AFTER=rt,e.NODE_INSIDE=st}function E(e){N(e),N(e.prototype)}function $(e,t){return function(){S(this);var i,n,o=this.startContainer,s=this.startOffset,a=this.commonAncestorContainer,c=new f(this,!0);o!==a&&(i=O.getClosestAncestorIn(o,a,!0),n=r(i),o=n.node,s=n.offset),l(c,x),c.reset();var d=e(c);return c.detach(),t(this,o,s,o,s),d}}function M(i,n,s){function a(e,t){return function(i){y(this),b(i,F),b(U(i),j);var n=(e?o:r)(i);(t?l:u)(this,n.node,n.offset)}}function l(e,t,i){var o=e.endContainer,r=e.endOffset;(t!==e.startContainer||i!==e.startOffset)&&((U(t)!=U(o)||1==O.comparePoints(t,i,o,r))&&(o=t,r=i),n(e,t,i,o,r))}function u(e,t,i){var o=e.startContainer,r=e.startOffset;(t!==e.endContainer||i!==e.endOffset)&&((U(t)!=U(o)||-1==O.comparePoints(t,i,o,r))&&(o=t,r=i),n(e,o,r,t,i))}function h(e,t,i){(t!==e.startContainer||i!==e.startOffset||t!==e.endContainer||i!==e.endOffset)&&n(e,t,i,t,i)}i.prototype=new D,e.util.extend(i.prototype,{setStart:function(e,t){y(this),v(e,!0),w(e,t),l(this,e,t)},setEnd:function(e,t){y(this),v(e,!0),w(e,t),u(this,e,t)},setStartBefore:a(!0,!0),setStartAfter:a(!1,!0),setEndBefore:a(!0,!1),setEndAfter:a(!1,!1),collapse:function(e){S(this),e?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){y(this),v(e,!0),n(this,e,0,e,O.getNodeLength(e))},selectNode:function(e){y(this),v(e,!1),b(e,F);var t=o(e),i=r(e);n(this,t.node,t.offset,i.node,i.offset)},extractContents:$(d,n),deleteContents:$(c,n),canSurroundContents:function(){S(this),x(this.startContainer),x(this.endContainer);var e=new f(this,!0),i=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!i},detach:function(){s(this)},splitBoundaries:function(){S(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,o=this.endOffset,r=e===i;O.isCharacterDataNode(i)&&o>0&&o<i.length&&O.splitDataNode(i,o),O.isCharacterDataNode(e)&&t>0&&t<e.length&&(e=O.splitDataNode(e,t),r?(o-=t,i=e):i==e.parentNode&&o>=O.getNodeIndex(e)&&o++,t=0),n(this,e,t,i,o)},normalizeBoundaries:function(){S(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,o=this.endOffset,r=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(i=e,o=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},s=function(n){var r=n.previousSibling;if(r&&r.nodeType==n.nodeType){e=n;var s=n.length;if(t=r.length,n.insertData(0,r.data),r.parentNode.removeChild(r),e==i)o+=t,i=e;else if(i==n.parentNode){var a=O.getNodeIndex(n);o==a?(i=n,o=s):o>a&&o--}}},a=!0;if(O.isCharacterDataNode(i))i.length==o&&r(i);else{if(o>0){var l=i.childNodes[o-1];l&&O.isCharacterDataNode(l)&&r(l)}a=!this.collapsed}if(a){if(O.isCharacterDataNode(e))0==t&&s(e);else if(t<e.childNodes.length){var c=e.childNodes[t];c&&O.isCharacterDataNode(c)&&s(c)}}else e=i,t=o;n(this,e,t,i,o)},collapseToPoint:function(e,t){y(this),v(e,!0),w(e,t),h(this,e,t)}}),E(i)}function I(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:O.getCommonAncestor(e.startContainer,e.endContainer)}function A(e,t,i,o,r){var s=e.startContainer!==t||e.startOffset!==i,a=e.endContainer!==o||e.endOffset!==r;e.startContainer=t,e.startOffset=i,e.endContainer=o,e.endOffset=r,I(e),n(e,"boundarychange",{startMoved:s,endMoved:a})}function L(e){y(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,n(e,"detach",null),e._listeners=null}function P(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},I(this)}e.requireModules(["DomUtil"]);var O=e.dom,H=O.DomPosition,R=e.DOMException;f.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,O.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,i=this._current;!O.isCharacterDataNode(i)||i!==this.sc&&i!==this.ec?i.parentNode&&i.parentNode.removeChild(i):(e=i===this.sc?this.so:0,t=i===this.ec?this.eo:i.length,e!=t&&i.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){var e=this._current;return t(e,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse();else{e=new P(i(this.range));var t=this._current,n=t,o=0,r=t,s=O.getNodeLength(t);O.isAncestorOf(t,this.sc,!0)&&(n=this.sc,o=this.so),O.isAncestorOf(t,this.ec,!0)&&(r=this.ec,s=this.eo),A(e,n,o,r,s)}return new f(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},p.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},p.prototype.toString=function(){return this.message},m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var F=[1,3,4,5,7,8,10],j=[2,9,11],z=[5,6,10,12],B=[1,3,4,5,7,8,10,11],W=[1,3,4,5,7,8],U=O.getRootContainer,q=g([9,11]),Y=g(z),V=g([6,10,12]),X=document.createElement("style"),G=!1;try{X.innerHTML="<b>x</b>",G=3==X.firstChild.nodeType}catch(K){}e.features.htmlParsingConforms=G;var Q=G?function(e){var t=this.startContainer,i=O.getDocument(t);if(!t)throw new R("INVALID_STATE_ERR");var n=null;return 1==t.nodeType?n=t:O.isCharacterDataNode(t)&&(n=O.parentElement(t)),n=null===n||"HTML"==n.nodeName&&O.isHtmlNamespace(O.getDocument(n).documentElement)&&O.isHtmlNamespace(n)?i.createElement("body"):n.cloneNode(!1),n.innerHTML=e,O.fragmentFromNodeChildren(n)}:function(e){y(this);var t=i(this),n=t.createElement("body");return n.innerHTML=e,O.fragmentFromNodeChildren(n)},Z=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],J=0,et=1,tt=2,it=3,nt=0,ot=1,rt=2,st=3;D.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){S(this),_(this.startContainer,t.startContainer);var i,n,o,r,s=e==it||e==J?"start":"end",a=e==et||e==J?"start":"end";return i=this[s+"Container"],n=this[s+"Offset"],o=t[a+"Container"],r=t[a+"Offset"],O.comparePoints(i,n,o,r)},insertNode:function(e){if(S(this),b(e,B),x(this.startContainer),O.isAncestorOf(e,this.startContainer,!0))throw new R("HIERARCHY_REQUEST_ERR");var t=s(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){S(this);var e,t;if(this.collapsed)return i(this).createDocumentFragment();if(this.startContainer===this.endContainer&&O.isCharacterDataNode(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=i(this).createDocumentFragment(),t.appendChild(e),t;var n=new f(this,!0);return e=a(n),n.detach(),e},canSurroundContents:function(){S(this),x(this.startContainer),x(this.endContainer);var e=new f(this,!0),i=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!i},surroundContents:function(e){if(b(e,W),!this.canSurroundContents())throw new p("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);s(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){S(this);for(var e,t=new P(i(this)),n=Z.length;n--;)e=Z[n],t[e]=this[e];return t},toString:function(){S(this);var e=this.startContainer;if(e===this.endContainer&&O.isCharacterDataNode(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],i=new f(this,!0);return l(i,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),i.detach(),t.join("")},compareNode:function(e){S(this);var t=e.parentNode,i=O.getNodeIndex(e);if(!t)throw new R("NOT_FOUND_ERR");var n=this.comparePoint(t,i),o=this.comparePoint(t,i+1);return 0>n?o>0?rt:nt:o>0?ot:st},comparePoint:function(e,t){return S(this),C(e,"HIERARCHY_REQUEST_ERR"),_(e,this.startContainer),O.comparePoints(e,t,this.startContainer,this.startOffset)<0?-1:O.comparePoints(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Q,toHtml:function(){S(this);var e=i(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){if(S(this),C(e,"NOT_FOUND_ERR"),O.getDocument(e)!==i(this))return!1;var n=e.parentNode,o=O.getNodeIndex(e);C(n,"NOT_FOUND_ERR");var r=O.comparePoints(n,o,this.endContainer,this.endOffset),s=O.comparePoints(n,o+1,this.startContainer,this.startOffset);return t?0>=r&&s>=0:0>r&&s>0},isPointInRange:function(e,t){return S(this),C(e,"HIERARCHY_REQUEST_ERR"),_(e,this.startContainer),O.comparePoints(e,t,this.startContainer,this.startOffset)>=0&&O.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){if(S(this),i(e)!=i(this))throw new R("WRONG_DOCUMENT_ERR");var n=O.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),o=O.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?0>=n&&o>=0:0>n&&o>0},intersection:function(e){if(this.intersectsRange(e)){var t=O.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),i=O.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),n=this.cloneRange();return-1==t&&n.setStart(e.startContainer,e.startOffset),1==i&&n.setEnd(e.endContainer,e.endOffset),n}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return-1==O.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==O.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new p("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==st},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,O.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var i=t.getNodes([3]);if(i.length>0){t.setStart(i[0],0);var n=i.pop();t.setEnd(n,n.length);var o=this.containsRange(t);return t.detach(),o}return this.containsNodeContents(e)},createNodeIterator:function(e,t){return S(this),new m(this,e,t)},getNodes:function(e,t){return S(this),u(this,e,t)},getDocument:function(){return i(this)},collapseBefore:function(e){y(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){y(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return P.rangesEqual(this,e)},inspect:function(){return h(this)}},M(P,A,L),e.rangePrototype=D.prototype,P.rangeProperties=Z,P.RangeIterator=f,P.copyComparisonConstants=E,P.createPrototypeRange=M,P.inspect=h,P.getRangeDocument=i,P.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},e.DomRange=P,e.RangeException=p}),rangy.createModule("WrappedRange",function(e){function t(e){var t=e.parentElement(),i=e.duplicate();i.collapse(!0);var n=i.parentElement();i=e.duplicate(),i.collapse(!1);var o=i.parentElement(),r=n==o?n:s.getCommonAncestor(n,o);return r==t?r:s.getCommonAncestor(t,r)}function i(e){return 0==e.compareEndPoints("StartToEnd",e)}function n(e,t,i,n){var o=e.duplicate();o.collapse(i);var r=o.parentElement();if(s.isAncestorOf(t,r,!0)||(r=t),!r.canHaveHTML)return new a(r.parentNode,s.getNodeIndex(r));var l,c,d,u,h,f=s.getDocument(r).createElement("span"),p=i?"StartToStart":"StartToEnd";do r.insertBefore(f,f.previousSibling),o.moveToElementText(f);while((l=o.compareEndPoints(p,e))>0&&f.previousSibling);if(h=f.nextSibling,-1==l&&h&&s.isCharacterDataNode(h)){o.setEndPoint(i?"EndToStart":"EndToEnd",e);var m;if(/[\r\n]/.test(h.data)){var g=o.duplicate(),v=g.text.replace(/\r\n/g,"\r").length;for(m=g.moveStart("character",v);-1==(l=g.compareEndPoints("StartToEnd",g));)m++,g.moveStart("character",1)}else m=o.text.length;u=new a(h,m)}else c=(n||!i)&&f.previousSibling,d=(n||i)&&f.nextSibling,u=d&&s.isCharacterDataNode(d)?new a(d,0):c&&s.isCharacterDataNode(c)?new a(c,c.length):new a(r,s.getNodeIndex(f));return f.parentNode.removeChild(f),u}function o(e,t){var i,n,o,r,a=e.offset,l=s.getDocument(e.node),c=l.body.createTextRange(),d=s.isCharacterDataNode(e.node);return d?(i=e.node,n=i.parentNode):(r=e.node.childNodes,i=a<r.length?r[a]:null,n=e.node),o=l.createElement("span"),o.innerHTML="&#feff;",i?n.insertBefore(o,i):n.appendChild(o),c.moveToElementText(o),c.collapse(!t),n.removeChild(o),d&&c[t?"moveStart":"moveEnd"]("character",a),c}e.requireModules(["DomUtil","DomRange"]);var r,s=e.dom,a=s.DomPosition,l=e.DomRange;if(!e.features.implementsDomRange||e.features.implementsTextRange&&e.config.preferTextRange){if(e.features.implementsTextRange){r=function(e){this.textRange=e,this.refresh()},r.prototype=new l(document),r.prototype.refresh=function(){var e,o,r=t(this.textRange);i(this.textRange)?o=e=n(this.textRange,r,!0,!0):(e=n(this.textRange,r,!0,!1),o=n(this.textRange,r,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(o.node,o.offset)},l.copyComparisonConstants(r);var c=function(){return this}();"undefined"==typeof c.Range&&(c.Range=r),e.createNativeRange=function(e){return e=e||document,e.body.createTextRange()}}}else!function(){function t(e){for(var t,i=d.length;i--;)t=d[i],e[t]=e.nativeRange[t]}function i(e,t,i,n,o){var r=e.startContainer!==t||e.startOffset!=i,s=e.endContainer!==n||e.endOffset!=o;(r||s)&&(e.setEnd(n,o),e.setStart(t,i))}function n(e){e.nativeRange.detach(),e.detached=!0;for(var t,i=d.length;i--;)t=d[i],e[t]=null}var o,a,c,d=l.rangeProperties;r=function(e){if(!e)throw new Error("Range must be specified");this.nativeRange=e,t(this)},l.createPrototypeRange(r,i,n),o=r.prototype,o.selectNode=function(e){this.nativeRange.selectNode(e),t(this)},o.deleteContents=function(){this.nativeRange.deleteContents(),t(this)},o.extractContents=function(){var e=this.nativeRange.extractContents();return t(this),e},o.cloneContents=function(){return this.nativeRange.cloneContents()},o.surroundContents=function(e){this.nativeRange.surroundContents(e),t(this)},o.collapse=function(e){this.nativeRange.collapse(e),t(this)},o.cloneRange=function(){return new r(this.nativeRange.cloneRange())},o.refresh=function(){t(this)},o.toString=function(){return this.nativeRange.toString()};var u=document.createTextNode("test");s.getBody(document).appendChild(u);var h=document.createRange();h.setStart(u,0),h.setEnd(u,0);try{h.setStart(u,1),a=!0,o.setStart=function(e,i){this.nativeRange.setStart(e,i),t(this)},o.setEnd=function(e,i){this.nativeRange.setEnd(e,i),t(this)},c=function(e){return function(i){this.nativeRange[e](i),t(this)}}}catch(f){a=!1,o.setStart=function(e,i){try{this.nativeRange.setStart(e,i)}catch(n){this.nativeRange.setEnd(e,i),this.nativeRange.setStart(e,i)}t(this)},o.setEnd=function(e,i){try{this.nativeRange.setEnd(e,i)}catch(n){this.nativeRange.setStart(e,i),this.nativeRange.setEnd(e,i)}t(this)},c=function(e,i){return function(n){try{this.nativeRange[e](n)}catch(o){this.nativeRange[i](n),this.nativeRange[e](n)}t(this)}}}o.setStartBefore=c("setStartBefore","setEndBefore"),o.setStartAfter=c("setStartAfter","setEndAfter"),o.setEndBefore=c("setEndBefore","setStartBefore"),o.setEndAfter=c("setEndAfter","setStartAfter"),h.selectNodeContents(u),o.selectNodeContents=h.startContainer==u&&h.endContainer==u&&0==h.startOffset&&h.endOffset==u.length?function(e){this.nativeRange.selectNodeContents(e),t(this)}:function(e){this.setStart(e,0),this.setEnd(e,l.getEndOffset(e))},h.selectNodeContents(u),h.setEnd(u,3);var p=document.createRange();p.selectNodeContents(u),p.setEnd(u,4),p.setStart(u,2),o.compareBoundaryPoints=-1==h.compareBoundaryPoints(h.START_TO_END,p)&1==h.compareBoundaryPoints(h.END_TO_START,p)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},e.util.isHostMethod(h,"createContextualFragment")&&(o.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),s.getBody(document).removeChild(u),h.detach(),p.detach()}(),e.createNativeRange=function(e){return e=e||document,e.createRange()};e.features.implementsTextRange&&(r.rangeToTextRange=function(e){if(e.collapsed){var t=o(new a(e.startContainer,e.startOffset),!0);return t}var i=o(new a(e.startContainer,e.startOffset),!0),n=o(new a(e.endContainer,e.endOffset),!1),r=s.getDocument(e.startContainer).body.createTextRange();return r.setEndPoint("StartToStart",i),r.setEndPoint("EndToEnd",n),r}),r.prototype.getName=function(){return"WrappedRange"},e.WrappedRange=r,e.createRange=function(t){return t=t||document,new r(e.createNativeRange(t))},e.createRangyRange=function(e){return e=e||document,new l(e)},e.createIframeRange=function(t){return e.createRange(s.getIframeDocument(t))},e.createIframeRangyRange=function(t){return e.createRangyRange(s.getIframeDocument(t))},e.addCreateMissingNativeApiListener(function(t){var i=t.document;"undefined"==typeof i.createRange&&(i.createRange=function(){return e.createRange(this)}),i=t=null})}),rangy.createModule("WrappedSelection",function(e,t){function i(e){return(e||window).getSelection()}function n(e){return(e||window).document.selection}function o(e,t,i){var n=i?"end":"start",o=i?"start":"end";e.anchorNode=t[n+"Container"],e.anchorOffset=t[n+"Offset"],e.focusNode=t[o+"Container"],e.focusOffset=t[o+"Offset"]}function r(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function s(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function a(t){var i;return t instanceof k?(i=t._selectionNativeRange,i||(i=e.createNativeRange(x.getDocument(t.startContainer)),i.setEnd(t.endContainer,t.endOffset),i.setStart(t.startContainer,t.startOffset),t._selectionNativeRange=i,t.attachListener("detach",function(){this._selectionNativeRange=null}))):t instanceof T?i=t.nativeRange:e.features.implementsDomRange&&t instanceof x.getWindow(t.startContainer).Range&&(i=t),i}function l(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,i=e.length;i>t;++t)if(!x.isAncestorOf(e[0],e[t]))return!1;return!0}function c(e){var t=e.getNodes();if(!l(t))throw new Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return t[0]}function d(e){return!!e&&"undefined"!=typeof e.text}function u(e,t){var i=new T(t);e._ranges=[i],o(e,i,!1),e.rangeCount=1,e.isCollapsed=i.collapsed}function h(t){if(t._ranges.length=0,"None"==t.docSelection.type)s(t);else{var i=t.docSelection.createRange();if(d(i))u(t,i);else{t.rangeCount=i.length;for(var n,r=x.getDocument(i.item(0)),a=0;a<t.rangeCount;++a)n=e.createRange(r),n.selectNode(i.item(a)),t._ranges.push(n);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,o(t,t._ranges[t.rangeCount-1],!1)}}}function f(e,t){for(var i=e.docSelection.createRange(),n=c(t),o=x.getDocument(i.item(0)),r=x.getBody(o).createControlRange(),s=0,a=i.length;a>s;++s)r.add(i.item(s));try{r.add(n)}catch(l){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}r.select(),h(e)}function p(e,t,i){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=i,this.refresh()}function m(e,t){for(var i,n=x.getDocument(t[0].startContainer),o=x.getBody(n).createControlRange(),r=0;rangeCount>r;++r){i=c(t[r]);try{o.add(i)}catch(s){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")
}}o.select(),h(e)}function g(e,t){if(e.anchorNode&&x.getDocument(e.anchorNode)!==x.getDocument(t))throw new S("WRONG_DOCUMENT_ERR")}function v(e){var t=[],i=new D(e.anchorNode,e.anchorOffset),n=new D(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var r=0,s=e.rangeCount;s>r;++r)t[r]=k.inspect(e.getRangeAt(r));return"["+o+"(Ranges: "+t.join(", ")+")(anchor: "+i.inspect()+", focus: "+n.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]),e.config.checkSelectionRanges=!0;var y,b,w="boolean",_="_rangySelection",x=e.dom,C=e.util,k=e.DomRange,T=e.WrappedRange,S=e.DOMException,D=x.DomPosition,N="Control",E=e.util.isHostMethod(window,"getSelection"),$=e.util.isHostObject(document,"selection"),M=$&&(!E||e.config.preferTextRange);M?(y=n,e.isSelectionValid=function(e){var t=(e||window).document,i=t.selection;return"None"!=i.type||x.getDocument(i.createRange().parentElement())==t}):E?(y=i,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=y;var I=y(),A=e.createNativeRange(document),L=x.getBody(document),P=C.areHostObjects(I,["anchorNode","focusNode"]&&C.areHostProperties(I,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=P;var O=C.isHostMethod(I,"extend");e.features.selectionHasExtend=O;var H="number"==typeof I.rangeCount;e.features.selectionHasRangeCount=H;var R=!1,F=!0;C.areHostMethods(I,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof I.rangeCount&&e.features.implementsDomRange&&function(){var e=document.createElement("iframe");L.appendChild(e);var t=x.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var i=x.getIframeWindow(e).getSelection(),n=t.documentElement,o=n.lastChild,r=o.firstChild,s=t.createRange();s.setStart(r,1),s.collapse(!0),i.addRange(s),F=1==i.rangeCount,i.removeAllRanges();var a=s.cloneRange();s.setStart(r,0),a.setEnd(r,2),i.addRange(s),i.addRange(a),R=2==i.rangeCount,s.detach(),a.detach(),L.removeChild(e)}(),e.features.selectionSupportsMultipleRanges=R,e.features.collapsedNonEditableSelectionsSupported=F;var j,z=!1;L&&C.isHostMethod(L,"createControlRange")&&(j=L.createControlRange(),C.areHostProperties(j,["item","add"])&&(z=!0)),e.features.implementsControlRange=z,b=P?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};var B;C.isHostMethod(I,"getRangeAt")?B=function(e,t){try{return e.getRangeAt(t)}catch(i){return null}}:P&&(B=function(t){var i=x.getDocument(t.anchorNode),n=e.createRange(i);return n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset),n.collapsed!==this.isCollapsed&&(n.setStart(t.focusNode,t.focusOffset),n.setEnd(t.anchorNode,t.anchorOffset)),n}),e.getSelection=function(e){e=e||window;var t=e[_],i=y(e),o=$?n(e):null;return t?(t.nativeSelection=i,t.docSelection=o,t.refresh(e)):(t=new p(i,o,e),e[_]=t),t},e.getIframeSelection=function(t){return e.getSelection(x.getIframeWindow(t))};var W=p.prototype;if(!M&&P&&C.areHostMethods(I,["removeAllRanges","addRange"])){W.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),s(this)};var U=function(t,i){var n=k.getRangeDocument(i),o=e.createRange(n);o.collapseToPoint(i.endContainer,i.endOffset),t.nativeSelection.addRange(a(o)),t.nativeSelection.extend(i.startContainer,i.startOffset),t.refresh()};W.addRange=H?function(t,i){if(z&&$&&this.docSelection.type==N)f(this,t);else if(i&&O)U(this,t);else{var n;if(R?n=this.rangeCount:(this.removeAllRanges(),n=0),this.nativeSelection.addRange(a(t)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==n+1){if(e.config.checkSelectionRanges){var r=B(this.nativeSelection,this.rangeCount-1);r&&!k.rangesEqual(r,t)&&(t=new T(r))}this._ranges[this.rangeCount-1]=t,o(this,t,V(this.nativeSelection)),this.isCollapsed=b(this)}else this.refresh()}}:function(e,t){t&&O?U(this,e):(this.nativeSelection.addRange(a(e)),this.refresh())},W.setRanges=function(e){if(z&&e.length>1)m(this,e);else{this.removeAllRanges();for(var t=0,i=e.length;i>t;++t)this.addRange(e[t])}}}else{if(!(C.isHostMethod(I,"empty")&&C.isHostMethod(A,"select")&&z&&M))return t.fail("No means of selecting a Range or TextRange was found"),!1;W.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=x.getDocument(this.anchorNode);else if(this.docSelection.type==N){var t=this.docSelection.createRange();t.length&&(e=x.getDocument(t.item(0)).body.createTextRange())}if(e){var i=e.body.createTextRange();i.select(),this.docSelection.empty()}}}catch(n){}s(this)},W.addRange=function(e){this.docSelection.type==N?f(this,e):(T.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,o(this,e,!1))},W.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?m(this,e):t&&this.addRange(e[0])}}W.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new S("INDEX_SIZE_ERR");return this._ranges[e]};var q;if(M)q=function(t){var i;e.isSelectionValid(t.win)?i=t.docSelection.createRange():(i=x.getBody(t.win.document).createTextRange(),i.collapse(!0)),t.docSelection.type==N?h(t):d(i)?u(t,i):s(t)};else if(C.isHostMethod(I,"getRangeAt")&&"number"==typeof I.rangeCount)q=function(t){if(z&&$&&t.docSelection.type==N)h(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var i=0,n=t.rangeCount;n>i;++i)t._ranges[i]=new e.WrappedRange(t.nativeSelection.getRangeAt(i));o(t,t._ranges[t.rangeCount-1],V(t.nativeSelection)),t.isCollapsed=b(t)}else s(t)};else{if(!P||typeof I.isCollapsed!=w||typeof A.collapsed!=w||!e.features.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;q=function(e){var t,i=e.nativeSelection;i.anchorNode?(t=B(i,0),e._ranges=[t],e.rangeCount=1,r(e),e.isCollapsed=b(e)):s(e)}}W.refresh=function(e){var t=e?this._ranges.slice(0):null;if(q(this),e){var i=t.length;if(i!=this._ranges.length)return!1;for(;i--;)if(!k.rangesEqual(t[i],this._ranges[i]))return!1;return!0}};var Y=function(e,t){var i=e.getAllRanges(),n=!1;e.removeAllRanges();for(var o=0,r=i.length;r>o;++o)n||t!==i[o]?e.addRange(i[o]):n=!0;e.rangeCount||s(e)};W.removeRange=z?function(e){if(this.docSelection.type==N){for(var t,i=this.docSelection.createRange(),n=c(e),o=x.getDocument(i.item(0)),r=x.getBody(o).createControlRange(),s=!1,a=0,l=i.length;l>a;++a)t=i.item(a),t!==n||s?r.add(i.item(a)):s=!0;r.select(),h(this)}else Y(this,e)}:function(e){Y(this,e)};var V;!M&&P&&e.features.implementsDomRange?(V=function(e){var t=!1;return e.anchorNode&&(t=1==x.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t},W.isBackwards=function(){return V(this)}):V=W.isBackwards=function(){return!1},W.toString=function(){for(var e=[],t=0,i=this.rangeCount;i>t;++t)e[t]=""+this._ranges[t];return e.join("")},W.collapse=function(t,i){g(this,t);var n=e.createRange(x.getDocument(t));n.collapseToPoint(t,i),this.removeAllRanges(),this.addRange(n),this.isCollapsed=!0},W.collapseToStart=function(){if(!this.rangeCount)throw new S("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},W.collapseToEnd=function(){if(!this.rangeCount)throw new S("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},W.selectAllChildren=function(t){g(this,t);var i=e.createRange(x.getDocument(t));i.selectNodeContents(t),this.removeAllRanges(),this.addRange(i)},W.deleteFromDocument=function(){if(z&&$&&this.docSelection.type==N){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),e.parentNode.removeChild(e);this.refresh()}else if(this.rangeCount){var i=this.getAllRanges();this.removeAllRanges();for(var n=0,o=i.length;o>n;++n)i[n].deleteContents();this.addRange(i[o-1])}},W.getAllRanges=function(){return this._ranges.slice(0)},W.setSingleRange=function(e){this.setRanges([e])},W.containsNode=function(e,t){for(var i=0,n=this._ranges.length;n>i;++i)if(this._ranges[i].containsNode(e,t))return!0;return!1},W.toHtml=function(){var e="";if(this.rangeCount){for(var t=k.getRangeDocument(this._ranges[0]).createElement("div"),i=0,n=this._ranges.length;n>i;++i)t.appendChild(this._ranges[i].cloneContents());e=t.innerHTML}return e},W.getName=function(){return"WrappedSelection"},W.inspect=function(){return v(this)},W.detach=function(){this.win[_]=null,this.win=this.anchorNode=this.focusNode=null},p.inspect=v,e.Selection=p,e.selectionPrototype=W,e.addCreateMissingNativeApiListener(function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return e.getSelection(this)}),t=null})});/*
	Base.js, version 1.1a
	Copyright 2006-2010, Dean Edwards
	License: http://www.opensource.org/licenses/mit-license.php
*/
var Base=function(){};Base.extend=function(e,t){var i=Base.prototype.extend;Base._prototyping=!0;var n=new this;i.call(n,e),n.base=function(){},delete Base._prototyping;var o=n.constructor,r=n.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==r)this._constructing=!0,o.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||i).call(arguments[0],n)};return r.ancestor=this,r.extend=this.extend,r.forEach=this.forEach,r.implement=this.implement,r.prototype=n,r.toString=this.toString,r.valueOf=function(e){return"object"==e?r:o.valueOf()},i.call(r,t),"function"==typeof r.init&&r.init(),r},Base.prototype={extend:function(e,t){if(arguments.length>1){var i=this[e];if(i&&"function"==typeof t&&(!i.valueOf||i.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var n=t.valueOf();t=function(){var e=this.base||Base.prototype.base;this.base=i;var t=n.apply(this,arguments);return this.base=e,t},t.valueOf=function(e){return"object"==e?t:n},t.toString=Base.toString}this[e]=t}else if(e){var o=Base.prototype.extend;Base._prototyping||"function"==typeof this||(o=this.extend||o);for(var r={toSource:null},s=["constructor","toString","valueOf"],a=Base._prototyping?0:1;l=s[a++];)e[l]!=r[l]&&o.call(this,l,e[l]);for(var l in e)r[l]||o.call(this,l,e[l])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,i){for(var n in e)void 0===this.prototype[n]&&t.call(i,e[n],n,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}}),wysihtml5.browser=function(){function e(e){return(/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/)||[,0])[1]}var t=navigator.userAgent,i=document.createElement("div"),n=-1!==t.indexOf("MSIE")&&-1===t.indexOf("Opera"),o=-1!==t.indexOf("Gecko")&&-1===t.indexOf("KHTML"),r=-1!==t.indexOf("AppleWebKit/"),s=-1!==t.indexOf("Chrome/"),a=-1!==t.indexOf("Opera/");return{USER_AGENT:t,supported:function(){var t=this.USER_AGENT.toLowerCase(),n="contentEditable"in i,o=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,r=document.querySelector&&document.querySelectorAll,s=this.isIos()&&e(t)<5||-1!==t.indexOf("opera mobi")||-1!==t.indexOf("hpwos/");return n&&o&&r&&!s},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var e=this.USER_AGENT.toLowerCase();return-1!==e.indexOf("webkit")&&-1!==e.indexOf("mobile")},supportsSandboxedIframes:function(){return n},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!o},hasCurrentStyleProperty:function(){return"currentStyle"in i},insertsLineBreaksOnReturn:function(){return o},supportsPlaceholderAttributeOn:function(e){return"placeholder"in e},supportsEvent:function(e){return"on"+e in i||function(){return i.setAttribute("on"+e,"return;"),"function"==typeof i["on"+e]}()},supportsEventsInIframeCorrectly:function(){return!a},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return r||o},supportsDataTransfer:function(){try{return r&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(e){return!1}},supportsHTML5Tags:function(e){var t=e.createElement("div"),i="<article>foo</article>";return t.innerHTML=i,t.innerHTML.toLowerCase()===i},supportsCommand:function(){var e={formatBlock:n,insertUnorderedList:n||a||r,insertOrderedList:n||a||r},t={insertHTML:o};return function(i,n){var o=e[n];if(!o){try{return i.queryCommandSupported(n)}catch(r){}try{return i.queryCommandEnabled(n)}catch(s){return!!t[n]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return n},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return o||a||r},supportsGetAttributeCorrectly:function(){var e=document.createElement("td");return"1"!=e.getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return o||n||a},clearsListsInContentEditableCorrectly:function(){return o||n||r},autoScrollsToCaret:function(){return!r},autoClosesUnclosedTags:function(){var e,t,n=i.cloneNode(!1);return n.innerHTML="<p><div></div>",t=n.innerHTML.toLowerCase(),e="<p></p><div></div>"===t||"<p><div></div></p>"===t,this.autoClosesUnclosedTags=function(){return e},e},supportsNativeGetElementsByClassName:function(){return-1!==String(document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},supportsClassList:function(){return"classList"in i},needsSpaceAfterLineBreak:function(){return a},supportsSpeechApiOn:function(e){var i=t.match(/Chrome\/(\d+)/)||[,0];return i[1]>=11&&("onwebkitspeechchange"in e||"speech"in e)},crashesWhenDefineProperty:function(e){return n&&("XMLHttpRequest"===e||"XDomainRequest"===e)},doesAsyncFocus:function(){return n},hasProblemsSettingCaretAfterImg:function(){return n},hasUndoInContextMenu:function(){return o||s||a}}}(),wysihtml5.lang.array=function(e){return{contains:function(t){if(e.indexOf)return-1!==e.indexOf(t);for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return!0;return!1},without:function(t){t=wysihtml5.lang.array(t);for(var i=[],n=0,o=e.length;o>n;n++)t.contains(e[n])||i.push(e[n]);return i},get:function(){for(var t=0,i=e.length,n=[];i>t;t++)n.push(e[t]);return n}}},wysihtml5.lang.Dispatcher=Base.extend({observe:function(e,t){return this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t),this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(e,t){this.events=this.events||{};for(var i=this.events[e]||[],n=0;n<i.length;n++)i[n].call(this,t);return this},stopObserving:function(e,t){this.events=this.events||{};var i,n,o=0;if(e){for(i=this.events[e]||[],n=[];o<i.length;o++)i[o]!==t&&t&&n.push(i[o]);this.events[e]=n}else this.events={};return this}}),wysihtml5.lang.object=function(e){return{merge:function(t){for(var i in t)e[i]=t[i];return this},get:function(){return e},clone:function(){var t,i={};for(t in e)i[t]=e[t];return i},isArray:function(){return"[object Array]"===Object.prototype.toString.call(e)}}},function(){var e=/^\s+/,t=/\s+$/;wysihtml5.lang.string=function(i){return i=String(i),{trim:function(){return i.replace(e,"").replace(t,"")},interpolate:function(e){for(var t in e)i=this.replace("#{"+t+"}").by(e[t]);return i},replace:function(e){return{by:function(t){return i.split(e).join(t)}}}}}}(),function(e){function t(e){return r(e)?e:(e===e.ownerDocument.documentElement&&(e=e.ownerDocument.body),s(e))}function i(e){return e.replace(l,function(e,t){var i=(t.match(c)||[])[1]||"",n=u[i];t=t.replace(c,""),t.split(n).length>t.split(i).length&&(t+=i,i="");var o=t,r=t;return t.length>d&&(r=r.substr(0,d)+"..."),"www."===o.substr(0,4)&&(o="http://"+o),'<a href="'+o+'">'+r+"</a>"+i})}function n(e){var t=e._wysihtml5_tempElement;return t||(t=e._wysihtml5_tempElement=e.createElement("div")),t}function o(e){var t=e.parentNode,o=n(t.ownerDocument);for(o.innerHTML="<span></span>"+i(e.data),o.removeChild(o.firstChild);o.firstChild;)t.insertBefore(o.firstChild,e);t.removeChild(e)}function r(e){for(var t;e.parentNode;){if(e=e.parentNode,t=e.nodeName,a.contains(t))return!0;if("body"===t)return!1}return!1}function s(t){if(!a.contains(t.nodeName)){if(t.nodeType===e.TEXT_NODE&&t.data.match(l))return o(t),void 0;for(var i=e.lang.array(t.childNodes).get(),n=i.length,r=0;n>r;r++)s(i[r]);return t}}var a=e.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),l=/((https?:\/\/|www\.)[^\s<]{3,})/gi,c=/([^\w\/\-](,?))$/i,d=100,u={")":"(","]":"[","}":"{"};e.dom.autoLink=t,e.dom.autoLink.URL_REG_EXP=l}(wysihtml5),function(e){var t=e.browser.supportsClassList(),i=e.dom;i.addClass=function(e,n){return t?e.classList.add(n):(i.hasClass(e,n)||(e.className+=" "+n),void 0)},i.removeClass=function(e,i){return t?e.classList.remove(i):(e.className=e.className.replace(new RegExp("(^|\\s+)"+i+"(\\s+|$)")," "),void 0)},i.hasClass=function(e,i){if(t)return e.classList.contains(i);var n=e.className;return n.length>0&&(n==i||new RegExp("(^|\\s)"+i+"(\\s|$)").test(n))}}(wysihtml5),wysihtml5.dom.contains=function(){var e=document.documentElement;return e.contains?function(e,t){return t.nodeType!==wysihtml5.ELEMENT_NODE&&(t=t.parentNode),e!==t&&e.contains(t)}:e.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:void 0}(),wysihtml5.dom.convertToList=function(){function e(e,t){var i=e.createElement("li");return t.appendChild(i),i}function t(e,t){return e.createElement(t)}function i(i,n){if("UL"===i.nodeName||"OL"===i.nodeName||"MENU"===i.nodeName)return i;var o,r,s,a,l,c,d,u,h,f=i.ownerDocument,p=t(f,n),m=i.querySelectorAll("br"),g=m.length;for(h=0;g>h;h++)for(a=m[h];(l=a.parentNode)&&l!==i&&l.lastChild===a;){if("block"===wysihtml5.dom.getStyle("display").from(l)){l.removeChild(a);break}wysihtml5.dom.insert(a).after(a.parentNode)}for(o=wysihtml5.lang.array(i.childNodes).get(),r=o.length,h=0;r>h;h++)u=u||e(f,p),s=o[h],c="block"===wysihtml5.dom.getStyle("display").from(s),d="BR"===s.nodeName,c?(u=u.firstChild?e(f,p):u,u.appendChild(s),u=null):d?u=u.firstChild?null:u:u.appendChild(s);return i.parentNode.replaceChild(p,i),p}return i}(),wysihtml5.dom.copyAttributes=function(e){return{from:function(t){return{to:function(i){for(var n,o=0,r=e.length;r>o;o++)n=e[o],"undefined"!=typeof t[n]&&""!==t[n]&&(i[n]=t[n]);return{andTo:arguments.callee}}}}}},function(e){var t=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],i=function(t){return n(t)?parseInt(e.getStyle("width").from(t),10)<t.offsetWidth:!1},n=function(i){for(var n=0,o=t.length;o>n;n++)if("border-box"===e.getStyle(t[n]).from(i))return t[n]};e.copyStyles=function(n){return{from:function(o){i(o)&&(n=wysihtml5.lang.array(n).without(t));for(var r,s="",a=n.length,l=0;a>l;l++)r=n[l],s+=r+":"+e.getStyle(r).from(o)+";";return{to:function(t){return e.setStyles(s).on(t),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(e){e.dom.delegate=function(t,i,n,o){return e.dom.observe(t,n,function(n){for(var r=n.target,s=e.lang.array(t.querySelectorAll(i));r&&r!==t;){if(s.contains(r)){o.call(r,n);break}r=r.parentNode}})}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var e=function(e,t){var i=t.createElement("div");i.style.display="none",t.body.appendChild(i);try{i.innerHTML=e}catch(n){}return t.body.removeChild(i),i},t=function(e){if(!e._wysihtml5_supportsHTML5Tags){for(var t=0,n=i.length;n>t;t++)e.createElement(i[t]);e._wysihtml5_supportsHTML5Tags=!0}},i=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(i,n){n=n||document;var o;return"object"==typeof i&&i.nodeType?(o=n.createElement("div"),o.appendChild(i)):wysihtml5.browser.supportsHTML5Tags(n)?(o=n.createElement("div"),o.innerHTML=i):(t(n),o=e(i,n)),o}}(),wysihtml5.dom.getParentElement=function(){function e(e,t){return t&&t.length?"string"==typeof t?e===t:wysihtml5.lang.array(t).contains(e):!0}function t(e){return e.nodeType===wysihtml5.ELEMENT_NODE}function i(e,t,i){var n=(e.className||"").match(i)||[];return t?n[n.length-1]===t:!!n.length}function n(t,i,n){for(;n--&&t&&"BODY"!==t.nodeName;){if(e(t.nodeName,i))return t;t=t.parentNode}return null}function o(n,o,r,s,a){for(;a--&&n&&"BODY"!==n.nodeName;){if(t(n)&&e(n.nodeName,o)&&i(n,r,s))return n;n=n.parentNode}return null}return function(e,t,i){return i=i||50,t.className||t.classRegExp?o(e,t.nodeName,t.className,t.classRegExp,i):n(e,t.nodeName,i)}}(),wysihtml5.dom.getStyle=function(){function e(e){return e.replace(i,function(e){return e.charAt(1).toUpperCase()})}var t={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},i=/\-[a-z]/g;return function(i){return{from:function(n){if(n.nodeType===wysihtml5.ELEMENT_NODE){var o=n.ownerDocument,r=t[i]||e(i),s=n.style,a=n.currentStyle,l=s[r];if(l)return l;if(a)try{return a[r]}catch(c){}var d,u,h=o.defaultView||o.parentWindow,f=("height"===i||"width"===i)&&"TEXTAREA"===n.nodeName;return h.getComputedStyle?(f&&(d=s.overflow,s.overflow="hidden"),u=h.getComputedStyle(n,null).getPropertyValue(i),f&&(s.overflow=d||""),u):void 0}}}}}(),wysihtml5.dom.hasElementWithTagName=function(){function e(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=i++)}var t={},i=1;return function(i,n){var o=e(i)+":"+n,r=t[o];return r||(r=t[o]=i.getElementsByTagName(n)),r.length>0}}(),function(e){function t(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=n++)}var i={},n=1;e.dom.hasElementWithClassName=function(n,o){if(!e.browser.supportsNativeGetElementsByClassName())return!!n.querySelector("."+o);var r=t(n)+":"+o,s=i[r];return s||(s=i[r]=n.getElementsByClassName(o)),s.length>0}}(wysihtml5),wysihtml5.dom.insert=function(e){return{after:function(t){t.parentNode.insertBefore(e,t.nextSibling)},before:function(t){t.parentNode.insertBefore(e,t)},into:function(t){t.appendChild(e)}}},wysihtml5.dom.insertCSS=function(e){return e=e.join("\n"),{into:function(t){var i=t.head||t.getElementsByTagName("head")[0],n=t.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(t.createTextNode(e)),i&&i.appendChild(n)}}},wysihtml5.dom.observe=function(e,t,i){t="string"==typeof t?[t]:t;for(var n,o,r=0,s=t.length;s>r;r++)o=t[r],e.addEventListener?e.addEventListener(o,i,!1):(n=function(t){"target"in t||(t.target=t.srcElement),t.preventDefault=t.preventDefault||function(){this.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0},i.call(e,t)},e.attachEvent("on"+o,n));return{stop:function(){for(var o,r=0,s=t.length;s>r;r++)o=t[r],e.removeEventListener?e.removeEventListener(o,i,!1):e.detachEvent("on"+o,n)}}},wysihtml5.dom.parse=function(){function e(e,i,n,o){wysihtml5.lang.object(u).merge(d).merge(i).get(),n=n||e.ownerDocument||document;var r,s,a,l=n.createDocumentFragment(),c="string"==typeof e;for(r=c?wysihtml5.dom.getAsDom(e,n):e;r.firstChild;)a=r.firstChild,r.removeChild(a),s=t(a,o),s&&l.appendChild(s);return r.innerHTML="",r.appendChild(l),c?wysihtml5.quirks.getCorrectInnerHTML(r):r}function t(e,i){var n,o=e.nodeType,r=e.childNodes,s=r.length,c=a[o],d=0;if(n=c&&c(e),!n)return null;for(d=0;s>d;d++)newChild=t(r[d],i),newChild&&n.appendChild(newChild);return i&&n.childNodes.length<=1&&n.nodeName.toLowerCase()===l&&!n.attributes.length?n.firstChild:n}function i(e){var t,i,o=u.tags,r=e.nodeName.toLowerCase(),s=e.scopeName;if(e._wysihtml5)return null;if(e._wysihtml5=1,"wysihtml5-temp"===e.className)return null;if(s&&"HTML"!=s&&(r=s+":"+r),"outerHTML"in e&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==e.nodeName||"</p>"===e.outerHTML.slice(-4).toLowerCase()||(r="div")),r in o){if(t=o[r],!t||t.remove)return null;t="string"==typeof t?{rename_tag:t}:t}else{if(!e.firstChild)return null;t={rename_tag:l}}return i=e.ownerDocument.createElement(t.rename_tag||r),n(e,i,t),e=null,i}function n(e,t,i){var n,r,s,a,l,d,h,m={},g=i.set_class,v=i.add_class,y=i.set_attributes,b=i.check_attributes,w=u.classes,_=0,x=[],C=[],k=[],T=[];if(y&&(m=wysihtml5.lang.object(y).clone()),b)for(l in b)h=f[b[l]],h&&(d=h(o(e,l)),"string"==typeof d&&(m[l]=d));if(g&&x.push(g),v)for(l in v)h=p[v[l]],h&&(a=h(o(e,l)),"string"==typeof a&&x.push(a));for(w["_wysihtml5-temp-placeholder"]=1,T=e.getAttribute("class"),T&&(x=x.concat(T.split(c))),n=x.length;n>_;_++)s=x[_],w[s]&&C.push(s);for(r=C.length;r--;)s=C[r],wysihtml5.lang.array(k).contains(s)||k.unshift(s);k.length&&(m["class"]=k.join(" "));for(l in m)try{t.setAttribute(l,m[l])}catch(S){}m.src&&("undefined"!=typeof m.width&&t.setAttribute("width",m.width),"undefined"!=typeof m.height&&t.setAttribute("height",m.height))}function o(e,t){t=t.toLowerCase();var i=e.nodeName;if("IMG"==i&&"src"==t&&r(e)===!0)return e.src;if(h&&"outerHTML"in e){var n=e.outerHTML.toLowerCase(),o=-1!=n.indexOf(" "+t+"=");return o?e.getAttribute(t):null}return e.getAttribute(t)}function r(e){try{return e.complete&&!e.mozMatchesSelector(":-moz-broken")}catch(t){if(e.complete&&"complete"===e.readyState)return!0}}function s(e){return e.ownerDocument.createTextNode(e.data)}var a={1:i,3:s},l="span",c=/\s+/,d={tags:{},classes:{}},u={},h=!wysihtml5.browser.supportsGetAttributeCorrectly(),f={url:function(){var e=/^https?:\/\//i;return function(t){return t&&t.match(e)?t.replace(e,function(e){return e.toLowerCase()}):null}}(),alt:function(){var e=/[^ a-z0-9_\-]/gi;return function(t){return t?t.replace(e,""):""}}(),numbers:function(){var e=/\D/g;return function(t){return t=(t||"").replace(e,""),t||null}}()},p={align_img:function(){var e={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return e[String(t).toLowerCase()]}}(),align_text:function(){var e={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return e[String(t).toLowerCase()]}}(),clear_br:function(){var e={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return e[String(t).toLowerCase()]}}(),size_font:function(){var e={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return e[String(t).charAt(0)]}}()};return e}(),wysihtml5.dom.removeEmptyTextNodes=function(e){for(var t,i=wysihtml5.lang.array(e.childNodes).get(),n=i.length,o=0;n>o;o++)t=i[o],t.nodeType===wysihtml5.TEXT_NODE&&""===t.data&&t.parentNode.removeChild(t)},wysihtml5.dom.renameElement=function(e,t){for(var i,n=e.ownerDocument.createElement(t);i=e.firstChild;)n.appendChild(i);return wysihtml5.dom.copyAttributes(["align","className"]).from(e).to(n),e.parentNode.replaceChild(n,e),n},wysihtml5.dom.replaceWithChildNodes=function(e){if(e.parentNode){if(!e.firstChild)return e.parentNode.removeChild(e),void 0;for(var t=e.ownerDocument.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e),e=t=null}},function(e){function t(t){return"block"===e.getStyle("display").from(t)}function i(e){return"BR"===e.nodeName}function n(e){var t=e.ownerDocument.createElement("br");e.appendChild(t)}function o(e){if("MENU"===e.nodeName||"UL"===e.nodeName||"OL"===e.nodeName){var o,r,s,a,l,c=e.ownerDocument,d=c.createDocumentFragment(),u=e.previousElementSibling||e.previousSibling;for(u&&!t(u)&&n(d);l=e.firstChild;){for(r=l.lastChild;o=l.firstChild;)s=o===r,a=s&&!t(o)&&!i(o),d.appendChild(o),a&&n(d);l.parentNode.removeChild(l)}e.parentNode.replaceChild(d,e)}}e.resolveList=o}(wysihtml5.dom),function(e){var t=document,i=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],n=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],o=["referrer","write","open","close"];e.dom.Sandbox=Base.extend({constructor:function(t,i){this.callback=t||e.EMPTY_FUNCTION,this.config=e.lang.object({}).merge(i).get(),this.iframe=this._createIframe()},insertInto:function(e){"string"==typeof e&&(e=t.getElementById(e)),e.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var i=this,n=t.createElement("iframe");return n.className="wysihtml5-sandbox",e.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(n),e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(n.src="javascript:'<html></html>'"),n.onload=function(){n.onreadystatechange=n.onload=null,i._onLoadIframe(n)},n.onreadystatechange=function(){/loaded|complete/.test(n.readyState)&&(n.onreadystatechange=n.onload=null,i._onLoadIframe(n))},n},_onLoadIframe:function(r){if(e.dom.contains(t.documentElement,r)){var s=this,a=r.contentWindow,l=r.contentWindow.document,c=t.characterSet||t.charset||"utf-8",d=this._getHtml({charset:c,stylesheets:this.config.stylesheets});if(l.open("text/html","replace"),l.write(d),l.close(),this.getWindow=function(){return r.contentWindow},this.getDocument=function(){return r.contentWindow.document},a.onerror=function(e,t,i){throw new Error("wysihtml5.Sandbox: "+e,t,i)},!e.browser.supportsSandboxedIframes()){var u,h;for(u=0,h=i.length;h>u;u++)this._unset(a,i[u]);for(u=0,h=n.length;h>u;u++)this._unset(a,n[u],e.EMPTY_FUNCTION);for(u=0,h=o.length;h>u;u++)this._unset(l,o[u]);this._unset(l,"cookie","",!0)}this.loaded=!0,setTimeout(function(){s.callback(s)},0)}},_getHtml:function(t){var i,n=t.stylesheets,o="",r=0;if(n="string"==typeof n?[n]:n)for(i=n.length;i>r;r++)o+='<link rel="stylesheet" href="'+n[r]+'">';return t.stylesheets=o,e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)},_unset:function(t,i,n,o){try{t[i]=n}catch(r){}try{t.__defineGetter__(i,function(){return n})}catch(r){}if(o)try{t.__defineSetter__(i,function(){})}catch(r){}if(!e.browser.crashesWhenDefineProperty(i))try{var s={get:function(){return n}};o&&(s.set=function(){}),Object.defineProperty(t,i,s)}catch(r){}}})}(wysihtml5),function(){var e={className:"class"};wysihtml5.dom.setAttributes=function(t){return{on:function(i){for(var n in t)i.setAttribute(e[n]||n,t[n])}}}}(),wysihtml5.dom.setStyles=function(e){return{on:function(t){var i=t.style;if("string"==typeof e)return i.cssText+=";"+e,void 0;for(var n in e)"float"===n?(i.cssFloat=e[n],i.styleFloat=e[n]):i[n]=e[n]}}},function(e){e.simulatePlaceholder=function(t,i,n){var o="placeholder",r=function(){i.hasPlaceholderSet()&&i.clear(),e.removeClass(i.element,o)},s=function(){i.isEmpty()&&(i.setValue(n),e.addClass(i.element,o))};t.observe("set_placeholder",s).observe("unset_placeholder",r).observe("focus:composer",r).observe("paste:composer",r).observe("blur:composer",s),s()}}(wysihtml5.dom),function(e){var t=document.documentElement;"textContent"in t?(e.setTextContent=function(e,t){e.textContent=t},e.getTextContent=function(e){return e.textContent}):"innerText"in t?(e.setTextContent=function(e,t){e.innerText=t},e.getTextContent=function(e){return e.innerText}):(e.setTextContent=function(e,t){e.nodeValue=t},e.getTextContent=function(e){return e.nodeValue})}(wysihtml5.dom),wysihtml5.quirks.cleanPastedHTML=function(){function e(e,i,n){i=i||t,n=n||e.ownerDocument||document;var o,r,s,a,l,c="string"==typeof e,d=0;o=c?wysihtml5.dom.getAsDom(e,n):e;for(l in i)for(s=o.querySelectorAll(l),r=i[l],a=s.length;a>d;d++)r(s[d]);return s=e=i=null,c?o.innerHTML:o}var t={"a u":wysihtml5.dom.replaceWithChildNodes};return e}(),function(e){var t=e.dom;e.quirks.ensureProperClearing=function(){var e=function(){var e=this;setTimeout(function(){var t=e.innerHTML.toLowerCase();("<p>&nbsp;</p>"==t||"<p>&nbsp;</p><p>&nbsp;</p>"==t)&&(e.innerHTML="")},0)};return function(i){t.observe(i.element,["cut","keydown"],e)}}(),e.quirks.ensureProperClearingOfLists=function(){var i=["OL","UL","MENU"],n=function(n,o){if(o.firstChild&&e.lang.array(i).contains(o.firstChild.nodeName)){var r=t.getParentElement(n,{nodeName:i});if(r){var s=r==o.firstChild;if(s){var a=r.childNodes.length<=1;if(a){var l=r.firstChild?""===r.firstChild.innerHTML:!0;l&&r.parentNode.removeChild(r)}}}}};return function(i){t.observe(i.element,"keydown",function(t){if(t.keyCode===e.BACKSPACE_KEY){var o=i.selection.getSelectedNode();n(o,i.element)}})}}()}(wysihtml5),function(e){var t="%7E";e.quirks.getCorrectInnerHTML=function(i){var n=i.innerHTML;if(-1===n.indexOf(t))return n;var o,r,s,a,l=i.querySelectorAll("[href*='~'], [src*='~']");for(a=0,s=l.length;s>a;a++)o=l[a].href||l[a].src,r=e.lang.string(o).replace("~").by(t),n=e.lang.string(n).replace(r).by(o);return n}}(wysihtml5),function(e){var t=e.dom,i=["LI","P","H1","H2","H3","H4","H5","H6"],n=["UL","OL","MENU"];e.quirks.insertLineBreakOnReturn=function(o){function r(i){var n=t.getParentElement(i,{nodeName:["P","DIV"]},2);if(n){var r=document.createTextNode(e.INVISIBLE_SPACE);t.insert(r).before(n),t.replaceWithChildNodes(n),o.selection.selectNode(r)}}function s(s){var a=s.keyCode;if(!(s.shiftKey||a!==e.ENTER_KEY&&a!==e.BACKSPACE_KEY)){var l=(s.target,o.selection.getSelectedNode()),c=t.getParentElement(l,{nodeName:i},4);return c?("LI"!==c.nodeName||a!==e.ENTER_KEY&&a!==e.BACKSPACE_KEY?c.nodeName.match(/H[1-6]/)&&a===e.ENTER_KEY&&setTimeout(function(){r(o.selection.getSelectedNode())},0):setTimeout(function(){var e,i=o.selection.getSelectedNode();i&&(e=t.getParentElement(i,{nodeName:n},2),e||r(i))},0),void 0):(a!==e.ENTER_KEY||e.browser.insertsLineBreaksOnReturn()||(o.commands.exec("insertLineBreak"),s.preventDefault()),void 0)}}t.observe(o.element.ownerDocument,"keydown",s)}}(wysihtml5),function(e){var t="wysihtml5-quirks-redraw";e.quirks.redraw=function(i){e.dom.addClass(i,t),e.dom.removeClass(i,t);try{var n=i.ownerDocument;n.execCommand("italic",!1,null),n.execCommand("italic",!1,null)}catch(o){}}}(wysihtml5),function(e){function t(e){var t=0;if(e.parentNode)do t+=e.offsetTop||0,e=e.offsetParent;while(e);return t}var i=e.dom;e.Selection=Base.extend({constructor:function(e){window.rangy.init(),this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},getBookmark:function(){var e=this.getRange();return e&&e.cloneRange()},setBookmark:function(e){e&&this.setSelection(e)},setBefore:function(e){var t=rangy.createRange(this.doc);return t.setStartBefore(e),t.setEndBefore(e),this.setSelection(t)},setAfter:function(e){var t=rangy.createRange(this.doc);return t.setStartAfter(e),t.setEndAfter(e),this.setSelection(t)},selectNode:function(t){var n=rangy.createRange(this.doc),o=t.nodeType===e.ELEMENT_NODE,r="canHaveHTML"in t?t.canHaveHTML:"IMG"!==t.nodeName,s=o?t.innerHTML:t.data,a=""===s||s===e.INVISIBLE_SPACE,l=i.getStyle("display").from(t),c="block"===l||"list-item"===l;if(a&&o&&r)try{t.innerHTML=e.INVISIBLE_SPACE}catch(d){}r?n.selectNodeContents(t):n.selectNode(t),r&&a&&o?n.collapse(c):r&&a&&(n.setStartAfter(t),n.setEndAfter(t)),this.setSelection(n)},getSelectedNode:function(e){var t,i;return e&&this.doc.selection&&"Control"===this.doc.selection.type&&(i=this.doc.selection.createRange(),i&&i.length)?i.item(0):(t=this.getSelection(this.doc),t.focusNode===t.anchorNode?t.focusNode:(i=this.getRange(this.doc),i?i.commonAncestorContainer:this.doc.body))},executeAndRestore:function(t,i){var n,o=this.doc.body,r=i&&o.scrollTop,s=i&&o.scrollLeft,a="_wysihtml5-temp-placeholder",l='<span class="'+a+'">'+e.INVISIBLE_SPACE+"</span>",c=this.getRange(this.doc);if(!c)return t(o,o),void 0;var d=c.createContextualFragment(l);c.insertNode(d);try{t(c.startContainer,c.endContainer)}catch(u){setTimeout(function(){throw u},0)}caretPlaceholder=this.doc.querySelector("."+a),caretPlaceholder?(n=rangy.createRange(this.doc),n.selectNode(caretPlaceholder),n.deleteContents(),this.setSelection(n)):o.focus(),i&&(o.scrollTop=r,o.scrollLeft=s);try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(h){}},executeAndRestoreSimple:function(e){var t,i,n,o,r,s=this.getRange(),a=this.doc.body;if(!s)return e(a,a),void 0;o=s.getNodes([3]),i=o[0]||s.startContainer,n=o[o.length-1]||s.endContainer,r={collapsed:s.collapsed,startContainer:i,startOffset:i===s.startContainer?s.startOffset:0,endContainer:n,endOffset:n===s.endContainer?s.endOffset:n.length};try{e(s.startContainer,s.endContainer)}catch(l){setTimeout(function(){throw l},0)}t=rangy.createRange(this.doc);try{t.setStart(r.startContainer,r.startOffset)}catch(c){}try{t.setEnd(r.endContainer,r.endOffset)}catch(d){}try{this.setSelection(t)}catch(u){}},insertHTML:function(e){var t=rangy.createRange(this.doc),i=t.createContextualFragment(e),n=i.lastChild;this.insertNode(i),n&&this.setAfter(n)},insertNode:function(e){var t=this.getRange();t&&t.insertNode(e)},surround:function(e){var t=this.getRange();if(t)try{t.surroundContents(e),this.selectNode(e)}catch(i){e.appendChild(t.extractContents()),t.insertNode(e)}},scrollIntoView:function(){var i,n=this.doc,o=n.documentElement.scrollHeight>n.documentElement.offsetHeight,r=n._wysihtml5ScrollIntoViewElement=n._wysihtml5ScrollIntoViewElement||function(){var t=n.createElement("span");return t.innerHTML=e.INVISIBLE_SPACE,t}();o&&(this.insertNode(r),i=t(r),r.parentNode.removeChild(r),i>n.body.scrollTop&&(n.body.scrollTop=i))},selectLine:function(){e.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var e=this.doc.defaultView,t=e.getSelection();t.modify("extend","left","lineboundary"),t.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var e,t,i,n,o,r=this.doc.selection.createRange(),s=r.boundingTop,a=(r.boundingHeight,this.doc.body.scrollWidth);if(r.moveToPoint){for(0===s&&(i=this.doc.createElement("span"),this.insertNode(i),s=i.offsetTop,i.parentNode.removeChild(i)),s+=1,n=-10;a>n;n+=2)try{r.moveToPoint(n,s);break}catch(l){}for(e=s,t=this.doc.selection.createRange(),o=a;o>=0;o--)try{t.moveToPoint(o,e);break}catch(c){}r.setEndPoint("EndToEnd",t),r.select()}},getText:function(){var e=this.getSelection();return e?e.toString():""},getNodes:function(e,t){var i=this.getRange();return i?i.getNodes([e],t):[]},getRange:function(){var e=this.getSelection();return e&&e.rangeCount&&e.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(e){var t=this.doc.defaultView||this.doc.parentWindow,i=rangy.getSelection(t);return i.setSingleRange(e)}})}(wysihtml5),function(e,t){function i(e,t,i){if(!e.className)return!1;var n=e.className.match(i)||[];return n[n.length-1]===t}function n(e,t,i){e.className?(o(e,i),e.className+=" "+t):e.className=t}function o(e,t){e.className&&(e.className=e.className.replace(t,""))}function r(e,t){return e.className.replace(f," ")==t.className.replace(f," ")}function s(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}function a(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var i,n,o,r=0,s=e.attributes.length;s>r;++r)if(i=e.attributes[r],o=i.name,"class"!=o){if(n=t.attributes.getNamedItem(o),i.specified!=n.specified)return!1;if(i.specified&&i.nodeValue!==n.nodeValue)return!1}return!0}function l(e,i){return t.dom.isCharacterDataNode(e)?0==i?!!e.previousSibling:i==e.length?!!e.nextSibling:!0:i>0&&i<e.childNodes.length}function c(e,i,n){var o;if(t.dom.isCharacterDataNode(i)&&(0==n?(n=t.dom.getNodeIndex(i),i=i.parentNode):n==i.length?(n=t.dom.getNodeIndex(i)+1,i=i.parentNode):o=t.dom.splitDataNode(i,n)),!o){o=i.cloneNode(!1),o.id&&o.removeAttribute("id");for(var r;r=i.childNodes[n];)o.appendChild(r);t.dom.insertAfter(o,i)}return i==e?o:c(e,o.parentNode,t.dom.getNodeIndex(o))}function d(t){this.isElementMerge=t.nodeType==e.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?t.lastChild:t,this.textNodes=[this.firstTextNode]}function u(e,t,i,n){this.tagNames=e||[h],this.cssClass=t||"",this.similarClassRegExp=i,this.normalize=n,this.applyToAnyTagName=!1}var h="span",f=/\s+/g;d.prototype={doMerge:function(){for(var e,t,i,n=[],o=0,r=this.textNodes.length;r>o;++o)e=this.textNodes[o],t=e.parentNode,n[o]=e.data,o&&(t.removeChild(e),t.hasChildNodes()||t.parentNode.removeChild(t));return this.firstTextNode.data=i=n.join(""),i},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){for(var e=[],t=0,i=this.textNodes.length;i>t;++t)e[t]="'"+this.textNodes[t].data+"'";return"[Merge("+e.join(",")+")]"}},u.prototype={getAncestorWithClass:function(n){for(var o;n;){if(o=this.cssClass?i(n,this.cssClass,this.similarClassRegExp):!0,n.nodeType==e.ELEMENT_NODE&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&o)return n;n=n.parentNode}return!1},postApply:function(e,t){for(var i,n,o,r=e[0],s=e[e.length-1],a=[],l=r,c=s,u=0,h=s.length,f=0,p=e.length;p>f;++f)n=e[f],o=this.getAdjacentMergeableTextNode(n.parentNode,!1),o?(i||(i=new d(o),a.push(i)),i.textNodes.push(n),n===r&&(l=i.firstTextNode,u=l.length),n===s&&(c=i.firstTextNode,h=i.getLength())):i=null;
var m=this.getAdjacentMergeableTextNode(s.parentNode,!0);if(m&&(i||(i=new d(s),a.push(i)),i.textNodes.push(m)),a.length){for(f=0,p=a.length;p>f;++f)a[f].doMerge();t.setStart(l,u),t.setEnd(c,h)}},getAdjacentMergeableTextNode:function(t,i){var n,o=t.nodeType==e.TEXT_NODE,r=o?t.parentNode:t,s=i?"nextSibling":"previousSibling";if(o){if(n=t[s],n&&n.nodeType==e.TEXT_NODE)return n}else if(n=r[s],n&&this.areElementsMergeable(t,n))return n[i?"firstChild":"lastChild"];return null},areElementsMergeable:function(e,i){return t.dom.arrayContains(this.tagNames,(e.tagName||"").toLowerCase())&&t.dom.arrayContains(this.tagNames,(i.tagName||"").toLowerCase())&&r(e,i)&&a(e,i)},createContainer:function(e){var t=e.createElement(this.tagNames[0]);return this.cssClass&&(t.className=this.cssClass),t},applyToTextNode:function(e){var i=e.parentNode;if(1==i.childNodes.length&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase()))this.cssClass&&n(i,this.cssClass,this.similarClassRegExp);else{var o=this.createContainer(t.dom.getDocument(e));e.parentNode.insertBefore(o,e),o.appendChild(e)}},isRemovable:function(i){return t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&e.lang.string(i.className).trim()==this.cssClass},undoToTextNode:function(e,t,i){if(!t.containsNode(i)){var n=t.cloneRange();n.selectNode(i),n.isPointInRange(t.endContainer,t.endOffset)&&l(t.endContainer,t.endOffset)&&(c(i,t.endContainer,t.endOffset),t.setEndAfter(i)),n.isPointInRange(t.startContainer,t.startOffset)&&l(t.startContainer,t.startOffset)&&(i=c(i,t.startContainer,t.startOffset))}this.similarClassRegExp&&o(i,this.similarClassRegExp),this.isRemovable(i)&&s(i)},applyToRange:function(t){var i=t.getNodes([e.TEXT_NODE]);if(!i.length)try{var n=this.createContainer(t.endContainer.ownerDocument);return t.surroundContents(n),this.selectNode(t,n),void 0}catch(o){}if(t.splitBoundaries(),i=t.getNodes([e.TEXT_NODE]),i.length){for(var r,s=0,a=i.length;a>s;++s)r=i[s],this.getAncestorWithClass(r)||this.applyToTextNode(r);t.setStart(i[0],0),r=i[i.length-1],t.setEnd(r,r.length),this.normalize&&this.postApply(i,t)}},undoToRange:function(t){var i,n,o=t.getNodes([e.TEXT_NODE]);if(o.length)t.splitBoundaries(),o=t.getNodes([e.TEXT_NODE]);else{var r=t.endContainer.ownerDocument,s=r.createTextNode(e.INVISIBLE_SPACE);t.insertNode(s),t.selectNode(s),o=[s]}for(var a=0,l=o.length;l>a;++a)i=o[a],n=this.getAncestorWithClass(i),n&&this.undoToTextNode(i,t,n);1==l?this.selectNode(t,o[0]):(t.setStart(o[0],0),i=o[o.length-1],t.setEnd(i,i.length),this.normalize&&this.postApply(o,t))},selectNode:function(t,i){var n=i.nodeType===e.ELEMENT_NODE,o="canHaveHTML"in i?i.canHaveHTML:!0,r=n?i.innerHTML:i.data,s=""===r||r===e.INVISIBLE_SPACE;if(s&&n&&o)try{i.innerHTML=e.INVISIBLE_SPACE}catch(a){}t.selectNodeContents(i),s&&n?t.collapse(!1):s&&(t.setStartAfter(i),t.setEndAfter(i))},getTextSelectedByRange:function(e,t){var i=t.cloneRange();i.selectNodeContents(e);var n=i.intersection(t),o=n?n.toString():"";return i.detach(),o},isAppliedToRange:function(t){var i,n=[],o=t.getNodes([e.TEXT_NODE]);if(!o.length)return i=this.getAncestorWithClass(t.startContainer),i?[i]:!1;for(var r,s=0,a=o.length;a>s;++s){if(r=this.getTextSelectedByRange(o[s],t),i=this.getAncestorWithClass(o[s]),""!=r&&!i)return!1;n.push(i)}return n},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)}},e.selection.HTMLApplier=u}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},support:function(e){return wysihtml5.browser.supportsCommand(this.doc,e)},exec:function(e,t){var i=wysihtml5.commands[e],n=wysihtml5.lang.array(arguments).get(),o=i&&i.exec,r=null;if(this.editor.fire("beforecommand:composer"),o)n.unshift(this.composer),r=o.apply(i,n);else try{r=this.doc.execCommand(e,!1,t)}catch(s){}return this.editor.fire("aftercommand:composer"),r},state:function(e){var t=wysihtml5.commands[e],i=wysihtml5.lang.array(arguments).get(),n=t&&t.state;if(n)return i.unshift(this.composer),n.apply(t,i);try{return this.doc.queryCommandState(e)}catch(o){return!1}},value:function(e){var t=wysihtml5.commands[e],i=t&&t.value;if(i)return i.call(t,this.composer,e);try{return this.doc.queryCommandValue(e)}catch(n){return null}}}),function(e){var t;e.commands.bold={exec:function(t,i){return e.commands.formatInline.exec(t,i,"b")},state:function(t,i){return e.commands.formatInline.state(t,i,"b")},value:function(){return t}}}(wysihtml5),function(e){function t(e,t){for(var i,n,o,s=t.length,a=0;s>a;a++)i=t[a],n=r.getParentElement(i,{nodeName:"code"}),o=r.getTextContent(i),o.match(r.autoLink.URL_REG_EXP)&&!n?n=r.renameElement(i,"code"):r.replaceWithChildNodes(i)}function i(t,i){var s,a,l,c,d,u,h,f,p,m=t.doc,g="_wysihtml5-temp-"+ +new Date,v=/non-matching-class/g,y=0;for(e.commands.formatInline.exec(t,n,o,g,v),a=m.querySelectorAll(o+"."+g),s=a.length;s>y;y++){l=a[y],l.removeAttribute("class");for(p in i)l.setAttribute(p,i[p])}u=l,1===s&&(h=r.getTextContent(l),c=!!l.querySelector("*"),d=""===h||h===e.INVISIBLE_SPACE,!c&&d&&(r.setTextContent(l,i.text||l.href),f=m.createTextNode(" "),t.selection.setAfter(l),t.selection.insertNode(f),u=f)),t.selection.setAfter(u)}var n,o="A",r=e.dom;e.commands.createLink={exec:function(e,n,o){var r=this.state(e,n);r?e.selection.executeAndRestore(function(){t(e,r)}):(o="object"==typeof o?o:{href:o},i(e,o))},state:function(t,i){return e.commands.formatInline.state(t,i,"A")},value:function(){return n}}}(wysihtml5),function(e){var t,i=/wysiwyg-font-size-[a-z\-]+/g;e.commands.fontSize={exec:function(t,n,o){return e.commands.formatInline.exec(t,n,"span","wysiwyg-font-size-"+o,i)},state:function(t,n,o){return e.commands.formatInline.state(t,n,"span","wysiwyg-font-size-"+o,i)},value:function(){return t}}}(wysihtml5),function(e){var t,i=/wysiwyg-color-[a-z]+/g;e.commands.foreColor={exec:function(t,n,o){return e.commands.formatInline.exec(t,n,"span","wysiwyg-color-"+o,i)},state:function(t,n,o){return e.commands.formatInline.state(t,n,"span","wysiwyg-color-"+o,i)},value:function(){return t}}}(wysihtml5),function(e){function t(e,t,n){e.className?(i(e,n),e.className+=" "+t):e.className=t}function i(e,t){e.className=e.className.replace(t,"")}function n(t){return t.nodeType===e.TEXT_NODE&&!e.lang.string(t.data).trim()}function o(e){for(var t=e.previousSibling;t&&n(t);)t=t.previousSibling;return t}function r(e){for(var t=e.nextSibling;t&&n(t);)t=t.nextSibling;return t}function s(e){var t=e.ownerDocument,i=r(e),n=o(e);i&&!d(i)&&e.parentNode.insertBefore(t.createElement("br"),i),n&&!d(n)&&e.parentNode.insertBefore(t.createElement("br"),e)}function a(e){var t=r(e),i=o(e);t&&c(t)&&t.parentNode.removeChild(t),i&&c(i)&&i.parentNode.removeChild(i)}function l(e){var t=e.lastChild;t&&c(t)&&t.parentNode.removeChild(t)}function c(e){return"BR"===e.nodeName}function d(e){return c(e)?!0:"block"===m.getStyle("display").from(e)?!0:!1}function u(t,i,n,o){if(o)var r=m.observe(t,"DOMNodeInserted",function(t){var i,n=t.target;n.nodeType===e.ELEMENT_NODE&&(i=m.getStyle("display").from(n),"inline"!==i.substr(0,6)&&(n.className+=" "+o))});t.execCommand(i,!1,n),r&&r.stop()}function h(e,t){e.selection.selectLine(),e.selection.surround(t),a(t),l(t),e.selection.selectNode(t)}function f(t){return!!e.lang.string(t.className).trim()}var p,m=e.dom,g="DIV",v=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE",g];e.commands.formatBlock={exec:function(n,o,r,a,l){var c,d=n.doc,p=this.state(n,o,r,a,l);return r="string"==typeof r?r.toUpperCase():r,p?(n.selection.executeAndRestoreSimple(function(){l&&i(p,l);var e=f(p);e||p.nodeName!==(r||g)?e&&m.renameElement(p,g):(s(p),m.replaceWithChildNodes(p))}),void 0):(null===r||e.lang.array(v).contains(r))&&(c=n.selection.getSelectedNode(),p=m.getParentElement(c,{nodeName:v}))?(n.selection.executeAndRestoreSimple(function(){r&&(p=m.renameElement(p,r)),a&&t(p,a,l)}),void 0):n.commands.support(o)?(u(d,o,r||g,a),void 0):(p=d.createElement(r||g),a&&(p.className=a),h(n,p),void 0)},state:function(e,t,i,n,o){i="string"==typeof i?i.toUpperCase():i;var r=e.selection.getSelectedNode();return m.getParentElement(r,{nodeName:i,className:n,classRegExp:o})},value:function(){return p}}}(wysihtml5),function(e){function t(e){var t=o[e];return t?[e.toLowerCase(),t.toLowerCase()]:[e.toLowerCase()]}function i(i,n,o){var s=i+":"+n;return r[s]||(r[s]=new e.selection.HTMLApplier(t(i),n,o,!0)),r[s]}var n,o={strong:"b",em:"i",b:"strong",i:"em"},r={};e.commands.formatInline={exec:function(e,t,n,o,r){var s=e.selection.getRange();return s?(i(n,o,r).toggleRange(s),e.selection.setSelection(s),void 0):!1},state:function(t,n,r,s,a){var l,c=t.doc,d=o[r]||r;return e.dom.hasElementWithTagName(c,r)||e.dom.hasElementWithTagName(c,d)?s&&!e.dom.hasElementWithClassName(c,s)?!1:(l=t.selection.getRange(),l?i(r,s,a).isAppliedToRange(l):!1):!1},value:function(){return n}}}(wysihtml5),function(e){var t;e.commands.insertHTML={exec:function(e,t,i){e.commands.support(t)?e.doc.execCommand(t,!1,i):e.selection.insertHTML(i)},state:function(){return!1},value:function(){return t}}}(wysihtml5),function(e){var t="IMG";e.commands.insertImage={exec:function(i,n,o){o="object"==typeof o?o:{src:o};var r,s,a,l=i.doc,c=this.state(i);if(c)return i.selection.setBefore(c),a=c.parentNode,a.removeChild(c),e.dom.removeEmptyTextNodes(a),"A"!==a.nodeName||a.firstChild||(i.selection.setAfter(a),a.parentNode.removeChild(a)),e.quirks.redraw(i.element),void 0;c=l.createElement(t);for(s in o)c[s]=o[s];i.selection.insertNode(c),e.browser.hasProblemsSettingCaretAfterImg()?(r=l.createTextNode(e.INVISIBLE_SPACE),i.selection.insertNode(r),i.selection.setAfter(r)):i.selection.setAfter(c)},state:function(i){var n,o,r,s=i.doc;return e.dom.hasElementWithTagName(s,t)?(n=i.selection.getSelectedNode())?n.nodeName===t?n:n.nodeType!==e.ELEMENT_NODE?!1:(o=i.selection.getText(),(o=e.lang.string(o).trim())?!1:(r=i.selection.getNodes(e.ELEMENT_NODE,function(e){return"IMG"===e.nodeName}),1!==r.length?!1:r[0])):!1:!1},value:function(e){var t=this.state(e);return t&&t.src}}}(wysihtml5),function(e){var t,i="<br>"+(e.browser.needsSpaceAfterLineBreak()?" ":"");e.commands.insertLineBreak={exec:function(t,n){t.commands.support(n)?(t.doc.execCommand(n,!1,null),e.browser.autoScrollsToCaret()||t.selection.scrollIntoView()):t.commands.exec("insertHTML",i)},state:function(){return!1},value:function(){return t}}}(wysihtml5),function(e){var t;e.commands.insertOrderedList={exec:function(t,i){var n,o,r=t.doc,s=t.selection.getSelectedNode(),a=e.dom.getParentElement(s,{nodeName:"OL"}),l=e.dom.getParentElement(s,{nodeName:"UL"}),c="_wysihtml5-temp-"+(new Date).getTime();return t.commands.support(i)?(r.execCommand(i,!1,null),void 0):(a?t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(a)}):l?t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(l,"ol")}):(t.commands.exec("formatBlock","div",c),o=r.querySelector("."+c),n=""===o.innerHTML||o.innerHTML===e.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){a=e.dom.convertToList(o,"ol")}),n&&t.selection.selectNode(a.querySelector("li"))),void 0)},state:function(t){var i=t.selection.getSelectedNode();return e.dom.getParentElement(i,{nodeName:"OL"})},value:function(){return t}}}(wysihtml5),function(e){var t;e.commands.insertUnorderedList={exec:function(t,i){var n,o,r=t.doc,s=t.selection.getSelectedNode(),a=e.dom.getParentElement(s,{nodeName:"UL"}),l=e.dom.getParentElement(s,{nodeName:"OL"}),c="_wysihtml5-temp-"+(new Date).getTime();return t.commands.support(i)?(r.execCommand(i,!1,null),void 0):(a?t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(a)}):l?t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(l,"ul")}):(t.commands.exec("formatBlock","div",c),o=r.querySelector("."+c),n=""===o.innerHTML||o.innerHTML===e.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){a=e.dom.convertToList(o,"ul")}),n&&t.selection.selectNode(a.querySelector("li"))),void 0)},state:function(t){var i=t.selection.getSelectedNode();return e.dom.getParentElement(i,{nodeName:"UL"})},value:function(){return t}}}(wysihtml5),function(e){var t;e.commands.italic={exec:function(t,i){return e.commands.formatInline.exec(t,i,"i")},state:function(t,i){return e.commands.formatInline.state(t,i,"i")},value:function(){return t}}}(wysihtml5),function(e){var t,i="wysiwyg-text-align-center",n=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyCenter={exec:function(t){return e.commands.formatBlock.exec(t,"formatBlock",null,i,n)},state:function(t){return e.commands.formatBlock.state(t,"formatBlock",null,i,n)},value:function(){return t}}}(wysihtml5),function(e){var t,i="wysiwyg-text-align-left",n=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyLeft={exec:function(t){return e.commands.formatBlock.exec(t,"formatBlock",null,i,n)},state:function(t){return e.commands.formatBlock.state(t,"formatBlock",null,i,n)},value:function(){return t}}}(wysihtml5),function(e){var t,i="wysiwyg-text-align-right",n=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyRight={exec:function(t){return e.commands.formatBlock.exec(t,"formatBlock",null,i,n)},state:function(t){return e.commands.formatBlock.state(t,"formatBlock",null,i,n)},value:function(){return t}}}(wysihtml5),function(e){var t;e.commands.underline={exec:function(t,i){return e.commands.formatInline.exec(t,i,"u")},state:function(t,i){return e.commands.formatInline.state(t,i,"u")},value:function(){return t}}}(wysihtml5),function(e){function t(e){for(var t;t=e.querySelector("._wysihtml5-temp");)t.parentNode.removeChild(t)}var i=90,n=89,o=8,r=46,s=40,a='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",l='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",c=e.dom;e.UndoManager=e.lang.Dispatcher.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.element=this.composer.element,this.history=[this.composer.getValue()],this.position=1,this.composer.commands.support("insertHTML")&&this._observe()},_observe:function(){var s,d=this,u=this.composer.sandbox.getDocument();if(c.observe(this.element,"keydown",function(e){if(!e.altKey&&(e.ctrlKey||e.metaKey)){var t=e.keyCode,o=t===i&&!e.shiftKey,r=t===i&&e.shiftKey||t===n;o?(d.undo(),e.preventDefault()):r&&(d.redo(),e.preventDefault())}}),c.observe(this.element,"keydown",function(e){var t=e.keyCode;t!==s&&(s=t,(t===o||t===r)&&d.transact())}),e.browser.hasUndoInContextMenu()){var h,f,p=function(){t(u),clearInterval(h)};c.observe(this.element,"contextmenu",function(){p(),d.composer.selection.executeAndRestoreSimple(function(){d.element.lastChild&&d.composer.selection.setAfter(d.element.lastChild),u.execCommand("insertHTML",!1,a),u.execCommand("insertHTML",!1,l),u.execCommand("undo",!1,null)}),h=setInterval(function(){u.getElementById("_wysihtml5-redo")?(p(),d.redo()):u.getElementById("_wysihtml5-undo")||(p(),d.undo())},400),f||(f=!0,c.observe(document,"mousedown",p),c.observe(u,["mousedown","paste","cut","copy"],p))})}this.editor.observe("newword:composer",function(){d.transact()}).observe("beforecommand:composer",function(){d.transact()})},transact:function(){var e=this.history[this.position-1],t=this.composer.getValue();if(t!=e){var i=this.history.length=this.position;i>s&&(this.history.shift(),this.position--),this.position++,this.history.push(t)}},undo:function(){this.transact(),this.position<=1||(this.set(this.history[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.position>=this.history.length||(this.set(this.history[++this.position-1]),this.editor.fire("redo:composer"))},set:function(e){this.composer.setValue(e),this.editor.focus(!0)}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(e,t,i){this.parent=e,this.element=t,this.config=i,this._observeViewChange()},_observeViewChange:function(){var e=this;this.parent.observe("beforeload",function(){e.parent.observe("change_view",function(t){t===e.name?(e.parent.currentView=e,e.show(),setTimeout(function(){e.focus()},0)):e.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(e){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(e){var t=e.dom,i=e.browser;e.views.Composer=e.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(e,t,i){this.base(e,t,i),this.textarea=this.parent.textarea,this._initSandbox()},clear:function(){this.element.innerHTML=i.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(t){var i=this.isEmpty()?"":e.quirks.getCorrectInnerHTML(this.element);return t&&(i=this.parent.parse(i)),i=e.lang.string(i).replace(e.INVISIBLE_SPACE).by("")},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.innerHTML=e},show:function(){this.iframe.style.display=this._displayStyle||"",this.disable(),this.enable()},hide:function(){this._displayStyle=t.getStyle("display").from(this.iframe),"none"===this._displayStyle&&(this._displayStyle=null),this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable"),this.base()},enable:function(){this.element.setAttribute("contentEditable","true"),this.base()},focus:function(t){e.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var i=this.element.lastChild;t&&i&&("BR"===i.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var e=this.element.innerHTML,t="blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea";return""===e||e===this.CARET_HACK||this.hasPlaceholderSet()||""===this.getTextContent()&&!this.element.querySelector(t)},_initSandbox:function(){var e=this;this.sandbox=new t.Sandbox(function(){e._create()},{stylesheets:this.config.stylesheets}),this.iframe=this.sandbox.getIframe();var i=document.createElement("input");i.type="hidden",i.name="_wysihtml5_mode",i.value=1;var n=this.textarea.element;t.insert(this.iframe).after(n),t.insert(i).after(n)},_create:function(){var n=this;this.doc=this.sandbox.getDocument(),this.element=this.doc.body,this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0),this.enable(),this.selection=new e.Selection(this.parent),this.commands=new e.Commands(this.parent),t.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),t.addClass(this.element,this.config.composerClassName),this.config.style&&this.style(),this.observe();var o=this.config.name;o&&(t.addClass(this.element,o),t.addClass(this.iframe,o));var r="string"==typeof this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder");r&&t.simulatePlaceholder(this.parent,this,r),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&&setTimeout(function(){n.focus()},100),e.quirks.insertLineBreakOnReturn(this),i.clearsContentEditableCorrectly()||e.quirks.ensureProperClearing(this),i.clearsListsInContentEditableCorrectly()||e.quirks.ensureProperClearingOfLists(this),this.initSync&&this.config.sync&&this.initSync(),this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var n=this,o=i.canDisableAutoLinking(),r=i.doesAutoLinkingInContentEditable();if(o&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink){(!r||r&&o)&&this.parent.observe("newword:composer",function(){n.selection.executeAndRestore(function(e,i){t.autoLink(i.parentNode)})});var s=this.sandbox.getDocument().getElementsByTagName("a"),a=t.autoLink.URL_REG_EXP,l=function(i){var n=e.lang.string(t.getTextContent(i)).trim();return"www."===n.substr(0,4)&&(n="http://"+n),n};t.observe(this.element,"keydown",function(e){if(s.length){var i,o=n.selection.getSelectedNode(e.target.ownerDocument),r=t.getParentElement(o,{nodeName:"A"},4);r&&(i=l(r),setTimeout(function(){var e=l(r);e!==i&&e.match(a)&&r.setAttribute("href",e)},0))}})}},_initObjectResizing:function(){var n=["width","height"],o=n.length,r=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing),this.config.allowObjectResizing?i.supportsEvent("resizeend")&&t.observe(r,"resizeend",function(t){for(var i,s=t.target||t.srcElement,a=s.style,l=0;o>l;l++)i=n[l],a[i]&&(s.setAttribute(i,parseInt(a[i],10)),a[i]="");e.quirks.redraw(r)}):i.supportsEvent("resizestart")&&t.observe(r,"resizestart",function(e){e.preventDefault()})},_initUndoManager:function(){new e.UndoManager(this.parent)}})}(wysihtml5),function(e){var t=e.dom,i=document,n=window,o=i.createElement("div"),r=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],s=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],a=["width","height","top","left","right","bottom"],l=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",e.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],c=function(e){if(e.setActive)try{e.setActive()}catch(o){}else{var r=e.style,s=i.documentElement.scrollTop||i.body.scrollTop,a=i.documentElement.scrollLeft||i.body.scrollLeft,l={position:r.position,top:r.top,left:r.left,WebkitUserSelect:r.WebkitUserSelect};t.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(e),e.focus(),t.setStyles(l).on(e),n.scrollTo&&n.scrollTo(a,s)}};e.views.Composer.prototype.style=function(){var d=this,u=i.querySelector(":focus"),h=this.textarea.element,f=h.hasAttribute("placeholder"),p=f&&h.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||o.cloneNode(!1),this.blurStylesHost=this.blurStylesHost||o.cloneNode(!1),f&&h.removeAttribute("placeholder"),h===u&&h.blur(),t.copyStyles(s).from(h).to(this.iframe).andTo(this.blurStylesHost),t.copyStyles(r).from(h).to(this.element).andTo(this.blurStylesHost),t.insertCSS(l).into(this.element.ownerDocument),c(h),t.copyStyles(s).from(h).to(this.focusStylesHost),t.copyStyles(r).from(h).to(this.focusStylesHost);var m=e.lang.array(s).without(["display"]);if(u?u.focus():h.blur(),f&&h.setAttribute("placeholder",p),!e.browser.hasCurrentStyleProperty())var g=t.observe(n,"resize",function(){if(!t.contains(document.documentElement,d.iframe))return g.stop(),void 0;var e=t.getStyle("display").from(h),i=t.getStyle("display").from(d.iframe);h.style.display="",d.iframe.style.display="none",t.copyStyles(a).from(h).to(d.iframe).andTo(d.focusStylesHost).andTo(d.blurStylesHost),d.iframe.style.display=i,h.style.display=e});return this.parent.observe("focus:composer",function(){t.copyStyles(m).from(d.focusStylesHost).to(d.iframe),t.copyStyles(r).from(d.focusStylesHost).to(d.element)}),this.parent.observe("blur:composer",function(){t.copyStyles(m).from(d.blurStylesHost).to(d.iframe),t.copyStyles(r).from(d.blurStylesHost).to(d.element)}),this}}(wysihtml5),function(e){var t=e.dom,i=e.browser,n={66:"bold",73:"italic",85:"underline"};e.views.Composer.prototype.observe=function(){var o=this,r=this.getValue(),s=this.sandbox.getIframe(),a=this.element,l=i.supportsEventsInIframeCorrectly()?a:this.sandbox.getWindow(),c=i.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];t.observe(s,"DOMNodeRemoved",function(){clearInterval(d),o.parent.fire("destroy:composer")});var d=setInterval(function(){t.contains(document.documentElement,s)||(clearInterval(d),o.parent.fire("destroy:composer"))},250);t.observe(l,"focus",function(){o.parent.fire("focus").fire("focus:composer"),setTimeout(function(){r=o.getValue()},0)}),t.observe(l,"blur",function(){r!==o.getValue()&&o.parent.fire("change").fire("change:composer"),o.parent.fire("blur").fire("blur:composer")}),e.browser.isIos()&&t.observe(a,"blur",function(){var e=a.ownerDocument.createElement("input"),t=document.documentElement.scrollTop||document.body.scrollTop,i=document.documentElement.scrollLeft||document.body.scrollLeft;try{o.selection.insertNode(e)}catch(n){a.appendChild(e)}e.focus(),e.parentNode.removeChild(e),window.scrollTo(i,t)}),t.observe(a,"dragenter",function(){o.parent.fire("unset_placeholder")}),i.firesOnDropOnlyWhenOnDragOverIsCancelled()&&t.observe(a,["dragover","dragenter"],function(e){e.preventDefault()}),t.observe(a,c,function(e){var t,n=e.dataTransfer;console.log("PASTED",e),n&&i.supportsDataTransfer()&&(t=n.getData("text/html")||n.getData("text/plain")),t?(a.focus(),o.commands.exec("insertHTML",t),o.parent.fire("paste").fire("paste:composer"),e.stopPropagation(),e.preventDefault()):setTimeout(function(){o.parent.fire("paste").fire("paste:composer")},0)}),t.observe(a,"keyup",function(t){var i=t.keyCode;(i===e.SPACE_KEY||i===e.ENTER_KEY)&&o.parent.fire("newword:composer")}),this.parent.observe("paste:composer",function(){setTimeout(function(){o.parent.fire("newword:composer")},0)}),i.canSelectImagesInContentEditable()||t.observe(a,"mousedown",function(e){var t=e.target;"IMG"===t.nodeName&&(o.selection.selectNode(t),e.preventDefault())}),t.observe(a,"keydown",function(e){var t=e.keyCode,i=n[t];(e.ctrlKey||e.metaKey)&&!e.altKey&&i&&(o.commands.exec(i),e.preventDefault())}),t.observe(a,"keydown",function(t){var i,n=o.selection.getSelectedNode(!0),r=t.keyCode;!n||"IMG"!==n.nodeName||r!==e.BACKSPACE_KEY&&r!==e.DELETE_KEY||(i=n.parentNode,i.removeChild(n),"A"!==i.nodeName||i.firstChild||i.parentNode.removeChild(i),setTimeout(function(){e.quirks.redraw(a)},0),t.preventDefault())});var u={IMG:"Image: ",A:"Link: "};t.observe(a,"mouseover",function(e){var t,i=e.target,n=i.nodeName;if("A"===n||"IMG"===n){var o=i.hasAttribute("title");o||(t=u[n]+(i.getAttribute("href")||i.getAttribute("src")),i.setAttribute("title",t))}})}}(wysihtml5),function(e){var t=400;e.views.Synchronizer=Base.extend({constructor:function(e,t,i){this.editor=e,this.textarea=t,this.composer=i,this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(e.lang.string(this.composer.getValue()).trim(),t)},fromTextareaToComposer:function(e){var t=this.textarea.getValue();t?this.composer.setValue(t,e):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(e){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(e):this.fromComposerToTextarea(e)},_observe:function(){var i,n=this,o=this.textarea.element.form,r=function(){i=setInterval(function(){n.fromComposerToTextarea()},t)},s=function(){clearInterval(i),i=null};r(),o&&(e.dom.observe(o,"submit",function(){n.sync(!0)}),e.dom.observe(o,"reset",function(){setTimeout(function(){n.fromTextareaToComposer()},0)})),this.editor.observe("change_view",function(e){"composer"!==e||i?"textarea"===e&&(n.fromComposerToTextarea(!0),s()):(n.fromTextareaToComposer(!0),r())}),this.editor.observe("destroy:composer",s)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(e,t,i){this.base(e,t,i),this._observe()},clear:function(){this.element.value=""},getValue:function(e){var t=this.isEmpty()?"":this.element.value;return e&&(t=this.parent.parse(t)),t},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.value=e},hasPlaceholderSet:function(){var e=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),t=this.element.getAttribute("placeholder")||null,i=this.element.value,n=!i;return e&&n||i===t},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var e=this.element,t=this.parent,i={focusin:"focus",focusout:"blur"},n=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];t.observe("beforeload",function(){wysihtml5.dom.observe(e,n,function(e){var n=i[e.type]||e.type;t.fire(n).fire(n+":textarea")}),wysihtml5.dom.observe(e,["paste","drop"],function(){setTimeout(function(){t.fire("paste").fire("paste:textarea")},0)})})}}),function(e){var t=e.dom,i="wysihtml5-command-dialog-opened",n="input, select, textarea",o="[data-wysihtml5-dialog-field]",r="data-wysihtml5-dialog-field";e.toolbar.Dialog=e.lang.Dispatcher.extend({constructor:function(e,t){this.link=e,this.container=t},_observe:function(){if(!this._observed){var o=this,r=function(e){var t=o._serialize();t==o.elementToChange?o.fire("edit",t):o.fire("save",t),o.hide(),e.preventDefault(),e.stopPropagation()};t.observe(o.link,"click",function(){t.hasClass(o.link,i)&&setTimeout(function(){o.hide()},0)}),t.observe(this.container,"keydown",function(t){var i=t.keyCode;i===e.ENTER_KEY&&r(t),i===e.ESCAPE_KEY&&o.hide()}),t.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",r),t.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(e){o.fire("cancel"),o.hide(),e.preventDefault(),e.stopPropagation()});for(var s=this.container.querySelectorAll(n),a=0,l=s.length,c=function(){clearInterval(o.interval)};l>a;a++)t.observe(s[a],"change",c);this._observed=!0}},_serialize:function(){for(var e=this.elementToChange||{},t=this.container.querySelectorAll(o),i=t.length,n=0;i>n;n++)e[t[n].getAttribute(r)]=t[n].value;return e},_interpolate:function(e){for(var t,i,n,s=document.querySelector(":focus"),a=this.container.querySelectorAll(o),l=a.length,c=0;l>c;c++)t=a[c],t!==s&&(e&&"hidden"===t.type||(i=t.getAttribute(r),n=this.elementToChange?this.elementToChange[i]||"":t.defaultValue,t.value=n))},show:function(e){var o=this,r=this.container.querySelector(n);if(this.elementToChange=e,this._observe(),this._interpolate(),e&&(this.interval=setInterval(function(){o._interpolate(!0)},500)),t.addClass(this.link,i),this.container.style.display="",this.fire("show"),r&&!e)try{r.focus()}catch(s){}},hide:function(){clearInterval(this.interval),this.elementToChange=null,t.removeClass(this.link,i),this.container.style.display="none",this.fire("hide")}})}(wysihtml5),function(e){var t=e.dom,i={position:"relative"},n={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},o={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},r={"x-webkit-speech":"",speech:""};e.toolbar.Speech=function(s,a){var l=document.createElement("input");if(!e.browser.supportsSpeechApiOn(l))return a.style.display="none",void 0;var c=document.createElement("div");e.lang.object(n).merge({width:a.offsetWidth+"px",height:a.offsetHeight+"px"}),t.insert(l).into(c),t.insert(c).into(a),t.setStyles(o).on(l),t.setAttributes(r).on(l),t.setStyles(n).on(c),t.setStyles(i).on(a);var d="onwebkitspeechchange"in l?"webkitspeechchange":"speechchange";t.observe(l,d,function(){s.execCommand("insertText",l.value),l.value=""}),t.observe(l,"click",function(e){t.hasClass(a,"wysihtml5-command-disabled")&&e.preventDefault(),e.stopPropagation()})}}(wysihtml5),function(e){var t="wysihtml5-command-disabled",i="wysihtml5-commands-disabled",n="wysihtml5-command-active",o="wysihtml5-action-active",r=e.dom;
e.toolbar.Toolbar=Base.extend({constructor:function(t,i){this.editor=t,this.container="string"==typeof i?document.getElementById(i):i,this.composer=t.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),this.show();for(var n=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),o=n.length,r=0;o>r;r++)new e.toolbar.Speech(this,n[r])},_getLinks:function(t){for(var i,n,o,r,s,a=this[t+"Links"]=e.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+t+"]")).get(),l=a.length,c=0,d=this[t+"Mapping"]={};l>c;c++)i=a[c],o=i.getAttribute("data-wysihtml5-"+t),r=i.getAttribute("data-wysihtml5-"+t+"-value"),n=this.container.querySelector("[data-wysihtml5-"+t+"-group='"+o+"']"),s=this._getDialog(i,o),d[o+":"+r]={link:i,group:n,name:o,value:r,dialog:s,state:!1}},_getDialog:function(t,i){var n,o,r=this,s=this.container.querySelector("[data-wysihtml5-dialog='"+i+"']");return s&&(n=new e.toolbar.Dialog(t,s),n.observe("show",function(){o=r.composer.selection.getBookmark(),r.editor.fire("show:dialog",{command:i,dialogContainer:s,commandLink:t})}),n.observe("save",function(e){o&&r.composer.selection.setBookmark(o),r._execCommand(i,e),r.editor.fire("save:dialog",{command:i,dialogContainer:s,commandLink:t})}),n.observe("cancel",function(){r.editor.focus(!1),r.editor.fire("cancel:dialog",{command:i,dialogContainer:s,commandLink:t})})),n},execCommand:function(e,t){if(!this.commandsDisabled){var i=this.commandMapping[e+":"+t];i&&i.dialog&&!i.state?i.dialog.show():this._execCommand(e,t)}},_execCommand:function(e,t){this.editor.focus(!1),this.composer.commands.exec(e,t),this._updateLinkStates()},execAction:function(e){var t=this.editor;switch(e){case"change_view":t.currentView===t.textarea?t.fire("change_view","composer"):t.fire("change_view","textarea")}},_observe:function(){for(var e=this,t=this.editor,n=this.container,o=this.commandLinks.concat(this.actionLinks),s=o.length,a=0;s>a;a++)r.setAttributes({href:"javascript:;",unselectable:"on"}).on(o[a]);r.delegate(n,"[data-wysihtml5-command]","mousedown",function(e){e.preventDefault()}),r.delegate(n,"[data-wysihtml5-command]","click",function(t){var i=this,n=i.getAttribute("data-wysihtml5-command"),o=i.getAttribute("data-wysihtml5-command-value");e.execCommand(n,o),t.preventDefault()}),r.delegate(n,"[data-wysihtml5-action]","click",function(t){var i=this.getAttribute("data-wysihtml5-action");e.execAction(i),t.preventDefault()}),t.observe("focus:composer",function(){e.bookmark=null,clearInterval(e.interval),e.interval=setInterval(function(){e._updateLinkStates()},500)}),t.observe("blur:composer",function(){clearInterval(e.interval)}),t.observe("destroy:composer",function(){clearInterval(e.interval)}),t.observe("change_view",function(t){setTimeout(function(){e.commandsDisabled="composer"!==t,e._updateLinkStates(),e.commandsDisabled?r.addClass(n,i):r.removeClass(n,i)},0)})},_updateLinkStates:function(){var i,s,a,l,c=(this.composer.element,this.commandMapping),d=this.actionMapping;for(i in c)l=c[i],this.commandsDisabled?(s=!1,r.removeClass(l.link,n),l.group&&r.removeClass(l.group,n),l.dialog&&l.dialog.hide()):(s=this.composer.commands.state(l.name,l.value),e.lang.object(s).isArray()&&(s=1===s.length?s[0]:!0),r.removeClass(l.link,t),l.group&&r.removeClass(l.group,t)),l.state!==s&&(l.state=s,s?(r.addClass(l.link,n),l.group&&r.addClass(l.group,n),l.dialog&&("object"==typeof s?l.dialog.show(s):l.dialog.hide())):(r.removeClass(l.link,n),l.group&&r.removeClass(l.group,n),l.dialog&&l.dialog.hide()));for(i in d)a=d[i],"change_view"===a.name&&(a.state=this.editor.currentView===this.editor.textarea,a.state?r.addClass(a.link,o):r.removeClass(a.link,o))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(e){var t,i={name:t,style:!0,toolbar:t,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:e.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:t,allowObjectResizing:!0,supportTouchDevices:!0};e.Editor=e.lang.Dispatcher.extend({constructor:function(t,n){if(this.textareaElement="string"==typeof t?document.getElementById(t):t,this.config=e.lang.object({}).merge(i).merge(n).get(),this.textarea=new e.views.Textarea(this,this.textareaElement,this.config),this.currentView=this.textarea,this._isCompatible=e.browser.supported(),!this._isCompatible||!this.config.supportTouchDevices&&e.browser.isTouchDevice()){var o=this;return setTimeout(function(){o.fire("beforeload").fire("load")},0),void 0}e.dom.addClass(document.body,this.config.bodyClassName),this.composer=new e.views.Composer(this,this.textareaElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.observe("beforeload",function(){this.synchronizer=new e.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new e.toolbar.Toolbar(this,this.config.toolbar))});try{console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")}catch(r){}},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(e){return this.currentView.getValue(e)},setValue:function(e,t){return e?(this.currentView.setValue(e,t),this):this.clear()},focus:function(e){return this.currentView.focus(e),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(t){var i=this.config.parser(t,this.config.parserRules,this.composer.sandbox.getDocument(),!0);return"object"==typeof t&&e.quirks.redraw(t),i},_initParser:function(){this.observe("paste:composer",function(){var t=!0,i=this;i.composer.selection.executeAndRestore(function(){e.quirks.cleanPastedHTML(i.composer.element),i.parse(i.composer.element)},t)}),this.observe("paste:textarea",function(){var e,t=this.textarea.getValue();e=this.parse(t),this.textarea.setValue(e)})}})}(wysihtml5),!function(e,t){"use strict";var i={"font-styles":function(e,t){var i=t&&t.size?" btn-"+t.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle"+i+"' data-toggle='dropdown' href='#'>"+"<i class='icon-font'></i>&nbsp;<span class='current-font'>"+e.font_styles.normal+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div' tabindex='-1'>"+e.font_styles.normal+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1' tabindex='-1'>"+e.font_styles.h1+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2' tabindex='-1'>"+e.font_styles.h2+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3' tabindex='-1'>"+e.font_styles.h3+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h4'>"+e.font_styles.h4+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h5'>"+e.font_styles.h5+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h6'>"+e.font_styles.h6+"</a></li>"+"</ul>"+"</li>"},emphasis:function(e,t){var i=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn"+i+"' data-wysihtml5-command='bold' title='CTRL+B' tabindex='-1'>"+e.emphasis.bold+"</a>"+"<a class='btn"+i+"' data-wysihtml5-command='italic' title='CTRL+I' tabindex='-1'>"+e.emphasis.italic+"</a>"+"<a class='btn"+i+"' data-wysihtml5-command='underline' title='CTRL+U' tabindex='-1'>"+e.emphasis.underline+"</a>"+"</div>"+"</li>"},lists:function(e,t){var i=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn"+i+"' data-wysihtml5-command='insertUnorderedList' title='"+e.lists.unordered+"' tabindex='-1'><i class='icon-list'></i></a>"+"<a class='btn"+i+"' data-wysihtml5-command='insertOrderedList' title='"+e.lists.ordered+"' tabindex='-1'><i class='icon-th-list'></i></a>"+"<a class='btn"+i+"' data-wysihtml5-command='Outdent' title='"+e.lists.outdent+"' tabindex='-1'><i class='icon-indent-right'></i></a>"+"<a class='btn"+i+"' data-wysihtml5-command='Indent' title='"+e.lists.indent+"' tabindex='-1'><i class='icon-indent-left'></i></a>"+"</div>"+"</li>"},link:function(e,t){var i=t&&t.size?" btn-"+t.size:"";return"<li><div class='bootstrap-wysihtml5-insert-link-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+e.link.insert+"</h3>"+"</div>"+"<div class='modal-body'>"+"<input value='http://' class='bootstrap-wysihtml5-insert-link-url input-xlarge'>"+"<label class='checkbox'> <input type='checkbox' class='bootstrap-wysihtml5-insert-link-target' checked>"+e.link.target+"</label>"+"</div>"+"<div class='modal-footer'>"+"<a href='#' class='btn' data-dismiss='modal'>"+e.link.cancel+"</a>"+"<a href='#' class='btn btn-primary' data-dismiss='modal'>"+e.link.insert+"</a>"+"</div>"+"</div>"+"<a class='btn"+i+"' data-wysihtml5-command='createLink' title='"+e.link.insert+"' tabindex='-1'><i class='icon-share'></i></a>"+"</li>"},image:function(e,t){var i=t&&t.size?" btn-"+t.size:"";return"<li><div class='bootstrap-wysihtml5-insert-image-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+e.image.insert+"</h3>"+"</div>"+"<div class='modal-body'>"+"<input value='http://' class='bootstrap-wysihtml5-insert-image-url input-xlarge'>"+"</div>"+"<div class='modal-footer'>"+"<a href='#' class='btn' data-dismiss='modal'>"+e.image.cancel+"</a>"+"<a href='#' class='btn btn-primary' data-dismiss='modal'>"+e.image.insert+"</a>"+"</div>"+"</div>"+"<a class='btn"+i+"' data-wysihtml5-command='insertImage' title='"+e.image.insert+"' tabindex='-1'><i class='icon-picture'></i></a>"+"</li>"},html:function(e,t){var i=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn"+i+"' data-wysihtml5-action='change_view' title='"+e.html.edit+"' tabindex='-1'><i class='icon-pencil'></i></a>"+"</div>"+"</li>"},color:function(e,t){var i=t&&t.size?" btn-"+t.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle"+i+"' data-toggle='dropdown' href='#' tabindex='-1'>"+"<span class='current-color'>"+e.colours.black+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+e.colours.black+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+e.colours.silver+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+e.colours.gray+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+e.colours.maroon+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+e.colours.red+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+e.colours.purple+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+e.colours.green+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+e.colours.olive+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+e.colours.navy+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+e.colours.blue+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+e.colours.orange+"</a></li>"+"</ul>"+"</li>"}},n=function(e,t,n){return i[e](t,n)},o=function(t,n){this.el=t;var o=n||s;for(var r in o.customTemplates)i[r]=o.customTemplates[r];this.toolbar=this.createToolbar(t,o),this.editor=this.createEditor(n),window.editor=this.editor,e("iframe.wysihtml5-sandbox").each(function(t,i){e(i.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){e("li.dropdown").removeClass("open")}})})};o.prototype={constructor:o,createEditor:function(i){i=i||{},i=e.extend(!0,{},i),i.toolbar=this.toolbar[0];var n=new t.Editor(this.el[0],i);if(i&&i.events)for(var o in i.events)n.on(o,i.events[o]);return n},createToolbar:function(t,i){var o=this,r=e("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),l=i.locale||s.locale||"en";for(var c in s){var d=!1;void 0!==i[c]?i[c]===!0&&(d=!0):d=s[c],d===!0&&(r.append(n(c,a[l],i)),"html"===c&&this.initHtml(r),"link"===c&&this.initInsertLink(r),"image"===c&&this.initInsertImage(r))}if(i.toolbar)for(c in i.toolbar)r.append(i.toolbar[c]);return r.find("a[data-wysihtml5-command='formatBlock']").click(function(t){var i=t.target||t.srcElement,n=e(i);o.toolbar.find(".current-font").text(n.html())}),r.find("a[data-wysihtml5-command='foreColor']").click(function(t){var i=t.target||t.srcElement,n=e(i);o.toolbar.find(".current-color").text(n.html())}),this.el.before(r),r},initHtml:function(e){var t="a[data-wysihtml5-action='change_view']";e.find(t).click(function(){e.find("a.btn").not(t).toggleClass("disabled")})},initInsertImage:function(t){var i,n=this,o=t.find(".bootstrap-wysihtml5-insert-image-modal"),r=o.find(".bootstrap-wysihtml5-insert-image-url"),s=o.find("a.btn-primary"),a=r.val(),l=function(){var e=r.val();r.val(a),n.editor.currentView.element.focus(),i&&(n.editor.composer.selection.setBookmark(i),i=null),n.editor.composer.commands.exec("insertImage",e)};r.keypress(function(e){13==e.which&&(l(),o.modal("hide"))}),s.click(l),o.on("shown",function(){r.focus()}),o.on("hide",function(){n.editor.currentView.element.focus()}),t.find("a[data-wysihtml5-command=insertImage]").click(function(){var t=e(this).hasClass("wysihtml5-command-active");return t?!0:(n.editor.currentView.element.focus(!1),i=n.editor.composer.selection.getBookmark(),o.appendTo("body").modal("show"),o.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()}),!1)})},initInsertLink:function(t){var i,n=this,o=t.find(".bootstrap-wysihtml5-insert-link-modal"),r=o.find(".bootstrap-wysihtml5-insert-link-url"),s=o.find(".bootstrap-wysihtml5-insert-link-target"),a=o.find("a.btn-primary"),l=r.val(),c=function(){var e=r.val();r.val(l),n.editor.currentView.element.focus(),i&&(n.editor.composer.selection.setBookmark(i),i=null);var t=s.prop("checked");n.editor.composer.commands.exec("createLink",{href:e,target:t?"_blank":"_self",rel:t?"nofollow":""})};r.keypress(function(e){13==e.which&&(c(),o.modal("hide"))}),a.click(c),o.on("shown",function(){r.focus()}),o.on("hide",function(){n.editor.currentView.element.focus()}),t.find("a[data-wysihtml5-command=createLink]").click(function(){var t=e(this).hasClass("wysihtml5-command-active");return t?!0:(n.editor.currentView.element.focus(!1),i=n.editor.composer.selection.getBookmark(),o.appendTo("body").modal("show"),o.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()}),!1)})}};var r={resetDefaults:function(){e.fn.wysihtml5.defaultOptions=e.extend(!0,{},e.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(t){return this.each(function(){var i=e(this);i.data("wysihtml5",new o(i,t))})},shallowExtend:function(t){var i=e.extend({},e.fn.wysihtml5.defaultOptions,t||{},e(this).data()),n=this;return r.bypassDefaults.apply(n,[i])},deepExtend:function(t){var i=e.extend(!0,{},e.fn.wysihtml5.defaultOptions,t||{}),n=this;return r.bypassDefaults.apply(n,[i])},init:function(e){var t=this;return r.shallowExtend.apply(t,[e])}};e.fn.wysihtml5=function(t){return r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.wysihtml5"),void 0):r.init.apply(this,arguments)},e.fn.wysihtml5.Constructor=o;var s=e.fn.wysihtml5.defaultOptions={"font-styles":!0,color:!1,emphasis:!0,lists:!0,html:!1,link:!0,image:!0,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url",target:"alt",rel:"alt"}},span:1,div:1,code:1,pre:1}},stylesheets:["/assets/bootstrap-wysihtml5/wysiwyg-color.css"],locale:"en"};"undefined"==typeof e.fn.wysihtml5.defaultOptionsCache&&(e.fn.wysihtml5.defaultOptionsCache=e.extend(!0,{},e.fn.wysihtml5.defaultOptions));var a=e.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5),// Copyright (c) 2011 Joseph Cava-Lynch
// The above copyright notice and this permission notice shall be included in all
// COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
function(e){e.isScrollToFixed=function(t){return!!e(t).data("ScrollToFixed")},e.ScrollToFixed=function(t,i){function n(){_.trigger("preUnfixed.ScrollToFixed"),d(),_.trigger("unfixed.ScrollToFixed"),T=-1,x=_.offset().top,C=_.offset().left,g.options.offsets&&(C+=_.offset().left-_.position().left),-1==k&&(k=C),v=_.css("position"),w=!0,-1!=g.options.bottom&&(_.trigger("preFixed.ScrollToFixed"),l(),_.trigger("fixed.ScrollToFixed"))}function o(){var e=g.options.limit;return e?"function"==typeof e?e.apply(_):e:0}function r(){return"fixed"===v}function s(){return"absolute"===v}function a(){return!(r()||s())}function l(){r()||(S.css({display:_.css("display"),width:_.outerWidth(!0),height:_.outerHeight(!0),"float":_.css("float")}),cssOptions={position:"fixed",top:-1==g.options.bottom?h():"",bottom:-1==g.options.bottom?"":g.options.bottom,"margin-left":"0px"},g.options.dontSetWidth||(cssOptions.width=_.width()),_.css(cssOptions),_.addClass("scroll-to-fixed-fixed"),g.options.className&&_.addClass(g.options.className),v="fixed")}function c(){var e=o(),t=C;g.options.removeOffsets&&(t=0,e-=x),cssOptions={position:"absolute",top:e,left:t,"margin-left":"0px",bottom:""},g.options.dontSetWidth||(cssOptions.width=_.width()),_.css(cssOptions),v="absolute"}function d(){a()||(T=-1,S.css("display","none"),_.css({width:"",position:y,left:"",top:b.top,"margin-left":""}),_.removeClass("scroll-to-fixed-fixed"),g.options.className&&_.removeClass(g.options.className),v=null)}function u(e){e!=T&&(_.css("left",C-e),T=e)}function h(){var e=g.options.marginTop;return e?"function"==typeof e?e.apply(_):e:0}function f(){if(e.isScrollToFixed(_)){var t=w;w||n();var i=e(window).scrollLeft(),f=e(window).scrollTop(),v=o();g.options.minWidth&&e(window).width()<g.options.minWidth?a()&&t||(m(),_.trigger("preUnfixed.ScrollToFixed"),d(),_.trigger("unfixed.ScrollToFixed")):-1==g.options.bottom?v>0&&f>=v-h()?s()&&t||(m(),_.trigger("preAbsolute.ScrollToFixed"),c(),_.trigger("unfixed.ScrollToFixed")):f>=x-h()?(r()&&t||(m(),_.trigger("preFixed.ScrollToFixed"),l(),T=-1,_.trigger("fixed.ScrollToFixed")),u(i)):a()&&t||(m(),_.trigger("preUnfixed.ScrollToFixed"),d(),_.trigger("unfixed.ScrollToFixed")):v>0?f+e(window).height()-_.outerHeight(!0)>=v-(h()||-p())?r()&&(m(),_.trigger("preUnfixed.ScrollToFixed"),"absolute"===y?c():d(),_.trigger("unfixed.ScrollToFixed")):(r()||(m(),_.trigger("preFixed.ScrollToFixed"),l()),u(i),_.trigger("fixed.ScrollToFixed")):u(i)}}function p(){return g.options.bottom?g.options.bottom:0}function m(){var e=_.css("position");"absolute"==e?_.trigger("postAbsolute.ScrollToFixed"):"fixed"==e?_.trigger("postFixed.ScrollToFixed"):_.trigger("postUnfixed.ScrollToFixed")}var g=this;g.$el=e(t),g.el=t,g.$el.data("ScrollToFixed",g);var v,y,b,w=!1,_=g.$el,x=0,C=0,k=-1,T=-1,S=null,D=function(){_.is(":visible")&&(w=!1,f())},N=function(){f()},E=function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1};g.init=function(){g.options=e.extend({},e.ScrollToFixed.defaultOptions,i),g.$el.css("z-index",g.options.zIndex),S=e("<div />"),v=_.css("position"),y=_.css("position"),b=e.extend({},_.offset()),a()&&g.$el.after(S),e(window).bind("resize.ScrollToFixed",D),e(window).bind("scroll.ScrollToFixed",N),g.options.preFixed&&_.bind("preFixed.ScrollToFixed",g.options.preFixed),g.options.postFixed&&_.bind("postFixed.ScrollToFixed",g.options.postFixed),g.options.preUnfixed&&_.bind("preUnfixed.ScrollToFixed",g.options.preUnfixed),g.options.postUnfixed&&_.bind("postUnfixed.ScrollToFixed",g.options.postUnfixed),g.options.preAbsolute&&_.bind("preAbsolute.ScrollToFixed",g.options.preAbsolute),g.options.postAbsolute&&_.bind("postAbsolute.ScrollToFixed",g.options.postAbsolute),g.options.fixed&&_.bind("fixed.ScrollToFixed",g.options.fixed),g.options.unfixed&&_.bind("unfixed.ScrollToFixed",g.options.unfixed),g.options.spacerClass&&S.addClass(g.options.spacerClass),_.bind("resize.ScrollToFixed",function(){S.height(_.height())}),_.bind("scroll.ScrollToFixed",function(){_.trigger("preUnfixed.ScrollToFixed"),d(),_.trigger("unfixed.ScrollToFixed"),f()}),_.bind("detach.ScrollToFixed",function(t){E(t),_.trigger("preUnfixed.ScrollToFixed"),d(),_.trigger("unfixed.ScrollToFixed"),e(window).unbind("resize.ScrollToFixed",D),e(window).unbind("scroll.ScrollToFixed",N),_.unbind(".ScrollToFixed"),g.$el.removeData("ScrollToFixed")}),D()},g.init()},e.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3},e.fn.scrollToFixed=function(t){return this.each(function(){new e.ScrollToFixed(this,t)})}}(jQuery),/**
 * jquery.purr.js
 * Copyright (c) 2008 Net Perspective (net-perspective.com)
 * Licensed under the MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * @author R.A. Ray
 * @projectDescription  jQuery plugin for dynamically displaying unobtrusive messages in the browser. Mimics the behavior of the MacOS program "Growl."
 * @version 0.1.0
 *
 * @requires jquery.js (tested with 1.2.6)
 *
 * @param fadeInSpeed           int - Duration of fade in animation in miliseconds
 *                          default: 500
 *  @param fadeOutSpeed         int - Duration of fade out animationin miliseconds
                            default: 500
 *  @param removeTimer          int - Timeout, in miliseconds, before notice is removed once it is the top non-sticky notice in the list
                            default: 4000
 *  @param isSticky             bool - Whether the notice should fade out on its own or wait to be manually closed
                            default: false
 *  @param usingTransparentPNG  bool - Whether or not the notice is using transparent .png images in its styling
                            default: false
 */
function(e){e.purr=function(t,i){function n(){var n=document.createElement("a");if(e(n).attr({className:"close",href:"#close"}).appendTo(t).click(function(){return o(),!1}),e(document).keyup(function(e){27===e.keyCode&&o()}),t.appendTo(r).hide(),t.fadeIn(i.fadeInSpeed),!i.isSticky)var s=setInterval(function(){0===t.prevAll(".purr").length&&(clearInterval(s),setTimeout(function(){o()},i.removeTimer))},200)}function o(){t.animate({opacity:"0"},{duration:i.fadeOutSpeed,complete:function(){t.animate({height:"0px"},{duration:i.fadeOutSpeed,complete:function(){t.remove()}})}})}t=e(t),t.addClass("purr");var r=document.getElementById("purr-container");r||(r='<div id="purr-container"></div>'),r=e(r),e("body").append(r),n()},e.fn.purr=function(t){return t=t||{},t.fadeInSpeed=t.fadeInSpeed||500,t.fadeOutSpeed=t.fadeOutSpeed||500,t.removeTimer=t.removeTimer||4e3,t.isSticky=t.isSticky||!1,t.usingTransparentPNG=t.usingTransparentPNG||!1,this.each(function(){new e.purr(this,t)}),this}}(jQuery),BestInPlaceEditor.prototype={activate:function(){var e="";e=this.isNil()?"":this.original_content?this.original_content:this.sanitize?this.element.text():this.element.html(),this.oldValue=this.isNil()?"":this.element.html(),this.display_value=e,jQuery(this.activator).unbind("click",this.clickHandler),this.activateForm(),this.element.trigger(jQuery.Event("best_in_place:activate"))},abort:function(){this.activateText(this.oldValue),jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:abort")),this.element.trigger(jQuery.Event("best_in_place:deactivate"))},abortIfConfirm:function(){return this.useConfirm?(confirm("Are you sure you want to discard your changes?")&&this.abort(),void 0):(this.abort(),void 0)},update:function(){var e=this;if(this.formType in{input:1,textarea:1}&&this.getValue()==this.oldValue)return this.abort(),!0;if(e.ajax({type:"post",dataType:"text",data:e.requestData(),success:function(t){e.loadSuccessCallback(t)},error:function(t,i){e.loadErrorCallback(t,i)}}),"select"==this.formType){var t=this.getValue();this.previousCollectionValue=t,jQuery.each(this.values,function(i,n){t==n[0]&&e.element.html(n[1])})}else"checkbox"==this.formType?e.element.html(this.getValue()?this.values[1]:this.values[0]):""!==this.getValue()?e.element.text(this.getValue()):e.element.html(this.nil);e.element.trigger(jQuery.Event("best_in_place:update"))},activateForm:function(){alert("The form was not properly initialized. activateForm is unbound")},activateText:function(e){this.element.html(e),this.isNil()&&this.element.html(this.nil)},initOptions:function(){var e=this;e.element.parents().each(function(){$parent=jQuery(this),e.url=e.url||$parent.attr("data-url"),e.collection=e.collection||$parent.attr("data-collection"),e.formType=e.formType||$parent.attr("data-type"),e.objectName=e.objectName||$parent.attr("data-object"),e.attributeName=e.attributeName||$parent.attr("data-attribute"),e.activator=e.activator||$parent.attr("data-activator"),e.okButton=e.okButton||$parent.attr("data-ok-button"),e.okButtonClass=e.okButtonClass||$parent.attr("data-ok-button-class"),e.cancelButton=e.cancelButton||$parent.attr("data-cancel-button"),e.cancelButtonClass=e.cancelButtonClass||$parent.attr("data-cancel-button-class"),e.nil=e.nil||$parent.attr("data-nil"),e.inner_class=e.inner_class||$parent.attr("data-inner-class"),e.html_attrs=e.html_attrs||$parent.attr("data-html-attrs"),e.original_content=e.original_content||$parent.attr("data-original-content"),e.collectionValue=e.collectionValue||$parent.attr("data-value")}),e.element.parents().each(function(){var t=this.id.match(/^(\w+)_(\d+)$/i);t&&(e.objectName=e.objectName||t[1])}),e.url=e.element.attr("data-url")||e.url||document.location.pathname,e.collection=e.element.attr("data-collection")||e.collection,e.formType=e.element.attr("data-type")||e.formtype||"input",e.objectName=e.element.attr("data-object")||e.objectName,e.attributeName=e.element.attr("data-attribute")||e.attributeName,e.activator=e.element.attr("data-activator")||e.element,e.okButton=e.element.attr("data-ok-button")||e.okButton,e.okButtonClass=e.element.attr("data-ok-button-class")||e.okButtonClass||"",e.cancelButton=e.element.attr("data-cancel-button")||e.cancelButton,e.cancelButtonClass=e.element.attr("data-cancel-button-class")||e.cancelButtonClass||"",e.nil=e.element.attr("data-nil")||e.nil||"—",e.inner_class=e.element.attr("data-inner-class")||e.inner_class||null,e.html_attrs=e.element.attr("data-html-attrs")||e.html_attrs,e.original_content=e.element.attr("data-original-content")||e.original_content,e.collectionValue=e.element.attr("data-value")||e.collectionValue,e.sanitize=e.element.attr("data-sanitize")?"true"==e.element.attr("data-sanitize"):!0,e.useConfirm=e.element.attr("data-use-confirm")?"false"!=e.element.attr("data-use-confirm"):!0,"select"!=e.formType&&"checkbox"!=e.formType||null===e.collection||(e.values=jQuery.parseJSON(e.collection))},bindForm:function(){this.activateForm=BestInPlaceEditor.forms[this.formType].activateForm,this.getValue=BestInPlaceEditor.forms[this.formType].getValue},initNil:function(){""===this.element.html()&&this.element.html(this.nil)},isNil:function(){return""===this.element.html()||this.element.html()===this.nil},getValue:function(){alert("The form was not properly initialized. getValue is unbound")},sanitizeValue:function(e){return jQuery.trim(e)},requestData:function(){csrf_token=jQuery("meta[name=csrf-token]").attr("content"),csrf_param=jQuery("meta[name=csrf-param]").attr("content");var e="_method=put";return e+="&"+this.objectName+"["+this.attributeName+"]="+encodeURIComponent(this.getValue()),void 0!==csrf_param&&void 0!==csrf_token&&(e+="&"+csrf_param+"="+encodeURIComponent(csrf_token)),e},ajax:function(e){return e.url=this.url,e.beforeSend=function(e){e.setRequestHeader("Accept","application/json")},jQuery.ajax(e)},loadSuccessCallback:function(e){if(e=jQuery.trim(e),e&&""!=e){var t=jQuery.parseJSON(jQuery.trim(e));null!==t&&t.hasOwnProperty("display_as")&&(this.element.attr("data-original-content",this.element.text()),this.original_content=this.element.text(),this.element.html(t.display_as)),this.element.trigger(jQuery.Event("best_in_place:success"),e),this.element.trigger(jQuery.Event("ajax:success"),e)}else this.element.trigger(jQuery.Event("best_in_place:success")),this.element.trigger(jQuery.Event("ajax:success"));jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:deactivate")),null!==this.collectionValue&&"select"==this.formType&&(this.collectionValue=this.previousCollectionValue,this.previousCollectionValue=null)},loadErrorCallback:function(e,t){this.activateText(this.oldValue),this.element.trigger(jQuery.Event("best_in_place:error"),[e,t]),this.element.trigger(jQuery.Event("ajax:error"),e,t),jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:deactivate"))},clickHandler:function(e){e.preventDefault(),e.data.editor.activate()},setHtmlAttributes:function(){var e=this.element.find(this.formType);if(this.html_attrs){var t=jQuery.parseJSON(this.html_attrs);for(var i in t)e.attr(i,t[i])}}},BestInPlaceEditor.forms={input:{activateForm:function(){var e=jQuery(document.createElement("form")).addClass("form_in_place").attr("action","javascript:void(0);").attr("style","display:inline"),t=jQuery(document.createElement("input")).attr("type","text").attr("name",this.attributeName).val(this.display_value);null!==this.inner_class&&t.addClass(this.inner_class),e.append(t),this.okButton&&e.append(jQuery(document.createElement("input")).attr("type","submit").attr("class",this.okButtonClass).attr("value",this.okButton)),this.cancelButton&&e.append(jQuery(document.createElement("input")).attr("type","button").attr("class",this.cancelButtonClass).attr("value",this.cancelButton)),this.element.html(e),this.setHtmlAttributes(),this.element.find("input[type='text']")[0].select(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.input.submitHandler),this.cancelButton&&this.element.find("input[type='button']").bind("click",{editor:this},BestInPlaceEditor.forms.input.cancelButtonHandler),this.element.find("input[type='text']").bind("blur",{editor:this},BestInPlaceEditor.forms.input.inputBlurHandler),this.element.find("input[type='text']").bind("keyup",{editor:this},BestInPlaceEditor.forms.input.keyupHandler),this.blurTimer=null,this.userClicked=!1},getValue:function(){return this.sanitizeValue(this.element.find("input").val())},inputBlurHandler:function(e){e.data.editor.okButton?e.data.editor.blurTimer=setTimeout(function(){e.data.editor.userClicked||e.data.editor.abort()},500):e.data.editor.cancelButton?e.data.editor.blurTimer=setTimeout(function(){e.data.editor.userClicked||e.data.editor.update()},500):e.data.editor.update()},submitHandler:function(e){e.data.editor.userClicked=!0,clearTimeout(e.data.editor.blurTimer),e.data.editor.update()},cancelButtonHandler:function(e){e.data.editor.userClicked=!0,clearTimeout(e.data.editor.blurTimer),e.data.editor.abort(),e.stopPropagation()},keyupHandler:function(e){27==e.keyCode&&e.data.editor.abort()}},date:{activateForm:function(){var e=this,t=jQuery(document.createElement("form")).addClass("form_in_place").attr("action","javascript:void(0);").attr("style","display:inline"),i=jQuery(document.createElement("input")).attr("type","text").attr("name",this.attributeName).attr("value",this.sanitizeValue(this.display_value));null!==this.inner_class&&i.addClass(this.inner_class),t.append(i),this.element.html(t),this.setHtmlAttributes(),this.element.find("input")[0].select(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.input.submitHandler),this.element.find("input").bind("keyup",{editor:this},BestInPlaceEditor.forms.input.keyupHandler),this.element.find("input").datepicker({onClose:function(){e.update()}}).datepicker("show")},getValue:function(){return this.sanitizeValue(this.element.find("input").val())},submitHandler:function(e){e.data.editor.update()},keyupHandler:function(e){27==e.keyCode&&e.data.editor.abort()}},select:{activateForm:function(){var e=jQuery(document.createElement("form")).attr("action","javascript:void(0)").attr("style","display:inline");selected="",oldValue=this.oldValue,select_elt=jQuery(document.createElement("select")).attr("class",null!==this.inned_class?this.inner_class:""),currentCollectionValue=this.collectionValue,jQuery.each(this.values,function(e,t){var i=jQuery(document.createElement("option")).val(t[0]).html(t[1]);t[0]==currentCollectionValue&&i.attr("selected","selected"),select_elt.append(i)}),e.append(select_elt),this.element.html(e),this.setHtmlAttributes(),this.element.find("select").bind("change",{editor:this},BestInPlaceEditor.forms.select.blurHandler),this.element.find("select").bind("blur",{editor:this},BestInPlaceEditor.forms.select.blurHandler),this.element.find("select").bind("keyup",{editor:this},BestInPlaceEditor.forms.select.keyupHandler),this.element.find("select")[0].focus()},getValue:function(){return this.sanitizeValue(this.element.find("select").val())},blurHandler:function(e){e.data.editor.update()},keyupHandler:function(e){27==e.keyCode&&e.data.editor.abort()}},checkbox:{activateForm:function(){this.collectionValue=!this.getValue(),this.setHtmlAttributes(),this.update()},getValue:function(){return this.collectionValue}},textarea:{activateForm:function(){width=this.element.css("width"),height=this.element.css("height");var e=jQuery(document.createElement("form")).attr("action","javascript:void(0)").attr("style","display:inline").append(jQuery(document.createElement("textarea")).val(this.sanitizeValue(this.display_value)));this.okButton&&e.append(jQuery(document.createElement("input")).attr("type","submit").attr("value",this.okButton)),this.cancelButton&&e.append(jQuery(document.createElement("input")).attr("type","button").attr("value",this.cancelButton)),this.element.html(e),this.setHtmlAttributes(),jQuery(this.element.find("textarea")[0]).css({"min-width":width,"min-height":height}),jQuery(this.element.find("textarea")[0]).elastic(),this.element.find("textarea")[0].focus(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.textarea.submitHandler),this.cancelButton&&this.element.find("input[type='button']").bind("click",{editor:this},BestInPlaceEditor.forms.textarea.cancelButtonHandler),this.element.find("textarea").bind("blur",{editor:this},BestInPlaceEditor.forms.textarea.blurHandler),this.element.find("textarea").bind("keyup",{editor:this},BestInPlaceEditor.forms.textarea.keyupHandler),this.blurTimer=null,this.userClicked=!1},getValue:function(){return this.sanitizeValue(this.element.find("textarea").val())},blurHandler:function(e){e.data.editor.okButton?e.data.editor.blurTimer=setTimeout(function(){e.data.editor.userClicked||e.data.editor.abortIfConfirm()},500):e.data.editor.cancelButton?e.data.editor.blurTimer=setTimeout(function(){e.data.editor.userClicked||e.data.editor.update()},500):e.data.editor.update()},submitHandler:function(e){e.data.editor.userClicked=!0,clearTimeout(e.data.editor.blurTimer),e.data.editor.update()},cancelButtonHandler:function(e){e.data.editor.userClicked=!0,clearTimeout(e.data.editor.blurTimer),e.data.editor.abortIfConfirm(),e.stopPropagation()},keyupHandler:function(e){27==e.keyCode&&e.data.editor.abortIfConfirm()}}},jQuery.fn.best_in_place=function(){function e(e){return e.data("bestInPlaceEditor")?void 0:(e.data("bestInPlaceEditor",new BestInPlaceEditor(e)),!0)}return jQuery(this.context).delegate(this.selector,"click",function(){var t=jQuery(this);e(t)&&t.click()}),this.each(function(){e(jQuery(this))}),this},function(e){"undefined"==typeof e.fn.elastic&&e.fn.extend({elastic:function(){var t=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight"];return this.each(function(){function i(e,t){curratedHeight=Math.floor(parseInt(e,10)),o.height()!=curratedHeight&&o.css({height:curratedHeight+"px",overflow:t})}function n(){var e=o.val().replace(/&/g,"&amp;").replace(/  /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),t=r.html().replace(/<br>/gi,"<br />");if(e+"&nbsp;"!=t&&(r.html(e+"&nbsp;"),Math.abs(r.height()+s-o.height())>3)){var n=r.height()+s;n>=l?i(l,"auto"):a>=n?i(a,"hidden"):i(n,"hidden")}}if("textarea"!=this.type)return!1;var o=e(this),r=e("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}),s=parseInt(o.css("line-height"),10)||parseInt(o.css("font-size"),"10"),a=parseInt(o.css("height"),10)||3*s,l=parseInt(o.css("max-height"),10)||Number.MAX_VALUE,c=0;for(0>l&&(l=Number.MAX_VALUE),r.appendTo(o.parent()),c=t.length;c--;)r.css(t[c].toString(),o.css(t[c].toString()));o.css({overflow:"hidden"}),o.bind("keyup change cut paste",function(){n()}),o.bind("blur",function(){r.height()<l&&(r.height()>a?o.height(r.height()):o.height(a))}),o.on("input paste",function(){setTimeout(n,250)}),n()})}})}(jQuery),window.CodeMirror=function(){"use strict";function e(i,n){if(!(this instanceof e))return new e(i,n);this.options=n=n||{};for(var o in nr)!n.hasOwnProperty(o)&&nr.hasOwnProperty(o)&&(n[o]=nr[o]);h(n);var r="string"==typeof n.value?0:n.value.first,s=this.display=t(i,r);s.wrapper.CodeMirror=this,c(this),n.autofocus&&!Ho&&ht(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Un},a(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var l=n.value;"string"==typeof l&&(l=new mr(n.value,n.mode)),ot(this,dn)(this,l),ko&&setTimeout(Jn(ut,this,!0),20),pt(this);var d;try{d=document.activeElement==s.input}catch(u){}d||n.autofocus&&!Ho?setTimeout(Jn($t,this),20):Mt(this),ot(this,function(){for(var e in ir)ir.propertyIsEnumerable(e)&&ir[e](this,n[e],or);for(var t=0;t<lr.length;++t)lr[t](this)})()}function t(e,t){var i={},n=i.input=io("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return Do?n.style.width="1000px":n.setAttribute("wrap","off"),Oo&&(n.style.border="1px solid black"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),i.inputDiv=io("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),i.scrollbarH=io("div",[io("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),i.scrollbarV=io("div",[io("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),i.scrollbarFiller=io("div",null,"CodeMirror-scrollbar-filler"),i.gutterFiller=io("div",null,"CodeMirror-gutter-filler"),i.lineDiv=io("div",null,"CodeMirror-code"),i.selectionDiv=io("div",null,null,"position: relative; z-index: 1"),i.cursor=io("div"," ","CodeMirror-cursor"),i.otherCursor=io("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),i.measure=io("div",null,"CodeMirror-measure"),i.lineSpace=io("div",[i.measure,i.selectionDiv,i.lineDiv,i.cursor,i.otherCursor],null,"position: relative; outline: none"),i.mover=io("div",[io("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=io("div",[i.mover],"CodeMirror-sizer"),i.heightForcer=io("div",null,null,"position: absolute; height: "+wr+"px; width: 1px;"),i.gutters=io("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=io("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=io("div",[i.inputDiv,i.scrollbarH,i.scrollbarV,i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),To&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),e.appendChild?e.appendChild(i.wrapper):e(i.wrapper),Oo&&(n.style.width="0px"),Do||(i.scroller.draggable=!0),Io?(i.inputDiv.style.height="1px",i.inputDiv.style.position="absolute"):To&&(i.scrollbarH.style.minWidth=i.scrollbarV.style.minWidth="18px"),i.viewOffset=i.lastSizeC=0,i.showingFrom=i.showingTo=t,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.prevInput="",i.alignWidgets=!1,i.pollingFast=!1,i.poll=new Un,i.cachedCharWidth=i.cachedTextHeight=null,i.measureLineCache=[],i.measureLineCachePos=0,i.inaccurateSelection=!1,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i}function i(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),t.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),t.doc.frontier=t.doc.first,M(t,100),t.state.modeGen++,t.curOp&&at(t)}function n(e){e.options.lineWrapping?(e.display.wrapper.className+=" CodeMirror-wrap",e.display.sizer.style.minWidth=""):(e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),u(e)),r(e),at(e),U(e),setTimeout(function(){f(e)},100)}function o(e){var t=et(e.display),i=e.options.lineWrapping,n=i&&Math.max(5,e.display.scroller.clientWidth/tt(e.display)-3);return function(o){return Ri(e.doc,o)?0:i?(Math.ceil(o.text.length/n)||1)*t:t}}function r(e){var t=e.doc,i=o(e);t.iter(function(e){var t=i(e);t!=e.height&&pn(e,t)})}function s(e){var t=dr[e.options.keyMap],i=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(i?" cm-keymap-"+i:""),e.state.disableInput=t.disableInput}function a(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),U(e)}function l(e){c(e),at(e),setTimeout(function(){m(e)},20)}function c(e){var t=e.display.gutters,i=e.options.gutters;no(t);for(var n=0;n<i.length;++n){var o=i[n],r=t.appendChild(io("div",null,"CodeMirror-gutter "+o));"CodeMirror-linenumbers"==o&&(e.display.lineGutter=r,r.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none"}function d(e,t){if(0==t.height)return 0;for(var i,n=t.text.length,o=t;i=Pi(o);){var r=i.find();o=un(e,r.from.line),n+=r.from.ch-r.to.ch}for(o=t;i=Oi(o);){var r=i.find();n-=o.text.length-r.from.ch,o=un(e,r.to.line),n+=o.text.length-r.to.ch}return n}function u(e){var t=e.display,i=e.doc;t.maxLine=un(i,i.first),t.maxLineLength=d(i,t.maxLine),t.maxLineChanged=!0,i.iter(function(e){var n=d(i,e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function h(e){for(var t=!1,i=0;i<e.gutters.length;++i)"CodeMirror-linenumbers"==e.gutters[i]&&(e.lineNumbers?t=!0:e.gutters.splice(i--,1));!t&&e.lineNumbers&&e.gutters.push("CodeMirror-linenumbers")}function f(e){var t=e.display,i=e.doc.height,n=i+O(t);t.sizer.style.minHeight=t.heightForcer.style.top=n+"px",t.gutters.style.height=Math.max(n,t.scroller.clientHeight-wr)+"px";var o=Math.max(n,t.scroller.scrollHeight),r=t.scroller.scrollWidth>t.scroller.clientWidth+1,s=o>t.scroller.clientHeight+1;s?(t.scrollbarV.style.display="block",t.scrollbarV.style.bottom=r?lo(t.measure)+"px":"0",t.scrollbarV.firstChild.style.height=o-t.scroller.clientHeight+t.scrollbarV.clientHeight+"px"):t.scrollbarV.style.display="",r?(t.scrollbarH.style.display="block",t.scrollbarH.style.right=s?lo(t.measure)+"px":"0",t.scrollbarH.firstChild.style.width=t.scroller.scrollWidth-t.scroller.clientWidth+t.scrollbarH.clientWidth+"px"):t.scrollbarH.style.display="",r&&s?(t.scrollbarFiller.style.display="block",t.scrollbarFiller.style.height=t.scrollbarFiller.style.width=lo(t.measure)+"px"):t.scrollbarFiller.style.display="",r&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(t.gutterFiller.style.display="block",t.gutterFiller.style.height=lo(t.measure)+"px",t.gutterFiller.style.width=t.gutters.offsetWidth+"px"):t.gutterFiller.style.display="",Ao&&0===lo(t.measure)&&(t.scrollbarV.style.minWidth=t.scrollbarH.style.minHeight=Lo?"18px":"12px")}function p(e,t,i){var n=e.scroller.scrollTop,o=e.wrapper.clientHeight;"number"==typeof i?n=i:i&&(n=i.top,o=i.bottom-i.top),n=Math.floor(n-P(e));var r=Math.ceil(n+o);return{from:gn(t,n),to:gn(t,r)}}function m(e){var t=e.display;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=y(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,o=i+"px",r=t.lineDiv.firstChild;r;r=r.nextSibling)if(r.alignable)for(var s=0,a=r.alignable;s<a.length;++s)a[s].style.left=o;e.options.fixedGutter&&(t.gutters.style.left=i+n+"px")}}function g(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=v(e.options,t.first+t.size-1),n=e.display;if(i.length!=n.lineNumChars){var o=n.measure.appendChild(io("div",[io("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),r=o.firstChild.offsetWidth,s=o.offsetWidth-r;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(r,n.lineGutter.offsetWidth-s),n.lineNumWidth=n.lineNumInnerWidth+s,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",!0}return!1}function v(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function y(e){return so(e.scroller).left-so(e.sizer).left}function b(e,t,i){for(var n,o=e.display.showingFrom,r=e.display.showingTo,s=p(e.display,e.doc,i);w(e,t,s)&&(n=!0,D(e),f(e),i&&(i=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,"number"==typeof i?i:i.top)),s=p(e.display,e.doc,i),!(s.from>=e.display.showingFrom&&s.to<=e.display.showingTo));)t=[];return n&&(jn(e,"update",e),(e.display.showingFrom!=o||e.display.showingTo!=r)&&jn(e,"viewportChange",e,e.display.showingFrom,e.display.showingTo)),n}function w(e,t,i){var n=e.display,o=e.doc;if(!n.wrapper.clientWidth)return n.showingFrom=n.showingTo=o.first,n.viewOffset=0,void 0;if(!(0==t.length&&i.from>n.showingFrom&&i.to<n.showingTo)){g(e)&&(t=[{from:o.first,to:o.first+o.size}]);var r=n.sizer.style.marginLeft=n.gutters.offsetWidth+"px";n.scrollbarH.style.left=e.options.fixedGutter?r:"0";var s=1/0;if(e.options.lineNumbers)for(var a=0;a<t.length;++a)if(t[a].diff){s=t[a].from;break}var l=o.first+o.size,c=Math.max(i.from-e.options.viewportMargin,o.first),d=Math.min(l,i.to+e.options.viewportMargin);if(n.showingFrom<c&&c-n.showingFrom<20&&(c=Math.max(o.first,n.showingFrom)),n.showingTo>d&&n.showingTo-d<20&&(d=Math.min(l,n.showingTo)),Vo)for(c=mn(Hi(o,un(o,c)));l>d&&Ri(o,un(o,d));)++d;var u=[{from:Math.max(n.showingFrom,o.first),to:Math.min(n.showingTo,l)}];if(u=u[0].from>=u[0].to?[]:x(u,t),Vo)for(var a=0;a<u.length;++a)for(var h,f=u[a];h=Oi(un(o,f.to-1));){var p=h.find().from.line;if(!(p>f.from)){u.splice(a--,1);break}f.to=p}for(var m=0,a=0;a<u.length;++a){var f=u[a];f.from<c&&(f.from=c),f.to>d&&(f.to=d),f.from>=f.to?u.splice(a--,1):m+=f.to-f.from}if(m==d-c&&c==n.showingFrom&&d==n.showingTo)return _(e),void 0;u.sort(function(e,t){return e.from-t.from});try{var v=document.activeElement}catch(y){}.7*(d-c)>m&&(n.lineDiv.style.display="none"),k(e,c,d,u,s),n.lineDiv.style.display="",v&&document.activeElement!=v&&v.offsetHeight&&v.focus();var b=c!=n.showingFrom||d!=n.showingTo||n.lastSizeC!=n.wrapper.clientHeight;b&&(n.lastSizeC=n.wrapper.clientHeight,M(e,400)),n.showingFrom=c,n.showingTo=d;for(var w,C=n.lineDiv.offsetTop,T=n.lineDiv.firstChild;T;T=T.nextSibling)if(T.lineObj){if(To){var S=T.offsetTop+T.offsetHeight;w=S-C,C=S}else{var D=so(T);w=D.bottom-D.top}var N=T.lineObj.height-w;if(2>w&&(w=et(n)),N>.001||-.001>N){pn(T.lineObj,w);var E=T.lineObj.widgets;if(E)for(var a=0;a<E.length;++a)E[a].height=E[a].node.offsetHeight}}return _(e),!0}}function _(e){var t=e.display.viewOffset=vn(e,un(e.doc,e.display.showingFrom));e.display.mover.style.top=t+"px"}function x(e,t){for(var i=0,n=t.length||0;n>i;++i){for(var o=t[i],r=[],s=o.diff||0,a=0,l=e.length;l>a;++a){var c=e[a];o.to<=c.from&&o.diff?r.push({from:c.from+s,to:c.to+s}):o.to<=c.from||o.from>=c.to?r.push(c):(o.from>c.from&&r.push({from:c.from,to:o.from}),o.to<c.to&&r.push({from:o.to+s,to:c.to+s}))}e=r}return e}function C(e){for(var t=e.display,i={},n={},o=t.gutters.firstChild,r=0;o;o=o.nextSibling,++r)i[e.options.gutters[r]]=o.offsetLeft,n[e.options.gutters[r]]=o.offsetWidth;return{fixedPos:y(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function k(e,t,i,n,o){function r(t){var i=t.nextSibling;return Do&&Ro&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),i}var s=C(e),a=e.display,l=e.options.lineNumbers;n.length||Do&&e.display.currentWheelTarget||no(a.lineDiv);var c=a.lineDiv,d=c.firstChild,u=n.shift(),h=t;for(e.doc.iter(t,i,function(t){if(u&&u.to==h&&(u=n.shift()),Ri(e.doc,t)){if(0!=t.height&&pn(t,0),t.widgets&&d.previousSibling)for(var i=0;i<t.widgets.length;++i){var a=t.widgets[i];if(a.showIfHidden){var f=d.previousSibling;if(/pre/i.test(f.nodeName)){var p=io("div",null,null,"position: relative");f.parentNode.replaceChild(p,f),p.appendChild(f),f=p}var m=f.appendChild(io("div",[a.node],"CodeMirror-linewidget"));a.handleMouseEvents||(m.ignoreEvents=!0),S(a,m,f,s)}}}else if(u&&u.from<=h&&u.to>h){for(;d.lineObj!=t;)d=r(d);l&&h>=o&&d.lineNumber&&ro(d.lineNumber,v(e.options,h)),d=d.nextSibling}else{if(t.widgets)for(var g,y=0,b=d;b&&20>y;++y,b=b.nextSibling)if(b.lineObj==t&&/div/i.test(b.nodeName)){g=b;break}var w=T(e,t,h,s,g);if(w!=g)c.insertBefore(w,d);else{for(;d!=g;)d=r(d);d=d.nextSibling}w.lineObj=t}++h});d;)d=r(d)}function T(e,t,i,n,o){var r,s=Ji(e,t),a=t.gutterMarkers,l=e.display;if(!(e.options.lineNumbers||a||t.bgClass||t.wrapClass||t.widgets))return s;if(o){o.alignable=null;for(var c,d=!0,u=0,h=null,f=o.firstChild;f;f=c)if(c=f.nextSibling,/\bCodeMirror-linewidget\b/.test(f.className)){for(var p=0,m=!0;p<t.widgets.length;++p){var g=t.widgets[p];if(g.above||(h=f,m=!1),g.node==f.firstChild){S(g,f,o,n),++u;break}}if(p==t.widgets.length){d=!1;break}}else o.removeChild(f);o.insertBefore(s,h),d&&u==t.widgets.length&&(r=o,o.className=t.wrapClass||"")}if(r||(r=io("div",null,t.wrapClass,"position: relative"),r.appendChild(s)),t.bgClass&&r.insertBefore(io("div",null,t.bgClass+" CodeMirror-linebackground"),r.firstChild),e.options.lineNumbers||a){var y=r.insertBefore(io("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"),r.firstChild);if(e.options.fixedGutter&&(r.alignable||(r.alignable=[])).push(y),!e.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(r.lineNumber=y.appendChild(io("div",v(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.lineNumInnerWidth+"px"))),a)for(var b=0;b<e.options.gutters.length;++b){var w=e.options.gutters[b],_=a.hasOwnProperty(w)&&a[w];_&&y.appendChild(io("div",[_],"CodeMirror-gutter-elt","left: "+n.gutterLeft[w]+"px; width: "+n.gutterWidth[w]+"px"))}}if(To&&(r.style.zIndex=2),t.widgets&&r!=o)for(var p=0,x=t.widgets;p<x.length;++p){var g=x[p],C=io("div",[g.node],"CodeMirror-linewidget");g.handleMouseEvents||(C.ignoreEvents=!0),S(g,C,r,n),g.above?r.insertBefore(C,e.options.lineNumbers&&0!=t.height?y:s):r.appendChild(C),jn(g,"redraw")}return r}function S(e,t,i,n){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var o=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(o-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=o+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function D(e){var t=e.display,i=Ut(e.doc.sel.from,e.doc.sel.to);if(i||e.options.showCursorWhenSelecting?N(e):t.cursor.style.display=t.otherCursor.style.display="none",i?t.selectionDiv.style.display="none":E(e),e.options.moveInputWithCursor){var n=K(e,e.doc.sel.head,"div"),o=so(t.wrapper),r=so(t.lineDiv);t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+r.top-o.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+r.left-o.left))+"px"}}function N(e){var t=e.display,i=K(e,e.doc.sel.head,"div");t.cursor.style.left=i.left+"px",t.cursor.style.top=i.top+"px",t.cursor.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",t.cursor.style.display="",i.other?(t.otherCursor.style.display="",t.otherCursor.style.left=i.other.left+"px",t.otherCursor.style.top=i.other.top+"px",t.otherCursor.style.height=.85*(i.other.bottom-i.other.top)+"px"):t.otherCursor.style.display="none"}function E(e){function t(e,t,i,n){0>t&&(t=0),s.appendChild(io("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==i?a-e:i)+"px; height: "+(n-t)+"px"))}function i(i,n,r){function s(t,n){return G(e,Wt(i,t),"div",u,n)}var c,d,u=un(o,i),h=u.text.length;return uo(yn(u),n||0,null==r?h:r,function(e,i,o){var u,f,p,m=s(e,"left");if(e==i)u=m,f=p=m.left;else{if(u=s(i-1,"right"),"rtl"==o){var g=m;m=u,u=g}f=m.left,p=u.right}null==n&&0==e&&(f=l),u.top-m.top>3&&(t(f,m.top,null,m.bottom),f=l,m.bottom<u.top&&t(f,m.bottom,null,u.top)),null==r&&i==h&&(p=a),(!c||m.top<c.top||m.top==c.top&&m.left<c.left)&&(c=m),(!d||u.bottom>d.bottom||u.bottom==d.bottom&&u.right>d.right)&&(d=u),l+1>f&&(f=l),t(f,u.top,p-f,u.bottom)}),{start:c,end:d}}var n=e.display,o=e.doc,r=e.doc.sel,s=document.createDocumentFragment(),a=n.lineSpace.offsetWidth,l=H(e.display);if(r.from.line==r.to.line)i(r.from.line,r.from.ch,r.to.ch);else{var c=un(o,r.from.line),d=un(o,r.to.line),u=Hi(o,c)==Hi(o,d),h=i(r.from.line,r.from.ch,u?c.text.length:null).end,f=i(r.to.line,u?0:null,r.to.ch).start;u&&(h.top<f.top-2?(t(h.right,h.top,null,h.bottom),t(l,f.top,f.left,f.bottom)):t(h.right,h.top,f.left-h.right,h.bottom)),h.bottom<f.top&&t(l,h.bottom,null,f.top)}oo(n.selectionDiv,s),n.selectionDiv.style.display=""}function $(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",t.blinker=setInterval(function(){t.cursor.style.visibility=t.otherCursor.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate)}}function M(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.showingTo&&e.state.highlight.set(t,Jn(I,e))}function I(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.showingTo)){var i,n=+new Date+e.options.workTime,o=mi(t.mode,L(e,t.frontier)),r=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.showingTo+500),function(s){if(t.frontier>=e.display.showingFrom){var a=s.styles;s.styles=Gi(e,s,o);for(var l=!a||a.length!=s.styles.length,c=0;!l&&c<a.length;++c)l=a[c]!=s.styles[c];l&&(i&&i.end==t.frontier?i.end++:r.push(i={start:t.frontier,end:t.frontier+1})),s.stateAfter=mi(t.mode,o)}else Qi(e,s,o),s.stateAfter=0==t.frontier%5?mi(t.mode,o):null;return++t.frontier,+new Date>n?(M(e,e.options.workDelay),!0):void 0}),r.length&&ot(e,function(){for(var e=0;e<r.length;++e)at(this,r[e].start,r[e].end)})()}}function A(e,t,i){for(var n,o,r=e.doc,s=t,a=t-100;s>a;--s){if(s<=r.first)return r.first;var l=un(r,s-1);if(l.stateAfter&&(!i||s<=r.frontier))return s;var c=qn(l.text,null,e.options.tabSize);
(null==o||n>c)&&(o=s-1,n=c)}return o}function L(e,t,i){var n=e.doc,o=e.display;if(!n.mode.startState)return!0;var r=A(e,t,i),s=r>n.first&&un(n,r-1).stateAfter;return s=s?mi(n.mode,s):gi(n.mode),n.iter(r,t,function(i){Qi(e,i,s);var a=r==t-1||0==r%5||r>=o.showingFrom&&r<o.showingTo;i.stateAfter=a?mi(n.mode,s):null,++r}),s}function P(e){return e.lineSpace.offsetTop}function O(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function H(e){var t=oo(e.measure,io("pre",null,null,"text-align: left")).appendChild(io("span","x"));return t.offsetLeft}function R(e,t,i,n,o){var r=-1;n=n||z(e,t);for(var s=i;;s+=r){var a=n[s];if(a)break;0>r&&0==s&&(r=1)}var l=(i>s||"right"==o)&&null!=a.topRight;return{left:i>s?a.right:a.left,right:s>i?a.left:a.right,top:l?a.topRight:a.top,bottom:l?a.bottomRight:a.bottom}}function F(e,t){for(var i=e.display.measureLineCache,n=0;n<i.length;++n){var o=i[n];if(o.text==t.text&&o.markedSpans==t.markedSpans&&e.display.scroller.clientWidth==o.width&&o.classes==t.textClass+"|"+t.bgClass+"|"+t.wrapClass)return o}}function j(e,t){var i=F(e,t);i&&(i.text=i.measure=i.markedSpans=null)}function z(e,t){var i=F(e,t);if(i)return i.measure;var n=B(e,t),o=e.display.measureLineCache,r={text:t.text,width:e.display.scroller.clientWidth,markedSpans:t.markedSpans,measure:n,classes:t.textClass+"|"+t.bgClass+"|"+t.wrapClass};return 16==o.length?o[++e.display.measureLineCachePos%16]=r:o.push(r),n}function B(e,t){function i(e,t){t>g&&(t=g),0>e&&(e=0);for(var i=0;i<p.length;i+=2){var n=p[i],o=p[i+1];if(!(n>t||e>o)&&(e>=n&&o>=t||n>=e&&t>=o||Math.min(t,o)-Math.max(e,n)>=t-e>>1))return p[i]=Math.min(e,n),p[i+1]=Math.max(t,o),i}return p.push(e,t),i}var n=e.display,o=Zn(t.text.length),r=Ji(e,t,o);if(ko&&!To&&!e.options.lineWrapping&&r.childNodes.length>100){for(var s=document.createDocumentFragment(),a=10,l=r.childNodes.length,c=0,d=Math.ceil(l/a);d>c;++c){for(var u=io("div",null,null,"display: inline-block"),h=0;a>h&&l;++h)u.appendChild(r.firstChild),--l;s.appendChild(u)}r.appendChild(s)}oo(n.measure,r);var f=so(n.lineDiv),p=[],m=Zn(t.text.length),g=r.offsetHeight;So&&n.measure.first!=r&&oo(n.measure,r);for(var v,c=0;c<o.length;++c)if(v=o[c]){var y,b=v;if(/\bCodeMirror-widget\b/.test(v.className)&&v.getClientRects){1==v.firstChild.nodeType&&(b=v.firstChild);var w=b.getClientRects(),_=w[0],x=w[w.length-1];if(w.length>1){var C=i(_.top-f.top,_.bottom-f.top),k=i(x.top-f.top,x.bottom-f.top);m[c]={left:_.left-f.left,right:x.right-f.left,top:C,topRight:k};continue}}y=so(b);var T=i(y.top-f.top,y.bottom-f.top),S=y.right;v.measureRight&&(S=so(v.measureRight).left),m[c]={left:y.left-f.left,right:S-f.left,top:T}}for(var v,c=0;c<m.length;++c)if(v=m[c]){var D=v.top,N=v.topRight;v.top=p[D],v.bottom=p[D+1],null!=N&&(v.topRight=p[N],v.bottomRight=p[N+1])}return m}function W(e,t){var i=!1;if(t.markedSpans)for(var n=0;n<t.markedSpans;++n){var o=t.markedSpans[n];!o.collapsed||null!=o.to&&o.to!=t.text.length||(i=!0)}var r=!i&&F(e,t);if(r)return R(e,t,t.text.length,r.measure,"right").right;var s=Ji(e,t),a=s.appendChild(co(e.display.measure));return oo(e.display.measure,s),so(a).right-so(e.display.lineDiv).left}function U(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function q(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Y(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function V(e,t,i,n){if(t.widgets)for(var o=0;o<t.widgets.length;++o)if(t.widgets[o].above){var r=Wi(t.widgets[o]);i.top+=r,i.bottom+=r}if("line"==n)return i;n||(n="local");var s=vn(e,t);if("local"==n?s+=P(e.display):s-=e.display.viewOffset,"page"==n||"window"==n){var a=so(e.display.lineSpace);s+=a.top+("window"==n?0:Y());var l=a.left+("window"==n?0:q());i.left+=l,i.right+=l}return i.top+=s,i.bottom+=s,i}function X(e,t,i){if("div"==i)return t;var n=t.left,o=t.top;if("page"==i)n-=q(),o-=Y();else if("local"==i||!i){var r=so(e.display.sizer);n+=r.left,o+=r.top}var s=so(e.display.lineSpace);return{left:n-s.left,top:o-s.top}}function G(e,t,i,n,o){return n||(n=un(e.doc,t.line)),V(e,n,R(e,n,t.ch,null,o),i)}function K(e,t,i,n,o){function r(t,r){var s=R(e,n,t,o,r?"right":"left");return r?s.left=s.right:s.right=s.left,V(e,n,s,i)}function s(e,t){var i=a[t],n=i.level%2;return e==ho(i)&&t&&i.level<a[t-1].level?(i=a[--t],e=fo(i)-(i.level%2?0:1),n=!0):e==fo(i)&&t<a.length-1&&i.level<a[t+1].level&&(i=a[++t],e=ho(i)-i.level%2,n=!1),n&&e==i.to&&e>i.from?r(e-1):r(e,n)}n=n||un(e.doc,t.line),o||(o=z(e,n));var a=yn(n),l=t.ch;if(!a)return r(l);var c=bo(a,l),d=s(l,c);return null!=Ir&&(d.other=s(l,Ir)),d}function Q(e,t,i,n){var o=new Wt(e,t);return o.xRel=n,i&&(o.outside=!0),o}function Z(e,t,i){var n=e.doc;if(i+=e.display.viewOffset,0>i)return Q(n.first,0,!0,-1);var o=gn(n,i),r=n.first+n.size-1;if(o>r)return Q(n.first+n.size-1,un(n,r).text.length,!0,1);for(0>t&&(t=0);;){var s=un(n,o),a=J(e,s,o,t,i),l=Oi(s),c=l&&l.find();if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;o=c.to.line}}function J(e,t,i,n,o){function r(n){var o=K(e,Wt(i,n),"line",t,c);return a=!0,s>o.bottom?o.left-l:s<o.top?o.left+l:(a=!1,o.left)}var s=o-vn(e,t),a=!1,l=2*e.display.wrapper.clientWidth,c=z(e,t),d=yn(t),u=t.text.length,h=po(t),f=mo(t),p=r(h),m=a,g=r(f),v=a;if(n>g)return Q(i,f,v,1);for(;;){if(d?f==h||f==_o(t,h,1):1>=f-h){for(var y=p>n||g-n>=n-p?h:f,b=n-(y==h?p:g);kr.test(t.text.charAt(y));)++y;var w=Q(i,y,y==h?m:v,0>b?-1:b?1:0);return w}var _=Math.ceil(u/2),x=h+_;if(d){x=h;for(var C=0;_>C;++C)x=_o(t,x,1)}var k=r(x);k>n?(f=x,g=k,(v=a)&&(g+=1e3),u=_):(h=x,p=k,m=a,u-=_)}}function et(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==zo){zo=io("pre");for(var t=0;49>t;++t)zo.appendChild(document.createTextNode("x")),zo.appendChild(io("br"));zo.appendChild(document.createTextNode("x"))}oo(e.measure,zo);var i=zo.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),no(e.measure),i||1}function tt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=io("span","x"),i=io("pre",[t]);oo(e.measure,i);var n=t.offsetWidth;return n>2&&(e.cachedCharWidth=n),n||10}function it(e){e.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Xo},br++||(yr=[])}function nt(e){var t=e.curOp,i=e.doc,n=e.display;if(e.curOp=null,t.updateMaxLine&&u(e),n.maxLineChanged&&!e.options.lineWrapping&&n.maxLine){var o=W(e,n.maxLine);n.sizer.style.minWidth=Math.max(0,o+3+wr)+"px",n.maxLineChanged=!1;var r=Math.max(0,n.sizer.offsetLeft+n.sizer.offsetWidth-n.scroller.clientWidth);r<i.scrollLeft&&!t.updateScrollPos&&xt(e,Math.min(n.scroller.scrollLeft,r),!0)}var s,a;if(t.updateScrollPos)s=t.updateScrollPos;else if(t.selectionChanged&&n.scroller.clientHeight){var l=K(e,i.sel.head);s=ri(e,l.left,l.top,l.left,l.bottom)}(t.changes.length||s&&null!=s.scrollTop)&&(a=b(e,t.changes,s&&s.scrollTop),e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop)),!a&&t.selectionChanged&&D(e),t.updateScrollPos?(n.scroller.scrollTop=n.scrollbarV.scrollTop=i.scrollTop=s.scrollTop,n.scroller.scrollLeft=n.scrollbarH.scrollLeft=i.scrollLeft=s.scrollLeft,m(e),t.scrollToPos&&ni(e,Xt(e.doc,t.scrollToPos),t.scrollToPosMargin)):s&&ii(e),t.selectionChanged&&$(e),e.state.focused&&t.updateInput&&ut(e,t.userSelChange);var c=t.maybeHiddenMarkers,d=t.maybeUnhiddenMarkers;if(c)for(var h=0;h<c.length;++h)c[h].lines.length||Fn(c[h],"hide");if(d)for(var h=0;h<d.length;++h)d[h].lines.length&&Fn(d[h],"unhide");var f;if(--br||(f=yr,yr=null),t.textChanged&&Fn(e,"change",e,t.textChanged),t.cursorActivity&&Fn(e,"cursorActivity",e),f)for(var h=0;h<f.length;++h)f[h]()}function ot(e,t){return function(){var i=e||this,n=!i.curOp;n&&it(i);try{var o=t.apply(i,arguments)}finally{n&&nt(i)}return o}}function rt(e){return function(){var t,i=this.cm&&!this.cm.curOp;i&&it(this.cm);try{t=e.apply(this,arguments)}finally{i&&nt(this.cm)}return t}}function st(e,t){var i,n=!e.curOp;n&&it(e);try{i=t()}finally{n&&nt(e)}return i}function at(e,t,i,n){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),e.curOp.changes.push({from:t,to:i,diff:n})}function lt(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){dt(e),e.state.focused&&lt(e)})}function ct(e){function t(){var n=dt(e);n||i?(e.display.pollingFast=!1,lt(e)):(i=!0,e.display.poll.set(60,t))}var i=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function dt(e){var t=e.display.input,i=e.display.prevInput,n=e.doc,o=n.sel;if(!e.state.focused||Er(t)||ft(e)||e.state.disableInput)return!1;var r=t.value;if(r==i&&Ut(o.from,o.to))return!1;if(ko&&!So&&e.display.inputHasSelection===r)return ut(e,!0),!1;var s=!e.curOp;s&&it(e),o.shift=!1;for(var a=0,l=Math.min(i.length,r.length);l>a&&i.charCodeAt(a)==r.charCodeAt(a);)++a;var c=o.from,d=o.to;a<i.length?c=Wt(c.line,c.ch-(i.length-a)):e.state.overwrite&&Ut(c,d)&&!e.state.pasteIncoming&&(d=Wt(d.line,Math.min(un(n,d.line).text.length,d.ch+(r.length-a))));var u=e.curOp.updateInput,h={from:c,to:d,text:Nr(r.slice(a)),origin:e.state.pasteIncoming?"paste":"+input"};return Ot(e.doc,h,"end"),e.curOp.updateInput=u,jn(e,"inputRead",e,h),r.length>1e3||r.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=r,s&&nt(e),e.state.pasteIncoming=!1,!0}function ut(e,t){var i,n,o=e.doc;if(Ut(o.sel.from,o.sel.to))t&&(e.display.prevInput=e.display.input.value="",ko&&!So&&(e.display.inputHasSelection=null));else{e.display.prevInput="",i=$r&&(o.sel.to.line-o.sel.from.line>100||(n=e.getSelection()).length>1e3);var r=i?"-":n||e.getSelection();e.display.input.value=r,e.state.focused&&Xn(e.display.input),ko&&!So&&(e.display.inputHasSelection=r)}e.display.inaccurateSelection=i}function ht(e){"nocursor"==e.options.readOnly||Ho&&document.activeElement==e.display.input||e.display.input.focus()}function ft(e){return e.options.readOnly||e.doc.cantEdit}function pt(e){function t(){e.state.focused&&setTimeout(Jn(ht,e),0)}function i(){null==a&&(a=setTimeout(function(){a=null,s.cachedCharWidth=s.cachedTextHeight=Sr=null,U(e),st(e,Jn(at,e))},100))}function n(){for(var e=s.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(n,5e3):Rn(window,"resize",i)}function o(t){zn(e,t)||e.options.onDragEvent&&e.options.onDragEvent(e,$n(t))||Ln(t)}function r(){s.inaccurateSelection&&(s.prevInput="",s.inaccurateSelection=!1,s.input.value=e.getSelection(),Xn(s.input))}var s=e.display;Hn(s.scroller,"mousedown",ot(e,vt)),ko?Hn(s.scroller,"dblclick",ot(e,function(t){if(!zn(e,t)){var i=gt(e,t);if(i&&!yt(e,t)&&!mt(e.display,t)){Mn(t);var n=hi(un(e.doc,i.line).text,i);Qt(e.doc,n.from,n.to)}}})):Hn(s.scroller,"dblclick",function(t){zn(e,t)||Mn(t)}),Hn(s.lineSpace,"selectstart",function(e){mt(s,e)||Mn(e)}),qo||Hn(s.scroller,"contextmenu",function(t){It(e,t)}),Hn(s.scroller,"scroll",function(){s.scroller.clientHeight&&(_t(e,s.scroller.scrollTop),xt(e,s.scroller.scrollLeft,!0),Fn(e,"scroll",e))}),Hn(s.scrollbarV,"scroll",function(){s.scroller.clientHeight&&_t(e,s.scrollbarV.scrollTop)}),Hn(s.scrollbarH,"scroll",function(){s.scroller.clientHeight&&xt(e,s.scrollbarH.scrollLeft)}),Hn(s.scroller,"mousewheel",function(t){Ct(e,t)}),Hn(s.scroller,"DOMMouseScroll",function(t){Ct(e,t)}),Hn(s.scrollbarH,"mousedown",t),Hn(s.scrollbarV,"mousedown",t),Hn(s.wrapper,"scroll",function(){s.wrapper.scrollTop=s.wrapper.scrollLeft=0});var a;Hn(window,"resize",i),setTimeout(n,5e3),Hn(s.input,"keyup",ot(e,function(t){zn(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,$n(t))||16==t.keyCode&&(e.doc.sel.shift=!1)})),Hn(s.input,"input",Jn(ct,e)),Hn(s.input,"keydown",ot(e,Nt)),Hn(s.input,"keypress",ot(e,Et)),Hn(s.input,"focus",Jn($t,e)),Hn(s.input,"blur",Jn(Mt,e)),e.options.dragDrop&&(Hn(s.scroller,"dragstart",function(t){wt(e,t)}),Hn(s.scroller,"dragenter",o),Hn(s.scroller,"dragover",o),Hn(s.scroller,"drop",ot(e,bt))),Hn(s.scroller,"paste",function(t){mt(s,t)||(ht(e),ct(e))}),Hn(s.input,"paste",function(){e.state.pasteIncoming=!0,ct(e)}),Hn(s.input,"cut",r),Hn(s.input,"copy",r),Io&&Hn(s.sizer,"mouseup",function(){document.activeElement==s.input&&s.input.blur(),ht(e)})}function mt(e,t){for(var i=Pn(t);i!=e.wrapper;i=i.parentNode)if(!i||i.ignoreEvents||i.parentNode==e.sizer&&i!=e.mover)return!0}function gt(e,t,i){var n=e.display;if(!i){var o=Pn(t);if(o==n.scrollbarH||o==n.scrollbarH.firstChild||o==n.scrollbarV||o==n.scrollbarV.firstChild||o==n.scrollbarFiller||o==n.gutterFiller)return null}var r,s,a=so(n.lineSpace);try{r=t.clientX,s=t.clientY}catch(t){return null}return Z(e,r-a.left,s-a.top)}function vt(e){function t(e){if(!Ut(v,e)){if(v=e,"single"==d)return Qt(o.doc,Xt(s,l),e),void 0;if(m=Xt(s,m),g=Xt(s,g),"double"==d){var t=hi(un(s,e.line).text,e);qt(e,m)?Qt(o.doc,t.from,g):Qt(o.doc,m,t.to)}else"triple"==d&&(qt(e,m)?Qt(o.doc,g,Xt(s,Wt(e.line,0))):Qt(o.doc,m,Xt(s,Wt(e.line+1,0))))}}function i(e){var n=++b,a=gt(o,e,!0);if(a)if(Ut(a,h)){var l=e.clientY<y.top?-20:e.clientY>y.bottom?20:0;l&&setTimeout(ot(o,function(){b==n&&(r.scroller.scrollTop+=l,i(e))}),50)}else{o.state.focused||$t(o),h=a,t(a);var c=p(r,s);(a.line>=c.to||a.line<c.from)&&setTimeout(ot(o,function(){b==n&&i(e)}),150)}}function n(e){b=1/0,Mn(e),ht(o),Rn(document,"mousemove",w),Rn(document,"mouseup",_)}if(!zn(this,e)){var o=this,r=o.display,s=o.doc,a=s.sel;if(a.shift=e.shiftKey,mt(r,e))return Do||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100)),void 0;if(!yt(o,e)){var l=gt(o,e);switch(On(e)){case 3:return qo&&It.call(o,o,e),void 0;case 2:return l&&Qt(o.doc,l),setTimeout(Jn(ht,o),20),Mn(e),void 0}if(!l)return Pn(e)==r.scroller&&Mn(e),void 0;o.state.focused||$t(o);var c=+new Date,d="single";if(Wo&&Wo.time>c-400&&Ut(Wo.pos,l))d="triple",Mn(e),setTimeout(Jn(ht,o),20),fi(o,l.line);else if(Bo&&Bo.time>c-400&&Ut(Bo.pos,l)){d="double",Wo={time:c,pos:l},Mn(e);var u=hi(un(s,l.line).text,l);Qt(o.doc,u.from,u.to)}else Bo={time:c,pos:l};var h=l;if(o.options.dragDrop&&Tr&&!ft(o)&&!Ut(a.from,a.to)&&!qt(l,a.from)&&!qt(a.to,l)&&"single"==d){var f=ot(o,function(t){Do&&(r.scroller.draggable=!1),o.state.draggingText=!1,Rn(document,"mouseup",f),Rn(r.scroller,"drop",f),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(Mn(t),Qt(o.doc,l),ht(o))});return Do&&(r.scroller.draggable=!0),o.state.draggingText=f,r.scroller.dragDrop&&r.scroller.dragDrop(),Hn(document,"mouseup",f),Hn(r.scroller,"drop",f),void 0}Mn(e),"single"==d&&Qt(o.doc,Xt(s,l));var m=a.from,g=a.to,v=l,y=so(r.wrapper),b=0,w=ot(o,function(e){ko||On(e)?i(e):n(e)}),_=ot(o,n);Hn(document,"mousemove",w),Hn(document,"mouseup",_)}}}function yt(e,t){var i=e.display;try{var n=t.clientX,o=t.clientY}catch(t){return!1}if(n>=Math.floor(so(i.gutters).right))return!1;if(Mn(t),!Wn(e,"gutterClick"))return!0;var r=so(i.lineDiv);if(o>r.bottom)return!0;o-=r.top-i.viewOffset;for(var s=0;s<e.options.gutters.length;++s){var a=i.gutters.childNodes[s];if(a&&so(a).right>=n){var l=gn(e.doc,o),c=e.options.gutters[s];jn(e,"gutterClick",e,l,c,t);break}}return!0}function bt(e){var t=this;if(!(zn(t,e)||mt(t.display,e)||t.options.onDragEvent&&t.options.onDragEvent(t,$n(e)))){Mn(e),ko&&(Go=+new Date);var i=gt(t,e,!0),n=e.dataTransfer.files;if(i&&!ft(t))if(n&&n.length&&window.FileReader&&window.File)for(var o=n.length,r=Array(o),s=0,a=function(e,n){var a=new FileReader;a.onload=function(){r[n]=a.result,++s==o&&(i=Xt(t.doc,i),Ot(t.doc,{from:i,to:i,text:Nr(r.join("\n")),origin:"paste"},"around"))},a.readAsText(e)},l=0;o>l;++l)a(n[l],l);else{if(t.state.draggingText&&!qt(i,t.doc.sel.from)&&!qt(t.doc.sel.to,i))return t.state.draggingText(e),setTimeout(Jn(ht,t),20),void 0;try{var r=e.dataTransfer.getData("Text");if(r){var c=t.doc.sel.from,d=t.doc.sel.to;Jt(t.doc,i,i),t.state.draggingText&&Bt(t.doc,"",c,d,"paste"),t.replaceSelection(r,null,"paste"),ht(t),$t(t)}}catch(e){}}}}function wt(e,t){if(ko&&(!e.state.draggingText||+new Date-Go<100))return Ln(t),void 0;if(!zn(e,t)&&!mt(e.display,t)){var i=e.getSelection();if(t.dataTransfer.setData("Text",i),t.dataTransfer.setDragImage&&!Mo){var n=io("img",null,null,"position: fixed; left: 0; top: 0;");$o&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),$o&&n.parentNode.removeChild(n)}}}function _t(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,Co||b(e,[],t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Co&&b(e,[]),M(e,100))}function xt(e,t,i){(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,m(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function Ct(e,t){var i=t.wheelDeltaX,n=t.wheelDeltaY;null==i&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(i=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta);var o=e.display,r=o.scroller;if(i&&r.scrollWidth>r.clientWidth||n&&r.scrollHeight>r.clientHeight){if(n&&Ro&&Do)for(var s=t.target;s!=r;s=s.parentNode)if(s.lineObj){e.display.currentWheelTarget=s;break}if(i&&!Co&&!$o&&null!=Qo)return n&&_t(e,Math.max(0,Math.min(r.scrollTop+n*Qo,r.scrollHeight-r.clientHeight))),xt(e,Math.max(0,Math.min(r.scrollLeft+i*Qo,r.scrollWidth-r.clientWidth))),Mn(t),o.wheelStartX=null,void 0;if(n&&null!=Qo){var a=n*Qo,l=e.doc.scrollTop,c=l+o.wrapper.clientHeight;0>a?l=Math.max(0,l+a-50):c=Math.min(e.doc.height,c+a+50),b(e,[],{top:l,bottom:c})}20>Ko&&(null==o.wheelStartX?(o.wheelStartX=r.scrollLeft,o.wheelStartY=r.scrollTop,o.wheelDX=i,o.wheelDY=n,setTimeout(function(){if(null!=o.wheelStartX){var e=r.scrollLeft-o.wheelStartX,t=r.scrollTop-o.wheelStartY,i=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,i&&(Qo=(Qo*Ko+i)/(Ko+1),++Ko)}},200)):(o.wheelDX+=i,o.wheelDY+=n))}}function kt(e,t,i){if("string"==typeof t&&(t=cr[t],!t))return!1;e.display.pollingFast&&dt(e)&&(e.display.pollingFast=!1);var n=e.doc,o=n.sel.shift,r=!1;try{ft(e)&&(e.state.suppressEdits=!0),i&&(n.sel.shift=!1),r=t(e)!=_r}finally{n.sel.shift=o,e.state.suppressEdits=!1}return r}function Tt(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function St(e,t){var i=vi(e.options.keyMap),n=i.auto;clearTimeout(Zo),n&&!bi(t)&&(Zo=setTimeout(function(){vi(e.options.keyMap)==i&&(e.options.keyMap=n.call?n.call(null,e):n,s(e))},50));var o=wi(t,!0),r=!1;if(!o)return!1;var a=Tt(e);return r=t.shiftKey?yi("Shift-"+o,a,function(t){return kt(e,t,!0)})||yi(o,a,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?kt(e,t):void 0}):yi(o,a,function(t){return kt(e,t)}),r&&(Mn(t),$(e),So&&(t.oldKeyCode=t.keyCode,t.keyCode=0),jn(e,"keyHandled",e,o,t)),r}function Dt(e,t,i){var n=yi("'"+i+"'",Tt(e),function(t){return kt(e,t,!0)});return n&&(Mn(t),$(e),jn(e,"keyHandled",e,"'"+i+"'",t)),n}function Nt(e){var t=this;if(t.state.focused||$t(t),ko&&27==e.keyCode&&(e.returnValue=!1),!(zn(t,e)||t.options.onKeyEvent&&t.options.onKeyEvent(t,$n(e)))){var i=e.keyCode;t.doc.sel.shift=16==i||e.shiftKey;var n=St(t,e);$o&&(er=n?i:null,!n&&88==i&&!$r&&(Ro?e.metaKey:e.ctrlKey)&&t.replaceSelection(""))}}function Et(e){var t=this;if(!(zn(t,e)||t.options.onKeyEvent&&t.options.onKeyEvent(t,$n(e)))){var i=e.keyCode,n=e.charCode;if($o&&i==er)return er=null,Mn(e),void 0;if(!($o&&(!e.which||e.which<10)||Io)||!St(t,e)){var o=String.fromCharCode(null==n?i:n);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!ft(this)&&this.doc.mode.electricChars.indexOf(o)>-1&&setTimeout(ot(t,function(){li(t,t.doc.sel.to.line,"smart")}),75),Dt(t,e,o)||(ko&&!So&&(t.display.inputHasSelection=null),ct(t))}}}function $t(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(Fn(e,"focus",e),e.state.focused=!0,-1==e.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(e.display.wrapper.className+=" CodeMirror-focused"),ut(e,!0)),lt(e),$(e))}function Mt(e){e.state.focused&&(Fn(e,"blur",e),e.state.focused=!1,e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.doc.sel.shift=!1)},150)}function It(e,t){function i(){if(null!=o.input.selectionStart){var e=o.input.value=" "+(Ut(r.from,r.to)?"":o.input.value);o.prevInput=" ",o.input.selectionStart=1,o.input.selectionEnd=e.length}}function n(){if(o.inputDiv.style.position="relative",o.input.style.cssText=l,So&&(o.scrollbarV.scrollTop=o.scroller.scrollTop=a),lt(e),null!=o.input.selectionStart){(!ko||So)&&i(),clearTimeout(Jo);var t=0,n=function(){" "==o.prevInput&&0==o.input.selectionStart?ot(e,cr.selectAll)(e):t++<10?Jo=setTimeout(n,500):ut(e)};Jo=setTimeout(n,200)}}var o=e.display,r=e.doc.sel;if(!mt(o,t)){var s=gt(e,t),a=o.scroller.scrollTop;if(s&&!$o){(Ut(r.from,r.to)||qt(s,r.from)||!qt(s,r.to))&&ot(e,Jt)(e.doc,s,s);var l=o.input.style.cssText;if(o.inputDiv.style.position="absolute",o.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",ht(e),ut(e,!0),Ut(r.from,r.to)&&(o.input.value=o.prevInput=" "),ko&&!So&&i(),qo){Ln(t);var c=function(){Rn(window,"mouseup",c),setTimeout(n,20)};Hn(window,"mouseup",c)}else setTimeout(n,50)}}}function At(e,t,i){if(!qt(t.from,i))return Xt(e,i);var n=t.text.length-1-(t.to.line-t.from.line);if(i.line>t.to.line+n){var o=i.line-n,r=e.first+e.size-1;return o>r?Wt(r,un(e,r).text.length):Gt(i,un(e,o).text.length)}if(i.line==t.to.line+n)return Gt(i,Vn(t.text).length+(1==t.text.length?t.from.ch:0)+un(e,t.to.line).text.length-t.to.ch);var s=i.line-t.from.line;return Gt(i,t.text[s].length+(s?0:t.from.ch))}function Lt(e,t,i){if(i&&"object"==typeof i)return{anchor:At(e,t,i.anchor),head:At(e,t,i.head)};if("start"==i)return{anchor:t.from,head:t.from};var n=tr(t);if("around"==i)return{anchor:t.from,head:n};if("end"==i)return{anchor:n,head:n};var o=function(e){if(qt(e,t.from))return e;if(!qt(t.to,e))return n;var i=e.line+t.text.length-(t.to.line-t.from.line)-1,o=e.ch;return e.line==t.to.line&&(o+=n.ch-t.to.ch),Wt(i,o)};return{anchor:o(e.sel.anchor),head:o(e.sel.head)}}function Pt(e,t,i){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return i&&(n.update=function(t,i,n,o){t&&(this.from=Xt(e,t)),i&&(this.to=Xt(e,i)),n&&(this.text=n),void 0!==o&&(this.origin=o)}),Fn(e,"beforeChange",e,n),e.cm&&Fn(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Ot(e,t,i,n){if(e.cm){if(!e.cm.curOp)return ot(e.cm,Ot)(e,t,i,n);if(e.cm.state.suppressEdits)return}if(!(Wn(e,"beforeChange")||e.cm&&Wn(e.cm,"beforeChange"))||(t=Pt(e,t,!0))){var o=Yo&&!n&&Ai(e,t.from,t.to);if(o){for(var r=o.length-1;r>=1;--r)Ht(e,{from:o[r].from,to:o[r].to,text:[""]});o.length&&Ht(e,{from:o[0].from,to:o[0].to,text:t.text},i)}else Ht(e,t,i)}}function Ht(e,t,i){var n=Lt(e,t,i);xn(e,t,n,e.cm?e.cm.curOp.id:0/0),jt(e,t,n,Mi(e,t));var o=[];cn(e,function(e,i){i||-1!=Gn(o,e.history)||(Nn(e.history,t),o.push(e.history)),jt(e,t,null,Mi(e,t))})}function Rt(e,t){if(!e.cm||!e.cm.state.suppressEdits){var i=e.history,n=("undo"==t?i.done:i.undone).pop();if(n){var o={changes:[],anchorBefore:n.anchorAfter,headBefore:n.headAfter,anchorAfter:n.anchorBefore,headAfter:n.headBefore,generation:i.generation};("undo"==t?i.undone:i.done).push(o),i.generation=n.generation||++i.maxGeneration;for(var r=Wn(e,"beforeChange")||e.cm&&Wn(e.cm,"beforeChange"),s=n.changes.length-1;s>=0;--s){var a=n.changes[s];if(a.origin=t,r&&!Pt(e,a,!1))return("undo"==t?i.done:i.undone).length=0,void 0;o.changes.push(_n(e,a));var l=s?Lt(e,a,null):{anchor:n.anchorBefore,head:n.headBefore};jt(e,a,l,Ii(e,a));var c=[];cn(e,function(e,t){t||-1!=Gn(c,e.history)||(Nn(e.history,a),c.push(e.history)),jt(e,a,null,Ii(e,a))})}}}}function Ft(e,t){function i(e){return Wt(e.line+t,e.ch)}e.first+=t,e.cm&&at(e.cm,e.first,e.first,t),e.sel.head=i(e.sel.head),e.sel.anchor=i(e.sel.anchor),e.sel.from=i(e.sel.from),e.sel.to=i(e.sel.to)}function jt(e,t,i,n){if(e.cm&&!e.cm.curOp)return ot(e.cm,jt)(e,t,i,n);if(t.to.line<e.first)return Ft(e,t.text.length-1-(t.to.line-t.from.line)),void 0;if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var o=t.text.length-1-(e.first-t.from.line);Ft(e,o),t={from:Wt(e.first,0),to:Wt(t.to.line+o,t.to.ch),text:[Vn(t.text)],origin:t.origin}}var r=e.lastLine();t.to.line>r&&(t={from:t.from,to:Wt(r,un(e,r).text.length),text:[t.text[0]],origin:t.origin}),t.removed=hn(e,t.from,t.to),i||(i=Lt(e,t,null)),e.cm?zt(e.cm,t,n,i):sn(e,t,n,i)}}function zt(e,t,i,n){var r=e.doc,s=e.display,a=t.from,l=t.to,c=!1,u=a.line;e.options.lineWrapping||(u=mn(Hi(r,un(r,a.line))),r.iter(u,l.line+1,function(e){return e==s.maxLine?(c=!0,!0):void 0})),qt(r.sel.head,t.from)||qt(t.to,r.sel.head)||(e.curOp.cursorActivity=!0),sn(r,t,i,n,o(e)),e.options.lineWrapping||(r.iter(u,a.line+t.text.length,function(e){var t=d(r,e);t>s.maxLineLength&&(s.maxLine=e,s.maxLineLength=t,s.maxLineChanged=!0,c=!1)}),c&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,a.line),M(e,400);var h=t.text.length-(l.line-a.line)-1;if(at(e,a.line,l.line+1,h),Wn(e,"change")){var f={from:a,to:l,text:t.text,removed:t.removed,origin:t.origin};if(e.curOp.textChanged){for(var p=e.curOp.textChanged;p.next;p=p.next);p.next=f}else e.curOp.textChanged=f}}function Bt(e,t,i,n,o){if(n||(n=i),qt(n,i)){var r=n;n=i,i=r}"string"==typeof t&&(t=Nr(t)),Ot(e,{from:i,to:n,text:t,origin:o},null)}function Wt(e,t){return this instanceof Wt?(this.line=e,this.ch=t,void 0):new Wt(e,t)}function Ut(e,t){return e.line==t.line&&e.ch==t.ch}function qt(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Yt(e){return Wt(e.line,e.ch)}function Vt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Xt(e,t){if(t.line<e.first)return Wt(e.first,0);var i=e.first+e.size-1;return t.line>i?Wt(i,un(e,i).text.length):Gt(t,un(e,t.line).text.length)}function Gt(e,t){var i=e.ch;return null==i||i>t?Wt(e.line,t):0>i?Wt(e.line,0):e}function Kt(e,t){return t>=e.first&&t<e.first+e.size}function Qt(e,t,i,n){if(e.sel.shift||e.sel.extend){var o=e.sel.anchor;if(i){var r=qt(t,o);r!=qt(i,o)?(o=t,t=i):r!=qt(t,i)&&(t=i)}Jt(e,o,t,n)}else Jt(e,t,i||t,n);e.cm&&(e.cm.curOp.userSelChange=!0)}function Zt(e,t,i){var n={anchor:t,head:i};return Fn(e,"beforeSelectionChange",e,n),e.cm&&Fn(e.cm,"beforeSelectionChange",e.cm,n),n.anchor=Xt(e,n.anchor),n.head=Xt(e,n.head),n}function Jt(e,t,i,n,o){if(!o&&Wn(e,"beforeSelectionChange")||e.cm&&Wn(e.cm,"beforeSelectionChange")){var r=Zt(e,t,i);i=r.head,t=r.anchor}var s=e.sel;if(s.goalColumn=null,(o||!Ut(t,s.anchor))&&(t=ti(e,t,n,"push"!=o)),(o||!Ut(i,s.head))&&(i=ti(e,i,n,"push"!=o)),!Ut(s.anchor,t)||!Ut(s.head,i)){s.anchor=t,s.head=i;var a=qt(i,t);s.from=a?i:t,s.to=a?t:i,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=e.cm.curOp.cursorActivity=!0),jn(e,"cursorActivity",e)}}function ei(e){Jt(e.doc,e.doc.sel.from,e.doc.sel.to,null,"push")}function ti(e,t,i,n){var o=!1,r=t,s=i||1;e.cantEdit=!1;e:for(;;){var a=un(e,r.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],d=c.marker;if((null==c.from||(d.inclusiveLeft?c.from<=r.ch:c.from<r.ch))&&(null==c.to||(d.inclusiveRight?c.to>=r.ch:c.to>r.ch))){if(n&&(Fn(d,"beforeCursorEnter"),d.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!d.atomic)continue;var u=d.find()[0>s?"from":"to"];if(Ut(u,r)&&(u.ch+=s,u.ch<0?u=u.line>e.first?Xt(e,Wt(u.line-1)):null:u.ch>a.text.length&&(u=u.line<e.first+e.size-1?Wt(u.line+1,0):null),!u)){if(o)return n?(e.cantEdit=!0,Wt(e.first,0)):ti(e,t,i,!0);o=!0,u=t,s=-s}r=u;continue e}}return r}}function ii(e){var t=ni(e,e.doc.sel.head,e.options.cursorScrollMargin);if(e.state.focused){var i=e.display,n=so(i.sizer),o=null;if(t.top+n.top<0?o=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!Po){var r="none"==i.cursor.style.display;r&&(i.cursor.style.display="",i.cursor.style.left=t.left+"px",i.cursor.style.top=t.top-i.viewOffset+"px"),i.cursor.scrollIntoView(o),r&&(i.cursor.style.display="none")}}}function ni(e,t,i){for(null==i&&(i=0);;){var n=!1,o=K(e,t),r=ri(e,o.left,o.top-i,o.left,o.bottom+i),s=e.doc.scrollTop,a=e.doc.scrollLeft;if(null!=r.scrollTop&&(_t(e,r.scrollTop),Math.abs(e.doc.scrollTop-s)>1&&(n=!0)),null!=r.scrollLeft&&(xt(e,r.scrollLeft),Math.abs(e.doc.scrollLeft-a)>1&&(n=!0)),!n)return o}}function oi(e,t,i,n,o){var r=ri(e,t,i,n,o);null!=r.scrollTop&&_t(e,r.scrollTop),null!=r.scrollLeft&&xt(e,r.scrollLeft)}function ri(e,t,i,n,o){var r=e.display,s=et(e.display);0>i&&(i=0);var a=r.scroller.clientHeight-wr,l=r.scroller.scrollTop,c={},d=e.doc.height+O(r),u=s>i,h=o>d-s;if(l>i)c.scrollTop=u?0:i;else if(o>l+a){var f=Math.min(i,(h?d:o)-a);f!=l&&(c.scrollTop=f)}var p=r.scroller.clientWidth-wr,m=r.scroller.scrollLeft;t+=r.gutters.offsetWidth,n+=r.gutters.offsetWidth;var g=r.gutters.offsetWidth,v=g+10>t;return m+g>t||v?(v&&(t=0),c.scrollLeft=Math.max(0,t-10-g)):n>p+m-3&&(c.scrollLeft=n+10-p),c}function si(e,t,i){e.curOp.updateScrollPos={scrollLeft:null==t?e.doc.scrollLeft:t,scrollTop:null==i?e.doc.scrollTop:i}}function ai(e,t,i){var n=e.curOp.updateScrollPos||(e.curOp.updateScrollPos={scrollLeft:e.doc.scrollLeft,scrollTop:e.doc.scrollTop}),o=e.display.scroller;n.scrollTop=Math.max(0,Math.min(o.scrollHeight-o.clientHeight,n.scrollTop+i)),n.scrollLeft=Math.max(0,Math.min(o.scrollWidth-o.clientWidth,n.scrollLeft+t))}function li(e,t,i,n){var o=e.doc;if(null==i&&(i="add"),"smart"==i)if(e.doc.mode.indent)var r=L(e,t);else i="prev";var s,a=e.options.tabSize,l=un(o,t),c=qn(l.text,null,a),d=l.text.match(/^\s*/)[0];if("smart"==i&&(s=e.doc.mode.indent(r,l.text.slice(d.length),l.text),s==_r)){if(!n)return;i="prev"}"prev"==i?s=t>o.first?qn(un(o,t-1).text,null,a):0:"add"==i?s=c+e.options.indentUnit:"subtract"==i?s=c-e.options.indentUnit:"number"==typeof i&&(s=c+i),s=Math.max(0,s);var u="",h=0;if(e.options.indentWithTabs)for(var f=Math.floor(s/a);f;--f)h+=a,u+="	";s>h&&(u+=Yn(s-h)),u!=d&&Bt(e.doc,u,Wt(t,0),Wt(t,d.length),"+input"),l.stateAfter=null}function ci(e,t,i){var n=t,o=t,r=e.doc;return"number"==typeof t?o=un(r,Vt(r,t)):n=mn(t),null==n?null:i(o,n)?(at(e,n,n+1),o):null}function di(e,t,i,n,o){function r(){var t=a+i;return t<e.first||t>=e.first+e.size?u=!1:(a=t,d=un(e,t))}function s(e){var t=(o?_o:xo)(d,l,i,!0);if(null==t){if(e||!r())return u=!1;l=o?(0>i?mo:po)(d):0>i?d.text.length:0}else l=t;return!0}var a=t.line,l=t.ch,c=i,d=un(e,a),u=!0;if("char"==n)s();else if("column"==n)s(!0);else if("word"==n||"group"==n)for(var h=null,f="group"==n,p=!0;!(0>i)||s(!p);p=!1){var m=d.text.charAt(l)||"\n",g=eo(m)?"w":f?/\s/.test(m)?null:"p":null;if(h&&h!=g){0>i&&(i=1,s());break}if(g&&(h=g),i>0&&!s(!p))break}var v=ti(e,Wt(a,l),c,!0);return u||(v.hitSide=!0),v}function ui(e,t,i,n){var o,r=e.doc,s=t.left;if("page"==n){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);o=t.top+i*(a-(0>i?1.5:.5)*et(e.display))}else"line"==n&&(o=i>0?t.bottom+3:t.top-3);for(;;){var l=Z(e,s,o);if(!l.outside)break;if(0>i?0>=o:o>=r.height){l.hitSide=!0;break}o+=5*i}return l}function hi(e,t){var i=t.ch,n=t.ch;if(e){t.xRel<0||n==e.length?--i:++n;for(var o=e.charAt(i),r=eo(o)?eo:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!eo(e)};i>0&&r(e.charAt(i-1));)--i;for(;n<e.length&&r(e.charAt(n));)++n}return{from:Wt(t.line,i),to:Wt(t.line,n)}}function fi(e,t){Qt(e.doc,Wt(t,0),Xt(e.doc,Wt(t+1,0)))}function pi(t,i,n,o){e.defaults[t]=i,n&&(ir[t]=o?function(e,t,i){i!=or&&n(e,t,i)}:n)}function mi(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var n in t){var o=t[n];o instanceof Array&&(o=o.concat([])),i[n]=o}return i}function gi(e,t,i){return e.startState?e.startState(t,i):!0}function vi(e){return"string"==typeof e?dr[e]:e}function yi(e,t,i){function n(t){t=vi(t);var o=t[e];if(o===!1)return"stop";if(null!=o&&i(o))return!0;if(t.nofallthrough)return"stop";var r=t.fallthrough;if(null==r)return!1;if("[object Array]"!=Object.prototype.toString.call(r))return n(r);for(var s=0,a=r.length;a>s;++s){var l=n(r[s]);if(l)return l}return!1}for(var o=0;o<t.length;++o){var r=n(t[o]);if(r)return"stop"!=r}}function bi(e){var t=Mr[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function wi(e,t){if($o&&34==e.keyCode&&e["char"])return!1;var i=Mr[e.keyCode];return null==i||e.altGraphKey?!1:(e.altKey&&(i="Alt-"+i),(Uo?e.metaKey:e.ctrlKey)&&(i="Ctrl-"+i),(Uo?e.ctrlKey:e.metaKey)&&(i="Cmd-"+i),!t&&e.shiftKey&&(i="Shift-"+i),i)
}function _i(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0}function xi(e,t){this.lines=[],this.type=t,this.doc=e}function Ci(e,t,i,n,o){if(n&&n.shared)return Ti(e,t,i,n,o);if(e.cm&&!e.cm.curOp)return ot(e.cm,Ci)(e,t,i,n,o);var r=new xi(e,o);if("range"==o&&!qt(t,i))return r;n&&Qn(n,r),r.replacedWith&&(r.collapsed=!0,r.replacedWith=io("span",[r.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||(r.replacedWith.ignoreEvents=!0)),r.collapsed&&(Vo=!0),r.addToHistory&&xn(e,{from:t,to:i,origin:"markText"},{head:e.sel.head,anchor:e.sel.anchor},0/0);var s,a,l,c=t.line,d=0,u=e.cm;if(e.iter(c,i.line+1,function(n){u&&r.collapsed&&!u.options.lineWrapping&&Hi(e,n)==u.display.maxLine&&(l=!0);var o={from:null,to:null,marker:r};d+=n.text.length,c==t.line&&(o.from=t.ch,d-=t.ch),c==i.line&&(o.to=i.ch,d-=n.text.length-i.ch),r.collapsed&&(c==i.line&&(a=Li(n,i.ch)),c==t.line?s=Li(n,t.ch):pn(n,0)),Ni(n,o),++c}),r.collapsed&&e.iter(t.line,i.line+1,function(t){Ri(e,t)&&pn(t,0)}),r.clearOnEnter&&Hn(r,"beforeCursorEnter",function(){r.clear()}),r.readOnly&&(Yo=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),r.collapsed){if(s!=a)throw new Error("Inserting collapsed marker overlapping an existing one");r.size=d,r.atomic=!0}return u&&(l&&(u.curOp.updateMaxLine=!0),(r.className||r.startStyle||r.endStyle||r.collapsed)&&at(u,t.line,i.line+1),r.atomic&&ei(u)),r}function ki(e,t){this.markers=e,this.primary=t;for(var i=0,n=this;i<e.length;++i)e[i].parent=this,Hn(e[i],"clear",function(){n.clear()})}function Ti(e,t,i,n,o){n=Qn(n),n.shared=!1;var r=[Ci(e,t,i,n,o)],s=r[0],a=n.replacedWith;return cn(e,function(e){a&&(n.replacedWith=a.cloneNode(!0)),r.push(Ci(e,Xt(e,t),Xt(e,i),n,o));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=Vn(r)}),new ki(r,s)}function Si(e,t){if(e)for(var i=0;i<e.length;++i){var n=e[i];if(n.marker==t)return n}}function Di(e,t){for(var i,n=0;n<e.length;++n)e[n]!=t&&(i||(i=[])).push(e[n]);return i}function Ni(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Ei(e,t,i){if(e)for(var n,o=0;o<e.length;++o){var r=e[o],s=r.marker,a=null==r.from||(s.inclusiveLeft?r.from<=t:r.from<t);if(a||"bookmark"==s.type&&r.from==t&&(!i||!r.marker.insertLeft)){var l=null==r.to||(s.inclusiveRight?r.to>=t:r.to>t);(n||(n=[])).push({from:r.from,to:l?null:r.to,marker:s})}}return n}function $i(e,t,i){if(e)for(var n,o=0;o<e.length;++o){var r=e[o],s=r.marker,a=null==r.to||(s.inclusiveRight?r.to>=t:r.to>t);if(a||"bookmark"==s.type&&r.from==t&&(!i||r.marker.insertLeft)){var l=null==r.from||(s.inclusiveLeft?r.from<=t:r.from<t);(n||(n=[])).push({from:l?null:r.from-t,to:null==r.to?null:r.to-t,marker:s})}}return n}function Mi(e,t){var i=Kt(e,t.from.line)&&un(e,t.from.line).markedSpans,n=Kt(e,t.to.line)&&un(e,t.to.line).markedSpans;if(!i&&!n)return null;var o=t.from.ch,r=t.to.ch,s=Ut(t.from,t.to),a=Ei(i,o,s),l=$i(n,r,s),c=1==t.text.length,d=Vn(t.text).length+(c?o:0);if(a)for(var u=0;u<a.length;++u){var h=a[u];if(null==h.to){var f=Si(l,h.marker);f?c&&(h.to=null==f.to?null:f.to+d):h.to=o}}if(l)for(var u=0;u<l.length;++u){var h=l[u];if(null!=h.to&&(h.to+=d),null==h.from){var f=Si(a,h.marker);f||(h.from=d,c&&(a||(a=[])).push(h))}else h.from+=d,c&&(a||(a=[])).push(h)}if(c&&a){for(var u=0;u<a.length;++u)null!=a[u].from&&a[u].from==a[u].to&&"bookmark"!=a[u].marker.type&&a.splice(u--,1);a.length||(a=null)}var p=[a];if(!c){var m,g=t.text.length-2;if(g>0&&a)for(var u=0;u<a.length;++u)null==a[u].to&&(m||(m=[])).push({from:null,to:null,marker:a[u].marker});for(var u=0;g>u;++u)p.push(m);p.push(l)}return p}function Ii(e,t){var i=kn(e,t),n=Mi(e,t);if(!i)return n;if(!n)return i;for(var o=0;o<i.length;++o){var r=i[o],s=n[o];if(r&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<r.length;++c)if(r[c].marker==l.marker)continue e;r.push(l)}else s&&(i[o]=s)}return i}function Ai(e,t,i){var n=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;!i.readOnly||n&&-1!=Gn(n,i)||(n||(n=[])).push(i)}}),!n)return null;for(var o=[{from:t,to:i}],r=0;r<n.length;++r)for(var s=n[r],a=s.find(),l=0;l<o.length;++l){var c=o[l];if(!qt(c.to,a.from)&&!qt(a.to,c.from)){var d=[l,1];(qt(c.from,a.from)||!s.inclusiveLeft&&Ut(c.from,a.from))&&d.push({from:c.from,to:a.from}),(qt(a.to,c.to)||!s.inclusiveRight&&Ut(c.to,a.to))&&d.push({from:a.to,to:c.to}),o.splice.apply(o,d),l+=d.length-1}}return o}function Li(e,t){var i,n=Vo&&e.markedSpans;if(n)for(var o,r=0;r<n.length;++r)o=n[r],o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!i||i.width<o.marker.width)&&(i=o.marker);return i}function Pi(e){return Li(e,-1)}function Oi(e){return Li(e,e.text.length+1)}function Hi(e,t){for(var i;i=Pi(t);)t=un(e,i.find().from.line);return t}function Ri(e,t){var i=Vo&&t.markedSpans;if(i)for(var n,o=0;o<i.length;++o)if(n=i[o],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.replacedWith&&0==n.from&&n.marker.inclusiveLeft&&Fi(e,t,n))return!0}}function Fi(e,t,i){if(null==i.to){var n=i.marker.find().to,o=un(e,n.line);return Fi(e,o,Si(o.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var r,s=0;s<t.markedSpans.length;++s)if(r=t.markedSpans[s],r.marker.collapsed&&!r.marker.replacedWith&&r.from==i.to&&(r.marker.inclusiveLeft||i.marker.inclusiveRight)&&Fi(e,t,r))return!0}function ji(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function zi(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Bi(e){return function(){var t=!this.cm.curOp;t&&it(this.cm);try{var i=e.apply(this,arguments)}finally{t&&nt(this.cm)}return i}}function Wi(e){return null!=e.height?e.height:(e.node.parentNode&&1==e.node.parentNode.nodeType||oo(e.cm.display.measure,io("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function Ui(e,t,i,n){var o=new ur(e,i,n);return o.noHScroll&&(e.display.alignWidgets=!0),ci(e,t,function(t){if((t.widgets||(t.widgets=[])).push(o),o.line=t,!Ri(e.doc,t)||o.showIfHidden){var i=vn(e,t)<e.display.scroller.scrollTop;pn(t,t.height+Wi(o)),i&&ai(e,0,o.height)}return!0}),o}function qi(e,t,i){var n={text:e};return zi(n,t),n.height=i?i(n):1,n}function Yi(e,t,i,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),ji(e),zi(e,i);var o=n?n(e):1;o!=e.height&&pn(e,o)}function Vi(e){e.parent=null,ji(e)}function Xi(e,t,i,n,o){var r=i.flattenSpans;null==r&&(r=e.options.flattenSpans);var s,a=0,l=null,c=new _i(t,e.options.tabSize);for(""==t&&i.blankLine&&i.blankLine(n);!c.eol();)c.pos>e.options.maxHighlightLength?(r=!1,c.pos=Math.min(t.length,c.start+5e4),s=null):s=i.token(c,n),r&&l==s||(a<c.start&&o(c.start,l),a=c.start,l=s),c.start=c.pos;a<c.pos&&o(c.pos,l)}function Gi(e,t,i){var n=[e.state.modeGen];Xi(e,t.text,e.doc.mode,i,function(e,t){n.push(e,t)});for(var o=0;o<e.state.overlays.length;++o){var r=e.state.overlays[o],s=1,a=0;Xi(e,t.text,r.mode,!0,function(e,t){for(var i=s;e>a;){var o=n[s];o>e&&n.splice(s,1,e,n[s+1],o),s+=2,a=Math.min(e,o)}if(t)if(r.opaque)n.splice(i,s-i,e,t),s=i+2;else for(;s>i;i+=2){var l=n[i+1];n[i+1]=l?l+" "+t:t}})}return n}function Ki(e,t){return t.styles&&t.styles[0]==e.state.modeGen||(t.styles=Gi(e,t,t.stateAfter=L(e,mn(t)))),t.styles}function Qi(e,t,i){var n=e.doc.mode,o=new _i(t.text,e.options.tabSize);for(""==t.text&&n.blankLine&&n.blankLine(i);!o.eol()&&o.pos<=e.options.maxHighlightLength;)n.token(o,i),o.start=o.pos}function Zi(e){return e?hr[e]||(hr[e]="cm-"+e.replace(/ +/g," cm-")):null}function Ji(e,t,i){for(var n,o=t,r=!0;n=Pi(o);)o=un(e.doc,n.find().from.line);var s={pre:io("pre"),col:0,pos:0,display:!i,measure:null,measuredSomething:!1,cm:e};o.textClass&&(s.pre.className=o.textClass);do{o.text&&(r=!1),s.measure=o==t&&i,s.pos=0,s.addToken=s.measure?tn:en,(ko||Do)&&e.getOption("lineWrapping")&&(s.addToken=nn(s.addToken));var a=rn(o,s,Ki(e,o));i&&o==t&&!s.measuredSomething&&(i[0]=s.pre.appendChild(co(e.display.measure)),s.measuredSomething=!0),a&&(o=un(e.doc,a.to.line))}while(a);!i||s.measuredSomething||i[0]||(i[0]=s.pre.appendChild(r?io("span"," "):co(e.display.measure))),s.pre.firstChild||Ri(e.doc,t)||s.pre.appendChild(document.createTextNode(" "));var l;if(i&&ko&&(l=yn(o))){var c=l.length-1;l[c].from==l[c].to&&--c;var d=l[c],u=l[c-1];if(d.from+1==d.to&&u&&d.level<u.level){var h=i[s.pos-1];h&&h.parentNode.insertBefore(h.measureRight=co(e.display.measure),h.nextSibling)}}return Fn(e,"renderLine",e,t,s.pre),s.pre}function en(e,t,i,n,o){if(t){if(fr.test(t))for(var r=document.createDocumentFragment(),s=0;;){fr.lastIndex=s;var a=fr.exec(t),l=a?a.index-s:t.length-s;if(l&&(r.appendChild(document.createTextNode(t.slice(s,s+l))),e.col+=l),!a)break;if(s+=l+1,"	"==a[0]){var c=e.cm.options.tabSize,d=c-e.col%c;r.appendChild(io("span",Yn(d),"cm-tab")),e.col+=d}else{var u=io("span","•","cm-invalidchar");u.title="\\u"+a[0].charCodeAt(0).toString(16),r.appendChild(u),e.col+=1}}else{e.col+=t.length;var r=document.createTextNode(t)}if(i||n||o||e.measure){var h=i||"";return n&&(h+=n),o&&(h+=o),e.pre.appendChild(io("span",[r],h))}e.pre.appendChild(r)}}function tn(e,t,i,n,o){for(var r=e.cm.options.lineWrapping,s=0;s<t.length;++s){var a=t.charAt(s),l=0==s;a>=""&&"">a&&s<t.length-1?(a=t.slice(s,s+2),++s):s&&r&&ao(t,s)&&e.pre.appendChild(io("wbr"));var c=e.measure[e.pos]=en(e,a,i,l&&n,s==t.length-1&&o);ko&&r&&" "==a&&s&&!/\s/.test(t.charAt(s-1))&&s<t.length-1&&!/\s/.test(t.charAt(s+1))&&(c.style.whiteSpace="normal"),e.pos+=a.length}t.length&&(e.measuredSomething=!0)}function nn(e){function t(e){for(var t=" ",i=0;i<e.length-2;++i)t+=i%2?" ":" ";return t+=" "}return function(i,n,o,r,s){return e(i,n.replace(/ {3,}/,t),o,r,s)}}function on(e,t,i){i&&(e.display||(i=i.cloneNode(!0)),e.measure&&(e.measure[e.pos]=t?i:e.pre.appendChild(co(e.cm.display.measure)),e.measuredSomething=!0),e.pre.appendChild(i)),e.pos+=t}function rn(e,t,i){var n=e.markedSpans,o=e.text,r=0;if(n)for(var s,a,l,c,d,u=o.length,h=0,f=1,p="",m=0;;){if(m==h){a=l=c="",d=null,m=1/0;for(var g=null,v=0;v<n.length;++v){var y=n[v],b=y.marker;y.from<=h&&(null==y.to||y.to>h)?(null!=y.to&&m>y.to&&(m=y.to,l=""),b.className&&(a+=" "+b.className),b.startStyle&&y.from==h&&(c+=" "+b.startStyle),b.endStyle&&y.to==m&&(l+=" "+b.endStyle),b.collapsed&&(!d||d.marker.size<b.size)&&(d=y)):y.from>h&&m>y.from&&(m=y.from),"bookmark"==b.type&&y.from==h&&b.replacedWith&&(g=b.replacedWith)}if(d&&(d.from||0)==h&&(on(t,(null==d.to?u:d.to)-h,null!=d.from&&d.marker.replacedWith),null==d.to))return d.marker.find();g&&!d&&on(t,0,g)}if(h>=u)break;for(var w=Math.min(u,m);;){if(p){var _=h+p.length;if(!d){var x=_>w?p.slice(0,w-h):p;t.addToken(t,x,s?s+a:a,c,h+x.length==m?l:"")}if(_>=w){p=p.slice(w-h),h=w;break}h=_,c=""}p=o.slice(r,r=i[f++]),s=Zi(i[f++])}}else for(var f=1;f<i.length;f+=2)t.addToken(t,o.slice(r,r=i[f]),Zi(i[f+1]))}function sn(e,t,i,n,o){function r(e){return i?i[e]:null}function s(e,i,n){Yi(e,i,n,o),jn(e,"change",e,t)}var a=t.from,l=t.to,c=t.text,d=un(e,a.line),u=un(e,l.line),h=Vn(c),f=r(c.length-1),p=l.line-a.line;if(0==a.ch&&0==l.ch&&""==h){for(var m=0,g=c.length-1,v=[];g>m;++m)v.push(qi(c[m],r(m),o));s(u,u.text,f),p&&e.remove(a.line,p),v.length&&e.insert(a.line,v)}else if(d==u)if(1==c.length)s(d,d.text.slice(0,a.ch)+h+d.text.slice(l.ch),f);else{for(var v=[],m=1,g=c.length-1;g>m;++m)v.push(qi(c[m],r(m),o));v.push(qi(h+d.text.slice(l.ch),f,o)),s(d,d.text.slice(0,a.ch)+c[0],r(0)),e.insert(a.line+1,v)}else if(1==c.length)s(d,d.text.slice(0,a.ch)+c[0]+u.text.slice(l.ch),r(0)),e.remove(a.line+1,p);else{s(d,d.text.slice(0,a.ch)+c[0],r(0)),s(u,h+u.text.slice(l.ch),f);for(var m=1,g=c.length-1,v=[];g>m;++m)v.push(qi(c[m],r(m),o));p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,v)}jn(e,"change",e,t),Jt(e,n.anchor,n.head,null,!0)}function an(e){this.lines=e,this.parent=null;for(var t=0,i=e.length,n=0;i>t;++t)e[t].parent=this,n+=e[t].height;this.height=n}function ln(e){this.children=e;for(var t=0,i=0,n=0,o=e.length;o>n;++n){var r=e[n];t+=r.chunkSize(),i+=r.height,r.parent=this}this.size=t,this.height=i,this.parent=null}function cn(e,t,i){function n(e,o,r){if(e.linked)for(var s=0;s<e.linked.length;++s){var a=e.linked[s];if(a.doc!=o){var l=r&&a.sharedHist;(!i||l)&&(t(a.doc,l),n(a.doc,e,l))}}}n(e,null,!0)}function dn(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,r(e),i(e),e.options.lineWrapping||u(e),e.options.mode=t.modeOption,at(e)}function un(e,t){for(t-=e.first;!e.lines;)for(var i=0;;++i){var n=e.children[i],o=n.chunkSize();if(o>t){e=n;break}t-=o}return e.lines[t]}function hn(e,t,i){var n=[],o=t.line;return e.iter(t.line,i.line+1,function(e){var r=e.text;o==i.line&&(r=r.slice(0,i.ch)),o==t.line&&(r=r.slice(t.ch)),n.push(r),++o}),n}function fn(e,t,i){var n=[];return e.iter(t,i,function(e){n.push(e.text)}),n}function pn(e,t){for(var i=t-e.height,n=e;n;n=n.parent)n.height+=i}function mn(e){if(null==e.parent)return null;for(var t=e.parent,i=Gn(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var o=0;n.children[o]!=t;++o)i+=n.children[o].chunkSize();return i+t.first}function gn(e,t){var i=e.first;e:do{for(var n=0,o=e.children.length;o>n;++n){var r=e.children[n],s=r.height;if(s>t){e=r;continue e}t-=s,i+=r.chunkSize()}return i}while(!e.lines);for(var n=0,o=e.lines.length;o>n;++n){var a=e.lines[n],l=a.height;if(l>t)break;t-=l}return i+n}function vn(e,t){t=Hi(e.doc,t);for(var i=0,n=t.parent,o=0;o<n.lines.length;++o){var r=n.lines[o];if(r==t)break;i+=r.height}for(var s=n.parent;s;n=s,s=n.parent)for(var o=0;o<s.children.length;++o){var a=s.children[o];if(a==n)break;i+=a.height}return i}function yn(e){var t=e.order;return null==t&&(t=e.order=Ar(e.text)),t}function bn(e){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:e||1,maxGeneration:e||1}}function wn(e,t,i,n){var o=t["spans_"+e.id],r=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,n),function(i){i.markedSpans&&((o||(o=t["spans_"+e.id]={}))[r]=i.markedSpans),++r})}function _n(e,t){var i={from:t.from,to:tr(t),text:hn(e,t.from,t.to)};return wn(e,i,t.from.line,t.to.line+1),cn(e,function(e){wn(e,i,t.from.line,t.to.line+1)},!0),i}function xn(e,t,i,n){var o=e.history;o.undone.length=0;var r=+new Date,s=Vn(o.done);if(s&&(o.lastOp==n||o.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&o.lastTime>r-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))){var a=Vn(s.changes);Ut(t.from,t.to)&&Ut(t.from,a.to)?a.to=tr(t):s.changes.push(_n(e,t)),s.anchorAfter=i.anchor,s.headAfter=i.head}else for(s={changes:[_n(e,t)],generation:o.generation,anchorBefore:e.sel.anchor,headBefore:e.sel.head,anchorAfter:i.anchor,headAfter:i.head},o.done.push(s),o.generation=++o.maxGeneration;o.done.length>o.undoDepth;)o.done.shift();o.lastTime=r,o.lastOp=n,o.lastOrigin=t.origin}function Cn(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function kn(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var n=0,o=[];n<t.text.length;++n)o.push(Cn(i[n]));return o}function Tn(e,t){for(var i=0,n=[];i<e.length;++i){var o=e[i],r=o.changes,s=[];n.push({changes:s,anchorBefore:o.anchorBefore,headBefore:o.headBefore,anchorAfter:o.anchorAfter,headAfter:o.headAfter});for(var a=0;a<r.length;++a){var l,c=r[a];if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var d in c)(l=d.match(/^spans_(\d+)$/))&&Gn(t,Number(l[1]))>-1&&(Vn(s)[d]=c[d],delete c[d])}}return n}function Sn(e,t,i,n){i<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Dn(e,t,i,n){for(var o=0;o<e.length;++o){for(var r=e[o],s=!0,a=0;a<r.changes.length;++a){var l=r.changes[a];if(r.copied||(l.from=Yt(l.from),l.to=Yt(l.to)),i<l.from.line)l.from.line+=n,l.to.line+=n;else if(t<=l.to.line){s=!1;break}}r.copied||(r.anchorBefore=Yt(r.anchorBefore),r.headBefore=Yt(r.headBefore),r.anchorAfter=Yt(r.anchorAfter),r.readAfter=Yt(r.headAfter),r.copied=!0),s?(Sn(r.anchorBefore),Sn(r.headBefore),Sn(r.anchorAfter),Sn(r.headAfter)):(e.splice(0,o+1),o=0)}}function Nn(e,t){var i=t.from.line,n=t.to.line,o=t.text.length-(n-i)-1;Dn(e.done,i,n,o),Dn(e.undone,i,n,o)}function En(){Ln(this)}function $n(e){return e.stop||(e.stop=En),e}function Mn(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function In(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function An(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Ln(e){Mn(e),In(e)}function Pn(e){return e.target||e.srcElement}function On(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Ro&&e.ctrlKey&&1==t&&(t=3),t}function Hn(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var n=e._handlers||(e._handlers={}),o=n[t]||(n[t]=[]);o.push(i)}}function Rn(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var o=0;o<n.length;++o)if(n[o]==i){n.splice(o,1);break}}}function Fn(e,t){var i=e._handlers&&e._handlers[t];if(i)for(var n=Array.prototype.slice.call(arguments,2),o=0;o<i.length;++o)i[o].apply(null,n)}function jn(e,t){function i(e){return function(){e.apply(null,o)}}var n=e._handlers&&e._handlers[t];if(n){var o=Array.prototype.slice.call(arguments,2);yr||(++br,yr=[],setTimeout(Bn,0));for(var r=0;r<n.length;++r)yr.push(i(n[r]))}}function zn(e,t){return Fn(e,t.type,e,t),An(t)}function Bn(){--br;var e=yr;yr=null;for(var t=0;t<e.length;++t)e[t]()}function Wn(e,t){var i=e._handlers&&e._handlers[t];return i&&i.length>0}function Un(){this.id=null}function qn(e,t,i,n,o){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var r=n||0,s=o||0;t>r;++r)"	"==e.charAt(r)?s+=i-s%i:++s;return s}function Yn(e){for(;xr.length<=e;)xr.push(Vn(xr)+" ");return xr[e]}function Vn(e){return e[e.length-1]}function Xn(e){if(Oo)e.selectionStart=0,e.selectionEnd=e.value.length;else try{e.select()}catch(t){}}function Gn(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,n=e.length;n>i;++i)if(e[i]==t)return i;return-1}function Kn(e,t){function i(){}i.prototype=e;var n=new i;return t&&Qn(t,n),n}function Qn(e,t){t||(t={});for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function Zn(e){for(var t=[],i=0;e>i;++i)t.push(void 0);return t}function Jn(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function eo(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Cr.test(e))}function to(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function io(e,t,i,n){var o=document.createElement(e);if(i&&(o.className=i),n&&(o.style.cssText=n),"string"==typeof t)ro(o,t);else if(t)for(var r=0;r<t.length;++r)o.appendChild(t[r]);return o}function no(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function oo(e,t){return no(e).appendChild(t)}function ro(e,t){So?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function so(e){return e.getBoundingClientRect()}function ao(){return!1}function lo(e){if(null!=Sr)return Sr;var t=io("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return oo(e,t),t.offsetWidth&&(Sr=t.offsetHeight-t.clientHeight),Sr||0}function co(e){if(null==Dr){var t=io("span","​");oo(e,io("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Dr=t.offsetWidth<=1&&t.offsetHeight>2&&!To)}return Dr?io("span","​"):io("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function uo(e,t,i,n){if(!e)return n(t,i,"ltr");for(var o=0;o<e.length;++o){var r=e[o];(r.from<i&&r.to>t||t==i&&r.to==t)&&n(Math.max(r.from,t),Math.min(r.to,i),1==r.level?"rtl":"ltr")}}function ho(e){return e.level%2?e.to:e.from}function fo(e){return e.level%2?e.from:e.to}function po(e){var t=yn(e);return t?ho(t[0]):0}function mo(e){var t=yn(e);return t?fo(Vn(t)):e.text.length}function go(e,t){var i=un(e.doc,t),n=Hi(e.doc,i);n!=i&&(t=mn(n));var o=yn(n),r=o?o[0].level%2?mo(n):po(n):0;return Wt(t,r)}function vo(e,t){for(var i,n;i=Oi(n=un(e.doc,t));)t=i.find().to.line;var o=yn(n),r=o?o[0].level%2?po(n):mo(n):n.text.length;return Wt(t,r)}function yo(e,t,i){var n=e[0].level;return t==n?!0:i==n?!1:i>t}function bo(e,t){for(var i,n=0;n<e.length;++n){var o=e[n];if(o.from<t&&o.to>t)return Ir=null,n;if(o.from==t||o.to==t){if(null!=i)return yo(e,o.level,e[i].level)?(Ir=i,n):(Ir=n,i);i=n}}return Ir=null,i}function wo(e,t,i,n){if(!n)return t+i;do t+=i;while(t>0&&kr.test(e.text.charAt(t)));return t}function _o(e,t,i,n){var o=yn(e);if(!o)return xo(e,t,i,n);for(var r=bo(o,t),s=o[r],a=wo(e,t,s.level%2?-i:i,n);;){if(a>s.from&&a<s.to)return a;if(a==s.from||a==s.to)return bo(o,a)==r?a:(s=o[r+=i],i>0==s.level%2?s.to:s.from);if(s=o[r+=i],!s)return null;a=i>0==s.level%2?wo(e,s.to,-1,n):wo(e,s.from,1,n)}}function xo(e,t,i,n){var o=t+i;if(n)for(;o>0&&kr.test(e.text.charAt(o));)o+=i;return 0>o||o>e.text.length?null:o}var Co=/gecko\/\d/i.test(navigator.userAgent),ko=/MSIE \d/.test(navigator.userAgent),To=ko&&(null==document.documentMode||document.documentMode<8),So=ko&&(null==document.documentMode||document.documentMode<9),Do=/WebKit\//.test(navigator.userAgent),No=Do&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Eo=/Chrome\//.test(navigator.userAgent),$o=/Opera\//.test(navigator.userAgent),Mo=/Apple Computer/.test(navigator.vendor),Io=/KHTML\//.test(navigator.userAgent),Ao=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Lo=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Po=/PhantomJS/.test(navigator.userAgent),Oo=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Ho=Oo||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Ro=Oo||/Mac/.test(navigator.platform),Fo=/windows/i.test(navigator.platform),jo=$o&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);jo&&(jo=Number(jo[1]));var zo,Bo,Wo,Uo=Ro&&(No||$o&&(null==jo||12.11>jo)),qo=Co||ko&&!So,Yo=!1,Vo=!1,Xo=0,Go=0,Ko=0,Qo=null;ko?Qo=-.53:Co?Qo=15:Eo?Qo=-.7:Mo&&(Qo=-1/3);var Zo,Jo,er=null,tr=e.changeEnd=function(e){return e.text?Wt(e.from.line+e.text.length-1,Vn(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.Pos=Wt,e.prototype={constructor:e,focus:function(){window.focus(),ht(this),$t(this),ct(this)},setOption:function(e,t){var i=this.options,n=i[e];(i[e]!=t||"mode"==e)&&(i[e]=t,ir.hasOwnProperty(e)&&ot(this,ir[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(("string"==typeof e?t[i].name:t[i])==e)return t.splice(i,1),!0},addOverlay:ot(null,function(t,i){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:t,opaque:i&&i.opaque}),this.state.modeGen++,at(this)}),removeOverlay:ot(null,function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var n=t[i].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(i,1),this.state.modeGen++,at(this),void 0}}),indentLine:ot(null,function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Kt(this.doc,e)&&li(this,e,t,i)}),indentSelection:ot(null,function(e){var t=this.doc.sel;if(Ut(t.from,t.to))return li(this,t.from.line,e);for(var i=t.to.line-(t.to.ch?0:1),n=t.from.line;i>=n;++n)li(this,n,e)}),getTokenAt:function(e,t){var i=this.doc;e=Xt(i,e);for(var n=L(this,e.line,t),o=this.doc.mode,r=un(i,e.line),s=new _i(r.text,this.options.tabSize);s.pos<e.ch&&!s.eol();){s.start=s.pos;var a=o.token(s,n)}return{start:s.start,end:s.pos,string:s.current(),className:a||null,type:a||null,state:n}},getTokenTypeAt:function(e){e=Xt(this.doc,e);for(var t=Ki(this,un(this.doc,e.line)),i=0,n=(t.length-1)/2,o=e.ch;;){var r=i+n>>1;if((r?t[2*r-1]:0)>=o)n=r;else{if(!(t[2*r+1]<o))return t[2*r+2];i=r+1}}},getStateAfter:function(e,t){var i=this.doc;return e=Vt(i,null==e?i.first+i.size-1:e),L(this,e+1,t)},cursorCoords:function(e,t){var i,n=this.doc.sel;return i=null==e?n.head:"object"==typeof e?Xt(this.doc,e):e?n.from:n.to,K(this,i,t||"page")},charCoords:function(e,t){return G(this,Xt(this.doc,e),t||"page")},coordsChar:function(e,t){return e=X(this,e,t||"page"),Z(this,e.left,e.top)},lineAtHeight:function(e,t){return e=X(this,{top:e,left:0},t||"page").top,gn(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var i=!1,n=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>n&&(e=n,i=!0);var o=un(this.doc,e);return V(this,un(this.doc,e),{top:0,left:0},t||"page").top+(i?o.height:0)},defaultTextHeight:function(){return et(this.display)},defaultCharWidth:function(){return tt(this.display)},setGutterMarker:ot(null,function(e,t,i){return ci(this,e,function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=i,!i&&to(n)&&(e.gutterMarkers=null),!0})}),clearGutter:ot(null,function(e){var t=this,i=t.doc,n=i.first;i.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&(i.gutterMarkers[e]=null,at(t,n,n+1),to(i.gutterMarkers)&&(i.gutterMarkers=null)),++n})}),addLineClass:ot(null,function(e,t,i){return ci(this,e,function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[n]){if(new RegExp("(?:^|\\s)"+i+"(?:$|\\s)").test(e[n]))return!1;e[n]+=" "+i}else e[n]=i;return!0})}),removeLineClass:ot(null,function(e,t,i){return ci(this,e,function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",o=e[n];if(!o)return!1;if(null==i)e[n]=null;else{var r=o.match(new RegExp("(?:^|\\s+)"+i+"(?:$|\\s+)"));if(!r)return!1;var s=r.index+r[0].length;e[n]=o.slice(0,r.index)+(r.index&&s!=o.length?" ":"")+o.slice(s)||null}return!0})}),addLineWidget:ot(null,function(e,t,i){return Ui(this,e,t,i)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!Kt(this.doc,e))return null;var t=e;if(e=un(this.doc,e),!e)return null}else{var t=mn(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,i,n,o){var r=this.display;e=K(this,Xt(this.doc,e));var s=e.bottom,a=e.left;if(t.style.position="absolute",r.sizer.appendChild(t),"over"==n)s=e.top;else if("above"==n||"near"==n){var l=Math.max(r.wrapper.clientHeight,this.doc.height),c=Math.max(r.sizer.clientWidth,r.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?s=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(s=e.bottom),a+t.offsetWidth>c&&(a=c-t.offsetWidth)}t.style.top=s+"px",t.style.left=t.style.right="","right"==o?(a=r.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==o?a=0:"middle"==o&&(a=(r.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),i&&oi(this,a,s,a+t.offsetWidth,s+t.offsetHeight)},triggerOnKeyDown:ot(null,Nt),execCommand:function(e){return cr[e](this)},findPosH:function(e,t,i,n){var o=1;0>t&&(o=-1,t=-t);for(var r=0,s=Xt(this.doc,e);t>r&&(s=di(this.doc,s,o,i,n),!s.hitSide);++r);return s},moveH:ot(null,function(e,t){var i,n=this.doc.sel;i=n.shift||n.extend||Ut(n.from,n.to)?di(this.doc,n.head,e,t,this.options.rtlMoveVisually):0>e?n.from:n.to,Qt(this.doc,i,i,e)}),deleteH:ot(null,function(e,t){var i=this.doc.sel;Ut(i.from,i.to)?Bt(this.doc,"",i.from,di(this.doc,i.head,e,t,!1),"+delete"):Bt(this.doc,"",i.from,i.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(e,t,i,n){var o=1,r=n;0>t&&(o=-1,t=-t);for(var s=0,a=Xt(this.doc,e);t>s;++s){var l=K(this,a,"div");if(null==r?r=l.left:l.left=r,a=ui(this,l,o,i),a.hitSide)break}return a},moveV:ot(null,function(e,t){var i=this.doc.sel,n=K(this,i.head,"div");null!=i.goalColumn&&(n.left=i.goalColumn);var o=ui(this,n,e,t);"page"==t&&ai(this,0,G(this,o,"div").top-n.top),Qt(this.doc,o,o,e),i.goalColumn=n.left}),toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:ot(null,function(e,t){si(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller,t=wr;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:ot(null,function(e,t){"number"==typeof e&&(e=Wt(e,0)),t||(t=0);var i=e;e&&null==e.line||(this.curOp.scrollToPos=e?Xt(this.doc,e):this.doc.sel.head,this.curOp.scrollToPosMargin=t,i=K(this,this.curOp.scrollToPos));var n=ri(this,i.left,i.top-t,i.right,i.bottom+t);si(this,n.scrollLeft,n.scrollTop)}),setSize:function(e,t){function i(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.refresh()},on:function(e,t){Hn(this,e,t)},off:function(e,t){Rn(this,e,t)},operation:function(e){return st(this,e)},refresh:ot(null,function(){U(this),si(this,this.doc.scrollLeft,this.doc.scrollTop),at(this)}),swapDoc:ot(null,function(e){var t=this.doc;return t.cm=null,dn(this,e),U(this),ut(this,!0),si(this,e.scrollLeft,e.scrollTop),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var ir=e.optionHandlers={},nr=e.defaults={},or=e.Init={toString:function(){return"CodeMirror.Init"}};pi("value","",function(e,t){e.setValue(t)},!0),pi("mode",null,function(e,t){e.doc.modeOption=t,i(e)},!0),pi("indentUnit",2,i,!0),pi("indentWithTabs",!1),pi("smartIndent",!0),pi("tabSize",4,function(e){i(e),U(e),at(e)},!0),pi("electricChars",!0),pi("rtlMoveVisually",!Fo),pi("theme","default",function(e){a(e),l(e)},!0),pi("keyMap","default",s),pi("extraKeys",null),pi("onKeyEvent",null),pi("onDragEvent",null),pi("lineWrapping",!1,n,!0),pi("gutters",[],function(e){h(e.options),l(e)},!0),pi("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?y(e.display)+"px":"0",e.refresh()},!0),pi("coverGutterNextToScrollbar",!1,f,!0),pi("lineNumbers",!1,function(e){h(e.options),l(e)},!0),pi("firstLineNumber",1,l,!0),pi("lineNumberFormatter",function(e){return e},l,!0),pi("showCursorWhenSelecting",!1,D,!0),pi("readOnly",!1,function(e,t){"nocursor"==t?(Mt(e),e.display.input.blur()):t||ut(e,!0)}),pi("dragDrop",!0),pi("cursorBlinkRate",530),pi("cursorScrollMargin",0),pi("cursorHeight",1),pi("workTime",100),pi("workDelay",100),pi("flattenSpans",!0),pi("pollInterval",100),pi("undoDepth",40,function(e,t){e.doc.history.undoDepth=t}),pi("historyEventDelay",500),pi("viewportMargin",10,function(e){e.refresh()},!0),pi("maxHighlightLength",1e4,function(e){i(e),e.refresh()},!0),pi("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),pi("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),pi("autofocus",null);var rr=e.modes={},sr=e.mimeModes={};e.defineMode=function(t,i){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){i.dependencies=[];for(var n=2;n<arguments.length;++n)i.dependencies.push(arguments[n])}rr[t]=i},e.defineMIME=function(e,t){sr[e]=t},e.resolveMode=function(t){if("string"==typeof t&&sr.hasOwnProperty(t))t=sr[t];else if(t&&"string"==typeof t.name&&sr.hasOwnProperty(t.name)){var i=sr[t.name];t=Kn(i,t),t.name=i.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,i){i=e.resolveMode(i);var n=rr[i.name];if(!n)return e.getMode(t,"text/plain");var o=n(t,i);if(ar.hasOwnProperty(i.name)){var r=ar[i.name];for(var s in r)r.hasOwnProperty(s)&&(o.hasOwnProperty(s)&&(o["_"+s]=o[s]),o[s]=r[s])}return o.name=i.name,o},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var ar=e.modeExtensions={};e.extendMode=function(e,t){var i=ar.hasOwnProperty(e)?ar[e]:ar[e]={};Qn(t,i)},e.defineExtension=function(t,i){e.prototype[t]=i},e.defineDocExtension=function(e,t){mr.prototype[e]=t},e.defineOption=pi;var lr=[];e.defineInitHook=function(e){lr.push(e)},e.copyState=mi,e.startState=gi,e.innerMode=function(e,t){for(;e.innerMode;){var i=e.innerMode(t);t=i.state,e=i.mode}return i||{mode:e,state:t}};var cr=e.commands={selectAll:function(e){e.setSelection(Wt(e.firstLine(),0),Wt(e.lastLine()))
},killLine:function(e){var t=e.getCursor(!0),i=e.getCursor(!1),n=!Ut(t,i);n||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,n?i:Wt(t.line),"+delete"):e.replaceRange("",t,Wt(t.line+1,0),"+delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",Wt(t,0),Wt(t),"+delete")},delLineLeft:function(e){var t=e.getCursor();e.replaceRange("",Wt(t.line,0),t,"+delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection(Wt(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Wt(e.lastLine()))},goLineStart:function(e){e.extendSelection(go(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),i=go(e,t.line),n=e.getLineHandle(i.line),o=yn(n);if(o&&0!=o[0].level)e.extendSelection(i);else{var r=Math.max(0,n.text.search(/\S/)),s=t.line==i.line&&t.ch<=r&&t.ch;e.extendSelection(Wt(i.line,s?0:r))}},goLineEnd:function(e){e.extendSelection(vo(e,e.getCursor().line))},goLineRight:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:t},"div"))},goLineLeft:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:0,top:t},"div"))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","+input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","+input")},transposeChars:function(e){var t=e.getCursor(),i=e.getLine(t.line);t.ch>0&&t.ch<i.length-1&&e.replaceRange(i.charAt(t.ch)+i.charAt(t.ch-1),Wt(t.line,t.ch-1),Wt(t.line,t.ch+1))},newlineAndIndent:function(e){ot(e,function(){e.replaceSelection("\n","end","+input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},dr=e.keyMap={};dr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},dr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},dr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},dr["default"]=Ro?dr.macDefault:dr.pcDefault,dr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.lookupKey=yi,e.isModifierKey=bi,e.keyName=wi,e.fromTextArea=function(t,i){function n(){t.value=c.getValue()}if(i||(i={}),i.value=t.value,!i.tabindex&&t.tabindex&&(i.tabindex=t.tabindex),!i.placeholder&&t.placeholder&&(i.placeholder=t.placeholder),null==i.autofocus){var o=document.body;try{o=document.activeElement}catch(r){}i.autofocus=o==t||null!=t.getAttribute("autofocus")&&o==document.body}if(t.form&&(Hn(t.form,"submit",n),!i.leaveSubmitMethodAlone)){var s=t.form,a=s.submit;try{var l=s.submit=function(){n(),s.submit=a,s.submit(),s.submit=l}}catch(r){}}t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},i);return c.save=n,c.getTextArea=function(){return t},c.toTextArea=function(){n(),t.parentNode.removeChild(c.getWrapperElement()),t.style.display="",t.form&&(Rn(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=a))},c},_i.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var i=t==e;else var i=t&&(e.test?e.test(t):e(t));return i?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=qn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return qn(this.string,null,this.tabSize)},match:function(e,t,i){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var o=function(e){return i?e.toLowerCase():e},r=this.string.substr(this.pos,e.length);return o(r)==o(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=_i,e.TextMarker=xi,xi.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;t&&it(e);for(var i=null,n=null,o=0;o<this.lines.length;++o){var r=this.lines[o],s=Si(r.markedSpans,this);null!=s.to&&(n=mn(r)),r.markedSpans=Di(r.markedSpans,s),null!=s.from?i=mn(r):this.collapsed&&!Ri(this.doc,r)&&e&&pn(r,et(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var a=Hi(e.doc,this.lines[o]),l=d(e.doc,a);l>e.display.maxLineLength&&(e.display.maxLine=a,e.display.maxLineLength=l,e.display.maxLineChanged=!0)}null!=i&&e&&at(e,i,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ei(e)),t&&nt(e),jn(this,"clear")}},xi.prototype.find=function(){for(var e,t,i=0;i<this.lines.length;++i){var n=this.lines[i],o=Si(n.markedSpans,this);if(null!=o.from||null!=o.to){var r=mn(n);null!=o.from&&(e=Wt(r,o.from)),null!=o.to&&(t=Wt(r,o.to))}}return"bookmark"==this.type?e:e&&{from:e,to:t}},xi.prototype.changed=function(){var e=this.find(),t=this.doc.cm;if(e&&t){var i=un(this.doc,e.from.line);if(j(t,i),e.from.line>=t.display.showingFrom&&e.from.line<t.display.showingTo){for(var n=t.display.lineDiv.firstChild;n;n=n.nextSibling)if(n.lineObj==i){n.offsetHeight!=i.height&&pn(i,n.offsetHeight);break}st(t,function(){t.curOp.selectionChanged=!0})}}},xi.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Gn(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},xi.prototype.detachLine=function(e){if(this.lines.splice(Gn(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},e.SharedTextMarker=ki,ki.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();jn(this,"clear")}},ki.prototype.find=function(){return this.primary.find()};var ur=e.LineWidget=function(e,t,i){for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.cm=e,this.node=t};ur.prototype.clear=Bi(function(){var e=this.line.widgets,t=mn(this.line);if(null!=t&&e){for(var i=0;i<e.length;++i)e[i]==this&&e.splice(i--,1);e.length||(this.line.widgets=null),pn(this.line,Math.max(0,this.line.height-Wi(this))),at(this.cm,t,t+1)}}),ur.prototype.changed=Bi(function(){var e=this.height;this.height=null;var t=Wi(this)-e;if(t){pn(this.line,this.line.height+t);var i=mn(this.line);at(this.cm,i,i+1)}});var hr={},fr=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;an.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,n=e+t;n>i;++i){var o=this.lines[i];this.height-=o.height,Vi(o),jn(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0,o=t.length;o>n;++n)t[n].parent=this},iterN:function(e,t,i){for(var n=e+t;n>e;++e)if(i(this.lines[e]))return!0}},ln.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var n=this.children[i],o=n.chunkSize();if(o>e){var r=Math.min(t,o-e),s=n.height;if(n.removeInner(e,r),this.height-=s-n.height,o==r&&(this.children.splice(i--,1),n.parent=null),0==(t-=r))break;e=0}else e-=o}if(this.size-t<25){var a=[];this.collapse(a),this.children=[new an(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0,i=this.children.length;i>t;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var n=0,o=this.children.length;o>n;++n){var r=this.children[n],s=r.chunkSize();if(s>=e){if(r.insertInner(e,t,i),r.lines&&r.lines.length>50){for(;r.lines.length>50;){var a=r.lines.splice(r.lines.length-25,25),l=new an(a);r.height-=l.height,this.children.splice(n+1,0,l),l.parent=this}this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new ln(t);if(e.parent){e.size-=i.size,e.height-=i.height;var n=Gn(e.parent.children,e);e.parent.children.splice(n+1,0,i)}else{var o=new ln(e.children);o.parent=e,e.children=[o,i],e=o}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var n=0,o=this.children.length;o>n;++n){var r=this.children[n],s=r.chunkSize();if(s>e){var a=Math.min(t,s-e);if(r.iterN(e,a,i))return!0;if(0==(t-=a))break;e=0}else e-=s}}};var pr=0,mr=e.Doc=function(e,t,i){if(!(this instanceof mr))return new mr(e,t,i);null==i&&(i=0),ln.call(this,[new an([qi("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=bn(),this.cleanGeneration=1,this.frontier=i;var n=Wt(i,0);this.sel={from:n,to:n,head:n,anchor:n,shift:!1,extend:!1,goalColumn:null},this.id=++pr,this.modeOption=t,"string"==typeof e&&(e=Nr(e)),sn(this,{from:n,to:n,text:e},null,{head:n,anchor:n})};mr.prototype=Kn(ln.prototype,{constructor:mr,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,n=0,o=t.length;o>n;++n)i+=t[n].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=fn(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:function(e){var t=Wt(this.first,0),i=this.first+this.size-1;Ot(this,{from:t,to:Wt(i,un(this,i).text.length),text:Nr(e),origin:"setValue"},{head:t,anchor:t},!0)},replaceRange:function(e,t,i,n){t=Xt(this,t),i=i?Xt(this,i):t,Bt(this,e,t,i,n)},getRange:function(e,t,i){var n=hn(this,Xt(this,e),Xt(this,t));return i===!1?n:n.join(i||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},setLine:function(e,t){Kt(this,e)&&Bt(this,t,Wt(e,0),Xt(this,Wt(e)))},removeLine:function(e){e?Bt(this,"",Xt(this,Wt(e-1)),Xt(this,Wt(e))):Bt(this,"",Wt(0,0),Xt(this,Wt(1,0)))},getLineHandle:function(e){return Kt(this,e)?un(this,e):void 0},getLineNumber:function(e){return mn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Xt(this,e)},getCursor:function(e){var t,i=this.sel;return t=null==e||"head"==e?i.head:"anchor"==e?i.anchor:"end"==e||e===!1?i.to:i.from,Yt(t)},somethingSelected:function(){return!Ut(this.sel.head,this.sel.anchor)},setCursor:rt(function(e,t,i){var n=Xt(this,"number"==typeof e?Wt(e,t||0):e);i?Qt(this,n):Jt(this,n,n)}),setSelection:rt(function(e,t){Jt(this,Xt(this,e),Xt(this,t||e))}),extendSelection:rt(function(e,t){Qt(this,Xt(this,e),t&&Xt(this,t))}),getSelection:function(e){return this.getRange(this.sel.from,this.sel.to,e)},replaceSelection:function(e,t,i){Ot(this,{from:this.sel.from,to:this.sel.to,text:Nr(e),origin:i},t||"around")},undo:rt(function(){Rt(this,"undo")}),redo:rt(function(){Rt(this,"redo")}),setExtending:function(e){this.sel.extend=e},historySize:function(){var e=this.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.history=bn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Tn(this.history.done),undone:Tn(this.history.undone)}},setHistory:function(e){var t=this.history=bn(this.history.maxGeneration);t.done=e.done.slice(0),t.undone=e.undone.slice(0)},markText:function(e,t,i){return Ci(this,Xt(this,e),Xt(this,t),i,"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft};return e=Xt(this,e),Ci(this,e,e,i,"bookmark")},findMarksAt:function(e){e=Xt(this,e);var t=[],i=un(this,e.line).markedSpans;if(i)for(var n=0;n<i.length;++n){var o=i[n];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var n=0;n<i.length;++n)null!=i[n].from&&e.push(i[n].marker)}),e},posFromIndex:function(e){var t,i=this.first;return this.iter(function(n){var o=n.text.length+1;return o>e?(t=e,!0):(e-=o,++i,void 0)}),Xt(this,Wt(i,t))},indexFromPos:function(e){e=Xt(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new mr(fn(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var n=new mr(fn(this,t,i),e.mode||this.modeOption,t);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],n},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var i=0;i<this.linked.length;++i){var n=this.linked[i];if(n.doc==t){this.linked.splice(i,1),t.unlinkDoc(this);break}}if(t.history==this.history){var o=[t.id];cn(t,function(e){o.push(e.id)},!0),t.history=bn(),t.history.done=Tn(this.history.done,o),t.history.undone=Tn(this.history.undone,o)}},iterLinkedDocs:function(e){cn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),mr.prototype.eachLine=mr.prototype.iter;var gr="iter insert remove copy getEditor".split(" ");for(var vr in mr.prototype)mr.prototype.hasOwnProperty(vr)&&Gn(gr,vr)<0&&(e.prototype[vr]=function(e){return function(){return e.apply(this.doc,arguments)}}(mr.prototype[vr]));e.e_stop=Ln,e.e_preventDefault=Mn,e.e_stopPropagation=In;var yr,br=0;e.on=Hn,e.off=Rn,e.signal=Fn;var wr=30,_r=e.Pass={toString:function(){return"CodeMirror.Pass"}};Un.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},e.countColumn=qn;var xr=[""],Cr=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,kr=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;e.replaceGetRect=function(e){so=e};var Tr=function(){if(So)return!1;var e=io("div");return"draggable"in e||"dragDrop"in e}();Co?ao=function(e,t){return 36==e.charCodeAt(t-1)&&39==e.charCodeAt(t)}:Mo&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?ao=function(e,t){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(e.slice(t-1,t+1))}:Do&&(ao=function(e,t){return t>1&&45==e.charCodeAt(t-1)&&/\w/.test(e.charAt(t-2))&&/[^\-?\.]/.test(e.charAt(t))?!0:/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|…[\w~`@#$%\^&*(_=+{[><]/.test(e.slice(t-1,t+1))});var Sr,Dr,Nr=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],n=e.length;n>=t;){var o=e.indexOf("\n",t);-1==o&&(o=e.length);var r=e.slice(t,"\r"==e.charAt(o-1)?o-1:o),s=r.indexOf("\r");-1!=s?(i.push(r.slice(0,s)),t+=s+1):(i.push(r),t=o+1)}return i}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=Nr;var Er=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(i){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},$r=function(){var e=io("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Mr={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};e.keyNames=Mr,function(){for(var e=0;10>e;e++)Mr[e+48]=String(e);for(var e=65;90>=e;e++)Mr[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)Mr[e+111]=Mr[e+63235]="F"+e}();var Ir,Ar=function(){function e(e){return 255>=e?t.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1791>=e?i.charAt(e-1536):e>=1792&&2220>=e?"r":"L"}var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",i="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,r=/[LRr]/,s=/[Lb1n]/,a=/[1n]/,l="L";return function(t){if(!n.test(t))return!1;for(var i,c=t.length,d=[],u=0;c>u;++u)d.push(i=e(t.charCodeAt(u)));for(var u=0,h=l;c>u;++u){var i=d[u];"m"==i?d[u]=h:h=i}for(var u=0,f=l;c>u;++u){var i=d[u];"1"==i&&"r"==f?d[u]="n":r.test(i)&&(f=i,"r"==i&&(d[u]="R"))}for(var u=1,h=d[0];c-1>u;++u){var i=d[u];"+"==i&&"1"==h&&"1"==d[u+1]?d[u]="1":","!=i||h!=d[u+1]||"1"!=h&&"n"!=h||(d[u]=h),h=i}for(var u=0;c>u;++u){var i=d[u];if(","==i)d[u]="N";else if("%"==i){for(var p=u+1;c>p&&"%"==d[p];++p);for(var m=u&&"!"==d[u-1]||c-1>p&&"1"==d[p]?"1":"N",g=u;p>g;++g)d[g]=m;u=p-1}}for(var u=0,f=l;c>u;++u){var i=d[u];"L"==f&&"1"==i?d[u]="L":r.test(i)&&(f=i)}for(var u=0;c>u;++u)if(o.test(d[u])){for(var p=u+1;c>p&&o.test(d[p]);++p);for(var v="L"==(u?d[u-1]:l),y="L"==(c-1>p?d[p]:l),m=v||y?"L":"R",g=u;p>g;++g)d[g]=m;u=p-1}for(var b,w=[],u=0;c>u;)if(s.test(d[u])){var _=u;for(++u;c>u&&s.test(d[u]);++u);w.push({from:_,to:u,level:0})}else{var x=u,C=w.length;for(++u;c>u&&"L"!=d[u];++u);for(var g=x;u>g;)if(a.test(d[g])){g>x&&w.splice(C,0,{from:x,to:g,level:1});var k=g;for(++g;u>g&&a.test(d[g]);++g);w.splice(C,0,{from:k,to:g,level:2}),x=g}else++g;u>x&&w.splice(C,0,{from:x,to:u,level:1})}return 1==w[0].level&&(b=t.match(/^\s+/))&&(w[0].from=b[0].length,w.unshift({from:0,to:b[0].length,level:0})),1==Vn(w).level&&(b=t.match(/\s+$/))&&(Vn(w).to-=b[0].length,w.push({from:c-b[0].length,to:c,level:0})),w[0].level!=Vn(w).level&&w.push({from:c,to:c,level:w[0].level}),w}}();return e.version="3.14.0",e}(),CodeMirror.defineMode("python",function(e,t){function i(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function n(e,t){if(e.sol()){var i=t.scopes[0].offset;if(e.eatSpace()){var n=e.indentation();return n>i?C="indent":i>n&&(C="dedent"),null}i>0&&s(e,t)}if(e.eatSpace())return null;var r=e.peek();if("#"===r)return e.skipToEnd(),"comment";if(e.match(/^[0-9\.]/,!1)){var a=!1;if(e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(a=!0),e.match(/^\d+\.\d*/)&&(a=!0),e.match(/^\.\d+/)&&(a=!0),a)return e.eat(/J/i),"number";var g=!1;if(e.match(/^0x[0-9a-f]+/i)&&(g=!0),e.match(/^0b[01]+/i)&&(g=!0),e.match(/^0o[0-7]+/i)&&(g=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(e.eat(/J/i),g=!0),e.match(/^0(?![\dx])/i)&&(g=!0),g)return e.eat(/L/i),"number"}return e.match(w)?(t.tokenize=o(e.current()),t.tokenize(e,t)):e.match(f)||e.match(h)?null:e.match(u)||e.match(c)||e.match(m)?"operator":e.match(d)?null:e.match(_)?"keyword":e.match(x)?"builtin":e.match(p)?"variable":(e.next(),l)}function o(e){function i(i,s){for(;!i.eol();)if(i.eatWhile(/[^'"\\]/),i.eat("\\")){if(i.next(),o&&i.eol())return r}else{if(i.match(e))return s.tokenize=n,r;i.eat(/['"]/)}if(o){if(t.singleLineStringErrors)return l;s.tokenize=n}return r}for(;"rub".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var o=1==e.length,r="string";return i.isString=!0,i}function r(t,i,n){n=n||"py";var o=0;if("py"===n){if("py"!==i.scopes[0].type)return i.scopes[0].offset=t.indentation(),void 0;for(var r=0;r<i.scopes.length;++r)if("py"===i.scopes[r].type){o=i.scopes[r].offset+e.indentUnit;break}}else o=t.column()+t.current().length;i.scopes.unshift({offset:o,type:n})}function s(e,t,i){if(i=i||"py",1!=t.scopes.length){if("py"===t.scopes[0].type){for(var n=e.indentation(),o=-1,r=0;r<t.scopes.length;++r)if(n===t.scopes[r].offset){o=r;break}if(-1===o)return!0;for(;t.scopes[0].offset!==n;)t.scopes.shift();return!1}return"py"===i?(t.scopes[0].offset=e.indentation(),!1):t.scopes[0].type!=i?!0:(t.scopes.shift(),!1)}}function a(e,t){C=null;var i=t.tokenize(e,t),n=e.current();if("."===n)return i=e.match(p,!1)?null:l,null===i&&"meta"===t.lastToken&&(i="meta"),i;if("@"===n)return e.match(p,!1)?"meta":l;"variable"!==i&&"builtin"!==i||"meta"!==t.lastToken||(i="meta"),("pass"===n||"return"===n)&&(t.dedent+=1),"lambda"===n&&(t.lambda=!0),(":"===n&&!t.lambda&&"py"==t.scopes[0].type||"indent"===C)&&r(e,t);var o="[({".indexOf(n);return-1!==o&&r(e,t,"])}".slice(o,o+1)),"dedent"===C&&s(e,t)?l:(o="])}".indexOf(n),-1!==o&&s(e,t,n)?l:(t.dedent>0&&e.eol()&&"py"==t.scopes[0].type&&(t.scopes.length>1&&t.scopes.shift(),t.dedent-=1),i))}var l="error",c=t.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),d=t.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),u=t.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),h=t.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),f=t.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),p=t.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),m=i(["and","or","not","is","in"]),g=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],v=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],y={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},b={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};if(t.version&&3===parseInt(t.version,10)){g=g.concat(b.keywords),v=v.concat(b.builtins);var w=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{g=g.concat(y.keywords),v=v.concat(y.builtins);var w=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var _=i(g),x=i(v),C=null,k={startState:function(e){return{tokenize:n,scopes:[{offset:e||0,type:"py"}],lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var i=a(e,t);return t.lastToken=i,e.eol()&&e.lambda&&(t.lambda=!1),i},indent:function(e){return e.tokenize!=n?e.tokenize.isString?CodeMirror.Pass:0:e.scopes[0].offset},lineComment:"#"};return k}),CodeMirror.defineMIME("text/x-python","python"),CodeMirror.runMode=function(e,t,i,n){var o=CodeMirror.getMode(CodeMirror.defaults,t),r=/MSIE \d/.test(navigator.userAgent),s=r&&(null==document.documentMode||document.documentMode<9);if(1==i.nodeType){var a=n&&n.tabSize||CodeMirror.defaults.tabSize,l=i,c=0;l.innerHTML="",i=function(e,t){if("\n"==e)return l.appendChild(document.createTextNode(s?"\r":e)),c=0,void 0;for(var i="",n=0;;){var o=e.indexOf("	",n);if(-1==o){i+=e.slice(n),c+=e.length-n;break}c+=o-n,i+=e.slice(n,o);var r=a-c%a;c+=r;for(var d=0;r>d;++d)i+=" ";n=o+1}if(t){var u=l.appendChild(document.createElement("span"));u.className="cm-"+t.replace(/ +/g," cm-"),u.appendChild(document.createTextNode(i))}else l.appendChild(document.createTextNode(i))}}for(var d=CodeMirror.splitLines(e),u=CodeMirror.startState(o),h=0,f=d.length;f>h;++h){h&&i("\n");for(var p=new CodeMirror.StringStream(d[h]);!p.eol();){var m=o.token(p,u);i(p.current(),m,h,p.start),p.start=p.pos}}},function(){function e(e,t,i){function n(t,i,n){if(t.text){var s=h?0:t.text.length-1,l=h?t.text.length:-1;if(t.text.length>a)return null;for(null!=n&&(s=n+f);s!=l;s+=f){var c=t.text.charAt(s);if(v.test(c)&&e.getTokenTypeAt(o(i,s+1))==m){var d=r[c];if(">"==d.charAt(1)==h)g.push(c);else{if(g.pop()!=d.charAt(0))return{pos:s,match:!1};if(!g.length)return{pos:s,match:!0}}}}}}var s=e.state.matchBrackets,a=s&&s.maxScanLineLength||1e4,l=t||e.getCursor(),c=e.getLineHandle(l.line),d=l.ch-1,u=d>=0&&r[c.text.charAt(d)]||r[c.text.charAt(++d)];if(!u)return null;var h=">"==u.charAt(1),f=h?1:-1;if(i&&h!=(d==l.ch))return null;for(var p,m=e.getTokenTypeAt(o(l.line,d+1)),g=[c.text.charAt(d)],v=/[(){}[\]]/,y=l.line,b=h?Math.min(y+100,e.lineCount()):Math.max(-1,y-100);y!=b&&!(p=y==l.line?n(c,y,d):n(e.getLineHandle(y),y));y+=f);return{from:o(l.line,d),to:p&&o(y,p.pos),match:p&&p.match,forward:h}}function t(t,i){var r=t.state.matchBrackets.maxHighlightLineLength||1e3,s=e(t);if(!(!s||t.getLine(s.from.line).length>r||s.to&&t.getLine(s.to.line).length>r)){var a=s.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",l=t.markText(s.from,o(s.from.line,s.from.ch+1),{className:a}),c=s.to&&t.markText(s.to,o(s.to.line,s.to.ch+1),{className:a});n&&t.state.focused&&t.display.input.focus();var d=function(){t.operation(function(){l.clear(),c&&c.clear()})};return i?(setTimeout(d,800),void 0):d}}function i(e){e.operation(function(){s&&(s(),s=null),e.somethingSelected()||(s=t(e,!1))})}var n=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),o=CodeMirror.Pos,r={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},s=null;CodeMirror.defineOption("matchBrackets",!1,function(e,t,n){n&&n!=CodeMirror.Init&&e.off("cursorActivity",i),t&&(e.state.matchBrackets="object"==typeof t?t:{},e.on("cursorActivity",i))}),CodeMirror.defineExtension("matchBrackets",function(){t(this,!0)}),CodeMirror.defineExtension("findMatchingBracket",function(t,i){return e(this,t,i)})}(),function(e){function t(e,t){return function(i){return l(e.call(this,i),t)}}function i(e,t){return function(i){return this.lang().ordinal(e.call(this,i),t)}}function n(){}function o(e){s(this,e)}function r(e){var t=e.years||e.year||e.y||0,i=e.months||e.month||e.M||0,n=e.weeks||e.week||e.w||0,o=e.days||e.day||e.d||0,r=e.hours||e.hour||e.h||0,s=e.minutes||e.minute||e.m||0,a=e.seconds||e.second||e.s||0,l=e.milliseconds||e.millisecond||e.ms||0;this._input=e,this._milliseconds=+l+1e3*a+6e4*s+36e5*r,this._days=+o+7*n,this._months=+i+12*t,this._data={},this._bubble()}function s(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function a(e){return 0>e?Math.ceil(e):Math.floor(e)}function l(e,t){for(var i=e+"";i.length<t;)i="0"+i;return i}function c(e,t,i,n){var o,r,s=t._milliseconds,a=t._days,l=t._months;s&&e._d.setTime(+e._d+s*i),(a||l)&&(o=e.minute(),r=e.hour()),a&&e.date(e.date()+a*i),l&&e.month(e.month()+l*i),s&&!n&&H.updateOffset(e),(a||l)&&(e.minute(o),e.hour(r))}function d(e){return"[object Array]"===Object.prototype.toString.call(e)}function u(e,t){var i,n=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),r=0;for(i=0;n>i;i++)~~e[i]!==~~t[i]&&r++;return r+o}function h(e){return e?lt[e]||e.toLowerCase().replace(/(.)s$/,"$1"):e}function f(e,t){return t.abbr=e,z[e]||(z[e]=new n),z[e].set(t),z[e]}function p(e){delete z[e]}function m(e){if(!e)return H.fn._lang;if(!z[e]&&B)try{require("./lang/"+e)}catch(t){return H.fn._lang}return z[e]||H.fn._lang}function g(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function v(e){var t,i,n=e.match(q);for(t=0,i=n.length;i>t;t++)n[t]=ht[n[t]]?ht[n[t]]:g(n[t]);return function(o){var r="";for(t=0;i>t;t++)r+=n[t]instanceof Function?n[t].call(o,e):n[t];return r}}function y(e,t){return t=b(t,e.lang()),ct[t]||(ct[t]=v(t)),ct[t](e)}function b(e,t){function i(e){return t.longDateFormat(e)||e}for(var n=5;n--&&(Y.lastIndex=0,Y.test(e));)e=e.replace(Y,i);return e}function w(e,t){switch(e){case"DDDD":return G;case"YYYY":return K;case"YYYYY":return Q;case"S":case"SS":case"SSS":case"DDD":return X;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Z;case"a":case"A":return m(t._l)._meridiemParse;case"X":return tt;case"Z":case"ZZ":return J;case"T":return et;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return V;default:return new RegExp(e.replace("\\",""))}}function _(e){var t=(J.exec(e)||[])[0],i=(t+"").match(rt)||["-",0,0],n=+(60*i[1])+~~i[2];return"+"===i[0]?-n:n}function x(e,t,i){var n,o=i._a;switch(e){case"M":case"MM":null!=t&&(o[1]=~~t-1);break;case"MMM":case"MMMM":n=m(i._l).monthsParse(t),null!=n?o[1]=n:i._isValid=!1;break;case"D":case"DD":null!=t&&(o[2]=~~t);break;case"DDD":case"DDDD":null!=t&&(o[1]=0,o[2]=~~t);break;case"YY":o[0]=~~t+(~~t>68?1900:2e3);break;case"YYYY":case"YYYYY":o[0]=~~t;break;case"a":case"A":i._isPm=m(i._l).isPM(t);break;case"H":case"HH":case"h":case"hh":o[3]=~~t;break;case"m":case"mm":o[4]=~~t;break;case"s":case"ss":o[5]=~~t;break;case"S":case"SS":case"SSS":o[6]=~~(1e3*("0."+t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=_(t)}null==t&&(i._isValid=!1)
}function C(e){var t,i,n,o=[];if(!e._d){for(n=T(e),t=0;3>t&&null==e._a[t];++t)e._a[t]=o[t]=n[t];for(;7>t;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];o[3]+=~~((e._tzm||0)/60),o[4]+=~~((e._tzm||0)%60),i=new Date(0),e._useUTC?(i.setUTCFullYear(o[0],o[1],o[2]),i.setUTCHours(o[3],o[4],o[5],o[6])):(i.setFullYear(o[0],o[1],o[2]),i.setHours(o[3],o[4],o[5],o[6])),e._d=i}}function k(e){var t=e._i;e._d||(e._a=[t.years||t.year||t.y,t.months||t.month||t.M,t.days||t.day||t.d,t.hours||t.hour||t.h,t.minutes||t.minute||t.m,t.seconds||t.second||t.s,t.milliseconds||t.millisecond||t.ms],C(e))}function T(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function S(e){var t,i,n,o=m(e._l),r=""+e._i;for(n=b(e._f,o).match(q),e._a=[],t=0;t<n.length;t++)i=(w(n[t],e).exec(r)||[])[0],i&&(r=r.slice(r.indexOf(i)+i.length)),ht[n[t]]&&x(n[t],i,e);r&&(e._il=r),e._isPm&&e._a[3]<12&&(e._a[3]+=12),e._isPm===!1&&12===e._a[3]&&(e._a[3]=0),C(e)}function D(e){var t,i,n,r,a,l=99;for(r=0;r<e._f.length;r++)t=s({},e),t._f=e._f[r],S(t),i=new o(t),a=u(t._a,i.toArray()),i._il&&(a+=i._il.length),l>a&&(l=a,n=i);s(e,n)}function N(e){var t,i=e._i,n=it.exec(i);if(n){for(e._f="YYYY-MM-DD"+(n[2]||" "),t=0;4>t;t++)if(ot[t][1].exec(i)){e._f+=ot[t][0];break}J.exec(i)&&(e._f+=" Z"),S(e)}else e._d=new Date(i)}function E(t){var i=t._i,n=W.exec(i);i===e?t._d=new Date:n?t._d=new Date(+n[1]):"string"==typeof i?N(t):d(i)?(t._a=i.slice(0),C(t)):i instanceof Date?t._d=new Date(+i):"object"==typeof i?k(t):t._d=new Date(i)}function $(e,t,i,n,o){return o.relativeTime(t||1,!!i,e,n)}function M(e,t,i){var n=j(Math.abs(e)/1e3),o=j(n/60),r=j(o/60),s=j(r/24),a=j(s/365),l=45>n&&["s",n]||1===o&&["m"]||45>o&&["mm",o]||1===r&&["h"]||22>r&&["hh",r]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",j(s/30)]||1===a&&["y"]||["yy",a];return l[2]=t,l[3]=e>0,l[4]=i,$.apply({},l)}function I(e,t,i){var n,o=i-t,r=i-e.day();return r>o&&(r-=7),o-7>r&&(r+=7),n=H(e).add("d",r),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function A(e){var t=e._i,i=e._f;return null===t||""===t?null:("string"==typeof t&&(e._i=t=m().preparse(t)),H.isMoment(t)?(e=s({},t),e._d=new Date(+t._d)):i?d(i)?D(e):S(e):E(e),new o(e))}function L(e,t){H.fn[e]=H.fn[e+"s"]=function(e){var i=this._isUTC?"UTC":"";return null!=e?(this._d["set"+i+t](e),H.updateOffset(this),this):this._d["get"+i+t]()}}function P(e){H.duration.fn[e]=function(){return this._data[e]}}function O(e,t){H.duration.fn["as"+e]=function(){return+this/t}}for(var H,R,F="2.2.1",j=Math.round,z={},B="undefined"!=typeof module&&module.exports,W=/^\/?Date\((\-?\d+)/i,U=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,q=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,Y=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,V=/\d\d?/,X=/\d{1,3}/,G=/\d{3}/,K=/\d{1,4}/,Q=/[+\-]?\d{1,6}/,Z=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,J=/Z|[\+\-]\d\d:?\d\d/i,et=/T/i,tt=/[\+\-]?\d+(\.\d{1,3})?/,it=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,nt="YYYY-MM-DDTHH:mm:ssZ",ot=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],rt=/([\+\-]|\d\d)/gi,st="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),at={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},lt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",W:"isoweek",M:"month",y:"year"},ct={},dt="DDD w W M D d".split(" "),ut="M D H h m s w W".split(" "),ht={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return l(~~(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(~~(e/60),2)+":"+l(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(~~(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};dt.length;)R=dt.pop(),ht[R+"o"]=i(ht[R],R);for(;ut.length;)R=ut.pop(),ht[R+R]=t(ht[R],2);for(ht.DDDD=t(ht.DDD,3),s(n.prototype,{set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,i,n;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(i=H.utc([2e3,t]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=H([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var i=this._calendar[e];return"function"==typeof i?i.apply(t):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(e,t,i,n):o.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return I(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}}),H=function(e,t,i){return A({_i:e,_f:t,_l:i,_isUTC:!1})},H.utc=function(e,t,i){return A({_useUTC:!0,_isUTC:!0,_l:i,_i:e,_f:t}).utc()},H.unix=function(e){return H(1e3*e)},H.duration=function(e,t){var i,n,o=H.isDuration(e),s="number"==typeof e,a=o?e._input:s?{}:e,l=U.exec(e);return s?t?a[t]=e:a.milliseconds=e:l&&(i="-"===l[1]?-1:1,a={y:0,d:~~l[2]*i,h:~~l[3]*i,m:~~l[4]*i,s:~~l[5]*i,ms:~~l[6]*i}),n=new r(a),o&&e.hasOwnProperty("_lang")&&(n._lang=e._lang),n},H.version=F,H.defaultFormat=nt,H.updateOffset=function(){},H.lang=function(e,t){return e?(e=e.toLowerCase(),e=e.replace("_","-"),t?f(e,t):null===t?(p(e),e="en"):z[e]||m(e),H.duration.fn._lang=H.fn._lang=m(e),void 0):H.fn._lang._abbr},H.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),m(e)},H.isMoment=function(e){return e instanceof o},H.isDuration=function(e){return e instanceof r},s(H.fn=o.prototype,{clone:function(){return H(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return y(H(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!u(this._a,(this._isUTC?H.utc(this._a):H(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},invalidAt:function(){var e,t=this._a,i=(this._isUTC?H.utc(this._a):H(this._a)).toArray();for(e=6;e>=0&&t[e]===i[e];--e);return e},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=y(this,e||H.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var i;return i="string"==typeof e?H.duration(+t,e):H.duration(e,t),c(this,i,1),this},subtract:function(e,t){var i;return i="string"==typeof e?H.duration(+t,e):H.duration(e,t),c(this,i,-1),this},diff:function(e,t,i){var n,o,r=this._isUTC?H(e).zone(this._offset||0):H(e).local(),s=6e4*(this.zone()-r.zone());return t=h(t),"year"===t||"month"===t?(n=432e5*(this.daysInMonth()+r.daysInMonth()),o=12*(this.year()-r.year())+(this.month()-r.month()),o+=(this-H(this).startOf("month")-(r-H(r).startOf("month")))/n,o-=6e4*(this.zone()-H(this).startOf("month").zone()-(r.zone()-H(r).startOf("month").zone()))/n,"year"===t&&(o/=12)):(n=this-r,o="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-s)/864e5:"week"===t?(n-s)/6048e5:n),i?o:a(o)},from:function(e,t){return H.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(H(),e)},calendar:function(){var e=this.diff(H().zone(this.zone()).startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){var e=this.year();return 0===e%4&&0!==e%100||0===e%400},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?"string"==typeof e&&(e=this.lang().weekdaysParse(e),"number"!=typeof e)?this:this.add({d:e-t}):t},month:function(e){var t,i=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+i+"Month"](e),this.date(Math.min(t,this.daysInMonth())),H.updateOffset(this),this):this._d["get"+i+"Month"]()},startOf:function(e){switch(e=h(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoweek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoweek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=h(e),this.startOf(e).add("isoweek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+H(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+H(e).startOf(t)},isSame:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)===+H(e).startOf(t)},min:function(e){return e=H.apply(null,arguments),this>e?this:e},max:function(e){return e=H.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=_(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&c(this,H.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},hasAlignedHourOffset:function(e){return e=e?H(e).zone():0,0===(this.zone()-e)%60},daysInMonth:function(){return H.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(e){var t=j((H(this).startOf("day")-H(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},weekYear:function(e){var t=I(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=I(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=I(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=h(e),this[e.toLowerCase()]()},set:function(e,t){e=h(e),this[e.toLowerCase()](t)},lang:function(t){return t===e?this._lang:(this._lang=m(t),this)}}),R=0;R<st.length;R++)L(st[R].toLowerCase().replace(/s$/,""),st[R]);L("year","FullYear"),H.fn.days=H.fn.day,H.fn.months=H.fn.month,H.fn.weeks=H.fn.week,H.fn.isoWeeks=H.fn.isoWeek,H.fn.toJSON=H.fn.toISOString,s(H.duration.fn=r.prototype,{_bubble:function(){var e,t,i,n,o=this._milliseconds,r=this._days,s=this._months,l=this._data;l.milliseconds=o%1e3,e=a(o/1e3),l.seconds=e%60,t=a(e/60),l.minutes=t%60,i=a(t/60),l.hours=i%24,r+=a(i/24),l.days=r%30,s+=a(r/30),l.months=s%12,n=a(s/12),l.years=n},weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*~~(this._months/12)},humanize:function(e){var t=+this,i=M(t,!e,this.lang());return e&&(i=this.lang().pastFuture(t,i)),this.lang().postformat(i)},add:function(e,t){var i=H.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=H.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=h(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=h(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:H.fn.lang});for(R in at)at.hasOwnProperty(R)&&(O(R,at[R]),P(R.toLowerCase()));O("Weeks",6048e5),H.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},H.lang("en",{ordinal:function(e){var t=e%10,i=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),B&&(module.exports=H),"undefined"==typeof ender&&(this.moment=H),"function"==typeof define&&define.amd&&define("moment",[],function(){return H})}.call(this),$(document).ready(function(){!function(){function e(e){var t=$(this),n=t.data("datetimepickerDefault");t.data("datetimepickerDefault",e),n||t.on("show",function(){var e=t.data("datetimepicker"),n=t.data("datetimepickerDefault");t.val()||(i>n||n>i)&&(e.setDate(n),e.setDate(null))})}var t=$(".datepicker, .datetimepicker");$(".datetimepicker").datetimepicker({format:"dd-MM-yyyy hh:mm",language:"en-US",collapse:!1,pickSeconds:!1,maskInput:!0}),$(".datepicker").datetimepicker({format:"dd-MM-yyyy",language:"en-US",pickTime:!1,collapse:!1,maskInput:!0});var i=new Date,n=moment().add("d",1).startOf("day").toDate(),o=moment().subtract("d",1).endOf("day").toDate();$(".datetimepicker.future-only:not(.past-only)").datetimepicker("setStartDate",i).each(function(){e.call(this,i)}),$(".datepicker.future-only:not(.past-only)").datetimepicker("setStartDate",n).each(function(){e.call(this,n)}),$(".datetimepicker.past-only:not(.future-only)").datetimepicker("setEndDate",i).each(function(){e.call(this,i)}),$(".datepicker.past-only:not(.future-only)").datetimepicker("setEndDate",o).each(function(){e.call(this,o)}),t.each(function(){var t=$(this);if(t.data("dateEnddate")){var i=moment(t.data("dateEnddate")).toDate();t.datetimepicker("setEndDate",i),e.call(this,i)}if(t.data("dateStartdate")){var i=moment(t.data("dateStartdate")).toDate();t.datetimepicker("setStartDate",i),e.call(this,i)}var n=t.data("datetimepicker").format,o=$("input",this);o.attr("placeholder")||o.attr("placeholder",n)})}(),$("*[rel=tooltip]").tooltip(),$(".colorpicker").colorpicker(),$(".selectpicker").selectpicker(),$(".delete-button").each(function(e,t){var i=$(t),n=i.parent(),o=i.siblings(".delete-confirm-button");o.data("sibling",i),i.data("sibling",o),o.hide(),o.detach(),i.detach(),i.insertBefore(n),n.remove()}),$(".delete-button").click(function(e){var t=$(this);t.parent();var i=t.data("sibling");t.hide(),i.insertBefore(t),t.detach(),i.fadeIn(),setTimeout(function(){i.hide(),t.insertBefore(i),i.detach(),t.fadeIn()},2e3),e.preventDefault(),e.stopPropagation()}),$(".btn-hover-text").hover(function(){var e=$(this);e.text(e.data("alt"))},function(){var e=$(this);e.text(e.data("original"))}),$(function(){$(".jfdiCode").each(_jfdiFormatFunc)}),$(function(){page_header=$(".page-header h1"),page_header.size()<=0||(page_name=page_header[0].innerHTML.replace(/\s/g,"-"),!page_name||page_name.indexOf("!")>0||page_name.indexOf(":")>0||(badge_count=$("#"+page_name+"_count"),badge_count.size()<=0||(new_items_seen=$(".new_"+page_name).size(),set_badge=$("#badge_"+page_name),new_items_seen>0&&set_badge.size()>0&&(update_count=badge_count.val()-new_items_seen,update_count>0?set_badge[0].innerHTML=update_count:set_badge.addClass("hidden")))))}),$(":input[type=number]").live("mousewheel",function(){$(this).blur()}),$(".control-group label.error, .control-group div.error").each(function(e,t){$(t).parents(".control-group").addClass("error")}),$("div.error + span.add-on").each(function(e,t){var i=$(t),n=$("input",i.parent());i.detach().insertAfter(n)}),$("body").on("click","a.btn.disabled, a.btn[disabled]",function(e){e.preventDefault()})}),jQuery.fn.extend({validatr:function(e){function t(e,t){var i=e.parents(".control-group");i.addClass("error");var n=$(".help-inline",i);0===n.length&&(n=$('<span class="help-inline"></span>'),n.appendTo(e.parent())),n.text(t)}function i(e){var t=e.parents(".control-group");t.removeClass("error"),$(".help-inline",t).remove()}function n(e){return function(){function n(e){e?"object"==typeof e&&"function"==typeof e.promise?e.done(function(e){n(e)}):("string"==typeof e&&(e=[e]),t(r,e)):i(r)}var o=e.apply(this,arguments),r=$(this);n(o)}}function o(e){$(".error",this).length>0&&e.preventDefault()}for(var r=0;r<e.length;++r){var s=e[r],a=s[0];"string"==typeof a&&(a=$(a,this));var l=n(s[1]);a.change(l),a.on("changeDate",l)}$(this).submit(o),$('input[type="submit"]',this).click(function(){o.apply($(this).parents("form")[0],arguments)})}}),String.prototype.nl2br=function(){return(this+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")},$(document).ready(function(){$(".add-ach-req").click(function(e){e.preventDefault();var t=$(this).parents("tr"),i=t.find("select :selected"),n=i.val(),o=$(this).attr("href"),r={type:"Achievement",ach_id:n};$.ajax({url:o,type:"POST",data:r,dataType:"html",success:function(e){t.before(e),i.detach(),i.prop("selected",!1),t.find("select").append(i)}})}),$(".add-asm-req").click(function(e){e.preventDefault();var t=$(this).parents("tr"),i=t.find("input.asm-min-grade-input").val(),n=t.find("select :selected"),o=n.attr("data-type"),r=n.val(),s=$(this).attr("href"),a={type:"AsmReq",asm_id:r,asm_type:o,min_grade:i};$.ajax({url:s,type:"POST",data:a,dataType:"html",success:function(e){t.before(e),n.detach(),n.prop("selected",!1),t.find("select").append(n)}})}),$(".add-lvl-req").click(function(e){e.preventDefault();var t=$(this).parents("tr"),i=t.find("select :selected"),n=i.val(),o=$(this).attr("href"),r={type:"Level",lvl_id:n};$.ajax({url:o,type:"POST",data:r,dataType:"html",success:function(e){t.before(e),i.detach(),i.prop("selected",!1),t.find("select").append(i)}})}),$(document).on("click",".remove-req",function(e){e.preventDefault(),$(this).parents("tr").remove()})}),$(document).ready(function(){$(".update-user-role").on("click",function(e){e.preventDefault();var t=$(this).parents("tr"),i=t.find("#select-role_").val(),n=t.find(".user-id").val(),o=t.find(".user-role-update-path").val(),r=$(".alert");$.ajax({url:o,type:"PUT",data:{id:n,user:{system_role_id:i}},dataType:"json",success:function(){r.slideDown(),r._removeClass("hidden"),r.slideDown(function(){setTimeout(function(){r.slideUp()},1500)})}})}),$(".update-course-owner").on("click",function(e){e.preventDefault();var t=$(this).parents("tr"),i=t.find("#select-owner_").val();t.find(".course-id").val();var n=t.find(".course-owner-update-path").val(),o=$(".alert");$.ajax({url:n,type:"PUT",data:{course_owner:i},dataType:"json",success:function(e){o.html("Update successful, "+e.owner+" is now owner of "+e.course.title),o.slideDown(),o._removeClass("hidden"),setTimeout(function(){o.slideUp()},8e3)}})})}),function(){}.call(this),CodeViewer.prototype={fullScreen:function(){this.wrapper.wrap('<div id="wrapper-container'+this.code_id+'" />'),$newWrapper=this.wrapper.addClass("fullscreen").appendTo(document.body),this.output.data("oheight",this.output.height()),this.output.height()<this.wrapper.height()&&this.output.height(this.wrapper.height()+"px");var e,t=this;$(document.body).addClass("fullscreen").keydown(e=function(i){var n=i.which||i.keyCode;27==n&&(t.unfullScreen(),$(this).unbind("keydown",e))});var i=$newWrapper.find(".static-code").find("div.source").offset().top;this.fullScreenOffset=this.topOffset-i,this.topOffset=i,this.bottomOffset=this.topOffset+$newWrapper.height(),this.checkScroll()},unfullScreen:function(){this.wrapper.hasClass("fullscreen")&&(this.wrapper.appendTo($("#wrapper-container"+this.code_id)).removeClass("fullscreen"),this.output.height(this.output.data("oheight")),this.topOffset=this.output.find("div.source").offset().top,this.bottomOffset=this.topOffset+this.wrapper.height(),this.fullScreenOffset=!1,$(document.body).removeClass("fullscreen"),$(document).scrollTop(this.topOffset-40),this.checkScroll())},hideAnnotation:function(){this.hideAnnotate=!0,$("."+this.cb_class).hide()},showAnnotation:function(){this.hideAnnotate=!1,this.checkScroll(),$("#toggle-comment-"+this.code_id).removeClass("hide")},selectAll:function(){if(document.selection){var e=document.body.createTextRange();e.moveToElementText(this.output.find(".source").get(0)),e.select()}else if(window.getSelection){var e=document.createRange();e.selectNode(this.output.find(".source").get(0)),window.getSelection().addRange(e)}}};var path=function(){function addslashes(e){return(e+"").replace(/[\"]/g,"&quot;")}function _appendTest(e,t,i,n){$("#"+e+"_test_tbody").append('<tr testNo="'+t+'">'+'<td><input type="text" value="'+addslashes(i)+'" onchange="path.updateTest(\''+e+"', this.parentNode.parentNode.getAttribute('testNo'), 'expression', this.value)\" /></td>"+'<td><input type="text" value="'+addslashes(n)+'" onchange="path.updateTest(\''+e+"', this.parentNode.parentNode.getAttribute('testNo'), 'expected', this.value)\" /></td>"+'<td><a  title="Delete this test" class = "btn btn-danger" onclick="path.deleteTest(this.parentNode.parentNode, \''+e+'\')"><i class="icon-trash"></i></a></td></tr>')}function _newTest(){return{expected:"",expression:""}}var saving=!1,cStep=null;return{data:{type:"do",language:"python",timeLimitInSec:"1",memoryLimitInMB:"2",testLimit:"3",included:"",prefill:"",privateTests:new Array,publicTests:new Array,evalTests:new Array},savePath:function(){saving=!0,$("#coding_question_data").val(JSON.stringify(path.data))},initialize:function(){$("#savePath").click(path.savePath),cStep=path.data,""!=$("#coding_question_data").val()&&(path.data=JSON.parse($("#coding_question_data").val()),path.loadStep())},changeLang:function(e){cStep.language=e,cmPrefill.setOption("mode",e),cmIncluded.setOption("mode",e)},changePrefill:function(e){cStep.prefill=e},changeIncluded:function(e){cStep.included=e},changeMemoryLimit:function(e){cStep.memoryLimitInMB=e},changeTimeLimit:function(e){cStep.timeLimitInSec=e},changeTestLimit:function(e){cStep.testLimit=e},addTest:function(e){var t=null,i=cStep;"public"==e?(i.publicTests.push(_newTest()),t=i.publicTests.length):"private"==e?(i.privateTests.push(_newTest()),t=i.privateTests.length):(i.evalTests.push(_newTest()),t=i.evalTests.length),_appendTest(e,t,"","")},updateTest:function(testType,testCount,expr,value){testCount--,eval("cStep."+testType+"Tests["+testCount+"]."+expr+" = value")},deleteTest:function(testDiv,testType){var i=$(testDiv).attr("testNo");$(testDiv).remove(),eval("cStep."+testType+"Tests.splice(i-1,1)"),$("#"+testType+"_test_tbody").children().each(function(e,t){$(t).attr("testNo",e+1)})},loadStep:function(){cStep=path.data,$("#timeLimit").attr("value",cStep.timeLimitInSec),$("#memoryLimit").attr("value",cStep.memoryLimitInMB),$("#testLimit").val(cStep.testLimit),$("#public_test_tbody").html(""),$("#private_test_tbody").html(""),$("#eval_test_tbody").html("");for(var e=0;e<cStep.privateTests.length;e++)_appendTest("private",e+1,cStep.privateTests[e].expression,cStep.privateTests[e].expected);for(var e=0;e<cStep.publicTests.length;e++)_appendTest("public",e+1,cStep.publicTests[e].expression,cStep.publicTests[e].expected);for(var e=0;e<cStep.evalTests.length;e++)_appendTest("eval",e+1,cStep.evalTests[e].expression,cStep.publicTests[e].expected);cmPrefill.setValue(cStep.prefill),null==cStep.included&&(cStep.included=""),cmIncluded.setValue(cStep.included)}}}(),cmPrefill,cmIncluded;$(document).ready(function(){if(document.getElementById("pathstep_content")){var e={mode:{name:"python",version:3,singleLineStringErrors:!1},lineNumbers:!0,indentUnit:4,tabMode:"shift",matchBrackets:!0,theme:"molokai"};cmPrefill=CodeMirror.fromTextArea(document.getElementById("prefilled"),e),cmIncluded=CodeMirror.fromTextArea(document.getElementById("included"),e),cmPrefill.on("change",function(){path.changePrefill(cmPrefill.getValue())}),cmIncluded.on("change",function(){path.changeIncluded(cmIncluded.getValue())}),path.initialize()}});var Comment=function(){var e={},t={};return e.makeComment=function(e){var t=$('<li class="comment"/>');t.append('<img class="small-profile-pic" src="'+e.p+'" width="32" height="32" />');var i=$('<div class="comment-text-container">');return i.append('<div class="commentor">'+e.u+"</div>").append('<div class="comment">'+e.c.nl2br()+"</div>").append('<div class="timestamp">'+e.t+"</div>").appendTo(t),t},e.makeEditableComment=function(t,i){var n=$('<li class="comment"/>');n.append('<img class="small-profile-pic" src="'+t.p+'" width="32" height="32" />');var o=$('<div class="comment-text-container">'),r=$('<input class="comment-obj" type="hidden" o="" c="" cid="" author="" >');r.attr("o",t.o),r.attr("c",t.c),r.attr("cid",t.id),r.attr("author",t.name);var s=$('<a href="#" class="comment-edit-link" rel="tooltip" data-original-title="Edit Comment"><i class="icon-pencil"></i></a>').click(function(t){t.preventDefault(),e.edit_comment(n,i)}),a=$('<a href="#" class="comment-del-link"  rel="tooltip" data-original-title="Delete Comment"><i class="icon-trash"></i></a>').click(function(t){t.preventDefault(),e.del_comment(n,i)});return o.append($('<div class="pull-right comment-edit">').append(s).append(a)).append('<div class="commentor">'+t.u+"</div>").append('<div class="comment">'+t.c.nl2br()+"</div>").append('<div class="timestamp">'+t.t+"</div>").append(r).appendTo(n),n},e.edit_comment=function(t,i){$edit=t.find(".comment-edit-link"),$del=t.find(".comment-del-link"),$obj=t.find(".comment-obj"),original=$obj.attr("o"),id=$obj.attr("cid");var n=t.find(".annotate-box");comment=t.find(".comment"),0==n.size()?(n=$('<textarea class="annotate-box" style="margin-bottom: 9px; display: none" />'),n.val(original),comment.empty().append(n),n.show("slow"),$edit.attr("data-original-title","Save Comment"),$edit.empty().append('<i class="icon-ok"></i>'),$del.empty().append('<i class="icon-remove"></i>'),$del.attr("data-original-title","Cancel Edit"),$del.unbind("click"),$del.bind("click",function(n){n.preventDefault(),e.quit_comment_edit(t,i)})):$.ajax({url:$("#"+i+"_post_path").val()+"/"+id,type:"PUT",dataType:"json",data:{text:n.val()},success:function(n){$obj.attr("o",n.o),$obj.attr("c",n.c),e.quit_comment_edit(t,i)}})},e.quit_comment_edit=function(t,i){$edit=t.find(".comment-edit-link"),$del=t.find(".comment-del-link");var n=t.find(".annotate-box");comment=t.find(".comment"),n.size()>0&&(console.log(t.find(".comment-obj").attr("c")),n.hide("slow",function(){comment.empty(),comment.html(t.find(".comment-obj").attr("c").nl2br())}),$edit.attr("data-original-title","Edit Comment"),$edit.empty().append('<i class="icon-pencil"></i>'),$del.empty().append('<i class="icon-trash"></i>'),$del.attr("data-original-title","Delete Comment"),$del.unbind("click"),$del.bind("click",function(n){n.preventDefault(),e.del_comment(t,i)}))},e.del_comment=function(e,t){$obj=e.find(".comment-obj"),confirm("TO DELETE: \n\n"+$obj.attr("o")+"\n\nBY: "+$obj.attr("author"))&&$.ajax({url:$("#"+t+"_post_path").val()+"/"+$obj.attr("cid"),type:"DELETE",dataType:"json",success:function(){e.hide("slow",function(){e.remove()})}})},e.makeHiddenBox=function(t,i){var n=$('<li class="hidden"/>');return $a=$('<a cnt="'+t+'" class="hidden" href="#">'+t+" other comments hidden</a>").appendTo(n).one("click",function(){$.post($("#"+i+"_post_path").val()+"/get_comments",{origin:$("#submission_url_"+i).val(),comment:{topic_id:$("#"+i+"_commentable_id").val(),topic_type:$("#"+i+"_commentable_type").val()},brief:!0},function(t){e.parseComment(t,i)})}).click(function(){return!1}),n},e.makeTextarea=function(t){var i=t.attr("ecid"),n=$('<li class="textarea" />');n.append('<textarea class="annotate-box" style="margin-bottom: 9px" />');var o=$('<a href="#" class="btn">Comment</a>').click(function(t){t.preventDefault();var n=$(this).parent().find("textarea");if("disabled"==n.attr("disabled"))return!1;var o=n.val().trim();""==o?n.focus():(n.attr("disabled","disabled"),$.post($("#"+i+"_post_path").val(),{origin:$("#submission_url_"+i).val(),comment:{commentable_id:$("#"+i+"_commentable_id").val(),commentable_type:$("#"+i+"_commentable_type").val(),text:o}},function(t){n.attr("disabled",!1).val("").focus(),e.parseComment(t,i)}))});return o.appendTo(n),n},e.parseComment=function(i,n){for(var o=$('.code-comment-box[ecid="'+n+'"]'),r=!1,s=!1,a=0;a<i.length&&!r;++a)r=r||"undefined"!=typeof i[a].h;!r&&o.data("hasHidden")&&(o.find("li.comment,li.hidden").remove().data("hasHidden",!1),s=!0);for(var a=0;a<i.length;++a){var l;("undefined"==typeof i[a].id||s||"undefined"==typeof t[i[a].id])&&(t[i[a].id]=!0,("undefined"==typeof i[a].s||-1==i[a].s)&&("undefined"!=typeof i[a].h?(l=e.makeHiddenBox(i[a].h,n),o.data("hasHidden",!0)):l=i[a].edit?e.makeEditableComment(i[a],n):e.makeComment(i[a]),o.data("hasComment")?l.insertBefore(o.data("hasComment")):(console.log("appending"),l.appendTo(o)),l.find(".comment").size()&&jfdiFormat(l.find(".comment").get(0))))}},e.init=function(t,i,n){var o=$('.code-comment-box[ecid="'+t+'"]');if("undefined"!=typeof i&&i){var r=e.makeTextarea(o);o.append(r).data("hasComment",r)}},e}();$(function(){$(".mission-pending a").click(function(){var e=$(this);return $.post($("#comments_togging_path").val(),{cid:$(this).attr("cid")},function(){"Mark as pending"==e.text().trim()?e.text("Unmark as pending"):e.text("Mark as pending")}),!1})}),$(document).ready(function(){function e(){t=$("#attempting-add-student").val(),n.indexOf(t)<0?(o.hasClass("disabled")||o.attr("disabled",!0),r.attr("disabled",!1)):(o.attr("disabled",!1),r.hasClass("disabled")||r.attr("disabled",!0))}var t,i,n=Array.prototype.map.call($("#dg-std-table").find("a"),function(e){return e.id
}),o=$("#mng-del-std-btn"),r=$("#mng-add-std-btn");$("#assigned-std").size()>0&&(i=$("#assigned-std").val().replace("[","").replace("]","").split(", ")),e(),r.click(function(){i.indexOf(t)>=0&&confirm("That student has already been assigned to a tutor! Are you sure you want to add him/her? \n\nTHIS WON'T REMOVE HIM/HER FROM THE CURRENT TUTOR.")}),$(document).on("change","#attempting-add-student",function(){e()})}),function(){}.call(this),$(document).ready(function(){$("#delete-course-btn").click(function(e){e.preventDefault();var t=confirm("Are you sure you want to delete this Course? You will not be able to recover its data!");t&&$("#delete-course-link").click()})}),$(document).ready(function(){function e(e,t){"use strict";var i;i=$("<form />",{action:e,method:"POST",style:"display: none;"}),"undefined"!=typeof t&&$.each(t,function(e,t){$.isArray(t)?$(t).each(function(n){$("<input />",{type:"hidden",name:e+"[]",value:t[n]}).appendTo(i)}):$("<input />",{type:"hidden",name:e,value:t}).appendTo(i)}),console.log(i),i.appendTo("body").submit()}$(".check-all").change(function(){var e=$(this).prop("checked"),t=$(this).attr("data-target");$(t).prop("checked",e),console.log(e),console.log(t)}),$(".update-selected").click(function(t){t.preventDefault();var i=$(this).attr("href");console.log(i);var n=$(this).attr("data-target"),o=$.grep($(n),function(e){return $(e).prop("checked")}),r=$.map(o,function(e){return $(e).val()}),s=$("meta[name='csrf-param']").attr("content"),a=$("meta[name='csrf-token']").attr("content"),l={};l[s]=a,l.ids=r,e(i,l)})}),function(){}.call(this),$(document).ready(function(){var e="";$(".file-uploader-trigger").click(function(){e=$(this).attr("data-target"),$("#file-upload-form").fileupload({acceptFileTypes:new RegExp($(this).attr("data-accepts-filetypes")||".*","i")});var t=$(this).attr("href");return $(t).modal("show"),!1}),$("#file-upload-form").fileupload({maxFileSize:5e7,autoUpload:!0,dropZone:$("#dropzone"),dataType:"json",url:$("#file-upload-form").attr("action"),formData:[{name:"_method",value:"POST "},{name:"_page_name",value:$("#page_name").val()}],done:function(t,i){$(e+"-input").attr("value",void 0===typeof i.result.id?i.result.url:i.result.id),$(e+"-done").css("display","block"),$(".file-uploader-insert-btn").click()}}),$(document).bind("dragover",function(e){var t=$("#dropzone"),i=window.dropZoneTimeout;i?clearTimeout(i):t.addClass("in"),e.target===t[0]?t.addClass("hover"):t.removeClass("hover"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,t.removeClass("in hover")},100)}),$(document).bind("drop dragover",function(e){e.preventDefault()})}),$(document).ready(function(){$(document).on("click",".form-submit",function(){$(".form-temp").remove()})}),$(function(){function e(e,t){return e.indexOf("?")<0?e+"?"+t:e+"&"+t}$(".view-post-btn").click(function(){var t=this;if($(t).data("loaded")||$.ajax({url:e($(t).closest("tr").find(".post-count-link").attr("href"),"raw=1&limit=10"),cache:!1,success:function(e){$(t).closest("tr").next().find(".post-details").html(e),$(t).data("loaded",!0)}}),$container=$(t).closest("tr").next(),$(".post-details-container").not($container).hide(),$(".view-post-btn").not(this).data("opened",!1).text("View"),$container.fadeToggle(),$(this).data("opened"))$(this).data("opened",!1).text("View");else{$(this).data("opened",!0).text("Hide");var i=$(this).offset().top-50;$("html, body").animate({scrollTop:i},200)}})}),$(document).ready(function(){"use strict";function e(e){return/re:/i.test(e)?e:"RE: "+e}$(".forum .btn.reply").click(function(t){var i=parseInt($(this).data("postId")),n=e($(this).data("postTitle")),o=$(".forum .quick-reply");$("#forum_post_title",o).val(n),$("#forum_post_parent_id",o).val(i);var r=$(".forum div#post-"+i);o.hide(),o.detach(),o.appendTo($("div.contents",r)),o.slideDown(),$("html, body").animate({scrollTop:o.offset().top},500),t.preventDefault()})}),function(e){"use strict";function t(t){var i=this.state(t);if(i)t.selection.executeAndRestore(function(){var t=i.querySelector("code");e.dom.replaceWithChildNodes(i),t&&e.dom.replaceWithChildNodes(i)});else{var n=t.selection.getRange();if(!n)return!1;var o=n.extractContents(),r=t.doc.createElement("code");r.appendChild(o),r.className="jfdiCode",n.insertNode(r),t.selection.selectNode(r)}}function i(t){var i=t.selection.getSelectedNode();return e.dom.getParentElement(i,{nodeName:"CODE"})}e.commands.createCode={exec:t,state:i}}(wysihtml5),$(document).ready(function(){var e=$("#html-editor-image-upload-tab").html(),t=$.extend(!0,{},$.fn.wysihtml5.defaultOptions);t.toolbar={code:'<li><div class="btn-group"><a class="btn" data-wysihtml5-command="createCode" title="Insert Code" tabindex="-1"><i class="icon-wrench"></i></a></div></li>'},t.parserRules.classes.jfdiCode=1,e&&(t.html=!0,t.customTemplates={image:function(){return e}});var i=function(){var e=$(this);e.data("wysihtml5")&&(e.css("display","block"),e.val(),e.siblings('.wysihtml5-sandbox, .wysihtml5-toolbar, input[name="_wysihtml5_mode"]').remove()),$(this).wysihtml5(t)};$(document).on("DOMNodeInserted",function(e){$("textarea.html-editor",e.target).each(i)})}),$(document).ready(function(){var e="";$(".image-uploader-trigger").click(function(){e=$(this).attr("data-target");var t=$(this).attr("href");return $(t).modal("show"),!1}),$(document).bind("dragover",function(e){var t=$("#image-dropzone"),i=window.dropZoneTimeout;i?clearTimeout(i):t.addClass("in"),e.target===t[0]?t.addClass("hover"):t.removeClass("hover"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,t.removeClass("in hover")},100)}),$(document).bind("drop dragover",function(e){e.preventDefault()}),$("#image-upload-form").fileupload({maxFileSize:5e6,acceptFileTypes:"/(.|/)(gif|jpe?g|png)$/i",autoUpload:!0,dropZone:$("#image-dropzone"),dataType:"json",url:$("#image-upload-form").attr("action"),formData:[{name:"_method",value:"POST "}],done:function(t,i){$(".image-uploader-input-url").val(i.result.url),$(".image-uploader-preview-img").attr("src",i.result.url),$(e+"-preview").attr("src",i.result.url),$(e+"-input").attr("value",i.result.url),$(".image-uploader-insert-btn").click()}})}),$(document).ready(function(){function e(e){var t=this;this.pickers=e,e.forEach(function(e){e.onSelectionCompleted=function(){t.doneCallback.apply(t,arguments)}})}function t(){$(window).resize()}function i(){var e=$("#lesson_plan_entry_start_at_picker").data("datetimepicker").getDate(),t=$("#lesson_plan_entry_end_at_picker").data("datetimepicker").getDate();return e>t?"The start date must be before the end date.":null}e.prototype.pick=function(){this.$modal&&this.$modal.remove(),this.$modal=$('<div class="modal hide fade" />'),this.pickers[0].pick(this.$modal[0]),this.$modal.modal()},e.prototype.doneCallback=function(e){e.forEach(function(e){$element=$(tmpl("lesson-plan-resource",e)),$("#linked_resources tbody").append($element)})};var n=new e([new MaterialsFilePicker]);$(".addresource-button").click(function(){n.pick()}),$(document).on("click",".resource-delete",null,function(){$(this).parents("tr").remove()}),$("#lesson-plan-entry-filter").change(function(){for(var e=0;e<this.options.length;++e){var i=this.options[e],n=$(i).data();i.selected?$(document.getElementsByClassName(n.entryType)).slideDown({complete:t}):$(document.getElementsByClassName(n.entryType)).slideUp({complete:t})}});var o=$(".lesson-plan-header-row-wrapper"),r=$(".lesson-plan-header-row");r.each(function(e){var t=$(r[e]),i=r[e+1],n=$(o[e]);n.height(t.outerHeight(!0)),t.scrollToFixed({marginTop:$(".navbar-inner").outerHeight(!0),limit:function(){return i?$(i).offset().top-t.outerHeight(!0)-20:$(".end-of-page").offset().top},fixed:function(){t.addClass("transparent-background")},unfixed:function(){t.removeClass("transparent-background")}})}),$("#lesson-plan-hide-all").click(function(){$(".lesson-plan-body").slideUp({complete:t}),$(".lesson-plan-body").data("hidden",!0),$(".lesson-plan-show-entries").show(),$(".lesson-plan-hide-entries").hide()}),$("#lesson-plan-show-all").click(function(){$(".lesson-plan-body").slideDown({complete:t}),$(".lesson-plan-body").data("hidden",!1),$(".lesson-plan-show-entries").hide(),$(".lesson-plan-hide-entries").show()}),$(".lesson-plan-header").click(function(){var e=$(this).parents(".lesson-plan-item"),i=$(".lesson-plan-body",e).data("hidden");i?($(".lesson-plan-body",e).slideDown({complete:t}).data("hidden",!1),$(".lesson-plan-hide-entries",this).show(),$(".lesson-plan-show-entries",this).hide()):($(".lesson-plan-body",e).slideUp({complete:t}).data("hidden",!0),$(".lesson-plan-hide-entries",this).hide(),$(".lesson-plan-show-entries",this).show())}),$(".lesson-plan-milestone-generator-form").validatr([["input#input-number-milestones",function(){var e=$(this).val();return e?0>=e?"The number of milestones to create should be a positive integer":null:"This field is required"}],["input#input-length-milestones",function(){var e=$(this).val();return e?0>=e?"The length of a milestone should be a positive integer":null:"This field is required"}],["input#input-prefix-milestones",function(){}],["input#input-start-milestones",function(){var e=$(this).val();return e?null:"This field is required"}]]),$("form.lesson-plan-milestone-generator-form").submit(function(){for(var e="DD-MM-YYYY",t=$("input#input-number-milestones").val(),i=$("input#input-length-milestones").val(),n=$("input#input-prefix-milestones").val(),o=$("input#input-start-milestones").val(),r=moment(o,e),s=[],a=0;t>a;++a)r.add("days",parseInt(i)),s.push({title:n+" "+(a+1),end_at:r.clone()});var l=s.map(function(t){return{title:t.title,description:"",end_at:t.end_at.format(e)}}),c=$.ajax({type:"POST",url:"lesson_plan/milestones.json",data:{lesson_plan_milestone:l},dataType:"json"}),d=$(this).parents(".modal");return $(".modal-body",d).addClass("hidden"),$("#modal-loading",d).parent().removeClass("hidden"),$("button.btn, input.btn",d).addClass("disabled").prop("disabled",!0),c.then(function(){d.modal("hide"),location.reload()},function(){alert("An error occurred while processing your request."),d.modal("hide"),location.reload()}),!1}),$(".lesson-plan-entry-form").validatr([["#lesson_plan_entry_start_at_picker",i],["#lesson_plan_entry_end_at_picker",i]])}),$(document).ready(function(){$(".lvl-add-more").click(function(e){e.preventDefault();var t=$(this).parents("tbody").children().length;format=["<tr>","  <td>"+t+"</td>",'  <td><input type="number" maxlength="15" name="exps[]"></td>',"</tr>"].join(""),$(this).parents("tr").before(format)})}),$(document).ready(function(){$(".repeat-exp-link").click(function(e){e.preventDefault();var t=$(this).parent().children("input").val();$(".exp-input").val(t)}),$(".select-all-achs").click(function(e){e.preventDefault(),$('table.manual-awards-achievements input[type="checkbox"]').prop("checked",!0)}),$(".deselect-all-achs").click(function(e){e.preventDefault(),$('table.manual-awards-achievements input[type="checkbox"]').prop("checked",!1)}),$(".select-all-stds").click(function(e){e.preventDefault(),$('table.manual-awards-students input[type="checkbox"]').prop("checked",!0)}),$(".deselect-all-stds").click(function(e){e.preventDefault(),$('table.manual-awards-students input[type="checkbox"]').prop("checked",!1)})}),function(){var e,t,i,n,o,r,s;t=function(){var e;return e=$("#cvs_file"),e.replaceWith(e=e.clone(!0)),$("#emails-tbody").empty()},o=function(e){var t,n;return t=e.target.files[0],t?(n=new FileReader,n.onload=function(){var e;return e=n.result,i(e)},n.readAsText(t)):alert("Failed to load file")},i=function(e){var t,i,n,o,r,s,a,l,c,d,u,h,f,p,m,g;for(o="File content format not valid!",a=[],m=e.split("\n"),c=0,h=m.length;h>c;c++)l=m[c],a.push(l.trim());if(0===a.length)return alert(o),!1;if(r=a[0].split(","),s=r.indexOf("Name"),0===r.length||0>s)return alert(o),!1;if(n=r.indexOf("E-mail 1 - Value"),0>n)return alert("Can't find email feild in the file"),!1;for(i=[],g=a.slice(1,+(a.length-2)+1||9e9),d=0,f=g.length;f>d;d++)l=g[d],i.push({name:l.split(",")[s],email:l.split(",")[n]});for(u=0,p=i.length;p>u;u++)t=i[u],$("#emails-tbody").append("<tr><td><input type='checkbox' class='checkbox-emails' checked/></td><td class='name'>"+t.name+"</td><td class='email'>"+t.email+"</td></tr>");return $("#emails-to-invite-modal").modal("toggle")},r=function(){var e,t,i,o,r,s,a;for(r=$(".check-all-emails").attr("data-target"),t=$.grep($(r),function(e){return $(e).prop("checked")}),i=$.map($(t),function(e){return $(e).parents("tr")}),o=[],s=0,a=i.length;a>s;s++)e=i[s],o.push({name:e.find(".name").html(),email:e.find(".email").html()});return n(o)},this.sendInvitationTable=function(){var e,t,i,o,r;for(i=$("#tbody-add-student tr"),e=[],o=0,r=i.length;r>o;o++)t=i[o],e.push({name:$(t).find(".name").val(),email:$(t).find(".email").val()});return n(e)},s=function(e){var t,i,n,o;return e.preventDefault(),o=$(this).attr("href"),n=$(this).attr("data-target"),t=$.grep($(n),function(e){return $(e).prop("checked")}),i=$.map($(t),function(e){return $(e).val()}),0===i.length?(alert("No student selected!"),void 0):$.ajax({url:o,type:"POST",data:{students:i},dataType:"json",success:function(){return location.reload()}})},n=function(e){var t;return t=$("#email-invitation-url").val(),$.ajax({url:t,type:"POST",data:{students:e},dataType:"json",success:function(){return location.reload()}})},this.stdRemoveRow=function(e){return $(e).remove(),0===$("#tbody-add-student tr").length?$("#add-student-table").remove():void 0},e=function(){return 0===$("#tbody-add-student").length&&$("#add-student-div").append('        <table class="table table-bordered"  id="add-student-table">          <thead><tr>            <td>Name</td>            <td>Email</td>            <td></td>          </tr></thead>          <tbody id="tbody-add-student">          </tbody>          <tfoot id="add-student-footer">          <tr>           <td colspan="3" style="text-align: right">            <a href="#" class="btn btn-primary" id="send-invitation-emails-table" onclick="sendInvitationTable()">Send Invitation Emails</a>          </td>          </tr>          </tfoot>         </table>'),$("#tbody-add-student").append('<tr><td><input type="text" class="name"/></td><td><input type="email" class="email"></td><td><a  title="Delete this test" class = "btn" onclick="stdRemoveRow(this.parentNode.parentNode)"><i class="icon-remove"></i> </a></td></tr>')},$(document).ready(function(){return $("#cvs_file").change(o),$("#emails-to-invite-modal").on("hidden",t),$(".check-all-emails").change(function(){var e,t;return t=$(this).prop("checked"),e=$(this).attr("data-target"),$(e).prop("checked",t)}),$("#send-invitation-emails").click(r),$("#manually-add-student").click(e),$(".invite-update-selected").click(s)})}.call(this),$(document).ready(function(){function e(){$(".materials-select-file-checkbox").each(function(){var e=$(this).parents(".materials-file-row");$(this).prop("checked")?e.addClass("materials-file-selected"):e.removeClass("materials-file-selected")})}var t=gon.folders;if(t){var i=parseFileJsonForJqTree(t,!1,!0),n=$("#file-tree");n.tree({data:i,autoOpen:!0,keyboardSupport:!1,onCreateLi:function(e,t){var i='<i class="icon-folder-open"></i>';t.find(".jqtree-element").prepend(i)}});var o=gon.currentFolder.id,r=n.tree("getNodeById",o);n.tree("selectNode",r),n.bind("tree.select",function(e){var t=e.node;if(t){var i=t.url;window.location.href=i}}),$("form.materials-edit-form").validatr([["input#material_filename",function(){if($(this),this.value===gon.currentMaterial.filename)return null;var e=$.Deferred();return $.post("/courses/"+gon.course.id+"/materials/subfolder/"+gon.currentFolder.id+"/"+this.value,{_method:"HEAD"}).done(function(){e.resolve("Another file with the same name already exists.")}).fail(function(t){404===t.status?e.resolve(null):t.status||e.resolve("Another file with the same name already exists.")}),e.promise()}]]),$("#materials-select-all-files").click(function(){var t=$(this).prop("checked");$(".materials-select-file-checkbox").prop("checked",t),e()}),$("#materials-download-zip-button").click(function(e){var t=[];$(".materials-select-file-checkbox").each(function(){var e=$(this),i=e.data("fileid"),n=e.prop("checked");n&&t.push(i)}),e.preventDefault(),location.href=this.href+"?"+jQuery.param({include:t})}),e(),$(".materials-file-row").click(function(e){if(!(e.target.classList.contains("btn")||"a"===e.tagName||$(e.target).parents(".btn, a").length>0)){$(this).toggleClass("materials-file-selected");var t=$(this).find(".materials-select-file-checkbox"),i=t.prop("checked");t.prop("checked",!i)}}),$(".materials-select-file-checkbox").click(function(e){e.stopPropagation();var t=$(this).parents(".materials-file-row");t.toggleClass("materials-file-selected");var i=$("#materials-select-all-files");i.prop("checked")&&i.prop("checked",!1)})}}),MaterialsFilePicker.prototype.pick=function(e){var t=gon.course.id,i=this,n='<div class="modal-header">  <h3>Select Files</h3>  </div>  <div class="modal-body">  <div id="file-picker-loading">    <h2>Loading...</h2>    <div class="progress progress-striped active">      <div class="bar" style="width: 100%;"></div>    </div>  </div>  <div id="file-picker-tree"></div>  </div>  <div class="modal-footer">    <div id="done-picking" data-dismiss="modal" class="btn btn-primary">      Done    </div>    <button data-dismiss="modal" class="btn">      Cancel    </button>  </div>';$(e).html(n),$.ajax({url:"/courses/"+t+"/materials.json",success:function(e){i.onFolderStructureReceived(e)},beforeSend:function(){$("#file-picker-loading",e).show()},complete:function(){$("#file-picker-loading",e).hide()}}),this.treeElement=$("#file-picker-tree",e),$("#done-picking",e).on("click",function(){i.onDone()})},MaterialsFilePicker.prototype.onDone=function(){var e=[];for(var t in this.selectedMaterials){var i=this.selectedMaterials[t];e.push(i)}this.onSelectionCompleted(e)},MaterialsFilePicker.prototype.onFolderStructureReceived=function(e){var t=!0,i=parseFileJsonForJqTree(e,t,!1);this.treeElement.tree({data:i,autoOpen:0,keyboardSupport:!1,onCreateLi:function(e,t){var i="icon-file";e.isNodeFolder&&(i="icon-folder-open");var n='<i class="'+i+'"></i>';t.find(".jqtree-element").prepend(n)}});var n=this;this.treeElement.bind("tree.click",function(e){n.onNodeClicked(e)})},MaterialsFilePicker.prototype.onNodeClicked=function(e){e.preventDefault();var t=e.node,i=t.id,n=this.treeElement.tree("isNodeSelected",t),o=i.indexOf&&-1!==i.indexOf("file");if(o){var r=i.indexOf("_")+1,s=i.slice(r);if(n)this.treeElement.tree("removeFromSelection",t),delete this.selectedMaterials[s];else{this.treeElement.tree("addToSelection",t);var a=[s,"Material",t.name,t.url];this.selectedMaterials[s]=a}}},$(document).ready(function(){$("#mcq-answers .add-mcq-answer").on("click",function(e){e.preventDefault();var t=$(this).parents("tbody").children().length;format=["<tr>",'<td><input name="answers['+t+'][is_correct]" type="checkbox" /></td>',"  <td>",'    <textarea name="answers['+t+'][text]" placeholder="Answer..." /></textarea>','    <textarea name="answers['+t+'][explanation]" placeholder="Explanation..." /></textarea>',"  </td>","</tr>"].join(""),$(this).parents("tr").before(format)})}),function(){}.call(this),$(document).ready(function(){function e(e){switch($(".dump_sub").attr("disabled","disabled"),params="",e){case"mine":params="?_type=mine";break;case"phantom":params="?_type=phantom"}$.ajax({url:$("#dump_url").val()+params,type:"GET",dataType:"json",success:function(e){$(".dump_sub").removeAttr("disabled"),$(".dump_sub").val("Download Submissions"),t(e.file_url,e.file_name)}})}$("#dump_sub_mine").click(function(){e("mine"),$("#dump_sub_mine").val("Processing...")}),$("#dump_sub_all").click(function(){e("all"),$("#dump_sub_all").val("Processing...")}),$("#dump_sub_phantom").click(function(){e("phantom"),$("#dump_sub_phantom").val("Processing...")});var t=function(e,t){var i="hiddenDownloader",n=document.getElementById(i);null===n&&(n=document.createElement("a"),n.id=i,n.style.display="none",n.download=t,document.body.appendChild(n)),n.href=e,n.click()}}),window.Modernizr=function(e,t,i){function n(e){b.cssText=e}function o(e,t){return n(C.join(e+";")+(t||""))}function r(e,t){return typeof e===t}function s(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var n in e){var o=e[n];if(!s(o,"-")&&b[o]!==i)return"pfx"==t?o:!0}return!1}function l(e,t,n){for(var o in e){var s=t[e[o]];if(s!==i)return n===!1?e[o]:r(s,"function")?s.bind(n||t):s}return!1}function c(e,t,i){var n=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+T.join(n+" ")+n).split(" ");return r(t,"string")||r(t,"undefined")?a(o,t):(o=(e+" "+S.join(n+" ")+n).split(" "),l(o,t,i))}function d(){p.input=function(i){for(var n=0,o=i.length;o>n;n++)$[i[n]]=i[n]in w;return $.list&&($.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),$}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),p.inputtypes=function(e){for(var n,o,r,s=0,a=e.length;a>s;s++)w.setAttribute("type",o=e[s]),n="text"!==w.type,n&&(w.value=_,w.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(o)&&w.style.WebkitAppearance!==i?(g.appendChild(w),r=t.defaultView,n=r.getComputedStyle&&"textfield"!==r.getComputedStyle(w,null).WebkitAppearance&&0!==w.offsetHeight,g.removeChild(w)):/^(search|tel)$/.test(o)||(n=/^(url|email)$/.test(o)?w.checkValidity&&w.checkValidity()===!1:w.value!=_)),E[e[s]]=!!n;return E}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var u,h,f="2.6.2",p={},m=!0,g=t.documentElement,v="modernizr",y=t.createElement(v),b=y.style,w=t.createElement("input"),_=":)",x={}.toString,C=" -webkit- -moz- -o- -ms- ".split(" "),k="Webkit Moz O ms",T=k.split(" "),S=k.toLowerCase().split(" "),D={svg:"http://www.w3.org/2000/svg"},N={},E={},$={},M=[],I=M.slice,A=function(e,i,n,o){var r,s,a,l,c=t.createElement("div"),d=t.body,u=d||t.createElement("body");if(parseInt(n,10))for(;n--;)a=t.createElement("div"),a.id=o?o[n]:v+(n+1),c.appendChild(a);return r=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),c.id=v,(d?c:u).innerHTML+=r,u.appendChild(c),d||(u.style.background="",u.style.overflow="hidden",l=g.style.overflow,g.style.overflow="hidden",g.appendChild(u)),s=i(c,e),d?c.parentNode.removeChild(c):(u.parentNode.removeChild(u),g.style.overflow=l),!!s},L=function(t){var i=e.matchMedia||e.msMatchMedia;if(i)return i(t).matches;var n;return A("@media "+t+" { #"+v+" { position: absolute; } }",function(t){n="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),n},P=function(){function e(e,o){o=o||t.createElement(n[e]||"div"),e="on"+e;var s=e in o;return s||(o.setAttribute||(o=t.createElement("div")),o.setAttribute&&o.removeAttribute&&(o.setAttribute(e,""),s=r(o[e],"function"),r(o[e],"undefined")||(o[e]=i),o.removeAttribute(e))),o=null,s}var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),O={}.hasOwnProperty;h=r(O,"undefined")||r(O.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(e,t){return O.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var i=I.call(arguments,1),n=function(){if(this instanceof n){var o=function(){};o.prototype=t.prototype;var r=new o,s=t.apply(r,i.concat(I.call(arguments)));return Object(s)===s?s:r}return t.apply(e,i.concat(I.call(arguments)))};return n}),N.flexbox=function(){return c("flexWrap")},N.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},N.canvastext=function(){return!!p.canvas&&!!r(t.createElement("canvas").getContext("2d").fillText,"function")},N.webgl=function(){return!!e.WebGLRenderingContext},N.touch=function(){var i;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?i=!0:A(["@media (",C.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){i=9===e.offsetTop}),i},N.geolocation=function(){return"geolocation"in navigator},N.postmessage=function(){return!!e.postMessage},N.websqldatabase=function(){return!!e.openDatabase},N.indexedDB=function(){return!!c("indexedDB",e)},N.hashchange=function(){return P("hashchange",e)&&(t.documentMode===i||t.documentMode>7)},N.history=function(){return!!e.history&&!!history.pushState},N.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},N.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},N.rgba=function(){return n("background-color:rgba(150,255,150,.5)"),s(b.backgroundColor,"rgba")},N.hsla=function(){return n("background-color:hsla(120,40%,100%,.5)"),s(b.backgroundColor,"rgba")||s(b.backgroundColor,"hsla")},N.multiplebgs=function(){return n("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(b.background)},N.backgroundsize=function(){return c("backgroundSize")},N.borderimage=function(){return c("borderImage")},N.borderradius=function(){return c("borderRadius")},N.boxshadow=function(){return c("boxShadow")},N.textshadow=function(){return""===t.createElement("div").style.textShadow},N.opacity=function(){return o("opacity:.55"),/^0.55$/.test(b.opacity)},N.cssanimations=function(){return c("animationName")},N.csscolumns=function(){return c("columnCount")},N.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",i="linear-gradient(left top,#9f9, white);";return n((e+"-webkit- ".split(" ").join(t+e)+C.join(i+e)).slice(0,-e.length)),s(b.backgroundImage,"gradient")},N.cssreflections=function(){return c("boxReflect")},N.csstransforms=function(){return!!c("transform")},N.csstransforms3d=function(){var e=!!c("perspective");return e&&"webkitPerspective"in g.style&&A("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},N.csstransitions=function(){return c("transition")},N.fontface=function(){var e;return A('@font-face {font-family:"font";src:url("https://")}',function(i,n){var o=t.getElementById("smodernizr"),r=o.sheet||o.styleSheet,s=r?r.cssRules&&r.cssRules[0]?r.cssRules[0].cssText:r.cssText||"":"";e=/src/i.test(s)&&0===s.indexOf(n.split(" ")[0])}),e},N.generatedcontent=function(){var e;return A(["#",v,"{font:0/0 a}#",v,':after{content:"',_,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},N.video=function(){var e=t.createElement("video"),i=!1;try{(i=!!e.canPlayType)&&(i=new Boolean(i),i.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),i.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),i.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return i},N.audio=function(){var e=t.createElement("audio"),i=!1;try{(i=!!e.canPlayType)&&(i=new Boolean(i),i.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),i.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),i.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),i.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return i},N.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(e){return!1}},N.sessionstorage=function(){try{return sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch(e){return!1}},N.webworkers=function(){return!!e.Worker},N.applicationcache=function(){return!!e.applicationCache},N.svg=function(){return!!t.createElementNS&&!!t.createElementNS(D.svg,"svg").createSVGRect},N.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==D.svg},N.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(x.call(t.createElementNS(D.svg,"animate")))},N.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(x.call(t.createElementNS(D.svg,"clipPath")))};for(var H in N)h(N,H)&&(u=H.toLowerCase(),p[u]=N[H](),M.push((p[u]?"":"no-")+u));return p.input||d(),p.addTest=function(e,t){if("object"==typeof e)for(var n in e)h(e,n)&&p.addTest(n,e[n]);else{if(e=e.toLowerCase(),p[e]!==i)return p;t="function"==typeof t?t():t,"undefined"!=typeof m&&m&&(g.className+=" "+(t?"":"no-")+e),p[e]=t}return p},n(""),y=w=null,function(e,t){function i(e,t){var i=e.createElement("p"),n=e.getElementsByTagName("head")[0]||e.documentElement;return i.innerHTML="x<style>"+t+"</style>",n.insertBefore(i.lastChild,n.firstChild)}function n(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function o(e){var t=g[e[p]];return t||(t={},m++,e[p]=m,g[m]=t),t}function r(e,i,n){if(i||(i=t),d)return i.createElement(e);n||(n=o(i));var r;return r=n.cache[e]?n.cache[e].cloneNode():f.test(e)?(n.cache[e]=n.createElem(e)).cloneNode():n.createElem(e),r.canHaveChildren&&!h.test(e)?n.frag.appendChild(r):r}function s(e,i){if(e||(e=t),d)return e.createDocumentFragment();i=i||o(e);for(var r=i.frag.cloneNode(),s=0,a=n(),l=a.length;l>s;s++)r.createElement(a[s]);return r}function a(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(i){return v.shivMethods?r(i,e,t):t.createElem(i)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,t.frag)}function l(e){e||(e=t);var n=o(e);return v.shivCSS&&!c&&!n.hasCSS&&(n.hasCSS=!!i(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),d||a(e,n),e}var c,d,u=e.html5||{},h=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,p="_html5shiv",m=0,g={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",c="hidden"in e,d=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(i){c=!0,d=!0}}();var v={elements:u.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:u.shivCSS!==!1,supportsUnknownElements:d,shivMethods:u.shivMethods!==!1,type:"default",shivDocument:l,createElement:r,createDocumentFragment:s};e.html5=v,l(t)}(this,t),p._version=f,p._prefixes=C,p._domPrefixes=S,p._cssomPrefixes=T,p.mq=L,p.hasEvent=P,p.testProp=function(e){return a([e])},p.testAllProps=c,p.testStyles=A,p.prefixed=function(e,t,i){return t?c(e,t,i):c(e,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(m?" js "+M.join(" "):""),p}(this,this.document),function(e,t,i){function n(e){return"[object Function]"==g.call(e)}function o(e){return"string"==typeof e}function r(){}function s(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function a(){var e=v.shift();y=1,e?e.t?p(function(){("c"==e.t?h.injectCss:h.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),a()):y=0}function l(e,i,n,o,r,l,c){function d(t){if(!f&&s(u.readyState)&&(b.r=f=1,!y&&a(),u.onload=u.onreadystatechange=null,t)){"img"!=e&&p(function(){_.removeChild(u)},50);for(var n in S[i])S[i].hasOwnProperty(n)&&S[i][n].onload()}}var c=c||h.errorTimeout,u=t.createElement(e),f=0,g=0,b={t:n,s:i,e:r,a:l,x:c};1===S[i]&&(g=1,S[i]=[]),"object"==e?u.data=i:(u.src=i,u.type=e),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){d.call(this,g)},v.splice(o,0,b),"img"!=e&&(g||2===S[i]?(_.insertBefore(u,w?null:m),p(d,c)):S[i].push(u))}function c(e,t,i,n,r){return y=0,t=t||"j",o(e)?l("c"==t?C:x,e,t,this.i++,i,n,r):(v.splice(this.i++,0,e),1==v.length&&a()),this}function d(){var e=h;return e.loader={load:c,i:0},e}var u,h,f=t.documentElement,p=e.setTimeout,m=t.getElementsByTagName("script")[0],g={}.toString,v=[],y=0,b="MozAppearance"in f.style,w=b&&!!t.createRange().compareNode,_=w?f:m.parentNode,f=e.opera&&"[object Opera]"==g.call(e.opera),f=!!t.attachEvent&&!f,x=b?"object":f?"script":"img",C=f?"script":x,k=Array.isArray||function(e){return"[object Array]"==g.call(e)},T=[],S={},D={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};h=function(e){function t(e){var t,i,n,e=e.split("!"),o=T.length,r=e.pop(),s=e.length,r={url:r,origUrl:r,prefixes:e};for(i=0;s>i;i++)n=e[i].split("="),(t=D[n.shift()])&&(r=t(r,n));for(i=0;o>i;i++)r=T[i](r);return r}function s(e,o,r,s,a){var l=t(e),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(o&&(o=n(o)?o:o[e]||o[s]||o[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,o,r,s,a):(S[l.url]?l.noexec=!0:S[l.url]=1,r.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":i,l.noexec,l.attrs,l.timeout),(n(o)||n(c))&&r.load(function(){d(),o&&o(l.origUrl,a,s),c&&c(l.origUrl,a,s),S[l.url]=2
})))}function a(e,t){function i(e,i){if(e){if(o(e))i||(u=function(){var e=[].slice.call(arguments);h.apply(this,e),f()}),s(e,u,t,0,c);else if(Object(e)===e)for(l in a=function(){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(),e)e.hasOwnProperty(l)&&(!i&&!--a&&(n(u)?u=function(){var e=[].slice.call(arguments);h.apply(this,e),f()}:u[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),f()}}(h[l])),s(e[l],u,t,l,c))}else!i&&f()}var a,l,c=!!e.test,d=e.load||e.both,u=e.callback||r,h=u,f=e.complete||r;i(c?e.yep:e.nope,!!d),d&&i(d)}var l,c,u=this.yepnope.loader;if(o(e))s(e,0,u,0);else if(k(e))for(l=0;l<e.length;l++)c=e[l],o(c)?s(c,0,u,0):k(c)?h(c):Object(c)===c&&a(c,u);else Object(e)===e&&a(e,u)},h.addPrefix=function(e,t){D[e]=t},h.addFilter=function(e){T.push(e)},h.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",u=function(){t.removeEventListener("DOMContentLoaded",u,0),t.readyState="complete"},0)),e.yepnope=d(),e.yepnope.executeStack=a,e.yepnope.injectJs=function(e,i,n,o,l,c){var d,u,f=t.createElement("script"),o=o||h.errorTimeout;f.src=e;for(u in n)f.setAttribute(u,n[u]);i=c?a:i||r,f.onreadystatechange=f.onload=function(){!d&&s(f.readyState)&&(d=1,i(),f.onload=f.onreadystatechange=null)},p(function(){d||(d=1,i(1))},o),l?f.onload():m.parentNode.insertBefore(f,m)},e.yepnope.injectCss=function(e,i,n,o,s,l){var c,o=t.createElement("link"),i=l?a:i||r;o.href=e,o.rel="stylesheet",o.type="text/css";for(c in n)o.setAttribute(c,n[c]);s||(m.parentNode.insertBefore(o,m),p(i,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},$(document).ready(function(){$("#popups .modal").modal("show"),$("#popups .popup-btn-close").click(function(){$(this).parents(".modal").modal("hide")})}),$(document).ready(function(){$(".request-del").click(function(){var e=$(this).parents("tr"),t=e.find(".user-name").html(),i=e.find(".destroy-url").val();return confirm("Are you sure you want to reject the enrol request by "+t+"?")?($.ajax({url:i,type:"DELETE",success:function(){$(e).remove()}}),!1):void 0}),$(".request-approve").click(function(){var e=$(this).parents("tr"),t=e.find(".destroy-url").val();return $.ajax({url:t,type:"DELETE",data:{approved:!0},success:function(){$(e).remove()}}),!1})}),function(){}.call(this),$(document).ready(function(){$(".btn-select-nav").click(function(e){e.preventDefault();var t=$(this).attr("data-target"),i=$(t).find(":selected").val();location=i})}),function(){}.call(this);var codeEvaluator=function(){this.ans_ids=null,this.cvs=null;var e=this;this.running=!1;var t={backgroundColor:"#e1c1b1"},i={duration:1e3,queue:!1},n={backgroundColor:"#008000"};return{testRun:function(o,r,s){if(!e.running){e.running=!0;var a=e.ans_ids.indexOf(o),l=e.cvs[a].editor.getValue();$(s).attr("disabled",!0);var c=$("#run-count-down-"+o);c.text(c.text()-0-1),$.ajax({url:r,type:"POST",data:{answer_id:o,code:l},dataType:"json",success:function(r){var a=$("#eval-result-"+o);if(r.errors.length>0)a.html(escapeHtml(r.errors)).animate({backgroundColor:"#e1c1b1"},i);else{var l=!0;$("#public-test-table-"+o+" tbody tr").each(function(e,o){if(r.publicTests[e]){var s=$("td:last",o);s.hasClass("pathTestFail")?s.switchClass("pathTestFail","pathTestPass").animate(n,i):s.hasClass("pathTestPass")||s.addClass("pathTestPass").animate(n,i)}else{l=!1;var s=$("td:last",o);s.hasClass("pathTestPass")?s.switchClass("pathTestPass","pathTestFail").animate(t,i):s.hasClass("pathTestFail")||s.addClass("pathTestFail",1e3).animate(t,i)}});var c=0==r.privateTests.length?!0:r.privateTests.reduce(function(e,t){return e&&t});if(l){if(null!=r.privateTests&&c)return a.html("You have successfully passed all public and private test cases!").animate(n,i),$(s).attr("disabled",!0),e.running=!1,void 0;a.html("Your answer failed to pass one or more of the private test cases.").animate(t,i)}else a.html("Your answer failed to pass one or more of the public test cases.").animate(t,i)}$(s).attr("disabled",!1),e.running=!1}})}},init:function(t,i){e.ans_ids=t,e.cvs=i}}}();$(document).ready(function(){function e(){n.map(function(e,i){$("#code_"+t[i]).val(e.editor.getValue())})}$.map($("#eval-error-message"),function(e){$(e).html(escapeHtml($(e).html()))}),$("#mission_submit").click(function(t){e(),confirm("THIS ACTION IS IRREVERSIBLE\n\nAre you sure you want to submit? You will no longer be able to amend your submission!")||t.preventDefault()});var t,i=$(".code-ans"),n=[];$("#mission-save").click(function(){e()}),i.size()>0&&(t=$.map(i,function(e){return $(e).val()}),$.map(t,function(e){var t=$("#code_"+e).val(),i=$("#mode_"+e).val(),o=$("#code-language-"+e).val(),r=new CodeViewer($("#source-code-"+e),t,"molokai",e,i,o);n.push(r),$("#delete-code").click(function(){return confirm("Are you sure you want to delete this awesome source code?")}),$("#fullscreen-link-"+e).click(function(){return r.fullScreen(),!1}),$("#toggle-comment-"+e).click(function(){var e=$(this);return e.hasClass("disabled")?(e.removeClass("disabled"),r.showAnnotation()):(r.hideAnnotation(),e.addClass("disabled")),!1}),$("#select-all-code-"+e).click(function(){return r.selectAll(),!1})}),codeEvaluator.init(t,n))}),$(document).ready(function(){$("#add-survey-option").on("click",function(e){e.preventDefault();var t=$(this).parents("tbody").children().length;format=["<tr>","<td>"+t+"</td>","  <td>",'<input type="hidden" name="options['+t+'][pos]" value="'+t+'">','    <textarea id="<%= i %>" name="options['+t+'][description]" placeholder="Option..." class=" span6" rows="3"/></textarea>',"  </td>","</tr>"].join(""),$(this).parents("tr").before(format)})}),$(document).ready(function(){$(".checked").change(function(){console.log("here");var e=$(".vote-count");$(this).attr("checked")?($(this).parent().parent().addClass("rune-voted"),e.text(e.text()-0+1)):($(this).parent().parent().removeClass("rune-voted"),e.text(e.text()-0-1))}),$(".survey-submit").click(function(e){var t=$("#max-allowed").val()-0,i=$(".vote-count").text()-0;i>t&&(alert("Exceeded max voting entries!"),e.preventDefault()),t>i&&(confirm("You voted less than allowed entries, are you sure?")||e.preventDefault())})}),function(){}.call(this),$(document).ready(function(){$(".btn-add-tag").click(function(e){e.preventDefault();var t=$(this).parents("tr"),i=t.find("select :selected"),n=i.val(),o=$(this).attr("href");$.ajax({url:o,type:"POST",data:{tag_id:n},dataType:"html",success:function(e){t.before(e),i.detach(),i.prop("selected",!1),t.find("select").append(i)}})}),$(document).on("click",".remove-tag",function(e){e.preventDefault(),$(this).parents("tr").remove()})}),$(document).ready(function(){function e(){if(!i){i=!0,$("#pathrun").attr("disabled",!0);var e=$("#training-step-form"),n=e.children("input[name=update_url]").val(),o=e.children("input[name=qid]").val(),r=e.children("input[name=current_step]").val(),s={backgroundColor:"#e1c1b1"},a={duration:1e3,queue:!1},l={backgroundColor:"#008000"};$.post(n,{code:t.getValue(),current_step:r,qid:o},function(e){var t=$("#eval_result");if($(document.body).scrollTop(t.offset().top+t.height()-$("#ruler").show().height()+100),$("#ruler").hide(),e.errors.length>0)t.html(escapeHtml(e.errors)).animate({backgroundColor:"#e1c1b1"},a);else{var n=!0;$("#publicTestTable tbody tr").each(function(t,i){if(e.publicTests[t]){var o=$("td:last",i);o.hasClass("pathTestFail")?o.switchClass("pathTestFail","pathTestPass").animate(l,a):o.hasClass("pathTestPass")||o.addClass("pathTestPass").animate(l,a)}else{n=!1;var o=$("td:last",i);o.hasClass("pathTestPass")?o.switchClass("pathTestPass","pathTestFail").animate(s,a):o.hasClass("pathTestFail")||o.addClass("pathTestFail",1e3).animate(s,a)}});var o=0==e.privateTests.length?!0:e.privateTests.reduce(function(e,t){return e&&t});if(n){if(null!=e.privateTests&&o)return t.html("You have successfully completed this step!").animate(l,a),$("#continue-btn").removeClass("disabled"),$("#pathrun").attr("disabled",!0),void 0;t.html("Your answer failed to pass one or more of the private test cases.").animate(s,a)}else t.html("Your answer failed to pass one or more of the public test cases.").animate(s,a)}i=!1,$("#pathrun").attr("disabled",!1)},"json")}}if($("#submit-btn").click(function(){$("#submit-btn").addClass("disabled");var e=$("#training-step-form"),t=e.children("input[name=update_url]").val(),i=e.children("input[name=qid]").val(),n=e.find("input.choices"),o=[],r=[],s=e.children("input[name=current_step]").val();if($.each(n,function(e,t){o.push($(t).val()),$(t).is(":checked")&&r.push($(t).val())}),r.length>0){var a={current_step:s,qid:i,aid:r,choices:o};$.post(t,a,function(e){$("#submit-btn").removeClass("disabled"),$("#explanation .result").html(e.result),$("#explanation .reason").html(e.explanation),$("#explanation").removeClass("hidden"),$("#explanation").removeClass("mcq-ans-incorrect"),$("#explanation").removeClass("mcq-ans-correct"),e.is_correct?($("#continue-btn").removeClass("disabled"),$("#continue-btn").addClass("btn-primary"),$("#submit-btn").removeClass("btn-primary"),$("#explanation").addClass("mcq-ans-correct")):$("#explanation").addClass("mcq-ans-incorrect")},"json")}return!1}),$("#continue-btn").click(function(e){$(this).hasClass("disabled")&&e.preventDefault()}),$("#pathrun").bind("click",e),document.getElementById("ans")){var t;t=CodeMirror.fromTextArea(document.getElementById("ans"),{mode:{name:"python",version:3,singleLineStringErrors:!1},lineNumbers:!0,indentUnit:4,tabMode:"shift",matchBrackets:!0,theme:"molokai"}),$(document).keydown(function(t){t.altKey&&82==t.which&&e()})}var i=!1}),$(document).ready(function(){function e(e){if(0!=e.length){message=$('<ul style="margin: 0px 0px 0px 10px"></ul>');for(var t=0;t<e.length;++t)message.append('<li type="circle">'+e[t]+"</li>");var i=$(".alert");i.text(""),i._removeClass("hidden"),i.removeClass("alert-success"),i.addClass("alert-error"),message.appendTo(i),i.slideDown()}}function t(e){return"undefined"!=typeof e?(date_time=e.split(" "),date=date_time[0],time=date_time[1],dmy=date.split("-"),day=dmy[0],month=dmy[1]-1,year=dmy[2],hms=time.split(":"),hour=hms[0],min=hms[1],sec=hms[2],new Date(year,month,day,hour,min,sec)):void 0}$("#mission-update").click(function(i){start=t($("#open_at").val()),end=t($("#close_at").val()),error_msg=[],"undefined"!=typeof start&&"undefined"!=typeof end&&start>=end&&error_msg.push("Close time should be after open time."),grade=$("#mission-max-grade"),checked=$("#mission-format-checkbox").is(":checked"),!checked||grade.val()-0&&!(grade.val()-0<=0)||error_msg.push("Please specify a proper grade."),mission_exp=$("#mission-exp").val(),IsPositive(mission_exp)||error_msg.push("Please specify a proper value for EXP."),error_msg.length>0&&($("html,body").scrollTop(0),i.preventDefault(),e(error_msg))}),$("#training-update").click(function(i){start=t($("#open_at").val()),bonus_cutoff=t($("#bonus-cutoff-time").val()),error_msg=[],"undefined"!=typeof start&&"undefined"!=typeof bonus_cutoff&&start>=bonus_cutoff&&error_msg.push("Cutoff time should be after open time."),training_exp=$("#training-exp").val(),IsPositive(training_exp)||error_msg.push("Please specify a proper value for EXP."),bonus_exp=$("#bonus-exp").val(),IsPositive(bonus_exp)||error_msg.push("Please specify a proper value for bonus EXP."),error_msg.length>0&&(i.preventDefault(),$("html,body").scrollTop(0),e(error_msg))}),$(".asm-qns").sortable({update:function(){var e=$(this).sortable("serialize"),t=$(this).attr("url");$.ajax({url:t,type:"POST",data:e});var i=$(".asm-qn-handler > h3",this.children);$.each(i,function(e,t){var i=$(t).text(),n=i.replace(/Question [0-9]+/,"Question "+(e+1).toString());$(t).text(n)})}}),$("#save-tab").click(function(){var e=$("#tab-title").val(),t=$("#tab-description").val(),i=$("#new-tag-url").val();$.ajax({url:i,type:"POST",dataType:"json",data:{title:e,description:t,type:"Training"},success:function(){location.reload()}}),console.log(e),console.log(t),console.log(i)})}),function(){}.call(this),$(document).ready(function(){function e(e){var t=$(".alert");t.slideDown(),t._removeClass("hidden"),t.removeClass("alert-success"),t.addClass("alert-error"),t.text(e),t.slideDown(function(){setTimeout(function(){t.slideUp()},1500)})}$(document).on("click",".remove-staff",function(e){e.preventDefault();var t=$(this).parents("tr"),i=t.find(".uc-url").attr("href");$.ajax({url:i,type:"DELETE",success:function(){t.remove()}})}),$(".update-staff").on("click",function(t){t.preventDefault();var i=$(this).parents("tr"),n=i.find(".change-role").val(),o=i.find(".change-name"),r=i.find(".change-email"),s=i.find(".change-phantom"),a=i.find(".old-name"),l=$(".alert"),c=o.val().trim(),d=r.val().trim();if(l.size()>1&&l[0].parentNode.removeChild(l[0]),0==c.length)return e("User name can't be empty!"),o.val(a.val()),void 0;if("undefined"!=typeof r&&!r[0].validity.valid)return e("Please input valid email address!"),void 0;a.val(c),o.val(c),r.val(d);var u=i.find(".uc-url").attr("href");l.addClass("alert-success"),l.removeClass("alert-error"),l.text("Update user info successful!"),$.ajax({url:u,type:"PUT",data:{role_id:n,is_phantom:s[0].checked,name:c,email:d},dataType:"json",success:function(e){"OK"!=e.status?(l.addClass("alert-error"),l.text("Email entered is already taken!"),l.slideDown(),l._removeClass("hidden"),l.slideDown(function(){setTimeout(function(){l.slideUp()},4400)})):(l.slideDown(),l._removeClass("hidden"),l.slideDown(function(){setTimeout(function(){l.slideUp()},1500)}))}})})}),function(){jQuery(function(){return $(".best_in_place").best_in_place()})}.call(this);