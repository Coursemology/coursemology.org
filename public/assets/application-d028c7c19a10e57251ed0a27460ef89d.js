/*!
 * jQuery JavaScript Library v1.8.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Sep 20 2012 21:13:05 GMT-0400 (Eastern Daylight Time)
 */
function BestInPlaceEditor(e){this.element=e,this.initOptions(),this.bindForm(),this.initNil(),jQuery(this.activator).bind("click",{editor:this},this.clickHandler)}function jfdiFormat(e){$(e).find(".jfdiCode").each(_jfdiFormatFunc)}function IsNumeric(e){return e-0==e&&e.length>0}function IsPositive(e){return IsNumeric(e)&&e-0>=0}function forumToggleLike(e){var t=$(".like-"+e),n=$(".like-count-"+e);t.hasClass("active")?$.ajax({url:forum.topicPath+"/posts/"+e+"/unlike"}).done(function(){t.text("Like");var e=parseInt(n.text())-1;n.text(e),e>0?n.parent().show():n.parent().hide()}):$.ajax({url:forum.topicPath+"/posts/"+e+"/like"}).done(function(){t.text("Unlike");var e=parseInt(n.text())+1;n.text(e),e>0?n.parent().show():n.parent().hide()})}function lightboxinit(){var e,t,n;e=jQuery,n=function(){function e(){this.fadeDuration=500,this.fitImagesInViewport=!0,this.resizeDuration=700,this.showImageNumberLabel=!0,this.wrapAround=!1}return e.prototype.albumLabel=function(e,t){return"Image "+e+" of "+t},e}(),t=function(){function t(e){this.options=e,this.album=[],this.currentImageIndex=void 0,this.init()}return t.prototype.init=function(){return this.enable(),this.build()},t.prototype.enable=function(){var t=this;return e("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(n){return t.start(e(n.currentTarget)),!1})},t.prototype.build=function(){var t=this;return e("<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div></div>").appendTo(e("body")),this.$lightbox=e("#lightbox"),this.$overlay=e("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return t.end(),!1}),this.$lightbox.hide().on("click",function(n){return"lightbox"===e(n.target).attr("id")&&t.end(),!1}),this.$outerContainer.on("click",function(n){return"lightbox"===e(n.target).attr("id")&&t.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===t.currentImageIndex?t.changeImage(t.album.length-1):t.changeImage(t.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return t.currentImageIndex===t.album.length-1?t.changeImage(0):t.changeImage(t.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return t.end(),!1})},t.prototype.start=function(t){var n,i,r,o,s,a,l,c,u,d,h,f,p;if(e(window).on("resize",this.sizeOverlay),e("select, object, embed").css({visibility:"hidden"}),this.$overlay.width(e(document).width()).height(e(document).height()).fadeIn(this.options.fadeDuration),this.album=[],s=0,r=t.attr("data-lightbox"))for(f=e(t.prop("tagName")+'[data-lightbox="'+r+'"]'),o=c=0,d=f.length;d>c;o=++c)i=f[o],this.album.push({link:e(i).attr("href"),title:e(i).attr("title")}),e(i).attr("href")===t.attr("href")&&(s=o);else if("lightbox"===t.attr("rel"))this.album.push({link:t.attr("href"),title:t.attr("title")});else for(p=e(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]'),o=u=0,h=p.length;h>u;o=++u)i=p[o],this.album.push({link:e(i).attr("href"),title:e(i).attr("title")}),e(i).attr("href")===t.attr("href")&&(s=o);n=e(window),l=n.scrollTop()+n.height()/10,a=n.scrollLeft(),this.$lightbox.css({top:l+"px",left:a+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(s)},t.prototype.changeImage=function(t){var n,i,r=this;this.disableKeyboardNav(),n=this.$lightbox.find(".lb-image"),this.sizeOverlay(),this.$overlay.fadeIn(this.options.fadeDuration),e(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating"),i=new Image,i.onload=function(){n.attr("src",r.album[t].link);var o=(e(window).height()-200)/i.height,s=e(window).width()/i.width,a=o>s?s:o,l=a>=1?i.width:i.width*a,c=a>=1?i.height:i.height*a;return r.sizeContainer(l,c)},i.src=this.album[t].link,this.currentImageIndex=t},t.prototype.sizeOverlay=function(){return e("#lightboxOverlay").width(e(document).width()).height(e(document).height())},t.prototype.sizeContainer=function(e,t){var n,i,r,o,s=this;o=this.$outerContainer.outerWidth(),r=this.$outerContainer.outerHeight(),i=e+this.containerLeftPadding+this.containerRightPadding,n=t+this.containerTopPadding+this.containerBottomPadding,this.$outerContainer.animate({width:i,height:n},this.options.resizeDuration,"swing"),setTimeout(function(){s.$lightbox.find(".lb-dataContainer").width(i),s.$lightbox.find(".lb-prevLink").height(n),s.$lightbox.find(".lb-nextLink").height(n),s.showImage()},this.options.resizeDuration)},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?this.$lightbox.find(".lb-prev, .lb-next").show():(this.currentImageIndex>0&&this.$lightbox.find(".lb-prev").show(),this.currentImageIndex<this.album.length-1&&this.$lightbox.find(".lb-next").show()))},t.prototype.updateDetails=function(){var e=this;"undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast"),this.album.length>1&&this.options.showImageNumberLabel?this.$lightbox.find(".lb-number").text(this.options.albumLabel(this.currentImageIndex+1,this.album.length)).fadeIn("fast"):this.$lightbox.find(".lb-number").hide(),this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.resizeDuration,function(){return e.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){var e,t;this.album.length>this.currentImageIndex+1&&(e=new Image,e.src=this.album[this.currentImageIndex+1].link),this.currentImageIndex>0&&(t=new Image,t.src=this.album[this.currentImageIndex-1].link)},t.prototype.enableKeyboardNav=function(){e(document).on("keyup.keyboard",e.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){e(document).off(".keyboard")},t.prototype.keyboardAction=function(e){var t,n,i,r,o;t=27,n=37,i=39,o=e.keyCode,r=String.fromCharCode(o).toLowerCase(),o===t||r.match(/x|o|c/)?this.end():"p"===r||o===n?0!==this.currentImageIndex&&this.changeImage(this.currentImageIndex-1):("n"===r||o===i)&&this.currentImageIndex!==this.album.length-1&&this.changeImage(this.currentImageIndex+1)},t.prototype.end=function(){return this.disableKeyboardNav(),e(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),e("select, object, embed").css({visibility:"visible"})},t}(),e(function(){var e,i;return i=new n,e=new t(i)})}function parseFileJsonForJqTree(e,t,n){for(var i={},r="*",o=[e];o.length;){for(var s=o.shift(),a=0;a<s.subfolders.length;a++){var l=s.subfolders[a];(n||!l.is_virtual)&&o.push(l)}var c=[];if(t)for(var a=0;a<s.files.length;a++){var u=s.files[a],d=u.is_new?r:"",h={label:u.name+d,id:"file_"+u.id,url:u.url};c.push(h)}var f=s.files.length,p=s.contains_new?r:"",m=s.name+" ("+f+p+")";i[s.id]={id:s.id,label:m,url:s.url,parentId:s.parent_folder_id,children:c,isNodeFolder:!0,isVirtual:s.is_virtual}}var g;for(var v in i){var y=i[v],b=y.parentId;b?i[b].children.push(y):g=y}for(var v in i){var y=i[v];y.children.sort(function(e,t){return e.children&&!t.children?-1:!e.children&&t.children?1:e.isVirtual&&!t.isVirtual?-1:!e.isVirtual&&t.isVirtual?1:e.label.localeCompare(t.label)})}return[g]}function MaterialsFilePicker(){this.selectedMaterials={}}!function(e,t){function n(e){var t=pt[e]={};return Z.each(e.split(tt),function(e,n){t[n]=!0}),t}function i(e,n,i){if(i===t&&1===e.nodeType){var r="data-"+n.replace(gt,"-$1").toLowerCase();if(i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:mt.test(i)?Z.parseJSON(i):i}catch(o){}Z.data(e,n,i)}else i=t}return i}function r(e){var t;for(t in e)if(("data"!==t||!Z.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function o(){return!1}function s(){return!0}function a(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function l(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function c(e,t,n){if(t=t||0,Z.isFunction(t))return Z.grep(e,function(e,i){var r=!!t.call(e,i,e);return r===n});if(t.nodeType)return Z.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=Z.grep(e,function(e){return 1===e.nodeType});if(Ot.test(t))return Z.filter(t,i,!n);t=Z.filter(t,i)}return Z.grep(e,function(e){return Z.inArray(e,t)>=0===n})}function u(e){var t=Ft.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function d(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function h(e,t){if(1===t.nodeType&&Z.hasData(e)){var n,i,r,o=Z._data(e),s=Z._data(t,o),a=o.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,r=a[n].length;r>i;i++)Z.event.add(t,n,a[n][i])}s.data&&(s.data=Z.extend({},s.data))}}function f(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),Z.support.html5Clone&&e.innerHTML&&!Z.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Gt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.selected=e.defaultSelected:"input"===n||"textarea"===n?t.defaultValue=e.defaultValue:"script"===n&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(Z.expando))}function p(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function m(e){Gt.test(e.type)&&(e.defaultChecked=e.checked)}function g(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=yn.length;r--;)if(t=yn[r]+n,t in e)return t;return i}function v(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)}function y(e,t){for(var n,i,r=[],o=0,s=e.length;s>o;o++)n=e[o],n.style&&(r[o]=Z._data(n,"olddisplay"),t?(r[o]||"none"!==n.style.display||(n.style.display=""),""===n.style.display&&v(n)&&(r[o]=Z._data(n,"olddisplay",x(n.nodeName)))):(i=nn(n,"display"),r[o]||"none"===i||Z._data(n,"olddisplay",i)));for(o=0;s>o;o++)n=e[o],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?r[o]||"":"none"));return e}function b(e,t,n){var i=dn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function w(e,t,n,i){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,o=0;4>r;r+=2)"margin"===n&&(o+=Z.css(e,n+vn[r],!0)),i?("content"===n&&(o-=parseFloat(nn(e,"padding"+vn[r]))||0),"margin"!==n&&(o-=parseFloat(nn(e,"border"+vn[r]+"Width"))||0)):(o+=parseFloat(nn(e,"padding"+vn[r]))||0,"padding"!==n&&(o+=parseFloat(nn(e,"border"+vn[r]+"Width"))||0));return o}function _(e,t,n){var i="width"===t?e.offsetWidth:e.offsetHeight,r=!0,o=Z.support.boxSizing&&"border-box"===Z.css(e,"boxSizing");if(0>=i||null==i){if(i=nn(e,t),(0>i||null==i)&&(i=e.style[t]),hn.test(i))return i;r=o&&(Z.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+w(e,t,n||(o?"border":"content"),r)+"px"}function x(e){if(pn[e])return pn[e];var t=Z("<"+e+">").appendTo(z.body),n=t.css("display");return t.remove(),("none"===n||""===n)&&(rn=z.body.appendChild(rn||Z.extend(z.createElement("iframe"),{frameBorder:0,width:0,height:0})),on&&rn.createElement||(on=(rn.contentWindow||rn.contentDocument).document,on.write("<!doctype html><html><body>"),on.close()),t=on.body.appendChild(on.createElement(e)),n=nn(t,"display"),z.body.removeChild(rn)),pn[e]=n,n}function C(e,t,n,i){var r;if(Z.isArray(t))Z.each(t,function(t,r){n||_n.test(e)?i(e,r):C(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==Z.type(t))i(e,t);else for(r in t)C(e+"["+r+"]",t[r],n,i)}function k(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r,o,s=t.toLowerCase().split(tt),a=0,l=s.length;if(Z.isFunction(n))for(;l>a;a++)i=s[a],o=/^\+/.test(i),o&&(i=i.substr(1)||"*"),r=e[i]=e[i]||[],r[o?"unshift":"push"](n)}}function T(e,n,i,r,o,s){o=o||n.dataTypes[0],s=s||{},s[o]=!0;for(var a,l=e[o],c=0,u=l?l.length:0,d=e===Hn;u>c&&(d||!a);c++)a=l[c](n,i,r),"string"==typeof a&&(!d||s[a]?a=t:(n.dataTypes.unshift(a),a=T(e,n,i,r,a,s)));return!d&&a||s["*"]||(a=T(e,n,i,r,"*",s)),a}function S(e,n){var i,r,o=Z.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);r&&Z.extend(!0,e,r)}function D(e,n,i){var r,o,s,a,l=e.contents,c=e.dataTypes,u=e.responseFields;for(o in u)o in i&&(n[u[o]]=i[o]);for(;"*"===c[0];)c.shift(),r===t&&(r=e.mimeType||n.getResponseHeader("content-type"));if(r)for(o in l)if(l[o]&&l[o].test(r)){c.unshift(o);break}if(c[0]in i)s=c[0];else{for(o in i){if(!c[0]||e.converters[o+" "+c[0]]){s=o;break}a||(a=o)}s=s||a}return s?(s!==c[0]&&c.unshift(s),i[s]):void 0}function N(e,t){var n,i,r,o,s=e.dataTypes.slice(),a=s[0],l={},c=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),s[1])for(n in e.converters)l[n.toLowerCase()]=e.converters[n];for(;r=s[++c];)if("*"!==r){if("*"!==a&&a!==r){if(n=l[a+" "+r]||l["* "+r],!n)for(i in l)if(o=i.split(" "),o[1]===r&&(n=l[a+" "+o[0]]||l["* "+o[0]])){n===!0?n=l[i]:l[i]!==!0&&(r=o[0],s.splice(c--,0,r));break}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(u){return{state:"parsererror",error:n?u:"No conversion from "+a+" to "+r}}}a=r}return{state:"success",data:t}}function E(){try{return new e.XMLHttpRequest}catch(t){}}function M(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $(){return setTimeout(function(){Xn=t},0),Xn=Z.now()}function I(e,t){Z.each(t,function(t,n){for(var i=(ei[t]||[]).concat(ei["*"]),r=0,o=i.length;o>r;r++)if(i[r].call(e,t,n))return})}function A(e,t,n){var i,r=0,o=Jn.length,s=Z.Deferred().always(function(){delete a.elem}),a=function(){for(var t=Xn||$(),n=Math.max(0,l.startTime+l.duration-t),i=1-(n/l.duration||0),r=0,o=l.tweens.length;o>r;r++)l.tweens[r].run(i);return s.notifyWith(e,[l,i,n]),1>i&&o?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||$(),duration:n.duration,tweens:[],createTween:function(t,n){var i=Z.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){for(var n=0,i=t?l.tweens.length:0;i>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(L(c,l.opts.specialEasing);o>r;r++)if(i=Jn[r].call(l,e,c,l.opts))return i;return I(l,c),Z.isFunction(l.opts.start)&&l.opts.start.call(e,l),Z.fx.timer(Z.extend(a,{anim:l,queue:l.opts.queue,elem:e})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function L(e,t){var n,i,r,o,s;for(n in e)if(i=Z.camelCase(n),r=t[i],o=e[n],Z.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),s=Z.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function P(e,t,n){var i,r,o,s,a,l,c,u,d=this,h=e.style,f={},p=[],m=e.nodeType&&v(e);n.queue||(c=Z._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,u=c.empty.fire,c.empty.fire=function(){c.unqueued||u()}),c.unqueued++,d.always(function(){d.always(function(){c.unqueued--,Z.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===Z.css(e,"display")&&"none"===Z.css(e,"float")&&(Z.support.inlineBlockNeedsLayout&&"inline"!==x(e.nodeName)?h.zoom=1:h.display="inline-block")),n.overflow&&(h.overflow="hidden",Z.support.shrinkWrapBlocks||d.done(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],Kn.exec(o)){if(delete t[i],o===(m?"hide":"show"))continue;p.push(i)}if(s=p.length)for(a=Z._data(e,"fxshow")||Z._data(e,"fxshow",{}),m?Z(e).show():d.done(function(){Z(e).hide()}),d.done(function(){var t;Z.removeData(e,"fxshow",!0);for(t in f)Z.style(e,t,f[t])}),i=0;s>i;i++)r=p[i],l=d.createTween(r,m?a[r]:0),f[r]=a[r]||Z.style(e,r),r in a||(a[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}function O(e,t,n,i,r){return new O.prototype.init(e,t,n,i,r)}function H(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=vn[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function R(e){return Z.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var F,j,z=e.document,W=e.location,B=e.navigator,U=e.jQuery,q=e.$,Y=Array.prototype.push,V=Array.prototype.slice,X=Array.prototype.indexOf,G=Object.prototype.toString,K=Object.prototype.hasOwnProperty,Q=String.prototype.trim,Z=function(e,t){return new Z.fn.init(e,t,F)},J=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,nt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,it=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ot=/^[\],:{}\s]*$/,st=/(?:^|:|,)(?:\s*\[)+/g,at=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,lt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ct=/^-ms-/,ut=/-([\da-z])/gi,dt=function(e,t){return(t+"").toUpperCase()},ht=function(){z.addEventListener?(z.removeEventListener("DOMContentLoaded",ht,!1),Z.ready()):"complete"===z.readyState&&(z.detachEvent("onreadystatechange",ht),Z.ready())},ft={};Z.fn=Z.prototype={constructor:Z,init:function(e,n,i){var r,o,s;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:it.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1])return n=n instanceof Z?n[0]:n,s=n&&n.nodeType?n.ownerDocument||n:z,e=Z.parseHTML(r[1],s,!0),rt.test(r[1])&&Z.isPlainObject(n)&&this.attr.call(e,n,!0),Z.merge(this,e);if(o=z.getElementById(r[2]),o&&o.parentNode){if(o.id!==r[2])return i.find(e);this.length=1,this[0]=o}return this.context=z,this.selector=e,this}return Z.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return V.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=Z.merge(this.constructor(),e);return i.prevObject=this,i.context=this.context,"find"===t?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return Z.each(this,e,t)},ready:function(e){return Z.ready.promise().done(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(V.apply(this,arguments),"slice",V.call(arguments).join(","))},map:function(e){return this.pushStack(Z.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:[].sort,splice:[].splice},Z.fn.init.prototype=Z.fn,Z.extend=Z.fn.extend=function(){var e,n,i,r,o,s,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||Z.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(e=arguments[l]))for(n in e)i=a[n],r=e[n],a!==r&&(u&&r&&(Z.isPlainObject(r)||(o=Z.isArray(r)))?(o?(o=!1,s=i&&Z.isArray(i)?i:[]):s=i&&Z.isPlainObject(i)?i:{},a[n]=Z.extend(u,s,r)):r!==t&&(a[n]=r));return a},Z.extend({noConflict:function(t){return e.$===Z&&(e.$=q),t&&e.jQuery===Z&&(e.jQuery=U),Z},isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){if(e===!0?!--Z.readyWait:!Z.isReady){if(!z.body)return setTimeout(Z.ready,1);Z.isReady=!0,e!==!0&&--Z.readyWait>0||(j.resolveWith(z,[Z]),Z.fn.trigger&&Z(z).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray||function(e){return"array"===Z.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):ft[G.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==Z.type(e)||e.nodeType||Z.isWindow(e))return!1;try{if(e.constructor&&!K.call(e,"constructor")&&!K.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||K.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var i;return e&&"string"==typeof e?("boolean"==typeof t&&(n=t,t=0),t=t||z,(i=rt.exec(e))?[t.createElement(i[1])]:(i=Z.buildFragment([e],t,n?null:[]),Z.merge([],(i.cacheable?Z.clone(i.fragment):i.fragment).childNodes))):null},parseJSON:function(t){return t&&"string"==typeof t?(t=Z.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):ot.test(t.replace(at,"@").replace(lt,"]").replace(st,""))?new Function("return "+t)():(Z.error("Invalid JSON: "+t),void 0)):null},parseXML:function(n){var i,r;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(o){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||Z.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ct,"ms-").replace(ut,dt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,i){var r,o=0,s=e.length,a=s===t||Z.isFunction(e);if(i)if(a){for(r in e)if(n.apply(e[r],i)===!1)break}else for(;s>o&&n.apply(e[o++],i)!==!1;);else if(a){for(r in e)if(n.call(e[r],r,e[r])===!1)break}else for(;s>o&&n.call(e[o],o,e[o++])!==!1;);return e},trim:Q&&!Q.call("﻿ ")?function(e){return null==e?"":Q.call(e)}:function(e){return null==e?"":(e+"").replace(nt,"")},makeArray:function(e,t){var n,i=t||[];return null!=e&&(n=Z.type(e),null==e.length||"string"===n||"function"===n||"regexp"===n||Z.isWindow(e)?Y.call(i,e):Z.merge(i,e)),i},inArray:function(e,t,n){var i;if(t){if(X)return X.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,r=e.length,o=0;if("number"==typeof i)for(;i>o;o++)e[r++]=n[o];else for(;n[o]!==t;)e[r++]=n[o++];return e.length=r,e},grep:function(e,t,n){var i,r=[],o=0,s=e.length;for(n=!!n;s>o;o++)i=!!t(e[o],o),n!==i&&r.push(e[o]);return r},map:function(e,n,i){var r,o,s=[],a=0,l=e.length,c=e instanceof Z||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||Z.isArray(e));if(c)for(;l>a;a++)r=n(e[a],a,i),null!=r&&(s[s.length]=r);else for(o in e)r=n(e[o],o,i),null!=r&&(s[s.length]=r);return s.concat.apply([],s)},guid:1,proxy:function(e,n){var i,r,o;return"string"==typeof n&&(i=e[n],n=e,e=i),Z.isFunction(e)?(r=V.call(arguments,2),o=function(){return e.apply(n,r.concat(V.call(arguments)))},o.guid=e.guid=e.guid||Z.guid++,o):t},access:function(e,n,i,r,o,s,a){var l,c=null==i,u=0,d=e.length;if(i&&"object"==typeof i){for(u in i)Z.access(e,n,u,i[u],1,s,r);o=1}else if(r!==t){if(l=a===t&&Z.isFunction(r),c&&(l?(l=n,n=function(e,t,n){return l.call(Z(e),n)}):(n.call(e,r),n=null)),n)for(;d>u;u++)n(e[u],i,l?r.call(e[u],u,n(e[u],i)):r,a);o=1}return o?e:c?n.call(e):d?n(e[0],i):s},now:function(){return(new Date).getTime()}}),Z.ready.promise=function(t){if(!j)if(j=Z.Deferred(),"complete"===z.readyState)setTimeout(Z.ready,1);else if(z.addEventListener)z.addEventListener("DOMContentLoaded",ht,!1),e.addEventListener("load",Z.ready,!1);else{z.attachEvent("onreadystatechange",ht),e.attachEvent("onload",Z.ready);var n=!1;try{n=null==e.frameElement&&z.documentElement}catch(i){}n&&n.doScroll&&function r(){if(!Z.isReady){try{n.doScroll("left")}catch(e){return setTimeout(r,50)}Z.ready()}}()}return j.promise(t)},Z.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){ft["[object "+t+"]"]=t.toLowerCase()}),F=Z(z);var pt={};Z.Callbacks=function(e){e="string"==typeof e?pt[e]||n(e):Z.extend({},e);var i,r,o,s,a,l,c=[],u=!e.once&&[],d=function(t){for(i=e.memory&&t,r=!0,l=s||0,s=0,a=c.length,o=!0;c&&a>l;l++)if(c[l].apply(t[0],t[1])===!1&&e.stopOnFalse){i=!1;break}o=!1,c&&(u?u.length&&d(u.shift()):i?c=[]:h.disable())},h={add:function(){if(c){var t=c.length;!function n(t){Z.each(t,function(t,i){var r=Z.type(i);"function"!==r||e.unique&&h.has(i)?i&&i.length&&"string"!==r&&n(i):c.push(i)})}(arguments),o?a=c.length:i&&(s=t,d(i))}return this},remove:function(){return c&&Z.each(arguments,function(e,t){for(var n;(n=Z.inArray(t,c,n))>-1;)c.splice(n,1),o&&(a>=n&&a--,l>=n&&l--)}),this},has:function(e){return Z.inArray(e,c)>-1},empty:function(){return c=[],this},disable:function(){return c=u=i=t,this},disabled:function(){return!c},lock:function(){return u=t,i||h.disable(),this},locked:function(){return!u},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||r&&!u||(o?u.push(t):d(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!r}};return h},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(n){Z.each(t,function(t,i){var o=i[0],s=e[t];r[i[1]](Z.isFunction(s)?function(){var e=s.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n:this,[e])}:n[o])}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,i):i}},r={};return i.pipe=i.then,Z.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=s.fire,r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=V.call(arguments),s=o.length,a=1!==s||e&&Z.isFunction(e.promise)?s:0,l=1===a?e:Z.Deferred(),c=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?V.call(arguments):r,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);s>r;r++)o[r]&&Z.isFunction(o[r].promise)?o[r].promise().done(c(r,i,o)).fail(l.reject).progress(c(r,n,t)):--a;return a||l.resolveWith(i,o),l.promise()}}),Z.support=function(){var t,n,i,r,o,s,a,l,c,u,d,h=z.createElement("div");if(h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),i=h.getElementsByTagName("a")[0],i.style.cssText="top:1px;float:left;opacity:.5",!n||!n.length)return{};r=z.createElement("select"),o=r.appendChild(z.createElement("option")),s=h.getElementsByTagName("input")[0],t={leadingWhitespace:3===h.firstChild.nodeType,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:"on"===s.value,optSelected:o.selected,getSetAttribute:"t"!==h.className,enctype:!!z.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==z.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===z.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!o.disabled;try{delete h.test}catch(f){t.deleteExpando=!1}if(!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",d=function(){t.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick"),h.detachEvent("onclick",d)),s=z.createElement("input"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","checked"),s.setAttribute("name","t"),h.appendChild(s),a=z.createDocumentFragment(),a.appendChild(h.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=s.checked,a.removeChild(s),a.appendChild(h),h.attachEvent)for(c in{submit:!0,change:!0,focusin:!0})l="on"+c,u=l in h,u||(h.setAttribute(l,"return;"),u="function"==typeof h[l]),t[c+"Bubbles"]=u;return Z(function(){var n,i,r,o,s="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=z.getElementsByTagName("body")[0];a&&(n=z.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),i=z.createElement("div"),n.appendChild(i),i.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=i.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",t.reliableHiddenOffsets=u&&0===r[0].offsetHeight,i.innerHTML="",i.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===i.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==a.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(i,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(i,null)||{width:"4px"}).width,o=z.createElement("div"),o.style.cssText=i.style.cssText=s,o.style.marginRight=o.style.width="0",i.style.width="1px",i.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),"undefined"!=typeof i.style.zoom&&(i.innerHTML="",i.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===i.offsetWidth,i.style.display="block",i.style.overflow="visible",i.innerHTML="<div></div>",i.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==i.offsetWidth,n.style.zoom=1),a.removeChild(n),n=i=r=o=null)}),a.removeChild(h),n=i=r=o=s=a=h=null,t}();var mt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,gt=/([A-Z])/g;Z.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(Z.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?Z.cache[e[Z.expando]]:e[Z.expando],!!e&&!r(e)},data:function(e,n,i,r){if(Z.acceptData(e)){var o,s,a=Z.expando,l="string"==typeof n,c=e.nodeType,u=c?Z.cache:e,d=c?e[a]:e[a]&&a;if(d&&u[d]&&(r||u[d].data)||!l||i!==t)return d||(c?e[a]=d=Z.deletedIds.pop()||Z.guid++:d=a),u[d]||(u[d]={},c||(u[d].toJSON=Z.noop)),("object"==typeof n||"function"==typeof n)&&(r?u[d]=Z.extend(u[d],n):u[d].data=Z.extend(u[d].data,n)),o=u[d],r||(o.data||(o.data={}),o=o.data),i!==t&&(o[Z.camelCase(n)]=i),l?(s=o[n],null==s&&(s=o[Z.camelCase(n)])):s=o,s}},removeData:function(e,t,n){if(Z.acceptData(e)){var i,o,s,a=e.nodeType,l=a?Z.cache:e,c=a?e[Z.expando]:Z.expando;if(l[c]){if(t&&(i=n?l[c]:l[c].data)){Z.isArray(t)||(t in i?t=[t]:(t=Z.camelCase(t),t=t in i?[t]:t.split(" ")));for(o=0,s=t.length;s>o;o++)delete i[t[o]];if(!(n?r:Z.isEmptyObject)(i))return}(n||(delete l[c].data,r(l[c])))&&(a?Z.cleanData([e],!0):Z.support.deleteExpando||l!=l.window?delete l[c]:l[c]=null)}}},_data:function(e,t,n){return Z.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&Z.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),Z.fn.extend({data:function(e,n){var r,o,s,a,l,c=this[0],u=0,d=null;if(e===t){if(this.length&&(d=Z.data(c),1===c.nodeType&&!Z._data(c,"parsedAttrs"))){for(s=c.attributes,l=s.length;l>u;u++)a=s[u].name,a.indexOf("data-")||(a=Z.camelCase(a.substring(5)),i(c,a,d[a]));
Z._data(c,"parsedAttrs",!0)}return d}return"object"==typeof e?this.each(function(){Z.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",o=r[1]+"!",Z.access(this,function(n){return n===t?(d=this.triggerHandler("getData"+o,[r[0]]),d===t&&c&&(d=Z.data(c,e),d=i(c,e,d)),d===t&&r[1]?this.data(r[0]):d):(r[1]=n,this.each(function(){var t=Z(this);t.triggerHandler("setData"+o,r),Z.data(this,e,n),t.triggerHandler("changeData"+o,r)}),void 0)},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){Z.removeData(this,e)})}}),Z.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=Z._data(e,t),n&&(!i||Z.isArray(n)?i=Z._data(e,t,Z.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Z.queue(e,t),i=n.length,r=n.shift(),o=Z._queueHooks(e,t),s=function(){Z.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Z._data(e,n)||Z._data(e,n,{empty:Z.Callbacks("once memory").add(function(){Z.removeData(e,t+"queue",!0),Z.removeData(e,n,!0)})})}}),Z.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?Z.queue(this[0],e):n===t?this:this.each(function(){var t=Z.queue(this,e,n);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},delay:function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,r=1,o=Z.Deferred(),s=this,a=this.length,l=function(){--r||o.resolveWith(s,[s])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";a--;)i=Z._data(s[a],e+"queueHooks"),i&&i.empty&&(r++,i.empty.add(l));return l(),o.promise(n)}});var vt,yt,bt,wt=/[\t\r\n]/g,_t=/\r/g,xt=/^(?:button|input)$/i,Ct=/^(?:button|input|object|select|textarea)$/i,kt=/^a(?:rea|)$/i,Tt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,St=Z.support.getSetAttribute;Z.fn.extend({attr:function(e,t){return Z.access(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})},prop:function(e,t){return Z.access(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return e=Z.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,r,o,s,a;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(tt),n=0,i=this.length;i>n;n++)if(r=this[n],1===r.nodeType)if(r.className||1!==t.length){for(o=" "+r.className+" ",s=0,a=t.length;a>s;s++)o.indexOf(" "+t[s]+" ")<0&&(o+=t[s]+" ");r.className=Z.trim(o)}else r.className=e;return this},removeClass:function(e){var n,i,r,o,s,a,l;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(n=(e||"").split(tt),a=0,l=this.length;l>a;a++)if(r=this[a],1===r.nodeType&&r.className){for(i=(" "+r.className+" ").replace(wt," "),o=0,s=n.length;s>o;o++)for(;i.indexOf(" "+n[o]+" ")>=0;)i=i.replace(" "+n[o]+" "," ");r.className=e?Z.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return Z.isFunction(e)?this.each(function(n){Z(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var r,o=0,s=Z(this),a=t,l=e.split(tt);r=l[o++];)a=i?a:!s.hasClass(r),s[a?"addClass":"removeClass"](r);else("undefined"===n||"boolean"===n)&&(this.className&&Z._data(this,"__className__",this.className),this.className=this.className||e===!1?"":Z._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(wt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,r,o=this[0];{if(arguments.length)return r=Z.isFunction(e),this.each(function(i){var o,s=Z(this);1===this.nodeType&&(o=r?e.call(this,i,s.val()):e,null==o?o="":"number"==typeof o?o+="":Z.isArray(o)&&(o=Z.map(o,function(e){return null==e?"":e+""})),n=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==t||(this.value=o))});if(o)return n=Z.valHooks[o.type]||Z.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==t?i:(i=o.value,"string"==typeof i?i.replace(_t,""):null==i?"":i)}}}),Z.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,i,r,o=e.selectedIndex,s=[],a=e.options,l="select-one"===e.type;if(0>o)return null;for(n=l?o:0,i=l?o+1:a.length;i>n;n++)if(r=a[n],!(!r.selected||(Z.support.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&Z.nodeName(r.parentNode,"optgroup"))){if(t=Z(r).val(),l)return t;s.push(t)}return l&&!s.length&&a.length?Z(a[o]).val():s},set:function(e,t){var n=Z.makeArray(t);return Z(e).find("option").each(function(){this.selected=Z.inArray(Z(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,i,r){var o,s,a,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return r&&Z.isFunction(Z.fn[n])?Z(e)[n](i):"undefined"==typeof e.getAttribute?Z.prop(e,n,i):(a=1!==l||!Z.isXMLDoc(e),a&&(n=n.toLowerCase(),s=Z.attrHooks[n]||(Tt.test(n)?yt:vt)),i!==t?null===i?(Z.removeAttr(e,n),void 0):s&&"set"in s&&a&&(o=s.set(e,i,n))!==t?o:(e.setAttribute(n,i+""),i):s&&"get"in s&&a&&null!==(o=s.get(e,n))?o:(o=e.getAttribute(n),null===o?t:o))},removeAttr:function(e,t){var n,i,r,o,s=0;if(t&&1===e.nodeType)for(i=t.split(tt);s<i.length;s++)r=i[s],r&&(n=Z.propFix[r]||r,o=Tt.test(r),o||Z.attr(e,r,""),e.removeAttribute(St?r:n),o&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(xt.test(e.nodeName)&&e.parentNode)Z.error("type property can't be changed");else if(!Z.support.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return vt&&Z.nodeName(e,"button")?vt.get(e,t):t in e?e.value:null},set:function(e,t,n){return vt&&Z.nodeName(e,"button")?vt.set(e,t,n):(e.value=t,void 0)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var r,o,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return s=1!==a||!Z.isXMLDoc(e),s&&(n=Z.propFix[n]||n,o=Z.propHooks[n]),i!==t?o&&"set"in o&&(r=o.set(e,i,n))!==t?r:e[n]=i:o&&"get"in o&&null!==(r=o.get(e,n))?r:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):Ct.test(e.nodeName)||kt.test(e.nodeName)&&e.href?0:t}}}}),yt={get:function(e,n){var i,r=Z.prop(e,n);return r===!0||"boolean"!=typeof r&&(i=e.getAttributeNode(n))&&i.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var i;return t===!1?Z.removeAttr(e,n):(i=Z.propFix[n]||n,i in e&&(e[i]=!0),e.setAttribute(n,n.toLowerCase())),n}},St||(bt={name:!0,id:!0,coords:!0},vt=Z.valHooks.button={get:function(e,n){var i;return i=e.getAttributeNode(n),i&&(bt[n]?""!==i.value:i.specified)?i.value:t},set:function(e,t,n){var i=e.getAttributeNode(n);return i||(i=z.createAttribute(n),e.setAttributeNode(i)),i.value=t+""}},Z.each(["width","height"],function(e,t){Z.attrHooks[t]=Z.extend(Z.attrHooks[t],{set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}})}),Z.attrHooks.contenteditable={get:vt.get,set:function(e,t,n){""===t&&(t="false"),vt.set(e,t,n)}}),Z.support.hrefNormalized||Z.each(["href","src","width","height"],function(e,n){Z.attrHooks[n]=Z.extend(Z.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return null===i?t:i}})}),Z.support.style||(Z.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),Z.support.optSelected||(Z.propHooks.selected=Z.extend(Z.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),Z.support.enctype||(Z.propFix.enctype="encoding"),Z.support.checkOn||Z.each(["radio","checkbox"],function(){Z.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]=Z.extend(Z.valHooks[this],{set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}})});var Dt=/^(?:textarea|input|select)$/i,Nt=/^([^\.]*|)(?:\.(.+)|)$/,Et=/(?:^|\s)hover(\.\S+|)\b/,Mt=/^key/,$t=/^(?:mouse|contextmenu)|click/,It=/^(?:focusinfocus|focusoutblur)$/,At=function(e){return Z.event.special.hover?e:e.replace(Et,"mouseenter$1 mouseleave$1")};Z.event={add:function(e,n,i,r,o){var s,a,l,c,u,d,h,f,p,m,g;if(3!==e.nodeType&&8!==e.nodeType&&n&&i&&(s=Z._data(e))){for(i.handler&&(p=i,i=p.handler,o=p.selector),i.guid||(i.guid=Z.guid++),l=s.events,l||(s.events=l={}),a=s.handle,a||(s.handle=a=function(e){return"undefined"==typeof Z||e&&Z.event.triggered===e.type?t:Z.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=Z.trim(At(n)).split(" "),c=0;c<n.length;c++)u=Nt.exec(n[c])||[],d=u[1],h=(u[2]||"").split(".").sort(),g=Z.event.special[d]||{},d=(o?g.delegateType:g.bindType)||d,g=Z.event.special[d]||{},f=Z.extend({type:d,origType:u[1],data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&Z.expr.match.needsContext.test(o),namespace:h.join(".")},p),m=l[d],m||(m=l[d]=[],m.delegateCount=0,g.setup&&g.setup.call(e,r,h,a)!==!1||(e.addEventListener?e.addEventListener(d,a,!1):e.attachEvent&&e.attachEvent("on"+d,a))),g.add&&(g.add.call(e,f),f.handler.guid||(f.handler.guid=i.guid)),o?m.splice(m.delegateCount++,0,f):m.push(f),Z.event.global[d]=!0;e=null}},global:{},remove:function(e,t,n,i,r){var o,s,a,l,c,u,d,h,f,p,m,g=Z.hasData(e)&&Z._data(e);if(g&&(h=g.events)){for(t=Z.trim(At(t||"")).split(" "),o=0;o<t.length;o++)if(s=Nt.exec(t[o])||[],a=l=s[1],c=s[2],a){for(f=Z.event.special[a]||{},a=(i?f.delegateType:f.bindType)||a,p=h[a]||[],u=p.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d=0;d<p.length;d++)m=p[d],!r&&l!==m.origType||n&&n.guid!==m.guid||c&&!c.test(m.namespace)||i&&i!==m.selector&&("**"!==i||!m.selector)||(p.splice(d--,1),m.selector&&p.delegateCount--,f.remove&&f.remove.call(e,m));0===p.length&&u!==p.length&&(f.teardown&&f.teardown.call(e,c,g.handle)!==!1||Z.removeEvent(e,a,g.handle),delete h[a])}else for(a in h)Z.event.remove(e,a+t[o],n,i,!0);Z.isEmptyObject(h)&&(delete g.handle,Z.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,i,r,o){if(!r||3!==r.nodeType&&8!==r.nodeType){var s,a,l,c,u,d,h,f,p,m,g=n.type||n,v=[];if(!It.test(g+Z.event.triggered)&&(g.indexOf("!")>=0&&(g=g.slice(0,-1),a=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),r&&!Z.event.customEvent[g]||Z.event.global[g]))if(n="object"==typeof n?n[Z.expando]?n:new Z.Event(g,n):new Z.Event(g),n.type=g,n.isTrigger=!0,n.exclusive=a,n.namespace=v.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d=g.indexOf(":")<0?"on"+g:"",r){if(n.result=t,n.target||(n.target=r),i=null!=i?Z.makeArray(i):[],i.unshift(n),h=Z.event.special[g]||{},!h.trigger||h.trigger.apply(r,i)!==!1){if(p=[[r,h.bindType||g]],!o&&!h.noBubble&&!Z.isWindow(r)){for(m=h.delegateType||g,c=It.test(m+g)?r:r.parentNode,u=r;c;c=c.parentNode)p.push([c,m]),u=c;u===(r.ownerDocument||z)&&p.push([u.defaultView||u.parentWindow||e,m])}for(l=0;l<p.length&&!n.isPropagationStopped();l++)c=p[l][0],n.type=p[l][1],f=(Z._data(c,"events")||{})[n.type]&&Z._data(c,"handle"),f&&f.apply(c,i),f=d&&c[d],f&&Z.acceptData(c)&&f.apply&&f.apply(c,i)===!1&&n.preventDefault();return n.type=g,o||n.isDefaultPrevented()||h._default&&h._default.apply(r.ownerDocument,i)!==!1||"click"===g&&Z.nodeName(r,"a")||!Z.acceptData(r)||d&&r[g]&&("focus"!==g&&"blur"!==g||0!==n.target.offsetWidth)&&!Z.isWindow(r)&&(u=r[d],u&&(r[d]=null),Z.event.triggered=g,r[g](),Z.event.triggered=t,u&&(r[d]=u)),n.result}}else{s=Z.cache;for(l in s)s[l].events&&s[l].events[g]&&Z.event.trigger(n,i,s[l].handle.elem,!0)}}},dispatch:function(n){n=Z.event.fix(n||e.event);var i,r,o,s,a,l,c,u,d,h=(Z._data(this,"events")||{})[n.type]||[],f=h.delegateCount,p=V.call(arguments),m=!n.exclusive&&!n.namespace,g=Z.event.special[n.type]||{},v=[];if(p[0]=n,n.delegateTarget=this,!g.preDispatch||g.preDispatch.call(this,n)!==!1){if(f&&(!n.button||"click"!==n.type))for(o=n.target;o!=this;o=o.parentNode||this)if(o.disabled!==!0||"click"!==n.type){for(a={},c=[],i=0;f>i;i++)u=h[i],d=u.selector,a[d]===t&&(a[d]=u.needsContext?Z(d,this).index(o)>=0:Z.find(d,this,null,[o]).length),a[d]&&c.push(u);c.length&&v.push({elem:o,matches:c})}for(h.length>f&&v.push({elem:this,matches:h.slice(f)}),i=0;i<v.length&&!n.isPropagationStopped();i++)for(l=v[i],n.currentTarget=l.elem,r=0;r<l.matches.length&&!n.isImmediatePropagationStopped();r++)u=l.matches[r],(m||!n.namespace&&!u.namespace||n.namespace_re&&n.namespace_re.test(u.namespace))&&(n.data=u.data,n.handleObj=u,s=((Z.event.special[u.origType]||{}).handle||u.handler).apply(l.elem,p),s!==t&&(n.result=s,s===!1&&(n.preventDefault(),n.stopPropagation())));return g.postDispatch&&g.postDispatch.call(this,n),n.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,o,s=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||z,r=i.documentElement,o=i.body,e.pageX=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,n,i=e,r=Z.event.fixHooks[e.type]||{},o=r.props?this.props.concat(r.props):this.props;for(e=Z.Event(i),t=o.length;t;)n=o[--t],e[n]=i[n];return e.target||(e.target=i.srcElement||z),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,i):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){Z.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,i){var r=Z.extend(new Z.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?Z.event.trigger(r,null,t):Z.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},Z.event.handle=Z.event.dispatch,Z.removeEvent=z.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&("undefined"==typeof e[i]&&(e[i]=null),e.detachEvent(i,n))},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?s:o):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),this[Z.expando]=!0,void 0):new Z.Event(e,t)},Z.Event.prototype={preventDefault:function(){this.isDefaultPrevented=s;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=s;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()},isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o},Z.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return o.selector,(!r||r!==i&&!Z.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Z.support.submitBubbles||(Z.event.special.submit={setup:function(){return Z.nodeName(this,"form")?!1:(Z.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=Z.nodeName(n,"input")||Z.nodeName(n,"button")?n.form:t;i&&!Z._data(i,"_submit_attached")&&(Z.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),Z._data(i,"_submit_attached",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Z.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return Z.nodeName(this,"form")?!1:(Z.event.remove(this,"._submit"),void 0)}}),Z.support.changeBubbles||(Z.event.special.change={setup:function(){return Dt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(Z.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),Z.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Z.event.simulate("change",this,e,!0)})),!1):(Z.event.add(this,"beforeactivate._change",function(e){var t=e.target;Dt.test(t.nodeName)&&!Z._data(t,"_change_attached")&&(Z.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||Z.event.simulate("change",this.parentNode,e,!0)}),Z._data(t,"_change_attached",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return Z.event.remove(this,"._change"),!Dt.test(this.nodeName)}}),Z.support.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){0===n++&&z.addEventListener(e,i,!0)},teardown:function(){0===--n&&z.removeEventListener(e,i,!0)}}}),Z.fn.extend({on:function(e,n,i,r,s){var a,l;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(l in e)this.on(l,n,i,e[l],s);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),r===!1)r=o;else if(!r)return this;return 1===s&&(a=r,r=function(e){return Z().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,r,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var r,s;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Z(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=o),this.each(function(){Z.event.remove(this,e,i,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return Z(this.context).on(e,this.selector,t,n),this},die:function(e,t){return Z(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?Z.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,n=e.guid||Z.guid++,i=0,r=function(n){var r=(Z._data(this,"lastToggle"+e.guid)||0)%i;return Z._data(this,"lastToggle"+e.guid,r+1),n.preventDefault(),t[r].apply(this,arguments)||!1};for(r.guid=n;i<t.length;)t[i++].guid=n;return this.click(r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Mt.test(t)&&(Z.event.fixHooks[t]=Z.event.keyHooks),$t.test(t)&&(Z.event.fixHooks[t]=Z.event.mouseHooks)}),/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
function(e,t){function n(e,t,n,i){n=n||[],t=t||$;var r,o,s,a,l=t.nodeType;if(!e||"string"!=typeof e)return n;if(1!==l&&9!==l)return[];if(s=_(t),!s&&!i&&(r=nt.exec(e)))if(a=r[1]){if(9===l){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&x(t,o)&&o.id===a)return n.push(o),n}else{if(r[2])return O.apply(n,H.call(t.getElementsByTagName(e),0)),n;if((a=r[3])&&ht&&t.getElementsByClassName)return O.apply(n,H.call(t.getElementsByClassName(a),0)),n}return m(e.replace(Q,"$1"),t,n,i,s)}function i(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function r(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function o(e){return F(function(t){return t=+t,F(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function s(e,t,n){if(e===t)return n;for(var i=e.nextSibling;i;){if(i===t)return-1;i=i.nextSibling}return 1}function a(e,t){var i,r,o,s,a,l,c,u=W[E][e];if(u)return t?0:u.slice(0);for(a=e,l=[],c=b.preFilter;a;){(!i||(r=J.exec(a)))&&(r&&(a=a.slice(r[0].length)),l.push(o=[])),i=!1,(r=et.exec(a))&&(o.push(i=new M(r.shift())),a=a.slice(i.length),i.type=r[0].replace(Q," "));for(s in b.filter)!(r=at[s].exec(a))||c[s]&&!(r=c[s](r,$,!0))||(o.push(i=new M(r.shift())),a=a.slice(i.length),i.type=s,i.matches=r);if(!i)break}return t?a.length:a?n.error(e):W(e,l).slice(0)}function l(e,t,n){var i=t.dir,r=n&&"parentNode"===t.dir,o=L++;return t.first?function(t,n,o){for(;t=t[i];)if(r||1===t.nodeType)return e(t,n,o)}:function(t,n,s){if(s){for(;t=t[i];)if((r||1===t.nodeType)&&e(t,n,s))return t}else for(var a,l=A+" "+o+" ",c=l+v;t=t[i];)if(r||1===t.nodeType){if((a=t[E])===c)return t.sizset;if("string"==typeof a&&0===a.indexOf(l)){if(t.sizset)return t}else{if(t[E]=c,e(t,n,s))return t.sizset=!0,t;t.sizset=!1}}}}function c(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function u(e,t,n,i,r){for(var o,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(o=e[a])&&(!n||n(o,i,r))&&(s.push(o),c&&t.push(a));return s}function d(e,t,n,i,r,o){return i&&!i[E]&&(i=d(i)),r&&!r[E]&&(r=d(r,o)),F(function(o,s,a,l){if(!o||!r){var c,d,h,f=[],m=[],g=s.length,v=o||p(t||"*",a.nodeType?[a]:a,[],o),y=!e||!o&&t?v:u(v,f,e,a,l),b=n?r||(o?e:g||i)?[]:s:y;if(n&&n(y,b,a,l),i)for(h=u(b,m),i(h,[],a,l),c=h.length;c--;)(d=h[c])&&(b[m[c]]=!(y[m[c]]=d));if(o)for(c=e&&b.length;c--;)(d=b[c])&&(o[f[c]]=!(s[f[c]]=d));else b=u(b===s?b.splice(g,b.length):b),r?r(null,s,b,l):O.apply(s,b)}})}function h(e){for(var t,n,i,r=e.length,o=b.relative[e[0].type],s=o||b.relative[" "],a=o?1:0,u=l(function(e){return e===t},s,!0),f=l(function(e){return R.call(t,e)>-1},s,!0),p=[function(e,n,i){return!o&&(i||n!==S)||((t=n).nodeType?u(e,n,i):f(e,n,i))}];r>a;a++)if(n=b.relative[e[a].type])p=[l(c(p),n)];else{if(n=b.filter[e[a].type].apply(null,e[a].matches),n[E]){for(i=++a;r>i&&!b.relative[e[i].type];i++);return d(a>1&&c(p),a>1&&e.slice(0,a-1).join("").replace(Q,"$1"),n,i>a&&h(e.slice(a,i)),r>i&&h(e=e.slice(i)),r>i&&e.join(""))}p.push(n)}return c(p)}function f(e,t){var i=t.length>0,r=e.length>0,o=function(s,a,l,c,d){var h,f,p,m=[],g=0,y="0",w=s&&[],_=null!=d,x=S,C=s||r&&b.find.TAG("*",d&&a.parentNode||a),k=A+=null==x?1:Math.E;for(_&&(S=a!==$&&a,v=o.el);null!=(h=C[y]);y++){if(r&&h){for(f=0;p=e[f];f++)if(p(h,a,l)){c.push(h);break}_&&(A=k,v=++o.el)}i&&((h=!p&&h)&&g--,s&&w.push(h))}if(g+=y,i&&y!==g){for(f=0;p=t[f];f++)p(w,m,a,l);if(s){if(g>0)for(;y--;)w[y]||m[y]||(m[y]=P.call(c));m=u(m)}O.apply(c,m),_&&!s&&m.length>0&&g+t.length>1&&n.uniqueSort(c)}return _&&(A=k,S=x),w};return o.el=0,i?F(o):o}function p(e,t,i,r){for(var o=0,s=t.length;s>o;o++)n(e,t[o],i,r);return i}function m(e,t,n,i,r){var o,s,l,c,u,d=a(e);if(d.length,!i&&1===d.length){if(s=d[0]=d[0].slice(0),s.length>2&&"ID"===(l=s[0]).type&&9===t.nodeType&&!r&&b.relative[s[1].type]){if(t=b.find.ID(l.matches[0].replace(st,""),t,r)[0],!t)return n;e=e.slice(s.shift().length)}for(o=at.POS.test(e)?-1:s.length-1;o>=0&&(l=s[o],!b.relative[c=l.type]);o--)if((u=b.find[c])&&(i=u(l.matches[0].replace(st,""),it.test(s[0].type)&&t.parentNode||t,r))){if(s.splice(o,1),e=i.length&&s.join(""),!e)return O.apply(n,H.call(i,0)),n;break}}return C(e,d)(i,t,r,n,it.test(e)),n}function g(){}var v,y,b,w,_,x,C,k,T,S,D=!0,N="undefined",E=("sizcache"+Math.random()).replace(".",""),M=String,$=e.document,I=$.documentElement,A=0,L=0,P=[].pop,O=[].push,H=[].slice,R=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},F=function(e,t){return e[E]=null==t||t,e},j=function(){var e={},t=[];return F(function(n,i){return t.push(n)>b.cacheLength&&delete e[t.shift()],e[n]=i},e)},z=j(),W=j(),B=j(),U="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",Y=q.replace("w","w#"),V="([*^$|!~]?=)",X="\\["+U+"*("+q+")"+U+"*(?:"+V+U+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+Y+")|)|)"+U+"*\\]",G=":("+q+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+X+")|[^:]|\\\\.)*|.*))\\)|)",K=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+U+"*((?:-\\d)?\\d*)"+U+"*\\)|)(?=[^-]|$)",Q=new RegExp("^"+U+"+|((?:^|[^\\\\])(?:\\\\.)*)"+U+"+$","g"),J=new RegExp("^"+U+"*,"+U+"*"),et=new RegExp("^"+U+"*([\\x20\\t\\r\\n\\f>+~])"+U+"*"),tt=new RegExp(G),nt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,it=/[\x20\t\r\n\f]*[+~]/,rt=/h\d/i,ot=/input|select|textarea|button/i,st=/\\(?!\\)/g,at={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),NAME:new RegExp("^\\[name=['\"]?("+q+")['\"]?\\]"),TAG:new RegExp("^("+q.replace("w","w*")+")"),ATTR:new RegExp("^"+X),PSEUDO:new RegExp("^"+G),POS:new RegExp(K,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+U+"*(even|odd|(([+-]|)(\\d*)n|)"+U+"*(?:([+-]|)"+U+"*(\\d+)|))"+U+"*\\)|)","i"),needsContext:new RegExp("^"+U+"*[>+~]|"+K,"i")},lt=function(e){var t=$.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},ct=lt(function(e){return e.appendChild($.createComment("")),!e.getElementsByTagName("*").length}),ut=lt(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==N&&"#"===e.firstChild.getAttribute("href")}),dt=lt(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),ht=lt(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),ft=lt(function(e){e.id=E+0,e.innerHTML="<a name='"+E+"'></a><div name='"+E+"'></div>",I.insertBefore(e,I.firstChild);var t=$.getElementsByName&&$.getElementsByName(E).length===2+$.getElementsByName(E+0).length;return y=!$.getElementById(E),I.removeChild(e),t});try{H.call(I.childNodes,0)[0].nodeType}catch(pt){H=function(e){for(var t,n=[];t=this[e];e++)n.push(t);return n}}n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){return n(t,null,null,[e]).length>0},w=n.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=w(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i];i++)n+=w(t);return n},_=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},x=n.contains=I.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!!(i&&1===i.nodeType&&n.contains&&n.contains(i))}:I.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},n.attr=function(e,t){var n,i=_(e);return i||(t=t.toLowerCase()),(n=b.attrHandle[t])?n(e):i||dt?e.getAttribute(t):(n=e.getAttributeNode(t),n?"boolean"==typeof e[t]?e[t]?t:null:n.specified?n.value:null:null)},b=n.selectors={cacheLength:50,createPseudo:F,match:at,attrHandle:ut?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:y?function(e,t,n){if(typeof t.getElementById!==N&&!n){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}}:function(e,n,i){if(typeof n.getElementById!==N&&!i){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==N&&r.getAttributeNode("id").value===e?[r]:t:[]}},TAG:ct?function(e,t){return typeof t.getElementsByTagName!==N?t.getElementsByTagName(e):void 0}:function(e,t){var n=t.getElementsByTagName(e);if("*"===e){for(var i,r=[],o=0;i=n[o];o++)1===i.nodeType&&r.push(i);return r}return n},NAME:ft&&function(e,t){return typeof t.getElementsByName!==N?t.getElementsByName(name):void 0},CLASS:ht&&function(e,t,n){return typeof t.getElementsByClassName===N||n?void 0:t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(st,""),e[3]=(e[4]||e[5]||"").replace(st,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||n.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&n.error(e[0]),e},PSEUDO:function(e){var t,n;return at.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(tt.test(t)&&(n=a(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t),e.slice(0,3))}},filter:{ID:y?function(e){return e=e.replace(st,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(st,""),function(t){var n=typeof t.getAttributeNode!==N&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(st,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=z[E][e];return t||(t=z(e,new RegExp("(^|"+U+")"+e+"("+U+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==N&&e.getAttribute("class")||"")}},ATTR:function(e,t,i){return function(r){var o=n.attr(r,e);return null==o?"!="===t:t?(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.substr(o.length-i.length)===i:"~="===t?(" "+o+" ").indexOf(i)>-1:"|="===t?o===i||o.substr(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i){return"nth"===e?function(e){var t,r,o=e.parentNode;if(1===n&&0===i)return!0;if(o)for(r=0,t=o.firstChild;t&&(1!==t.nodeType||(r++,e!==t));t=t.nextSibling);return r-=i,r===n||0===r%n&&r/n>=0}:function(t){var n=t;switch(e){case"only":case"first":for(;n=n.previousSibling;)if(1===n.nodeType)return!1;if("first"===e)return!0;n=t;case"last":for(;n=n.nextSibling;)if(1===n.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var i,r=b.pseudos[e]||b.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return r[E]?r(t):r.length>1?(i=[e,e,"",t],b.setFilters.hasOwnProperty(e.toLowerCase())?F(function(e,n){for(var i,o=r(e,t),s=o.length;s--;)i=R.call(e,o[s]),e[i]=!(n[i]=o[s])}):function(e){return r(e,0,i)}):r}},pseudos:{not:F(function(e){var t=[],n=[],i=C(e.replace(Q,"$1"));return i[E]?F(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:F(function(e){return function(t){return n(e,t).length>0}}),contains:F(function(e){return function(t){return(t.textContent||t.innerText||w(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!b.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return rt.test(e.nodeName)},text:function(e){var t,n;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(n=e.getAttribute("type"))||n.toLowerCase()===t)},radio:i("radio"),checkbox:i("checkbox"),file:i("file"),password:i("password"),image:i("image"),submit:r("submit"),reset:r("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return ot.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return!(e!==t.activeElement||t.hasFocus&&!t.hasFocus()||!e.type&&!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:o(function(){return[0]}),last:o(function(e,t){return[t-1]}),eq:o(function(e,t,n){return[0>n?n+t:n]}),even:o(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:o(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:o(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:o(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},k=I.compareDocumentPosition?function(e,t){return e===t?(T=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return T=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,i,r=[],o=[],a=e.parentNode,l=t.parentNode,c=a;if(a===l)return s(e,t);if(!a)return-1;if(!l)return 1;for(;c;)r.unshift(c),c=c.parentNode;for(c=l;c;)o.unshift(c),c=c.parentNode;n=r.length,i=o.length;for(var u=0;n>u&&i>u;u++)if(r[u]!==o[u])return s(r[u],o[u]);return u===n?s(e,o[u],-1):s(r[u],t,1)},[0,0].sort(k),D=!T,n.uniqueSort=function(e){var t,n=1;if(T=D,e.sort(k),T)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},C=n.compile=function(e,t){var n,i=[],r=[],o=B[E][e];if(!o){for(t||(t=a(e)),n=t.length;n--;)o=h(t[n]),o[E]?i.push(o):r.push(o);o=B(e,f(r,i))}return o},$.querySelectorAll&&function(){var e,t=m,i=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,o=[":focus"],s=[":active",":focus"],l=I.matchesSelector||I.mozMatchesSelector||I.webkitMatchesSelector||I.oMatchesSelector||I.msMatchesSelector;lt(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||o.push("\\["+U+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||o.push(":checked")}),lt(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&o.push("[*^$]="+U+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||o.push(":enabled",":disabled")}),o=new RegExp(o.join("|")),m=function(e,n,r,s,l){if(!(s||l||o&&o.test(e))){var c,u,d=!0,h=E,f=n,p=9===n.nodeType&&e;if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){for(c=a(e),(d=n.getAttribute("id"))?h=d.replace(i,"\\$&"):n.setAttribute("id",h),h="[id='"+h+"'] ",u=c.length;u--;)c[u]=h+c[u].join("");f=it.test(e)&&n.parentNode||n,p=c.join(",")}if(p)try{return O.apply(r,H.call(f.querySelectorAll(p),0)),r}catch(m){}finally{d||n.removeAttribute("id")}}return t(e,n,r,s,l)},l&&(lt(function(t){e=l.call(t,"div");try{l.call(t,"[test!='']:sizzle"),s.push("!=",G)}catch(n){}}),s=new RegExp(s.join("|")),n.matchesSelector=function(t,i){if(i=i.replace(r,"='$1']"),!(_(t)||s.test(i)||o&&o.test(i)))try{var a=l.call(t,i);if(a||e||t.document&&11!==t.document.nodeType)return a}catch(c){}return n(i,null,null,[t]).length>0})}(),b.pseudos.nth=b.pseudos.eq,b.filters=g.prototype=b.pseudos,b.setFilters=new g,n.attr=Z.attr,Z.find=n,Z.expr=n.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=n.uniqueSort,Z.text=n.getText,Z.isXMLDoc=n.isXML,Z.contains=n.contains}(e);var Lt=/Until$/,Pt=/^(?:parents|prev(?:Until|All))/,Ot=/^.[^:#\[\.,]*$/,Ht=Z.expr.match.needsContext,Rt={children:!0,contents:!0,next:!0,prev:!0};Z.fn.extend({find:function(e){var t,n,i,r,o,s,a=this;if("string"!=typeof e)return Z(e).filter(function(){for(t=0,n=a.length;n>t;t++)if(Z.contains(a[t],this))return!0});for(s=this.pushStack("","find",e),t=0,n=this.length;n>t;t++)if(i=s.length,Z.find(e,this[t],s),t>0)for(r=i;r<s.length;r++)for(o=0;i>o;o++)if(s[o]===s[r]){s.splice(r--,1);break}return s},has:function(e){var t,n=Z(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(Z.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(c(this,e,!1),"not",e)},filter:function(e){return this.pushStack(c(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?Ht.test(e)?Z(e,this.context).index(this[0])>=0:Z.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=Ht.test(e)||"string"!=typeof e?Z(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(s?s.index(n)>-1:Z.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}return o=o.length>1?Z.unique(o):o,this.pushStack(o,"closest",e)},index:function(e){return e?"string"==typeof e?Z.inArray(this[0],Z(e)):Z.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?Z(e,t):Z.makeArray(e&&e.nodeType?[e]:e),i=Z.merge(this.get(),n);return this.pushStack(a(n[0])||a(i[0])?i:Z.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.fn.andSelf=Z.fn.addBack,Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Z.dir(e,"parentNode",n)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Z.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Z.dir(e,"previousSibling",n)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return Z.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(n,i){var r=Z.map(this,t,n);return Lt.test(e)||(i=n),i&&"string"==typeof i&&(r=Z.filter(i,r)),r=this.length>1&&!Rt[e]?Z.unique(r):r,this.length>1&&Pt.test(e)&&(r=r.reverse()),this.pushStack(r,e,V.call(arguments).join(","))}}),Z.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?Z.find.matchesSelector(t[0],e)?[t[0]]:[]:Z.find.matches(e,t)},dir:function(e,n,i){for(var r=[],o=e[n];o&&9!==o.nodeType&&(i===t||1!==o.nodeType||!Z(o).is(i));)1===o.nodeType&&r.push(o),o=o[n];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Ft="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",jt=/ jQuery\d+="(?:null|\d+)"/g,zt=/^\s+/,Wt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Bt=/<([\w:]+)/,Ut=/<tbody/i,qt=/<|&#?\w+;/,Yt=/<(?:script|style|link)/i,Vt=/<(?:script|object|embed|option|style)/i,Xt=new RegExp("<(?:"+Ft+")[\\s/>]","i"),Gt=/^(?:checkbox|radio)$/,Kt=/checked\s*(?:[^=]|=\s*.checked.)/i,Qt=/\/(java|ecma)script/i,Zt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Jt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},en=u(z),tn=en.appendChild(z.createElement("div"));Jt.optgroup=Jt.option,Jt.tbody=Jt.tfoot=Jt.colgroup=Jt.caption=Jt.thead,Jt.th=Jt.td,Z.support.htmlSerialize||(Jt._default=[1,"X<div>","</div>"]),Z.fn.extend({text:function(e){return Z.access(this,function(e){return e===t?Z.text(this):this.empty().append((this[0]&&this[0].ownerDocument||z).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(Z.isFunction(e))return this.each(function(t){Z(this).wrapAll(e.call(this,t))});if(this[0]){var t=Z(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return Z.isFunction(e)?this.each(function(t){Z(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Z(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(n){Z(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=Z.clean(arguments);return this.pushStack(Z.merge(e,this),"before",this.selector)}},after:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=Z.clean(arguments);return this.pushStack(Z.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||Z.filter(e,[n]).length)&&(t||1!==n.nodeType||(Z.cleanData(n.getElementsByTagName("*")),Z.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&Z.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return Z.access(this,function(e){var n=this[0]||{},i=0,r=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(jt,""):t;if(!("string"!=typeof e||Yt.test(e)||!Z.support.htmlSerialize&&Xt.test(e)||!Z.support.leadingWhitespace&&zt.test(e)||Jt[(Bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Wt,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(Z.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return a(this[0])?this.length?this.pushStack(Z(Z.isFunction(e)?e():e),"replaceWith",e):this:Z.isFunction(e)?this.each(function(t){var n=Z(this),i=n.html();n.replaceWith(e.call(this,t,i))}):("string"!=typeof e&&(e=Z(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;Z(this).remove(),t?Z(t).before(e):Z(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){e=[].concat.apply([],e);var r,o,s,a,l=0,c=e[0],u=[],h=this.length;if(!Z.support.checkClone&&h>1&&"string"==typeof c&&Kt.test(c))return this.each(function(){Z(this).domManip(e,n,i)});if(Z.isFunction(c))return this.each(function(r){var o=Z(this);e[0]=c.call(this,r,n?o.html():t),o.domManip(e,n,i)});if(this[0]){if(r=Z.buildFragment(e,this,u),s=r.fragment,o=s.firstChild,1===s.childNodes.length&&(s=o),o)for(n=n&&Z.nodeName(o,"tr"),a=r.cacheable||h-1;h>l;l++)i.call(n&&Z.nodeName(this[l],"table")?d(this[l],"tbody"):this[l],l===a?s:Z.clone(s,!0,!0));s=o=null,u.length&&Z.each(u,function(e,t){t.src?Z.ajax?Z.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):Z.error("no ajax"):Z.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Zt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),Z.buildFragment=function(e,n,i){var r,o,s,a=e[0];return n=n||z,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,!(1===e.length&&"string"==typeof a&&a.length<512&&n===z&&"<"===a.charAt(0))||Vt.test(a)||!Z.support.checkClone&&Kt.test(a)||!Z.support.html5Clone&&Xt.test(a)||(o=!0,r=Z.fragments[a],s=r!==t),r||(r=n.createDocumentFragment(),Z.clean(e,n,r,i),o&&(Z.fragments[a]=s&&r)),{fragment:r,cacheable:o}},Z.fragments={},Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(n){var i,r=0,o=[],s=Z(n),a=s.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===a)return s[t](this[0]),this;for(;a>r;r++)i=(r>0?this.clone(!0):this).get(),Z(s[r])[t](i),o=o.concat(i);return this.pushStack(o,e,s.selector)}}),Z.extend({clone:function(e,t,n){var i,r,o,s;if(Z.support.html5Clone||Z.isXMLDoc(e)||!Xt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(tn.innerHTML=e.outerHTML,tn.removeChild(s=tn.firstChild)),!(Z.support.noCloneEvent&&Z.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(f(e,s),i=p(e),r=p(s),o=0;i[o];++o)r[o]&&f(i[o],r[o]);if(t&&(h(e,s),n))for(i=p(e),r=p(s),o=0;i[o];++o)h(i[o],r[o]);return i=r=null,s},clean:function(e,t,n,i){var r,o,s,a,l,c,d,h,f,p,g,v=t===z&&en,y=[];for(t&&"undefined"!=typeof t.createDocumentFragment||(t=z),r=0;null!=(s=e[r]);r++)if("number"==typeof s&&(s+=""),s){if("string"==typeof s)if(qt.test(s)){for(v=v||u(t),d=t.createElement("div"),v.appendChild(d),s=s.replace(Wt,"<$1></$2>"),a=(Bt.exec(s)||["",""])[1].toLowerCase(),l=Jt[a]||Jt._default,c=l[0],d.innerHTML=l[1]+s+l[2];c--;)d=d.lastChild;if(!Z.support.tbody)for(h=Ut.test(s),f="table"!==a||h?"<table>"!==l[1]||h?[]:d.childNodes:d.firstChild&&d.firstChild.childNodes,o=f.length-1;o>=0;--o)Z.nodeName(f[o],"tbody")&&!f[o].childNodes.length&&f[o].parentNode.removeChild(f[o]);!Z.support.leadingWhitespace&&zt.test(s)&&d.insertBefore(t.createTextNode(zt.exec(s)[0]),d.firstChild),s=d.childNodes,d.parentNode.removeChild(d)}else s=t.createTextNode(s);s.nodeType?y.push(s):Z.merge(y,s)}if(d&&(s=d=v=null),!Z.support.appendChecked)for(r=0;null!=(s=y[r]);r++)Z.nodeName(s,"input")?m(s):"undefined"!=typeof s.getElementsByTagName&&Z.grep(s.getElementsByTagName("input"),m);if(n)for(p=function(e){return!e.type||Qt.test(e.type)?i?i.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e):void 0},r=0;null!=(s=y[r]);r++)Z.nodeName(s,"script")&&p(s)||(n.appendChild(s),"undefined"!=typeof s.getElementsByTagName&&(g=Z.grep(Z.merge([],s.getElementsByTagName("script")),p),y.splice.apply(y,[r+1,0].concat(g)),r+=g.length));return y},cleanData:function(e,t){for(var n,i,r,o,s=0,a=Z.expando,l=Z.cache,c=Z.support.deleteExpando,u=Z.event.special;null!=(r=e[s]);s++)if((t||Z.acceptData(r))&&(i=r[a],n=i&&l[i])){if(n.events)for(o in n.events)u[o]?Z.event.remove(r,o):Z.removeEvent(r,o,n.handle);l[i]&&(delete l[i],c?delete r[a]:r.removeAttribute?r.removeAttribute(a):r[a]=null,Z.deletedIds.push(i))}}}),function(){var e,t;Z.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=Z.uaMatch(B.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),Z.browser=t,Z.sub=function(){function e(t,n){return new e.fn.init(t,n)}Z.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof Z&&!(i instanceof e)&&(i=e(i)),Z.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(z);return e}}();var nn,rn,on,sn=/alpha\([^)]*\)/i,an=/opacity=([^)]*)/,ln=/^(top|right|bottom|left)$/,cn=/^(none|table(?!-c[ea]).+)/,un=/^margin/,dn=new RegExp("^("+J+")(.*)$","i"),hn=new RegExp("^("+J+")(?!px)[a-z%]+$","i"),fn=new RegExp("^([-+])=("+J+")","i"),pn={},mn={position:"absolute",visibility:"hidden",display:"block"},gn={letterSpacing:0,fontWeight:400},vn=["Top","Right","Bottom","Left"],yn=["Webkit","O","Moz","ms"],bn=Z.fn.toggle;Z.fn.extend({css:function(e,n){return Z.access(this,function(e,n,i){return i!==t?Z.style(e,n,i):Z.css(e,n)},e,n,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e,t){var n="boolean"==typeof e;return Z.isFunction(e)&&Z.isFunction(t)?bn.apply(this,arguments):this.each(function(){(n?e:v(this))?Z(this).show():Z(this).hide()})}}),Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=nn(e,"opacity");return""===n?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":Z.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,a,l=Z.camelCase(n),c=e.style;if(n=Z.cssProps[l]||(Z.cssProps[l]=g(c,l)),a=Z.cssHooks[n]||Z.cssHooks[l],i===t)return a&&"get"in a&&(o=a.get(e,!1,r))!==t?o:c[n];if(s=typeof i,"string"===s&&(o=fn.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(Z.css(e,n)),s="number"),!(null==i||"number"===s&&isNaN(i)||("number"!==s||Z.cssNumber[l]||(i+="px"),a&&"set"in a&&(i=a.set(e,i,r))===t)))try{c[n]=i}catch(u){}}},css:function(e,n,i,r){var o,s,a,l=Z.camelCase(n);return n=Z.cssProps[l]||(Z.cssProps[l]=g(e.style,l)),a=Z.cssHooks[n]||Z.cssHooks[l],a&&"get"in a&&(o=a.get(e,!0,r)),o===t&&(o=nn(e,n)),"normal"===o&&n in gn&&(o=gn[n]),i||r!==t?(s=parseFloat(o),i||Z.isNumeric(s)?s||0:o):o},swap:function(e,t,n){var i,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];i=n.call(e);for(r in t)e.style[r]=o[r];return i}}),e.getComputedStyle?nn=function(t,n){var i,r,o,s,a=e.getComputedStyle(t,null),l=t.style;return a&&(i=a[n],""!==i||Z.contains(t.ownerDocument,t)||(i=Z.style(t,n)),hn.test(i)&&un.test(n)&&(r=l.width,o=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=i,i=a.width,l.width=r,l.minWidth=o,l.maxWidth=s)),i}:z.documentElement.currentStyle&&(nn=function(e,t){var n,i,r=e.currentStyle&&e.currentStyle[t],o=e.style;return null==r&&o&&o[t]&&(r=o[t]),hn.test(r)&&!ln.test(t)&&(n=o.left,i=e.runtimeStyle&&e.runtimeStyle.left,i&&(e.runtimeStyle.left=e.currentStyle.left),o.left="fontSize"===t?"1em":r,r=o.pixelLeft+"px",o.left=n,i&&(e.runtimeStyle.left=i)),""===r?"auto":r}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,n,i){return n?0===e.offsetWidth&&cn.test(nn(e,"display"))?Z.swap(e,mn,function(){return _(e,t,i)}):_(e,t,i):void 0},set:function(e,n,i){return b(e,n,i?w(e,t,i,Z.support.boxSizing&&"border-box"===Z.css(e,"boxSizing")):0)}}}),Z.support.opacity||(Z.cssHooks.opacity={get:function(e,t){return an.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=Z.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,t>=1&&""===Z.trim(o.replace(sn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),i&&!i.filter)||(n.filter=sn.test(o)?o.replace(sn,r):o+" "+r)}}),Z(function(){Z.support.reliableMarginRight||(Z.cssHooks.marginRight={get:function(e,t){return Z.swap(e,{display:"inline-block"},function(){return t?nn(e,"marginRight"):void 0})}}),!Z.support.pixelPosition&&Z.fn.position&&Z.each(["top","left"],function(e,t){Z.cssHooks[t]={get:function(e,n){if(n){var i=nn(e,t);return hn.test(i)?Z(e).position()[t]+"px":i}}}})}),Z.expr&&Z.expr.filters&&(Z.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!Z.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||nn(e,"display"))},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(n){var i,r="string"==typeof n?n.split(" "):[n],o={};for(i=0;4>i;i++)o[e+vn[i]+t]=r[i]||r[i-2]||r[0];return o}},un.test(e)||(Z.cssHooks[e+t].set=b)});var wn=/%20/g,_n=/\[\]$/,xn=/\r?\n/g,Cn=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,kn=/^(?:select|textarea)/i;Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?Z.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||kn.test(this.nodeName)||Cn.test(this.type))}).map(function(e,t){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(e){return{name:t.name,value:e.replace(xn,"\r\n")}}):{name:t.name,value:n.replace(xn,"\r\n")}}).get()}}),Z.param=function(e,n){var i,r=[],o=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){o(this.name,this.value)
});else for(i in e)C(i,e[i],n,o);return r.join("&").replace(wn,"+")};var Tn,Sn,Dn=/#.*$/,Nn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,En=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Mn=/^(?:GET|HEAD)$/,$n=/^\/\//,In=/\?/,An=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ln=/([?&])_=[^&]*/,Pn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,On=Z.fn.load,Hn={},Rn={},Fn=["*/"]+["*"];try{Sn=W.href}catch(jn){Sn=z.createElement("a"),Sn.href="",Sn=Sn.href}Tn=Pn.exec(Sn.toLowerCase())||[],Z.fn.load=function(e,n,i){if("string"!=typeof e&&On)return On.apply(this,arguments);if(!this.length)return this;var r,o,s,a=this,l=e.indexOf(" ");return l>=0&&(r=e.slice(l,e.length),e=e.slice(0,l)),Z.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(o="POST"),Z.ajax({url:e,type:o,dataType:"html",data:n,complete:function(e,t){i&&a.each(i,s||[e.responseText,t,e])}}).done(function(e){s=arguments,a.html(r?Z("<div>").append(e.replace(An,"")).find(r):e)}),this},Z.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z.each(["get","post"],function(e,n){Z[n]=function(e,i,r,o){return Z.isFunction(i)&&(o=o||r,r=i,i=t),Z.ajax({type:n,url:e,data:i,success:r,dataType:o})}}),Z.extend({getScript:function(e,n){return Z.get(e,t,n,"script")},getJSON:function(e,t,n){return Z.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?S(e,Z.ajaxSettings):(t=e,e=Z.ajaxSettings),S(e,t),e},ajaxSettings:{url:Sn,isLocal:En.test(Tn[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Fn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:k(Hn),ajaxTransport:k(Rn),ajax:function(e,n){function i(e,n,i,s){var c,d,y,b,_,C=n;2!==w&&(w=2,l&&clearTimeout(l),a=t,o=s||"",x.readyState=e>0?4:0,i&&(b=D(h,x,i)),e>=200&&300>e||304===e?(h.ifModified&&(_=x.getResponseHeader("Last-Modified"),_&&(Z.lastModified[r]=_),_=x.getResponseHeader("Etag"),_&&(Z.etag[r]=_)),304===e?(C="notmodified",c=!0):(c=N(h,b),C=c.state,d=c.data,y=c.error,c=!y)):(y=C,(!C||e)&&(C="error",0>e&&(e=0))),x.status=e,x.statusText=(n||C)+"",c?m.resolveWith(f,[d,C,x]):m.rejectWith(f,[x,C,y]),x.statusCode(v),v=t,u&&p.trigger("ajax"+(c?"Success":"Error"),[x,h,c?d:y]),g.fireWith(f,[x,C]),u&&(p.trigger("ajaxComplete",[x,h]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,o,s,a,l,c,u,d,h=Z.ajaxSetup({},n),f=h.context||h,p=f!==h&&(f.nodeType||f instanceof Z)?Z(f):Z.event,m=Z.Deferred(),g=Z.Callbacks("once memory"),v=h.statusCode||{},y={},b={},w=0,_="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!w){var n=e.toLowerCase();e=b[n]=b[n]||e,y[e]=t}return this},getAllResponseHeaders:function(){return 2===w?o:null},getResponseHeader:function(e){var n;if(2===w){if(!s)for(s={};n=Nn.exec(o);)s[n[1].toLowerCase()]=n[2];n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return w||(h.mimeType=e),this},abort:function(e){return e=e||_,a&&a.abort(e),i(0,e),this}};if(m.promise(x),x.success=x.done,x.error=x.fail,x.complete=g.add,x.statusCode=function(e){if(e){var t;if(2>w)for(t in e)v[t]=[v[t],e[t]];else t=e[x.status],x.always(t)}return this},h.url=((e||h.url)+"").replace(Dn,"").replace($n,Tn[1]+"//"),h.dataTypes=Z.trim(h.dataType||"*").toLowerCase().split(tt),null==h.crossDomain&&(c=Pn.exec(h.url.toLowerCase())||!1,h.crossDomain=c&&c.join(":")+(c[3]?"":"http:"===c[1]?80:443)!==Tn.join(":")+(Tn[3]?"":"http:"===Tn[1]?80:443)),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Z.param(h.data,h.traditional)),T(Hn,h,n,x),2===w)return x;if(u=h.global,h.type=h.type.toUpperCase(),h.hasContent=!Mn.test(h.type),u&&0===Z.active++&&Z.event.trigger("ajaxStart"),!h.hasContent&&(h.data&&(h.url+=(In.test(h.url)?"&":"?")+h.data,delete h.data),r=h.url,h.cache===!1)){var C=Z.now(),k=h.url.replace(Ln,"$1_="+C);h.url=k+(k===h.url?(In.test(h.url)?"&":"?")+"_="+C:"")}(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(r=r||h.url,Z.lastModified[r]&&x.setRequestHeader("If-Modified-Since",Z.lastModified[r]),Z.etag[r]&&x.setRequestHeader("If-None-Match",Z.etag[r])),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Fn+"; q=0.01":""):h.accepts["*"]);for(d in h.headers)x.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(h.beforeSend.call(f,x,h)===!1||2===w))return x.abort();_="abort";for(d in{success:1,error:1,complete:1})x[d](h[d]);if(a=T(Rn,h,n,x)){x.readyState=1,u&&p.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},h.timeout));try{w=1,a.send(y,i)}catch(S){if(!(2>w))throw S;i(-1,S)}}else i(-1,"No Transport");return x},active:0,lastModified:{},etag:{}});var zn=[],Wn=/\?/,Bn=/(=)\?(?=&|$)|\?\?/,Un=Z.now();Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zn.pop()||Z.expando+"_"+Un++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(n,i,r){var o,s,a,l=n.data,c=n.url,u=n.jsonp!==!1,d=u&&Bn.test(c),h=u&&!d&&"string"==typeof l&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(l);return"jsonp"===n.dataTypes[0]||d||h?(o=n.jsonpCallback=Z.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,s=e[o],d?n.url=c.replace(Bn,"$1"+o):h?n.data=l.replace(Bn,"$1"+o):u&&(n.url+=(Wn.test(c)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return a||Z.error(o+" was not called"),a[0]},n.dataTypes[0]="json",e[o]=function(){a=arguments},r.always(function(){e[o]=s,n[o]&&(n.jsonpCallback=i.jsonpCallback,zn.push(o)),a&&Z.isFunction(s)&&s(a[0]),a=s=t}),"script"):void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=z.head||z.getElementsByTagName("head")[0]||z.documentElement;return{send:function(r,o){n=z.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,r){(r||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n=t,r||o(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var qn,Yn=e.ActiveXObject?function(){for(var e in qn)qn[e](0,1)}:!1,Vn=0;Z.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&E()||M()}:E,function(e){Z.extend(Z.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(Z.ajaxSettings.xhr()),Z.support.ajax&&Z.ajaxTransport(function(n){if(!n.crossDomain||Z.support.cors){var i;return{send:function(r,o){var s,a,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)l[a]=n.xhrFields[a];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(a in r)l.setRequestHeader(a,r[a])}catch(c){}l.send(n.hasContent&&n.data||null),i=function(e,r){var a,c,u,d,h;try{if(i&&(r||4===l.readyState))if(i=t,s&&(l.onreadystatechange=Z.noop,Yn&&delete qn[s]),r)4!==l.readyState&&l.abort();else{a=l.status,u=l.getAllResponseHeaders(),d={},h=l.responseXML,h&&h.documentElement&&(d.xml=h);try{d.text=l.responseText}catch(e){}try{c=l.statusText}catch(f){c=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=d.text?200:404}}catch(p){r||o(-1,p)}d&&o(a,c,d,u)},n.async?4===l.readyState?setTimeout(i,0):(s=++Vn,Yn&&(qn||(qn={},Z(e).unload(Yn)),qn[s]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(0,1)}}}});var Xn,Gn,Kn=/^(?:toggle|show|hide)$/,Qn=new RegExp("^(?:([-+])=|)("+J+")([a-z%]*)$","i"),Zn=/queueHooks$/,Jn=[P],ei={"*":[function(e,t){var n,i,r=this.createTween(e,t),o=Qn.exec(t),s=r.cur(),a=+s||0,l=1,c=20;if(o){if(n=+o[2],i=o[3]||(Z.cssNumber[e]?"":"px"),"px"!==i&&a){a=Z.css(r.elem,e,!0)||n||1;do l=l||".5",a/=l,Z.style(r.elem,e,a+i);while(l!==(l=r.cur()/s)&&1!==l&&--c)}r.unit=i,r.start=a,r.end=o[1]?a+(o[1]+1)*n:n}return r}]};Z.Animation=Z.extend(A,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],ei[n]=ei[n]||[],ei[n].unshift(t)},prefilter:function(e,t){t?Jn.unshift(e):Jn.push(e)}}),Z.Tween=O,O.prototype={constructor:O,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,n=O.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,!1,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.each(["toggle","show","hide"],function(e,t){var n=Z.fn[t];Z.fn[t]=function(i,r,o){return null==i||"boolean"==typeof i||!e&&Z.isFunction(i)&&Z.isFunction(r)?n.apply(this,arguments):this.animate(H(t,!0),i,r,o)}}),Z.fn.extend({fadeTo:function(e,t,n,i){return this.filter(v).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=Z.isEmptyObject(e),o=Z.speed(t,n,i),s=function(){var t=A(this,Z.extend({},e),o);r&&t.stop(!0)};return r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,n,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=Z.timers,s=Z._data(this);if(n)s[n]&&s[n].stop&&r(s[n]);else for(n in s)s[n]&&s[n].stop&&Zn.test(n)&&r(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(i),t=!1,o.splice(n,1));(t||!i)&&Z.dequeue(this,e)})}}),Z.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),Z.speed=function(e,t,n){var i=e&&"object"==typeof e?Z.extend({},e):{complete:n||!n&&t||Z.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Z.isFunction(t)&&t};return i.duration=Z.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Z.fx.speeds?Z.fx.speeds[i.duration]:Z.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Z.isFunction(i.old)&&i.old.call(this),i.queue&&Z.dequeue(this,i.queue)},i},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.timers=[],Z.fx=O.prototype.init,Z.fx.tick=function(){for(var e,t=Z.timers,n=0;n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||Z.fx.stop()},Z.fx.timer=function(e){e()&&Z.timers.push(e)&&!Gn&&(Gn=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.interval=13,Z.fx.stop=function(){clearInterval(Gn),Gn=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fx.step={},Z.expr&&Z.expr.filters&&(Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length});var ti=/^(?:body|html)$/i;Z.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var n,i,r,o,s,a,l,c={top:0,left:0},u=this[0],d=u&&u.ownerDocument;if(d)return(i=d.body)===u?Z.offset.bodyOffset(u):(n=d.documentElement,Z.contains(n,u)?("undefined"!=typeof u.getBoundingClientRect&&(c=u.getBoundingClientRect()),r=R(d),o=n.clientTop||i.clientTop||0,s=n.clientLeft||i.clientLeft||0,a=r.pageYOffset||n.scrollTop,l=r.pageXOffset||n.scrollLeft,{top:c.top+a-o,left:c.left+l-s}):c)},Z.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return Z.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(Z.css(e,"marginTop"))||0,n+=parseFloat(Z.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var i=Z.css(e,"position");"static"===i&&(e.style.position="relative");var r,o,s=Z(e),a=s.offset(),l=Z.css(e,"top"),c=Z.css(e,"left"),u=("absolute"===i||"fixed"===i)&&Z.inArray("auto",[l,c])>-1,d={},h={};u?(h=s.position(),r=h.top,o=h.left):(r=parseFloat(l)||0,o=parseFloat(c)||0),Z.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(d.top=t.top-a.top+r),null!=t.left&&(d.left=t.left-a.left+o),"using"in t?t.using.call(e,d):s.css(d)}},Z.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),n=this.offset(),i=ti.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(Z.css(e,"marginTop"))||0,n.left-=parseFloat(Z.css(e,"marginLeft"))||0,i.top+=parseFloat(Z.css(t[0],"borderTopWidth"))||0,i.left+=parseFloat(Z.css(t[0],"borderLeftWidth"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||z.body;e&&!ti.test(e.nodeName)&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||z.body})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);Z.fn[e]=function(r){return Z.access(this,function(e,r,o){var s=R(e);return o===t?s?n in s?s[n]:s.document.documentElement[r]:e[r]:(s?s.scrollTo(i?Z(s).scrollLeft():o,i?o:Z(s).scrollTop()):e[r]=o,void 0)},e,r,arguments.length,null)}}),Z.each({Height:"height",Width:"width"},function(e,n){Z.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,r){Z.fn[r]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||o===!0?"margin":"border");return Z.access(this,function(n,i,r){var o;return Z.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):r===t?Z.css(n,i,r,a):Z.style(n,i,r,a)},n,s?r:t,s,null)}})}),e.jQuery=e.$=Z,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Z})}(window),function(e,t){var n=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return"rails"===e.namespace}).length};n()&&e.error("jquery-ujs has already been loaded!");var i;e.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,i){var r=e.Event(n);return t.trigger(r,i),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var r,o,s,a,l,c,u,d;if(i.fire(n,"ajax:before")){if(a=n.data("cross-domain"),l=a===t?null:a,c=n.data("with-credentials")||null,u=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,n.is("form")){r=n.attr("method"),o=n.attr("action"),s=n.serializeArray();var h=n.data("ujs:submit-button");h&&(s.push(h),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(r=n.data("method"),o=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):(r=n.data("method"),o=i.href(n),s=n.data("params")||null);d={type:r||"GET",data:s,dataType:u,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),i.fire(n,"ajax:beforeSend",[e,r])},success:function(e,t,i){n.trigger("ajax:success",[e,t,i])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,i){n.trigger("ajax:error",[e,t,i])},xhrFields:{withCredentials:c},crossDomain:l},o&&(d.url=o);var f=i.ajax(d);return n.trigger("ajax:send",f),f}return!1},handleMethod:function(n){var r=i.href(n),o=n.data("method"),s=n.attr("target"),a=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+r+'"></form>'),u='<input name="_method" value="'+o+'" type="hidden" />';l!==t&&a!==t&&(u+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&c.attr("target",s),c.hide().append(u).appendTo("body"),c.submit()},disableFormElements:function(t){t.find(i.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(i.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,n=e.data("confirm"),r=!1;return n?(i.fire(e,"confirm")&&(r=i.confirm(n),t=i.fire(e,"confirm:complete",[r])),r&&t):!0},blankInputs:function(t,n,i){var r,o,s=e(),a=n||"input,textarea",l=t.find(a);return l.each(function(){if(r=e(this),o=r.is(":checkbox,:radio")?r.is(":checked"):r.val(),!o==!i){if(r.is(":radio")&&l.filter('input:radio:checked[name="'+r.attr("name")+'"]').length)return!0;s=s.add(r)}}),s.length?s:!1},nonBlankInputs:function(e,t){return i.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,i){var r=n.data("events"),o=!0;return r!==t&&r.submit!==t&&e.each(r.submit,function(e,t){return"function"==typeof t.handler?o=t.handler(i):void 0}),o},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return i.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},i.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||i.CSRFProtection(n)}),e(document).delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(e(this))}),e(document).delegate(i.linkClickSelector,"click.rails",function(n){var r=e(this),o=r.data("method"),s=r.data("params");if(!i.allowAction(r))return i.stopEverything(n);if(r.is(i.linkDisableSelector)&&i.disableElement(r),r.data("remote")!==t){if(!(!n.metaKey&&!n.ctrlKey||o&&"GET"!==o||s))return!0;var a=i.handleRemote(r);return a===!1?i.enableElement(r):a.error(function(){i.enableElement(r)}),!1}return r.data("method")?(i.handleMethod(r),!1):void 0}),e(document).delegate(i.inputChangeSelector,"change.rails",function(t){var n=e(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(t)}),e(document).delegate(i.formSubmitSelector,"submit.rails",function(n){var r=e(this),o=r.data("remote")!==t,s=i.blankInputs(r,i.requiredInputSelector),a=i.nonBlankInputs(r,i.fileInputSelector);if(!i.allowAction(r))return i.stopEverything(n);if(s&&r.attr("novalidate")==t&&i.fire(r,"ajax:aborted:required",[s]))return i.stopEverything(n);if(o){if(a){setTimeout(function(){i.disableFormElements(r)},13);var l=i.fire(r,"ajax:aborted:file",[a]);return l||setTimeout(function(){i.enableFormElements(r)},13),l}return!e.support.submitBubbles&&e().jquery<"1.7"&&i.callFormSubmitBindings(r,n)===!1?i.stopEverything(n):(i.handleRemote(r),!1)}setTimeout(function(){i.disableFormElements(r)},13)}),e(document).delegate(i.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);var r=n.attr("name"),o=r?{name:r,value:n.val()}:null;n.closest("form").data("ujs:submit-button",o)}),e(document).delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&i.disableFormElements(e(this))}),e(document).delegate(i.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&i.enableFormElements(e(this))}),e(function(){csrf_token=e("meta[name=csrf-token]").attr("content"),csrf_param=e("meta[name=csrf-param]").attr("content"),e('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery),/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.effects.core.js, jquery.effects.blind.js, jquery.effects.bounce.js, jquery.effects.clip.js, jquery.effects.drop.js, jquery.effects.explode.js, jquery.effects.fade.js, jquery.effects.fold.js, jquery.effects.highlight.js, jquery.effects.pulsate.js, jquery.effects.scale.js, jquery.effects.shake.js, jquery.effects.slide.js, jquery.effects.transfer.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
function(e,t){function n(t,n){var r=t.nodeName.toLowerCase();if("area"===r){var o,s=t.parentNode,a=s.name;return t.href&&a&&"map"===s.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&i(o)):!1}return(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"==r?t.href||n:n)&&i(t)}function i(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.8.23",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each(function(){var i=this;setTimeout(function(){e(i).focus(),n&&n.call(i)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,r,o=e(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function r(t,n,i,r){return e.each(o,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,i&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),r&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?a["inner"+i].call(this):this.each(function(){e(this).css(s,r(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){e(this).css(s,r(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===n.offsetHeight,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.curCSS||(e.curCSS=e.css),e.extend(e.ui,{plugin:{add:function(t,n,i){var r=e.ui[t].prototype;for(var o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(e,t,n){var i=e.plugins[t];if(i&&e.element[0].parentNode)for(var r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)},isOverAxis:function(e,t,n){return e>t&&t+n>e},isOver:function(t,n,i,r,o,s){return e.ui.isOverAxis(t,i,o)&&e.ui.isOverAxis(n,r,s)}}))}(jQuery),function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var i,r=0;null!=(i=t[r]);r++)try{e(i).triggerHandler("remove")}catch(o){}n(t)}}else{var i=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){return n||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),i.call(e(this),t,n)})}}e.widget=function(t,n,i){var r,o=t.split(".")[0];t=t.split(".")[1],r=o+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r]=function(n){return!!e.data(n,t)},e[o]=e[o]||{},e[o][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var s=new n;s.options=e.extend(!0,{},s.options),e[o][t].prototype=e.extend(!0,s,{namespace:o,widgetName:t,widgetEventPrefix:e[o][t].prototype.widgetEventPrefix||t,widgetBaseClass:r},i),e.widget.bridge(t,e[o][t])},e.widget.bridge=function(n,i){e.fn[n]=function(r){var o="string"==typeof r,s=Array.prototype.slice.call(arguments,1),a=this;return r=!o&&s.length?e.extend.apply(null,[!0,r].concat(s)):r,o&&"_"===r.charAt(0)?a:(o?this.each(function(){var i=e.data(this,n),o=i&&e.isFunction(i[r])?i[r].apply(i,s):i;return o!==i&&o!==t?(a=o,!1):void 0}):this.each(function(){var t=e.data(this,n);t?t.option(r||{})._init():e.data(this,n,new i(r,this))}),a)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(n,i){var r=n;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof n){if(i===t)return this.options[n];r={},r[n]=i}return this._setOptions(r),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,i){var r,o,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent,o)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.call(this.element[0],n,i)===!1||n.isDefaultPrevented())}}}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1==n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(n.iframeFix&&e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);for(var i=this.element[0],r=!1;i&&(i=i.parentNode);)i==document&&(r=!0);if(!r&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!n||"valid"==this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var o=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){o._trigger("stop",t)!==!1&&o._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"==n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"==n.appendTo?this.element[0].parentNode:n.appendTo),i[0]!=this.element[0]&&!/(fixed|absolute)/.test(i.css("position"))&&i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var n=e(t.containment),i=n[0];if(!i)return;var r=(n.offset(),"hidden"!=e(i).css("overflow"));this.containment=[(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0),(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0),(r?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(r?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"==t?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i),left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i)}},_generatePosition:function(t){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName),o=t.pageX,s=t.pageY;if(this.originalPosition){var a;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();a=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else a=this.containment;t.pageX-this.offset.click.left<a[0]&&(o=a[0]+this.offset.click.left),t.pageY-this.offset.click.top<a[1]&&(s=a[1]+this.offset.click.top),t.pageX-this.offset.click.left>a[2]&&(o=a[2]+this.offset.click.left),t.pageY-this.offset.click.top>a[3]&&(s=a[3]+this.offset.click.top)}if(n.grid){var c=n.grid[1]?this.originalPageY+Math.round((s-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;s=a?c-this.offset.click.top<a[1]||c-this.offset.click.top>a[3]?c-this.offset.click.top<a[1]?c+n.grid[1]:c-n.grid[1]:c:c;var u=n.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;o=a?u-this.offset.click.left<a[0]||u-this.offset.click.left>a[2]?u-this.offset.click.left<a[0]?u+n.grid[0]:u-n.grid[0]:u:u}}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.23"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var i=e(this).data("draggable"),r=i.options,o=e.extend({},n,{item:i.element});i.sortables=[],e(r.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,o))})},stop:function(t,n){var i=e(this).data("draggable"),r=e.extend({},n,{item:i.element});e.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))})},drag:function(t,n){var i=e(this).data("draggable"),r=this;e.each(i.sortables,function(){this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var i=e(n.helper),r=e(this).data("draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(t,n){var i=e(this).data("draggable").options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("draggable");t.scrollParent[0]!=document&&"HTML"!=t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("draggable"),i=n.options,r=!1;n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName?(i.axis&&"x"==i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"==i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"==i.axis||(t.pageY-e(document).scrollTop()<i.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"==i.axis||(t.pageX-e(document).scrollLeft()<i.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!=String?n.snap.items||":data(draggable)":n.snap).each(function(){var n=e(this),i=n.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(t,n){for(var i=e(this).data("draggable"),r=i.options,o=r.snapTolerance,s=n.offset.left,a=s+i.helperProportions.width,l=n.offset.top,c=l+i.helperProportions.height,u=i.snapElements.length-1;u>=0;u--){var d=i.snapElements[u].left,h=d+i.snapElements[u].width,f=i.snapElements[u].top,p=f+i.snapElements[u].height;if(s>d-o&&h+o>s&&l>f-o&&p+o>l||s>d-o&&h+o>s&&c>f-o&&p+o>c||a>d-o&&h+o>a&&l>f-o&&p+o>l||a>d-o&&h+o>a&&c>f-o&&p+o>c){if("inner"!=r.snapMode){var m=Math.abs(f-c)<=o,g=Math.abs(p-l)<=o,v=Math.abs(d-a)<=o,y=Math.abs(h-s)<=o;m&&(n.position.top=i._convertPositionTo("relative",{top:f-i.helperProportions.height,left:0}).top-i.margins.top),g&&(n.position.top=i._convertPositionTo("relative",{top:p,left:0}).top-i.margins.top),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:d-i.helperProportions.width}).left-i.margins.left),y&&(n.position.left=i._convertPositionTo("relative",{top:0,left:h}).left-i.margins.left)}var b=m||g||v||y;if("outer"!=r.snapMode){var m=Math.abs(f-l)<=o,g=Math.abs(p-c)<=o,v=Math.abs(d-s)<=o,y=Math.abs(h-a)<=o;m&&(n.position.top=i._convertPositionTo("relative",{top:f,left:0}).top-i.margins.top),g&&(n.position.top=i._convertPositionTo("relative",{top:p-i.helperProportions.height,left:0}).top-i.margins.top),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:d}).left-i.margins.left),y&&(n.position.left=i._convertPositionTo("relative",{top:0,left:h-i.helperProportions.width}).left-i.margins.left)}!i.snapElements[u].snapping&&(m||g||v||y||b)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=m||g||v||y||b}else i.snapElements[u].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t=e(this).data("draggable").options,n=e.makeArray(e(t.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(n.length){var i=parseInt(n[0].style.zIndex)||0;e(n).each(function(e){this.style.zIndex=i+e}),this[0].style.zIndex=i+n.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var i=e(n.helper),r=e(this).data("draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(t,n){var i=e(this).data("draggable").options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,n){"accept"==t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var i=n||e.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]==this.element[0])return!1;var r=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&e.ui.intersect(i,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.23"}),e.ui.intersect=function(t,n,i){if(!n.offset)return!1;var r=(t.positionAbs||t.position.absolute).left,o=r+t.helperProportions.width,s=(t.positionAbs||t.position.absolute).top,a=s+t.helperProportions.height,l=n.offset.left,c=l+n.proportions.width,u=n.offset.top,d=u+n.proportions.height;switch(i){case"fit":return r>=l&&c>=o&&s>=u&&d>=a;case"intersect":return l<r+t.helperProportions.width/2&&o-t.helperProportions.width/2<c&&u<s+t.helperProportions.height/2&&a-t.helperProportions.height/2<d;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,f=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,p=e.ui.isOver(f,h,u,l,n.proportions.height,n.proportions.width);return p;case"touch":return(s>=u&&d>=s||a>=u&&d>=a||u>s&&a>d)&&(r>=l&&c>=r||o>=l&&c>=o||l>r&&o>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var i=e.ui.ddmanager.droppables[t.options.scope]||[],r=n?n.type:null,o=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var s=0;s<i.length;s++)if(!(i[s].options.disabled||t&&!i[s].accept.call(i[s].element[0],t.currentItem||t.element))){for(var a=0;a<o.length;a++)if(o[a]==i[s].element[0]){i[s].proportions.height=0;continue e}i[s].visible="none"!=i[s].element.css("display"),i[s].visible&&("mousedown"==r&&i[s]._activate.call(i[s],n),i[s].offset=i[s].element.offset(),i[s].proportions={width:i[s].element[0].offsetWidth,height:i[s].element[0].offsetHeight})}},drop:function(t,n){var i=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n)))
}),i},dragStart:function(t,n){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i=e.ui.intersect(t,this,this.options.tolerance),r=i||1!=this.isover?i&&0==this.isover?"isover":null:"isout";if(r){var o;if(this.options.greedy){var s=this.element.parents(":data(droppable):eq(0)");s.length&&(o=e.data(s[0],"droppable"),o.greedyChild="isover"==r?1:0)}o&&"isover"==r&&(o.isover=0,o.isout=1,o._out.call(o,n)),this[r]=1,this["isout"==r?"isover":"isout"]=0,this["isover"==r?"_over":"_out"].call(this,n),o&&"isout"==r&&(o.isout=0,o.isover=1,o._over.call(o,n))}}})},dragStop:function(t,n){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var i=this.handles.split(",");this.handles={};for(var r=0;r<i.length;r++){var o=e.trim(i[r]),s="ui-resizable-"+o,a=e('<div class="ui-resizable-handle '+s+'"></div>');a.css({zIndex:n.zIndex}),"se"==o&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[o]=".ui-resizable-"+o,this.element.append(a)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){if(this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var i=e(this.handles[n],this.element),r=0;r=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth();var o=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(o,r),this._proportionallyResize()}e(this.handles[n]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){n.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())},function(){n.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;n.after(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var i in this.handles)e(this.handles[i])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(n){var i=this.options,r=this.element.position(),o=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(o.is(".ui-draggable")||/absolute/.test(o.css("position")))&&o.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy();var s=t(this.helper.css("left")),a=t(this.helper.css("top"));i.containment&&(s+=e(i.containment).scrollLeft()||0,a+=e(i.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:a},this.size=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalPosition={left:s,top:a},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof i.aspectRatio?i.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),o.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(t){var n=this.helper,i=(this.options,this.originalMousePosition),r=this.axis,o=t.pageX-i.left||0,s=t.pageY-i.top||0,a=this._change[r];if(!a)return!1;var l=a.apply(this,[t,o,s]);return e.browser.msie&&e.browser.version<7,this.sizeDiff,this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(l=this._updateRatio(l,t)),l=this._respectSize(l,t),this._propagate("resize",t),n.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,i=this;if(this._helper){var r=this._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),s=o&&e.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.helper.width()-a,height:i.helper.height()-s},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;n.animate||this.element.css(e.extend(l,{top:u,left:c})),i.helper.height(i.size.height),i.helper.width(i.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,r,o,s,a=this.options;s={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,o=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),r>s.minHeight&&(s.minHeight=r),i<s.maxWidth&&(s.maxWidth=i),o<s.maxHeight&&(s.maxHeight=o)),this._vBoundaries=s},_updateCache:function(e){this.options,this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=(this.options,this.position),i=this.size,r=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==r&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"==r&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e,t){var i=(this.helper,this._vBoundaries),r=(this._aspectRatio||t.shiftKey,this.axis),o=n(e.width)&&i.maxWidth&&i.maxWidth<e.width,s=n(e.height)&&i.maxHeight&&i.maxHeight<e.height,a=n(e.width)&&i.minWidth&&i.minWidth>e.width,l=n(e.height)&&i.minHeight&&i.minHeight>e.height;a&&(e.width=i.minWidth),l&&(e.height=i.minHeight),o&&(e.width=i.maxWidth),s&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,d=/sw|nw|w/.test(r),h=/nw|ne|n/.test(r);a&&d&&(e.left=c-i.minWidth),o&&d&&(e.left=c-i.maxWidth),l&&h&&(e.top=u-i.minHeight),s&&h&&(e.top=u-i.maxHeight);var f=!e.width&&!e.height;return f&&!e.left&&e.top?e.top=null:f&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(this.options,this._proportionallyResizeElements.length)for(var t=this.helper||this.element,n=0;n<this._proportionallyResizeElements.length;n++){var i=this._proportionallyResizeElements[n];if(!this.borderDif){var r=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(r,function(e,t){var n=parseInt(e,10)||0,i=parseInt(o[t],10)||0;return n+i})}e.browser.msie&&(e(t).is(":hidden")||e(t).parents(":hidden").length)||i.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var i=e.browser.msie&&e.browser.version<7,r=i?1:0,o=i?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+o,height:this.element.outerHeight()+o,position:"absolute",left:this.elementOffset.left-r+"px",top:this.elementOffset.top-r+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=(this.options,this.originalSize),i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=(this.options,this.originalSize),r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!=t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.23"}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("resizable"),n=t.options,i=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):e.each(n.alsoResize,function(e){i(e)})},resize:function(t,n){var i=e(this).data("resizable"),r=i.options,o=i.originalSize,s=i.originalPosition,a={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0},l=function(t,i){e(t).each(function(){var t=e(this),r=e(this).data("resizable-alsoresize"),o={},s=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var n=(r[t]||0)+(a[t]||0);n&&n>=0&&(o[t]=n||null)}),t.css(o)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):e.each(r.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("resizable"),i=n.options,r=n._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),s=o&&e.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,a=o?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-s},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var n=e(this).data("resizable"),i=n.options,r=n.element,o=i.containment,s=o instanceof e?o.get(0):/parent/.test(o)?r.parent().get(0):o;if(s)if(n.containerElement=e(s),/document/.test(o)||o==document)n.containerOffset={left:0,top:0},n.containerPosition={left:0,top:0},n.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var a=e(s),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,n){l[e]=t(a.css("padding"+n))}),n.containerOffset=a.offset(),n.containerPosition=a.position(),n.containerSize={height:a.innerHeight()-l[3],width:a.innerWidth()-l[1]};var c=n.containerOffset,u=n.containerSize.height,d=n.containerSize.width,h=e.ui.hasScroll(s,"left")?s.scrollWidth:d,f=e.ui.hasScroll(s)?s.scrollHeight:u;n.parentData={element:s,left:c.left,top:c.top,width:h,height:f}}},resize:function(t){var n=e(this).data("resizable"),i=n.options,r=(n.containerSize,n.containerOffset),o=(n.size,n.position),s=n._aspectRatio||t.shiftKey,a={top:0,left:0},l=n.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(a=r),o.left<(n._helper?r.left:0)&&(n.size.width=n.size.width+(n._helper?n.position.left-r.left:n.position.left-a.left),s&&(n.size.height=n.size.width/n.aspectRatio),n.position.left=i.helper?r.left:0),o.top<(n._helper?r.top:0)&&(n.size.height=n.size.height+(n._helper?n.position.top-r.top:n.position.top),s&&(n.size.width=n.size.height*n.aspectRatio),n.position.top=n._helper?r.top:0),n.offset.left=n.parentData.left+n.position.left,n.offset.top=n.parentData.top+n.position.top;var c=Math.abs((n._helper?n.offset.left-a.left:n.offset.left-a.left)+n.sizeDiff.width),u=Math.abs((n._helper?n.offset.top-a.top:n.offset.top-r.top)+n.sizeDiff.height),d=n.containerElement.get(0)==n.element.parent().get(0),h=/relative|absolute/.test(n.containerElement.css("position"));d&&h&&(c-=n.parentData.left),c+n.size.width>=n.parentData.width&&(n.size.width=n.parentData.width-c,s&&(n.size.height=n.size.width/n.aspectRatio)),u+n.size.height>=n.parentData.height&&(n.size.height=n.parentData.height-u,s&&(n.size.width=n.size.height*n.aspectRatio))},stop:function(){var t=e(this).data("resizable"),n=t.options,i=(t.position,t.containerOffset),r=t.containerPosition,o=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(o.css("position"))&&e(this).css({left:a.left-r.left-i.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(o.css("position"))&&e(this).css({left:a.left-r.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("resizable"),n=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("resizable");t.options,t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("resizable");t.options,t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t){var n=e(this).data("resizable"),i=n.options,r=n.size,o=n.originalSize,s=n.originalPosition,a=n.axis;i._aspectRatio||t.shiftKey,i.grid="number"==typeof i.grid?[i.grid,i.grid]:i.grid;var l=Math.round((r.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((r.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(n.size.width=o.width+l,n.size.height=o.height+c):/^(ne)$/.test(a)?(n.size.width=o.width+l,n.size.height=o.height+c,n.position.top=s.top-c):/^(sw)$/.test(a)?(n.size.width=o.width+l,n.size.height=o.height+c,n.position.left=s.left-l):(n.size.width=o.width+l,n.size.height=o.height+c,n.position.top=s.top-c,n.position.left=s.left-l)}});var t=function(e){return parseInt(e,10)||0},n=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(t){var n=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var i=this.options;this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=e.data(this,"selectable-item");i.startselected=!0,!t.metaKey&&!t.ctrlKey&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))}),e(t.target).parents().andSelf().each(function(){var i=e.data(this,"selectable-item");if(i){var r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected");return i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1}})}},_mouseDrag:function(t){var n=this;if(this.dragged=!0,!this.options.disabled){var i=this.options,r=this.opos[0],o=this.opos[1],s=t.pageX,a=t.pageY;if(r>s){var l=s;s=r,r=l}if(o>a){var l=a;a=o,o=l}return this.helper.css({left:r,top:o,width:s-r,height:a-o}),this.selectees.each(function(){var l=e.data(this,"selectable-item");if(l&&l.element!=n.element[0]){var c=!1;"touch"==i.tolerance?c=!(l.left>s||l.right<r||l.top>a||l.bottom<o):"fit"==i.tolerance&&(c=l.left>r&&l.right<s&&l.top>o&&l.bottom<a),c?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,n._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&((t.metaKey||t.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),n._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&!t.metaKey&&!t.ctrlKey&&!l.startselected&&(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,n._trigger("unselecting",t,{unselecting:l.element})))}}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,this.options,e(".ui-unselecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",t,{unselected:i.element})}),e(".ui-selecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",t,{selected:i.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.23"})}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget()[n?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var r=null,o=this;if(e(t.target).parents().each(function(){return e.data(this,i.widgetName+"-item")==o?(r=e(this),!1):void 0}),e.data(t.target,i.widgetName+"-item")==o&&(r=e(t.target)),!r)return!1;if(this.options.handle&&!n){var s=!1;if(e(this.options.handle,r).find("*").andSelf().each(function(){this==t.target&&(s=!0)}),!s)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,i){var r=this.options,o=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",r.cursor)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,o._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var n=this.options,i=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),i!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var r=this.items.length-1;r>=0;r--){var o=this.items[r],s=o.item[0],a=this._intersectsWithPointer(o);if(a&&s!=this.currentItem[0]&&this.placeholder[1==a?"next":"prev"]()[0]!=s&&!e.ui.contains(this.placeholder[0],s)&&("semi-dynamic"==this.options.type?!e.ui.contains(this.element[0],s):!0)){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(o))break;this._rearrange(t,o),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=i.placeholder.offset();i.reverting=!0,e(this.helper).animate({left:r.left-this.offset.parent.left-i.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-i.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("deactivate",null,t._uiHash(this)),this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",null,t._uiHash(this)),this.containers[n].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,s=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d=i+c>a&&l>i+c&&t+u>o&&s>t+u;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var n="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=n&&i,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&"right"==s||"down"==o?2:1:o&&("down"==o?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"==o&&i||"left"==o&&!i:r&&("down"==r&&n||"up"==r&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],i=[],r=this._connectWith();if(r&&t)for(var o=r.length-1;o>=0;o--)for(var s=e(r[o]),a=s.length-1;a>=0;a--){var l=e.data(s[a],this.widgetName);l&&l!=this&&!l.options.disabled&&i.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=i.length-1;o>=0;o--)i[o][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data("+this.widgetName+"-item)"),t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];
var n=this.items,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],r=this._connectWith();if(r&&this.ready)for(var o=r.length-1;o>=0;o--)for(var s=e(r[o]),a=s.length-1;a>=0;a--){var l=e.data(s[a],this.widgetName);l&&l!=this&&!l.options.disabled&&(i.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var o=i.length-1;o>=0;o--)for(var c=i[o][1],u=i[o][0],a=0,d=u.length;d>a;a++){var h=e(u[a]);h.data(this.widgetName+"-item",c),n.push({item:h,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var i=this.items[n];if(i.instance==this.currentContainer||!this.currentContainer||i.item[0]==this.currentItem[0]){var r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item;t||(i.width=r.outerWidth(),i.height=r.outerHeight());var o=r.offset();i.left=o.left,i.top=o.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var o=this.containers[n].element.offset();this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){var n=t||this,i=n.options;if(!i.placeholder||i.placeholder.constructor==String){var r=i.placeholder;i.placeholder={element:function(){var t=e(document.createElement(n.currentItem[0].nodeName)).addClass(r||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(t.style.visibility="hidden"),t},update:function(e,t){(!r||i.forcePlaceholderSize)&&(t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}}n.placeholder=e(i.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),i.placeholder.update(n,n.placeholder)},_contactContainers:function(t){for(var n=null,i=null,r=this.containers.length-1;r>=0;r--)if(!e.ui.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(n&&e.ui.contains(this.containers[r].element[0],n.element[0]))continue;n=this.containers[r],i=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(n)if(1===this.containers.length)this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1;else if(this.currentContainer!=this.containers[i]){for(var o=1e4,s=null,a=this.positionAbs[this.containers[i].floating?"left":"top"],l=this.items.length-1;l>=0;l--)if(e.ui.contains(this.containers[i].element[0],this.items[l].item[0])){var c=this.containers[i].floating?this.items[l].item.offset().left:this.items[l].item.offset().top;Math.abs(c-a)<o&&(o=Math.abs(c-a),s=this.items[l],this.direction=c-a>0?"down":"up")}if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[i],s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[i].element,!0),this._trigger("change",t,this._uiHash()),this.containers[i]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"==n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!=n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(""==i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],i=e(t.containment).offset(),r="hidden"!=e(n).css("overflow");this.containment=[i.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,i.left+(r?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(r?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"==t?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i),left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i)}},_generatePosition:function(t){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var o=t.pageX,s=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),n.grid)){var a=this.originalPageY+Math.round((s-this.originalPageY)/n.grid[1])*n.grid[1];s=this.containment?a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3]?a-this.offset.click.top<this.containment[1]?a+n.grid[1]:a-n.grid[1]:a:a;var l=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0];o=this.containment?l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2]?l-this.offset.click.left<this.containment[0]?l+n.grid[0]:l-n.grid[0]:l:l}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this,o=this.counter;window.setTimeout(function(){o==r.counter&&r.refreshPositions(!i)},0)},_clear:function(t,n){this.reverting=!1;var i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var r in this._storedCSS)("auto"==this._storedCSS[r]||"static"==this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&i.push(function(e){this._trigger("update",e,this._uiHash())}),!e.ui.contains(this.element[0],this.currentItem[0])){n||i.push(function(e){this._trigger("remove",e,this._uiHash())});for(var r=this.containers.length-1;r>=0;r--)e.ui.contains(this.containers[r].element[0],this.currentItem[0])&&!n&&(i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[r])),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[r])))}for(var r=this.containers.length-1;r>=0;r--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!n){for(var r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.23"})}(jQuery),jQuery.effects||function(e,t){function n(t){var n;return t&&t.constructor==Array&&3==t.length?t:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)]:(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3])]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]:(n=/rgba\(0, 0, 0, 0\)/.exec(t))?c.transparent:c[e.trim(t).toLowerCase()]}function i(t,i){var r;do{if(r=(e.curCSS||e.css)(t,i),""!=r&&"transparent"!=r||e.nodeName(t,"body"))break;i="backgroundColor"}while(t=t.parentNode);return n(r)}function r(){var e,t,n=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,i={};if(n&&n.length&&n[0]&&n[n[0]])for(var r=n.length;r--;)e=n[r],"string"==typeof n[e]&&(t=e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),i[t]=n[e]);else for(e in n)"string"==typeof n[e]&&(i[e]=n[e]);return i}function o(t){var n,i;for(n in t)i=t[n],(null==i||e.isFunction(i)||n in d||/scrollbar/.test(n)||!/color/i.test(n)&&isNaN(parseFloat(i)))&&delete t[n];return t}function s(e,t){var n,i={_:0};for(n in t)e[n]!=t[n]&&(i[n]=t[n]);return i}function a(t,n,i,r){return"object"==typeof t&&(r=n,i=null,n=t,t=n.effect),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n=n||{},i=i||n.duration,i=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,r=r||n.complete,[t,n,i,r]}function l(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects[t]?!1:!0}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,r){e.fx.step[r]=function(e){e.colorInit||(e.start=i(e.elem,r),e.end=n(e.end),e.colorInit=!0),e.elem.style[r]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},u=["add","remove","toggle"],d={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,n,i,a){return e.isFunction(i)&&(a=i,i=null),this.queue(function(){var l,c=e(this),d=c.attr("style")||" ",h=o(r.call(this)),f=c.attr("class")||"";e.each(u,function(e,n){t[n]&&c[n+"Class"](t[n])}),l=o(r.call(this)),c.attr("class",f),c.animate(s(h,l),{queue:!1,duration:n,easing:i,complete:function(){e.each(u,function(e,n){t[n]&&c[n+"Class"](t[n])}),"object"==typeof c.attr("style")?(c.attr("style").cssText="",c.attr("style").cssText=d):c.attr("style",d),a&&a.apply(this,arguments),e.dequeue(this)}})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,i,r){return n?e.effects.animateClass.apply(this,[{add:t},n,i,r]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,i,r){return n?e.effects.animateClass.apply(this,[{remove:t},n,i,r]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,i,r,o,s){return"boolean"==typeof i||i===t?r?e.effects.animateClass.apply(this,[i?{add:n}:{remove:n},r,o,s]):this._toggleClass(n,i):e.effects.animateClass.apply(this,[{toggle:n},i,r,o])},switchClass:function(t,n,i,r,o){return e.effects.animateClass.apply(this,[{add:n,remove:t},i,r,o])}}),e.extend(e.effects,{version:"1.8.23",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data("ec.storage."+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.css(t[n],e.data("ec.storage."+t[n]))},setMode:function(e,t){return"toggle"==t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r=document.activeElement;try{r.id}catch(o){r=document.body}return t.wrap(i),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),i=t.parent(),"static"==t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),i.css(n).show()},removeWrapper:function(t){var n,i=document.activeElement;return t.parent().is(".ui-effects-wrapper")?(n=t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus(),n):t},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var o=t.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),e.fn.extend({effect:function(t){var n=a.apply(this,arguments),i={options:n[1],duration:n[2],callback:n[3]},r=i.options.mode,o=e.effects[t];return e.fx.off||!o?r?this[r](i.duration,i.callback):this.each(function(){i.callback&&i.callback.call(this)}):o.call(this,i)},_show:e.fn.show,show:function(e){if(l(e))return this._show.apply(this,arguments);var t=a.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:e.fn.hide,hide:function(e){if(l(e))return this._hide.apply(this,arguments);var t=a.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(l(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=a.apply(this,arguments);return n[1].mode="toggle",this.effect.apply(this,n)},cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}});var h={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){h[t]=function(t){return Math.pow(t,e+2)}}),e.extend(h,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(h,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:n(-2*e+2)/-2+1}})}(jQuery),function(e){e.effects.blind=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right"],r=e.effects.setMode(n,t.options.mode||"hide"),o=t.options.direction||"vertical";e.effects.save(n,i),n.show();var s=e.effects.createWrapper(n).css({overflow:"hidden"}),a="vertical"==o?"height":"width",l="vertical"==o?s.height():s.width();"show"==r&&s.css(a,0);var c={};c[a]="show"==r?l:0,s.animate(c,t.duration,t.options.easing,function(){"hide"==r&&n.hide(),e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e){e.effects.bounce=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right"],r=e.effects.setMode(n,t.options.mode||"effect"),o=t.options.direction||"up",s=t.options.distance||20,a=t.options.times||5,l=t.duration||250;/show|hide/.test(r)&&i.push("opacity"),e.effects.save(n,i),n.show(),e.effects.createWrapper(n);var c="up"==o||"down"==o?"top":"left",u="up"==o||"left"==o?"pos":"neg",s=t.options.distance||("top"==c?n.outerHeight(!0)/3:n.outerWidth(!0)/3);if("show"==r&&n.css("opacity",0).css(c,"pos"==u?-s:s),"hide"==r&&(s/=2*a),"hide"!=r&&a--,"show"==r){var d={opacity:1};d[c]=("pos"==u?"+=":"-=")+s,n.animate(d,l/2,t.options.easing),s/=2,a--}for(var h=0;a>h;h++){var f={},p={};f[c]=("pos"==u?"-=":"+=")+s,p[c]=("pos"==u?"+=":"-=")+s,n.animate(f,l/2,t.options.easing).animate(p,l/2,t.options.easing),s="hide"==r?2*s:s/2}if("hide"==r){var d={opacity:0};d[c]=("pos"==u?"-=":"+=")+s,n.animate(d,l/2,t.options.easing,function(){n.hide(),e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}else{var f={},p={};f[c]=("pos"==u?"-=":"+=")+s,p[c]=("pos"==u?"+=":"-=")+s,n.animate(f,l/2,t.options.easing).animate(p,l/2,t.options.easing,function(){e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e){e.effects.clip=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(n,t.options.mode||"hide"),o=t.options.direction||"vertical";e.effects.save(n,i),n.show();var s=e.effects.createWrapper(n).css({overflow:"hidden"}),a="IMG"==n[0].tagName?s:n,l={size:"vertical"==o?"height":"width",position:"vertical"==o?"top":"left"},c="vertical"==o?a.height():a.width();"show"==r&&(a.css(l.size,0),a.css(l.position,c/2));var u={};u[l.size]="show"==r?c:0,u[l.position]="show"==r?0:c/2,a.animate(u,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==r&&n.hide(),e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.drop=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right","opacity"],r=e.effects.setMode(n,t.options.mode||"hide"),o=t.options.direction||"left";e.effects.save(n,i),n.show(),e.effects.createWrapper(n);var s="up"==o||"down"==o?"top":"left",a="up"==o||"left"==o?"pos":"neg",l=t.options.distance||("top"==s?n.outerHeight(!0)/2:n.outerWidth(!0)/2);"show"==r&&n.css("opacity",0).css(s,"pos"==a?-l:l);var c={opacity:"show"==r?1:0};c[s]=("show"==r?"pos"==a?"+=":"-=":"pos"==a?"-=":"+=")+l,n.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==r&&n.hide(),e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.explode=function(t){return this.queue(function(){var n=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,i=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode="toggle"==t.options.mode?e(this).is(":visible")?"hide":"show":t.options.mode;var r=e(this).show().css("visibility","hidden"),o=r.offset();o.top-=parseInt(r.css("marginTop"),10)||0,o.left-=parseInt(r.css("marginLeft"),10)||0;for(var s=r.outerWidth(!0),a=r.outerHeight(!0),l=0;n>l;l++)for(var c=0;i>c;c++)r.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-c*(s/i),top:-l*(a/n)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:s/i,height:a/n,left:o.left+c*(s/i)+("show"==t.options.mode?(c-Math.floor(i/2))*(s/i):0),top:o.top+l*(a/n)+("show"==t.options.mode?(l-Math.floor(n/2))*(a/n):0),opacity:"show"==t.options.mode?0:1}).animate({left:o.left+c*(s/i)+("show"==t.options.mode?0:(c-Math.floor(i/2))*(s/i)),top:o.top+l*(a/n)+("show"==t.options.mode?0:(l-Math.floor(n/2))*(a/n)),opacity:"show"==t.options.mode?1:0},t.duration||500);setTimeout(function(){"show"==t.options.mode?r.css({visibility:"visible"}):r.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(r[0]),r.dequeue(),e("div.ui-effects-explode").remove()},t.duration||500)})}}(jQuery),function(e){e.effects.fade=function(t){return this.queue(function(){var n=e(this),i=e.effects.setMode(n,t.options.mode||"hide");n.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.fold=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right"],r=e.effects.setMode(n,t.options.mode||"hide"),o=t.options.size||15,s=!!t.options.horizFirst,a=t.duration?t.duration/2:e.fx.speeds._default/2;e.effects.save(n,i),n.show();var l=e.effects.createWrapper(n).css({overflow:"hidden"}),c="show"==r!=s,u=c?["width","height"]:["height","width"],d=c?[l.width(),l.height()]:[l.height(),l.width()],h=/([0-9]+)%/.exec(o);h&&(o=parseInt(h[1],10)/100*d["hide"==r?0:1]),"show"==r&&l.css(s?{height:0,width:o}:{height:o,width:0});var f={},p={};f[u[0]]="show"==r?d[0]:o,p[u[1]]="show"==r?d[1]:0,l.animate(f,a,t.options.easing).animate(p,a,t.options.easing,function(){"hide"==r&&n.hide(),e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e){e.effects.highlight=function(t){return this.queue(function(){var n=e(this),i=["backgroundImage","backgroundColor","opacity"],r=e.effects.setMode(n,t.options.mode||"show"),o={backgroundColor:n.css("backgroundColor")};"hide"==r&&(o.opacity=0),e.effects.save(n,i),n.show().css({backgroundImage:"none",backgroundColor:t.options.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==r&&n.hide(),e.effects.restore(n,i),"show"==r&&!e.support.opacity&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.pulsate=function(t){return this.queue(function(){var n=e(this),i=e.effects.setMode(n,t.options.mode||"show"),r=2*(t.options.times||5)-1,o=t.duration?t.duration/2:e.fx.speeds._default/2,s=n.is(":visible"),a=0;s||(n.css("opacity",0).show(),a=1),("hide"==i&&s||"show"==i&&!s)&&r--;for(var l=0;r>l;l++)n.animate({opacity:a},o,t.options.easing),a=(a+1)%2;n.animate({opacity:a},o,t.options.easing,function(){0==a&&n.hide(),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}).dequeue()})}}(jQuery),function(e){e.effects.puff=function(t){return this.queue(function(){var n=e(this),i=e.effects.setMode(n,t.options.mode||"hide"),r=parseInt(t.options.percent,10)||150,o=r/100,s={height:n.height(),width:n.width()};e.extend(t.options,{fade:!0,mode:i,percent:"hide"==i?r:100,from:"hide"==i?s:{height:s.height*o,width:s.width*o}}),n.effect("scale",t.options,t.duration,t.callback),n.dequeue()})},e.effects.scale=function(t){return this.queue(function(){var n=e(this),i=e.extend(!0,{},t.options),r=e.effects.setMode(n,t.options.mode||"effect"),o=parseInt(t.options.percent,10)||(0==parseInt(t.options.percent,10)?0:"hide"==r?0:100),s=t.options.direction||"both",a=t.options.origin;"effect"!=r&&(i.origin=a||["middle","center"],i.restore=!0);var l={height:n.height(),width:n.width()};n.from=t.options.from||("show"==r?{height:0,width:0}:l);var c={y:"horizontal"!=s?o/100:1,x:"vertical"!=s?o/100:1};n.to={height:l.height*c.y,width:l.width*c.x},t.options.fade&&("show"==r&&(n.from.opacity=0,n.to.opacity=1),"hide"==r&&(n.from.opacity=1,n.to.opacity=0)),i.from=n.from,i.to=n.to,i.mode=r,n.effect("size",i,t.duration,t.callback),n.dequeue()})},e.effects.size=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right","width","height","overflow","opacity"],r=["position","top","bottom","left","right","overflow","opacity"],o=["width","height","overflow"],s=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=e.effects.setMode(n,t.options.mode||"effect"),u=t.options.restore||!1,d=t.options.scale||"both",h=t.options.origin,f={height:n.height(),width:n.width()};if(n.from=t.options.from||f,n.to=t.options.to||f,h){var p=e.effects.getBaseline(h,f);n.from.top=(f.height-n.from.height)*p.y,n.from.left=(f.width-n.from.width)*p.x,n.to.top=(f.height-n.to.height)*p.y,n.to.left=(f.width-n.to.width)*p.x}var m={from:{y:n.from.height/f.height,x:n.from.width/f.width},to:{y:n.to.height/f.height,x:n.to.width/f.width}};("box"==d||"both"==d)&&(m.from.y!=m.to.y&&(i=i.concat(a),n.from=e.effects.setTransition(n,a,m.from.y,n.from),n.to=e.effects.setTransition(n,a,m.to.y,n.to)),m.from.x!=m.to.x&&(i=i.concat(l),n.from=e.effects.setTransition(n,l,m.from.x,n.from),n.to=e.effects.setTransition(n,l,m.to.x,n.to))),("content"==d||"both"==d)&&m.from.y!=m.to.y&&(i=i.concat(s),n.from=e.effects.setTransition(n,s,m.from.y,n.from),n.to=e.effects.setTransition(n,s,m.to.y,n.to)),e.effects.save(n,u?i:r),n.show(),e.effects.createWrapper(n),n.css("overflow","hidden").css(n.from),("content"==d||"both"==d)&&(a=a.concat(["marginTop","marginBottom"]).concat(s),l=l.concat(["marginLeft","marginRight"]),o=i.concat(a).concat(l),n.find("*[width]").each(function(){var n=e(this);u&&e.effects.save(n,o);var i={height:n.height(),width:n.width()};n.from={height:i.height*m.from.y,width:i.width*m.from.x},n.to={height:i.height*m.to.y,width:i.width*m.to.x},m.from.y!=m.to.y&&(n.from=e.effects.setTransition(n,a,m.from.y,n.from),n.to=e.effects.setTransition(n,a,m.to.y,n.to)),m.from.x!=m.to.x&&(n.from=e.effects.setTransition(n,l,m.from.x,n.from),n.to=e.effects.setTransition(n,l,m.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.options.easing,function(){u&&e.effects.restore(n,o)})})),n.animate(n.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){0===n.to.opacity&&n.css("opacity",n.from.opacity),"hide"==c&&n.hide(),e.effects.restore(n,u?i:r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.shake=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right"],r=(e.effects.setMode(n,t.options.mode||"effect"),t.options.direction||"left"),o=t.options.distance||20,s=t.options.times||3,a=t.duration||t.options.duration||140;e.effects.save(n,i),n.show(),e.effects.createWrapper(n);var l="up"==r||"down"==r?"top":"left",c="up"==r||"left"==r?"pos":"neg",u={},d={},h={};u[l]=("pos"==c?"-=":"+=")+o,d[l]=("pos"==c?"+=":"-=")+2*o,h[l]=("pos"==c?"-=":"+=")+2*o,n.animate(u,a,t.options.easing);for(var f=1;s>f;f++)n.animate(d,a,t.options.easing).animate(h,a,t.options.easing);n.animate(d,a,t.options.easing).animate(u,a/2,t.options.easing,function(){e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e){e.effects.slide=function(t){return this.queue(function(){var n=e(this),i=["position","top","bottom","left","right"],r=e.effects.setMode(n,t.options.mode||"show"),o=t.options.direction||"left";
e.effects.save(n,i),n.show(),e.effects.createWrapper(n).css({overflow:"hidden"});var s="up"==o||"down"==o?"top":"left",a="up"==o||"left"==o?"pos":"neg",l=t.options.distance||("top"==s?n.outerHeight(!0):n.outerWidth(!0));"show"==r&&n.css(s,"pos"==a?isNaN(l)?"-"+l:-l:l);var c={};c[s]=("show"==r?"pos"==a?"+=":"-=":"pos"==a?"-=":"+=")+l,n.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==r&&n.hide(),e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.transfer=function(t){return this.queue(function(){var n=e(this),i=e(t.options.to),r=i.offset(),o={top:r.top,left:r.left,height:i.innerHeight(),width:i.innerWidth()},s=n.offset(),a=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:s.top,left:s.left,height:n.innerHeight(),width:n.innerWidth(),position:"absolute"}).animate(o,t.duration,t.options.easing,function(){a.remove(),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,n=t.options;if(t.running=0,t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),t.headers=t.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){n.disabled||e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){n.disabled||e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){n.disabled||e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){n.disabled||e(this).removeClass("ui-state-focus")}),t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),n.navigation){var i=t.element.find("a").filter(n.navigationFilter).eq(0);if(i.length){var r=i.closest(".ui-accordion-header");t.active=r.length?r:i.closest(".ui-accordion-content").prev()}}t.active=t._findActive(t.active||n.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),t.active.next().addClass("ui-accordion-content-active"),t._createIcons(),t.resize(),t.element.attr("role","tablist"),t.headers.attr("role","tab").bind("keydown.accordion",function(e){return t._keydown(e)}).next().attr("role","tabpanel"),t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0),e.browser.safari||t.headers.find("a").attr("tabIndex",-1),n.event&&t.headers.bind(n.event.split(" ").join(".accordion ")+".accordion",function(e){t._clickHandler.call(t,e,this),e.preventDefault()})},_createIcons:function(){var t=this.options;t.icons&&(e("<span></span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var n=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(t.autoHeight||t.fillHeight)&&n.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),"active"==t&&this.activate(n),"icons"==t&&(this._destroyIcons(),n&&this._createIcons()),"disabled"==t&&this.headers.add(this.headers.next())[n?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(!(this.options.disabled||t.altKey||t.ctrlKey)){var n=e.ui.keyCode,i=this.headers.length,r=this.headers.index(t.target),o=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:o=this.headers[(r+1)%i];break;case n.LEFT:case n.UP:o=this.headers[(r-1+i)%i];break;case n.SPACE:case n.ENTER:this._clickHandler({target:t.target},t.target),t.preventDefault()}return o?(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),o.focus(),!1):!0}},resize:function(){var t,n=this.options;if(n.fillSpace){if(e.browser.msie){var i=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}t=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",i),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else n.autoHeight&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).height("").height())}).height(t));return this},activate:function(e){this.options.active=e;var t=this._findActive(e)[0];return this._clickHandler({target:t},t),this},_findActive:function(t){return t?"number"==typeof t?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,n){var i=this.options;if(!i.disabled){if(!t.target){if(!i.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(i.icons.headerSelected).addClass(i.icons.header),this.active.next().addClass("ui-accordion-content-active");var r=this.active.next(),o={options:i,newHeader:e([]),oldHeader:i.active,newContent:e([]),oldContent:r},s=this.active=e([]);return this._toggle(s,r,o),void 0}var a=e(t.currentTarget||n),l=a[0]===this.active[0];if(i.active=i.collapsible&&l?!1:this.headers.index(a),!(this.running||!i.collapsible&&l)){var c=this.active,s=a.next(),r=this.active.next(),o={options:i,newHeader:l&&i.collapsible?e([]):a,oldHeader:this.active,newContent:l&&i.collapsible?e([]):s,oldContent:r},u=this.headers.index(this.active[0])>this.headers.index(a[0]);this.active=l?e([]):a,this._toggle(s,r,o,l,u),c.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(i.icons.headerSelected).addClass(i.icons.header),l||(a.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(i.icons.header).addClass(i.icons.headerSelected),a.next().addClass("ui-accordion-content-active"))}}},_toggle:function(t,n,i,r,o){var s=this,a=s.options;s.toShow=t,s.toHide=n,s.data=i;var l=function(){return s?s._completed.apply(s,arguments):void 0};if(s._trigger("changestart",null,s.data),s.running=0===n.size()?t.size():n.size(),a.animated){var c={};c=a.collapsible&&r?{toShow:e([]),toHide:n,complete:l,down:o,autoHeight:a.autoHeight||a.fillSpace}:{toShow:t,toHide:n,complete:l,down:o,autoHeight:a.autoHeight||a.fillSpace},a.proxied||(a.proxied=a.animated),a.proxiedDuration||(a.proxiedDuration=a.duration),a.animated=e.isFunction(a.proxied)?a.proxied(c):a.proxied,a.duration=e.isFunction(a.proxiedDuration)?a.proxiedDuration(c):a.proxiedDuration;var u=e.ui.accordion.animations,d=a.duration,h=a.animated;h&&!u[h]&&!e.easing[h]&&(h="slide"),u[h]||(u[h]=function(e){this.slide(e,{easing:h,duration:d||700})}),u[h](c)}else a.collapsible&&r?t.toggle():(n.hide(),t.show()),l(!0);n.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(e){this.running=e?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),e.extend(e.ui.accordion,{version:"1.8.23",animations:{slide:function(t,n){if(t=e.extend({easing:"swing",duration:300},t,n),!t.toHide.size())return t.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},t),void 0;if(!t.toShow.size())return t.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},t),void 0;var i,r=t.toShow.css("overflow"),o=0,s={},a={},l=["height","paddingTop","paddingBottom"],c=t.toShow;i=c[0].style.width,c.width(c.parent().width()-parseFloat(c.css("paddingLeft"))-parseFloat(c.css("paddingRight"))-(parseFloat(c.css("borderLeftWidth"))||0)-(parseFloat(c.css("borderRightWidth"))||0)),e.each(l,function(n,i){a[i]="hide";var r=(""+e.css(t.toShow[0],i)).match(/^([\d+-.]+)(.*)$/);s[i]={value:r[1],unit:r[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(a,{step:function(e,n){"height"==n.prop&&(o=0===n.end-n.start?0:(n.now-n.start)/(n.end-n.start)),t.toShow[0].style[n.prop]=o*s[n.prop].value+s[n.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css({width:i,overflow:r}),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t,n=this,i=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(i){if(!n.options.disabled&&!n.element.propAttr("readOnly")){t=!1;var r=e.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:n._move("previousPage",i);break;case r.PAGE_DOWN:n._move("nextPage",i);break;case r.UP:n._keyEvent("previous",i);break;case r.DOWN:n._keyEvent("next",i);break;case r.ENTER:case r.NUMPAD_ENTER:n.menu.active&&(t=!0,i.preventDefault());case r.TAB:if(!n.menu.active)return;n.menu.select(i);break;case r.ESCAPE:n.element.val(n.term),n.close(i);break;default:clearTimeout(n.searching),n.searching=setTimeout(function(){n.term!=n.element.val()&&(n.selectedItem=null,n.search(null,i))},n.options.delay)}}}).bind("keypress.autocomplete",function(e){t&&(t=!1,e.preventDefault())}).bind("focus.autocomplete",function(){n.options.disabled||(n.selectedItem=null,n.previous=n.element.val())}).bind("blur.autocomplete",function(e){n.options.disabled||(clearTimeout(n.searching),n.closing=setTimeout(function(){n.close(e),n._change(e)},150))}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",i)[0]).mousedown(function(t){var i=n.menu.element[0];e(t.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(t){t.target!==n.element[0]&&t.target!==i&&!e.ui.contains(i,t.target)&&n.close()})},1),setTimeout(function(){clearTimeout(n.closing)},13)}).menu({focus:function(e,t){var i=t.item.data("item.autocomplete");!1!==n._trigger("focus",e,{item:i})&&/^key/.test(e.originalEvent.type)&&n.element.val(i.value)},selected:function(e,t){var r=t.item.data("item.autocomplete"),o=n.previous;n.element[0]!==i.activeElement&&(n.element.focus(),n.previous=o,setTimeout(function(){n.previous=o,n.selectedItem=r},1)),!1!==n._trigger("select",e,{item:r})&&n.element.val(r.value),n.term=n.element.val(),n.close(e),n.selectedItem=r},blur:function(){n.menu.element.is(":visible")&&n.element.val()!==n.term&&n.element.val(n.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),n.beforeunloadHandler=function(){n.element.removeAttr("autocomplete")},e(window).bind("beforeunload",n.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(e(n||"body",this.element[0].ownerDocument)[0]),"disabled"===t&&n&&this.xhr&&this.xhr.abort()},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,r){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},search:function(e,t){return e=null!=e?e:this.element.val(),this.term=this.element.val(),e.length<this.options.minLength?this.close(t):(clearTimeout(this.closing),this._trigger("search",t)!==!1?this._search(e):void 0)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this._response())},_response:function(){var e=this,n=++t;return function(i){n===t&&e.__response(i),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close()},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.deactivate(),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItem(t,n)})},_renderItem:function(t,n){return e("<li></li>").data("item.autocomplete",n).append(e("<a></a>").text(n.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)?(this.element.val(this.term),this.menu.deactivate(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(n){e(n.target).closest(".ui-menu-item a").length&&(n.preventDefault(),t.select(n))}),this.refresh()},refresh:function(){var t=this,n=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");n.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(n){t.activate(n,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){if(this.deactivate(),this.hasScroll()){var n=t.offset().top-this.element.offset().top,i=this.element.scrollTop(),r=this.element.height();0>n?this.element.scrollTop(i+n):n>=r&&this.element.scrollTop(i+n-r+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,n){if(!this.active)return this.activate(n,this.element.children(t)),void 0;var i=this.active[e+"All"](".ui-menu-item").eq(0);i.length?this.activate(n,i):this.activate(n,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last())return this.activate(t,this.element.children(".ui-menu-item:first")),void 0;var n=this.active.offset().top,i=this.element.height(),r=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n-i+e(this).height();return 10>t&&t>-10});r.length||(r=this.element.children(".ui-menu-item:last")),this.activate(t,r)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first())return this.activate(t,this.element.children(".ui-menu-item:last")),void 0;var n=this.active.offset().top,i=this.element.height(),r=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n+i-e(this).height();return 10>t&&t>-10});r.length||(r=this.element.children(".ui-menu-item:first")),this.activate(t,r)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),function(e){var t,n,i,r,o="ui-button ui-widget ui-state-default ui-corner-all",s="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},c=function(t){var n=t.name,i=t.form,r=e([]);return n&&(r=i?e(i).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),r};e.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var s=this,a=this.options,u="checkbox"===this.type||"radio"===this.type,d="ui-state-hover"+(u?"":" ui-state-active"),h="ui-state-focus";null===a.label&&(a.label=this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter.button",function(){a.disabled||(e(this).addClass("ui-state-hover"),this===t&&e(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){a.disabled||e(this).removeClass(d)}).bind("click.button",function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus.button",function(){s.buttonElement.addClass(h)}).bind("blur.button",function(){s.buttonElement.removeClass(h)}),u&&(this.element.bind("change.button",function(){r||s.refresh()}),this.buttonElement.bind("mousedown.button",function(e){a.disabled||(r=!1,n=e.pageX,i=e.pageY)}).bind("mouseup.button",function(e){a.disabled||(n!==e.pageX||i!==e.pageY)&&(r=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return a.disabled||r?!1:(e(this).toggleClass("ui-state-active"),s.buttonElement.attr("aria-pressed",s.element[0].checked),void 0)}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(a.disabled||r)return!1;e(this).addClass("ui-state-active"),s.buttonElement.attr("aria-pressed","true");var t=s.element[0];c(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){return a.disabled?!1:(e(this).addClass("ui-state-active"),t=this,e(document).one("mouseup",function(){t=null}),void 0)}).bind("mouseup.button",function(){return a.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown.button",function(t){return a.disabled?!1:((t.keyCode==e.ui.keyCode.SPACE||t.keyCode==e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup.button",function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){if(this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type){var e=this.element.parents().filter(":last"),t="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible");var n=this.element.is(":checked");n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",n)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+s+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){return e.Widget.prototype._setOption.apply(this,arguments),"disabled"===t?(n?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,r=i.primary&&i.secondary,o=[];i.primary||i.secondary?(this.options.text&&o.push("ui-button-text-icon"+(r?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(o.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",n))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,n){"disabled"===t&&this.buttons.button("option",t,n),e.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),e.Widget.prototype.destroy.call(this)}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.bind("mouseout",function(e){var n=$(e.target).closest(t);n.length&&n.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(n){var i=$(n.target).closest(t);!$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])&&i.length&&(i.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),i.addClass("ui-state-hover"),i.hasClass("ui-datepicker-prev")&&i.addClass("ui-datepicker-prev-hover"),i.hasClass("ui-datepicker-next")&&i.addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)(null==t[n]||t[n]==undefined)&&(e[n]=t[n]);return e}function isArray(e){return e&&($.browser.safari&&"object"==typeof e&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.23"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]),n.hasClass(this.markerClassName)||(this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,i){t.settings[n]=i}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var n=this._get(t,"appendText"),i=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[i?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var r=this._get(t,"showOn");if(("focus"==r||"both"==r)&&e.focus(this._showDatepicker),"button"==r||"both"==r){var o=this._get(t,"buttonText"),s=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:s,alt:o,title:o}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==s?o:$("<img/>").attr({src:s,alt:o,title:o}))),e[i?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var i=function(e){for(var t=0,n=0,i=0;i<e.length;i++)e[i].length>t&&(t=e[i].length,n=i);return n};t.setMonth(i(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(i(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,i){t.settings[n]=i}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,n,i,r){var o=this._dialogInst;if(!o){this.uuid+=1;var s="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+s+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),o=this._dialogInst=this._newInst(this._dialogInput,!1),o.settings={},$.data(this._dialogInput[0],PROP_NAME,o)}if(extendRemove(o.settings,i||{}),t=t&&t.constructor==Date?this._formatDate(o,t):t,this._dialogInput.val(t),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,!this._pos){var a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop;
this._pos=[a/2-100+c,l/2-150+u]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),o.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,o),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==i?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==i||"span"==i)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();if("input"==i)e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==i||"span"==i){var r=t.children("."+this._inlineClass);r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();if("input"==i)e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==i||"span"==i){var r=t.children("."+this._inlineClass);r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var i=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):i?"all"==t?$.extend({},i.settings):this._get(i,t):null;var r=t||{};if("string"==typeof t&&(r={},r[t]=n),i){this._curInst==i&&this._hideDatepicker();var o=this._getDateDatepicker(e,!0),s=this._getMinMaxDate(i,"min"),a=this._getMinMaxDate(i,"max");extendRemove(i.settings,r),null!==s&&r.dateFormat!==undefined&&r.minDate===undefined&&(i.settings.minDate=this._formatDate(i,s)),null!==a&&r.dateFormat!==undefined&&r.maxDate===undefined&&(i.settings.maxDate=this._formatDate(i,a)),this._attachments($(e),i),this._autoSize(i),this._setDate(i,o),this._updateAlternate(i),this._updateDatepicker(i)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,i=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var r=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);r[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,r[0]);var o=$.datepicker._get(t,"onSelect");if(o){var s=$.datepicker._formatDate(t);o.apply(t.input?t.input[0]:null,[s,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,i?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,i?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),i=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">i||!n||n.indexOf(i)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(i){$.datepicker.log(i)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),i=n?n.apply(e,[e,t]):{};if(i!==!1){extendRemove(t.settings,i),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var r=!1;$(e).parents().each(function(){return r|="fixed"==$(this).css("position"),!r}),r&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var o={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),o=$.datepicker._checkOffset(t,o,r),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),!t.inline){var s=$.datepicker._get(t,"showAnim"),a=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[s]?t.dpDiv.show(s,$.datepicker._get(t,"showOptions"),a,l):t.dpDiv[s||"show"](s?a:null,l),(!s||!a)&&l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){var t=this;t.maxRows=4;var n=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i=e.dpDiv.find("iframe.ui-datepicker-cover");!i.length||i.css({left:-n[0],top:-n[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),o=r[1],s=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&e.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",s*o+"em"),e.dpDiv[(1!=r[0]||1!=r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var a=e.yearshtml;setTimeout(function(){a===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),a=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var i=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,a=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?i-o:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+s?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+i>a&&a>i?Math.abs(t.left+i-a):0),t.top-=Math.min(t.top,t.top+r>l&&l>r?Math.abs(r+s):0),t},_findPos:function(e){for(var t=this._getInst(e),n=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];var i=$(e).offset();return[i.left,i.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var n=this._get(t,"showAnim"),i=this._get(t,"duration"),r=function(){$.datepicker._tidyDialog(t)};$.effects&&$.effects[n]?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),i,r):t.dpDiv["slideDown"==n?"slideUp":"fadeIn"==n?"fadeOut":"hide"](n?i:null,r),n||r(),this._datepickerShowing=!1;var o=this._get(t,"onClose");o&&o.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,n){var i=$(e),r=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(r,t+("M"==n?this._get(r,"showCurrentAtPos"):0),n),this._updateDatepicker(r))},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var i=new Date;n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var i=$(e),r=this._getInst(i[0]);r["selected"+("M"==n?"Month":"Year")]=r["draw"+("M"==n?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(i)},_selectDay:function(e,t,n,i){var r=$(e);if(!$(i).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(r[0])){var o=this._getInst(r[0]);o.selectedDay=o.currentDay=$("a",i).html(),o.selectedMonth=o.currentMonth=t,o.selectedYear=o.currentYear=n,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]),this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),i=this._getInst(n[0]);t=null!=t?t:this._formatDate(i),i.input&&i.input.val(t),this._updateAlternate(i);var r=this._get(i,"onSelect");r?r.apply(i.input?i.input[0]:null,[t,i]):i.input&&i.input.trigger("change"),i.inline?this._updateDatepicker(i):(this._hideDatepicker(),this._lastInput=i.input[0],"object"!=typeof i.input[0]&&i.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),r=this.formatDate(n,i,this._getFormatConfig(e));$(t).each(function(){$(this).val(r)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var i=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;i="string"!=typeof i?i:(new Date).getFullYear()%100+parseInt(i,10);for(var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,o=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,a=(n?n.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,u=-1,d=-1,h=!1,f=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},p=function(e){var n=f(e),i="@"==e?14:"!"==e?20:"y"==e&&n?4:"o"==e?3:2,r=new RegExp("^\\d{1,"+i+"}"),o=t.substring(v).match(r);if(!o)throw"Missing number at position "+v;return v+=o[0].length,parseInt(o[0],10)},m=function(e,n,i){var r=$.map(f(e)?i:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),o=-1;if($.each(r,function(e,n){var i=n[1];return t.substr(v,i.length).toLowerCase()==i.toLowerCase()?(o=n[0],v+=i.length,!1):void 0}),-1!=o)return o+1;throw"Unknown name at position "+v},g=function(){if(t.charAt(v)!=e.charAt(y))throw"Unexpected literal at position "+v;v++},v=0,y=0;y<e.length;y++)if(h)"'"!=e.charAt(y)||f("'")?g():h=!1;else switch(e.charAt(y)){case"d":u=p("d");break;case"D":m("D",r,o);break;case"o":d=p("o");break;case"m":c=p("m");break;case"M":c=m("M",s,a);break;case"y":l=p("y");break;case"@":var b=new Date(p("@"));l=b.getFullYear(),c=b.getMonth()+1,u=b.getDate();break;case"!":var b=new Date((p("!")-this._ticksTo1970)/1e4);l=b.getFullYear(),c=b.getMonth()+1,u=b.getDate();break;case"'":f("'")?g():h=!0;break;default:g()}if(v<t.length)throw"Extra/unparsed characters found in date: "+t.substring(v);if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i>=l?0:-100)),d>-1)for(c=1,u=d;;){var w=this._getDaysInMonth(l,c-1);if(w>=u)break;c++,u-=w}var b=this._daylightSavingAdjust(new Date(l,c-1,u));if(b.getFullYear()!=l||b.getMonth()+1!=c||b.getDate()!=u)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,n){if(!t)return"";var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,r=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},l=function(e,t,n){var i=""+t;if(a(e))for(;i.length<n;)i="0"+i;return i},c=function(e,t,n,i){return a(e)?i[t]:n[t]},u="",d=!1;if(t)for(var h=0;h<e.length;h++)if(d)"'"!=e.charAt(h)||a("'")?u+=e.charAt(h):d=!1;else switch(e.charAt(h)){case"d":u+=l("d",t.getDate(),2);break;case"D":u+=c("D",t.getDay(),i,r);break;case"o":u+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",t.getMonth()+1,2);break;case"M":u+=c("M",t.getMonth(),o,s);break;case"y":u+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":a("'")?u+="'":d=!0;break;default:u+=e.charAt(h)}return u},_possibleChars:function(e){for(var t="",n=!1,i=function(t){var n=r+1<e.length&&e.charAt(r+1)==t;return n&&r++,n},r=0;r<e.length;r++)if(n)"'"!=e.charAt(r)||i("'")?t+=e.charAt(r):n=!1;else switch(e.charAt(r)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":i("'")?t+="'":n=!0;break;default:t+=e.charAt(r)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var n,i,r=this._get(e,"dateFormat"),o=e.lastVal=e.input?e.input.val():null;n=i=this._getDefaultDate(e);var s=this._getFormatConfig(e);try{n=this.parseDate(r,o,s)||i}catch(a){this.log(a),o=t?"":o}e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),e.currentDay=o?n.getDate():0,e.currentMonth=o?n.getMonth():0,e.currentYear=o?n.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},r=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}for(var i=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,r=i.getFullYear(),o=i.getMonth(),s=i.getDate(),a=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(t);l;){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(r,o));break;case"y":case"Y":r+=parseInt(l[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(r,o))}l=a.exec(t)}return new Date(r,o,s)},o=null==t||""===t?n:"string"==typeof t?r(t):"number"==typeof t?isNaN(t)?n:i(t):new Date(t.getTime());return o=o&&"Invalid Date"==o.toString()?n:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,r=e.selectedMonth,o=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth(),e.drawYear=e.selectedYear=e.currentYear=s.getFullYear(),(r!=e.selectedMonth||o!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),i=this._get(e,"showButtonPanel"),r=this._get(e,"hideIfNoPrevNext"),o=this._get(e,"navigationAsDateFormat"),s=this._getNumberOfMonths(e),a=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=s[0]||1!=s[1],u=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),d=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),f=e.drawMonth-a,p=e.drawYear;if(0>f&&(f+=12,p--),h){var m=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-s[0]*s[1]+1,h.getDate()));for(m=d&&d>m?d:m;this._daylightSavingAdjust(new Date(p,f,1))>m;)f--,0>f&&(f=11,p--)}e.drawMonth=f,e.drawYear=p;var g=this._get(e,"prevText");g=o?this.formatDate(g,this._daylightSavingAdjust(new Date(p,f-l,1)),this._getFormatConfig(e)):g;var v=this._canAdjustMonth(e,-1,p,f)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+g+"</span></a>":r?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+g+"</span></a>",y=this._get(e,"nextText");y=o?this.formatDate(y,this._daylightSavingAdjust(new Date(p,f+l,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,p,f)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":r?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),_=this._get(e,"gotoCurrent")&&e.currentDay?u:t;w=o?this.formatDate(w,_,this._getFormatConfig(e)):w;var x=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",C=i?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?x:"")+(this._isInRange(e,_)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":x)+"</div>":"",k=parseInt(this._get(e,"firstDay"),10);k=isNaN(k)?0:k;for(var T=this._get(e,"showWeek"),S=this._get(e,"dayNames"),D=(this._get(e,"dayNamesShort"),this._get(e,"dayNamesMin")),N=this._get(e,"monthNames"),E=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),I=this._get(e,"showOtherMonths"),A=this._get(e,"selectOtherMonths"),L=(this._get(e,"calculateWeek")||this.iso8601Week,this._getDefaultDate(e)),P="",O=0;O<s[0];O++){var H="";this.maxRows=4;for(var R=0;R<s[1];R++){var F=this._daylightSavingAdjust(new Date(p,f,e.selectedDay)),j=" ui-corner-all",z="";if(c){if(z+='<div class="ui-datepicker-group',s[1]>1)switch(R){case 0:z+=" ui-datepicker-group-first",j=" ui-corner-"+(n?"right":"left");break;case s[1]-1:z+=" ui-datepicker-group-last",j=" ui-corner-"+(n?"left":"right");break;default:z+=" ui-datepicker-group-middle",j=""}z+='">'}z+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+j+'">'+(/all|left/.test(j)&&0==O?n?b:v:"")+(/all|right/.test(j)&&0==O?n?v:b:"")+this._generateMonthYearHeader(e,f,p,d,h,O>0||R>0,N,E)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";for(var W=T?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",B=0;7>B;B++){var U=(B+k)%7;W+="<th"+((B+k+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+S[U]+'">'+D[U]+"</span></th>"}z+=W+"</tr></thead><tbody>";var q=this._getDaysInMonth(p,f);p==e.selectedYear&&f==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,q));var Y=(this._getFirstDayOfMonth(p,f)-k+7)%7,V=Math.ceil((Y+q)/7),X=c?this.maxRows>V?this.maxRows:V:V;this.maxRows=X;for(var G=this._daylightSavingAdjust(new Date(p,f,1-Y)),K=0;X>K;K++){z+="<tr>";for(var Q=T?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"",B=0;7>B;B++){var Z=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],J=G.getMonth()!=f,et=J&&!A||!Z[0]||d&&d>G||h&&G>h;Q+='<td class="'+((B+k+6)%7>=5?" ui-datepicker-week-end":"")+(J?" ui-datepicker-other-month":"")+(G.getTime()==F.getTime()&&f==e.selectedMonth&&e._keyEvent||L.getTime()==G.getTime()&&L.getTime()==F.getTime()?" "+this._dayOverClass:"")+(et?" "+this._unselectableClass+" ui-state-disabled":"")+(J&&!I?"":" "+Z[1]+(G.getTime()==u.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(J&&!I||!Z[2]?"":' title="'+Z[2]+'"')+(et?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(J&&!I?"&#xa0;":et?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==u.getTime()?" ui-state-active":"")+(J?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}z+=Q+"</tr>"}f++,f>11&&(f=0,p++),z+="</tbody></table>"+(c?"</div>"+(s[0]>0&&R==s[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),H+=z}P+=H}return P+=C+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,P},_generateMonthYearHeader:function(e,t,n,i,r,o,s,a){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),u=this._get(e,"showMonthAfterYear"),d='<div class="ui-datepicker-title">',h="";if(o||!l)h+='<span class="ui-datepicker-month">'+s[t]+"</span>";else{var f=i&&i.getFullYear()==n,p=r&&r.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var m=0;12>m;m++)(!f||m>=i.getMonth())&&(!p||m<=r.getMonth())&&(h+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+a[m]+"</option>");h+="</select>"}if(u||(d+=h+(!o&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!c)d+='<span class="ui-datepicker-year">'+n+"</span>";else{var g=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},b=y(g[0]),w=Math.max(b,y(g[1]||""));for(b=i?Math.max(b,i.getFullYear()):b,w=r?Math.min(w,r.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';w>=b;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",d+=e.yearshtml,e.yearshtml=null}return d+=this._get(e,"yearSuffix"),u&&(d+=(!o&&l&&c?"":"&#xa0;")+h),d+="</div>"},_adjustInstDate:function(e,t,n){var i=e.drawYear+("Y"==n?t:0),r=e.drawMonth+("M"==n?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(i,r))+("D"==n?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,r,o)));e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),("M"==n||"Y"==n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),r=n&&n>t?n:t;return r=i&&r>i?i:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var r=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(n,i+(0>t?t:r[0]*r[1]),1));return 0>t&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!i||t.getTime()<=i.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.23",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var t=this,i=t.options,r=i.title||"&#160;",o=e.ui.dialog.getTitleId(t.element),s=(t.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass(n+i.dialogClass).css({zIndex:i.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){i.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).attr({role:"dialog","aria-labelledby":o}).mousedown(function(e){t.moveToTop(!1,e)}),a=(t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(s),(t.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(s)),l=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).focus(function(){l.addClass("ui-state-focus")}).blur(function(){l.removeClass("ui-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(a);(t.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(i.closeText).appendTo(l),e("<span></span>").addClass("ui-dialog-title").attr("id",o).html(r).prependTo(a),e.isFunction(i.beforeclose)&&!e.isFunction(i.beforeClose)&&(i.beforeClose=i.beforeclose),a.find("*").add(a).disableSelection(),i.draggable&&e.fn.draggable&&t._makeDraggable(),i.resizable&&e.fn.resizable&&t._makeResizable(),t._createButtons(i.buttons),t._isOpen=!1,e.fn.bgiframe&&s.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;return e.overlay&&e.overlay.destroy(),e.uiDialog.hide(),e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),e.uiDialog.remove(),e.originalTitle&&e.element.attr("title",e.originalTitle),e},widget:function(){return this.uiDialog},close:function(t){var n,i,r=this;
if(!1!==r._trigger("beforeClose",t))return r.overlay&&r.overlay.destroy(),r.uiDialog.unbind("keypress.ui-dialog"),r._isOpen=!1,r.options.hide?r.uiDialog.hide(r.options.hide,function(){r._trigger("close",t)}):(r.uiDialog.hide(),r._trigger("close",t)),e.ui.dialog.overlay.resize(),r.options.modal&&(n=0,e(".ui-dialog").each(function(){this!==r.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(n=Math.max(n,i)))}),e.ui.dialog.maxZ=n),r},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var i,r=this,o=r.options;return o.modal&&!t||!o.stack&&!o.modal?r._trigger("focus",n):(o.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=o.zIndex),r.overlay&&(e.ui.dialog.maxZ+=1,r.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ)),i={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},e.ui.dialog.maxZ+=1,r.uiDialog.css("z-index",e.ui.dialog.maxZ),r.element.attr(i),r._trigger("focus",n),r)},open:function(){if(!this._isOpen){var t=this,n=t.options,i=t.uiDialog;return t.overlay=n.modal?new e.ui.dialog.overlay(t):null,t._size(),t._position(n.position),i.show(n.show),t.moveToTop(!0),n.modal&&i.bind("keydown.ui-dialog",function(t){if(t.keyCode===e.ui.keyCode.TAB){var n=e(":tabbable",this),i=n.filter(":first"),r=n.filter(":last");return t.target!==r[0]||t.shiftKey?t.target===i[0]&&t.shiftKey?(r.focus(1),!1):void 0:(i.focus(1),!1)}}),e(t.element.find(":tabbable").get().concat(i.find(".ui-dialog-buttonpane :tabbable").get().concat(i.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t}},_createButtons:function(t){var n=this,i=!1,r=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),o=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(r);n.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof t&&null!==t&&e.each(t,function(){return!(i=!0)}),i&&(e.each(t,function(t,i){i=e.isFunction(i)?{click:i,text:t}:i;var r=e('<button type="button"></button>').click(function(){i.click.apply(n.element[0],arguments)}).appendTo(o);e.each(i,function(e,t){"click"!==e&&(e in r?r[e](t):r.attr(e,t))}),e.fn.button&&r.button()}),r.appendTo(n.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n,i=this,r=i.options,o=e(document);i.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(o,s){n="auto"===r.height?"auto":e(this).height(),e(this).height(e(this).height()).addClass("ui-dialog-dragging"),i._trigger("dragStart",o,t(s))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(s,a){r.position=[a.position.left-o.scrollLeft(),a.position.top-o.scrollTop()],e(this).removeClass("ui-dialog-dragging").height(n),i._trigger("dragStop",s,t(a)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function i(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,o=r.options,s=r.uiDialog.css("position"),a="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";r.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:r.element,maxWidth:o.maxWidth,maxHeight:o.maxHeight,minWidth:o.minWidth,minHeight:r._minHeight(),handles:a,start:function(t,n){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,i(n))},resize:function(e,t){r._trigger("resize",e,i(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),o.height=e(this).height(),o.width=e(this).width(),r._trigger("resizeStop",t,i(n)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n,i=[],r=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(i=t.split?t.split(" "):[t[0],t[1]],1===i.length&&(i[1]=i[0]),e.each(["left","top"],function(e,t){+i[e]===i[e]&&(r[e]=i[e],i[e]=t)}),t={my:i.join(" "),at:i.join(" "),offset:r.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,n=this.uiDialog.is(":visible"),n||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},t)),n||this.uiDialog.hide()},_setOptions:function(t){var n=this,o={},s=!1;e.each(t,function(e,t){n._setOption(e,t),e in i&&(s=!0),e in r&&(o[e]=t)}),s&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,i){var r=this,o=r.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":r._createButtons(i);break;case"closeText":r.uiDialogTitlebarCloseText.text(""+i);break;case"dialogClass":o.removeClass(r.options.dialogClass).addClass(n+i);break;case"disabled":i?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":var s=o.is(":data(draggable)");s&&!i&&o.draggable("destroy"),!s&&i&&r._makeDraggable();break;case"position":r._position(i);break;case"resizable":var a=o.is(":data(resizable)");a&&!i&&o.resizable("destroy"),a&&"string"==typeof i&&o.resizable("option","handles",i),!a&&i!==!1&&r._makeResizable(i);break;case"title":e(".ui-dialog-title",r.uiDialogTitlebar).html(""+(i||"&#160;"))}e.Widget.prototype._setOption.apply(r,arguments)},_size:function(){var t,n,i=this.options,r=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).height(),n=Math.max(0,i.minHeight-t),"auto"===i.height)if(e.support.minHeight)this.element.css({minHeight:n,height:"auto"});else{this.uiDialog.show();var o=this.element.css("height","auto").height();r||this.uiDialog.hide(),this.element.height(Math.max(o,n))}else this.element.height(Math.max(i.height-t,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{version:"1.8.23",uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){0===this.instances.length&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){return e(t.target).zIndex()<e.ui.dialog.overlay.maxZ?!1:void 0})},1),e(document).bind("keydown.dialog-overlay",function(n){t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances);-1!=n&&this.oldInstances.push(this.instances.splice(n,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.remove();var i=0;e.each(this.instances,function(){i=Math.max(i,this.css("z-index"))}),this.maxZ=i},height:function(){var t,n;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),n>t?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),n>t?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e){e.ui=e.ui||{};var t=/left|center|right/,n=/top|center|bottom/,i="center",r={},o=e.fn.position,s=e.fn.offset;e.fn.position=function(s){if(!s||!s.of)return o.apply(this,arguments);s=e.extend({},s);var a,l,c,u=e(s.of),d=u[0],h=(s.collision||"flip").split(" "),f=s.offset?s.offset.split(" "):[0,0];return 9===d.nodeType?(a=u.width(),l=u.height(),c={top:0,left:0}):d.setTimeout?(a=u.width(),l=u.height(),c={top:u.scrollTop(),left:u.scrollLeft()}):d.preventDefault?(s.at="left top",a=l=0,c={top:s.of.pageY,left:s.of.pageX}):(a=u.outerWidth(),l=u.outerHeight(),c=u.offset()),e.each(["my","at"],function(){var e=(s[this]||"").split(" ");1===e.length&&(e=t.test(e[0])?e.concat([i]):n.test(e[0])?[i].concat(e):[i,i]),e[0]=t.test(e[0])?e[0]:i,e[1]=n.test(e[1])?e[1]:i,s[this]=e}),1===h.length&&(h[1]=h[0]),f[0]=parseInt(f[0],10)||0,1===f.length&&(f[1]=f[0]),f[1]=parseInt(f[1],10)||0,"right"===s.at[0]?c.left+=a:s.at[0]===i&&(c.left+=a/2),"bottom"===s.at[1]?c.top+=l:s.at[1]===i&&(c.top+=l/2),c.left+=f[0],c.top+=f[1],this.each(function(){var t,n=e(this),o=n.outerWidth(),u=n.outerHeight(),d=parseInt(e.curCSS(this,"marginLeft",!0))||0,p=parseInt(e.curCSS(this,"marginTop",!0))||0,m=o+d+(parseInt(e.curCSS(this,"marginRight",!0))||0),g=u+p+(parseInt(e.curCSS(this,"marginBottom",!0))||0),v=e.extend({},c);"right"===s.my[0]?v.left-=o:s.my[0]===i&&(v.left-=o/2),"bottom"===s.my[1]?v.top-=u:s.my[1]===i&&(v.top-=u/2),r.fractions||(v.left=Math.round(v.left),v.top=Math.round(v.top)),t={left:v.left-d,top:v.top-p},e.each(["left","top"],function(n,i){e.ui.position[h[n]]&&e.ui.position[h[n]][i](v,{targetWidth:a,targetHeight:l,elemWidth:o,elemHeight:u,collisionPosition:t,collisionWidth:m,collisionHeight:g,offset:f,my:s.my,at:s.at})}),e.fn.bgiframe&&n.bgiframe(),n.offset(e.extend(v,{using:s.using}))})},e.ui.position={fit:{left:function(t,n){var i=e(window),r=n.collisionPosition.left+n.collisionWidth-i.width()-i.scrollLeft();t.left=r>0?t.left-r:Math.max(t.left-n.collisionPosition.left,t.left)},top:function(t,n){var i=e(window),r=n.collisionPosition.top+n.collisionHeight-i.height()-i.scrollTop();t.top=r>0?t.top-r:Math.max(t.top-n.collisionPosition.top,t.top)}},flip:{left:function(t,n){if(n.at[0]!==i){var r=e(window),o=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft(),s="left"===n.my[0]?-n.elemWidth:"right"===n.my[0]?n.elemWidth:0,a="left"===n.at[0]?n.targetWidth:-n.targetWidth,l=-2*n.offset[0];t.left+=n.collisionPosition.left<0?s+a+l:o>0?s+a+l:0}},top:function(t,n){if(n.at[1]!==i){var r=e(window),o=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop(),s="top"===n.my[1]?-n.elemHeight:"bottom"===n.my[1]?n.elemHeight:0,a="top"===n.at[1]?n.targetHeight:-n.targetHeight,l=-2*n.offset[1];t.top+=n.collisionPosition.top<0?s+a+l:o>0?s+a+l:0}}}},e.offset.setOffset||(e.offset.setOffset=function(t,n){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var i=e(t),r=i.offset(),o=parseInt(e.curCSS(t,"top",!0),10)||0,s=parseInt(e.curCSS(t,"left",!0),10)||0,a={top:n.top-r.top+o,left:n.left-r.left+s};"using"in n?n.using.call(t,a):i.css(a)},e.fn.offset=function(t){var n=this[0];return n&&n.ownerDocument?t?e.isFunction(t)?this.each(function(n){e(this).offset(t.call(this,n,e(this).offset()))}):this.each(function(){e.offset.setOffset(this,t)}):s.call(this):null}),e.curCSS||(e.curCSS=e.css),function(){var t,n,i,o,s,a=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(a?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(var c in i)t.style[c]=i[c];t.appendChild(l),n=a||document.documentElement,n.insertBefore(t,n.firstChild),l.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",o=e(l).offset(function(e,t){return t}).offset(),t.innerHTML="",n.removeChild(t),s=o.top+o.left+(a?2e3:0),r.fractions=s>21&&22>s}()}(jQuery),function(e,t){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(t,n){"value"===t&&(this.options.value=n,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}}),e.extend(e.ui.progressbar,{version:"1.8.23"})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var n=this,i=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",s=i.values&&i.values.length||1,a=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(i.range===!0&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===i.range||"max"===i.range?" ui-slider-range-"+i.range:"")));for(var l=r.length;s>l;l+=1)a.push(o);this.handles=r.add(e(a.join("")).appendTo(n.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){i.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(i){var r,o,s,a,l=e(this).data("index.ui-slider-handle");if(!n.options.disabled){switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!n._keySliding&&(n._keySliding=!0,e(this).addClass("ui-state-active"),r=n._start(i,l),r===!1))return}switch(a=n.options.step,o=s=n.options.values&&n.options.values.length?n.values(l):n.value(),i.keyCode){case e.ui.keyCode.HOME:s=n._valueMin();break;case e.ui.keyCode.END:s=n._valueMax();break;case e.ui.keyCode.PAGE_UP:s=n._trimAlignValue(o+(n._valueMax()-n._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:s=n._trimAlignValue(o-(n._valueMax()-n._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===n._valueMax())return;s=n._trimAlignValue(o+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===n._valueMin())return;s=n._trimAlignValue(o-a)}n._slide(i,l,s)}}).keyup(function(t){var i=e(this).data("index.ui-slider-handle");n._keySliding&&(n._keySliding=!1,n._stop(t,i),n._change(t,i),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var n,i,r,o,s,a,l,c,u,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,s=this,this.handles.each(function(t){var n=Math.abs(i-s.values(t));r>n&&(r=n,o=e(this),a=t)}),d.range===!0&&this.values(1)===d.min&&(a+=1,o=e(this.handles[a])),l=this._start(t,a),l===!1?!1:(this._mouseSliding=!0,s._handleIndex=a,o.addClass("ui-state-active").focus(),c=o.offset(),u=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:t.pageX-c.left-o.width()/2,top:t.pageY-c.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,r,o;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),o=this._valueMin()+i*r,this._trimAlignValue(o)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,r,o;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>i||1===t&&i>n)&&(n=i),n!==this.values(t)&&(r=this.values(),r[t]=n,o=this._trigger("slide",e,{handle:this.handles[t],value:n,values:r}),i=this.values(t?0:1),o!==!1&&this.values(t,n,!0))):n!==this.value()&&(o=this._trigger("slide",e,{handle:this.handles[t],value:n}),o!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,n){var i,r,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,r=arguments[0],o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(r[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,n){var i,r=0;switch(e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;r>i;i+=1)this._change(null,i);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,r,o,s=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(i){t=100*((l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())),u["horizontal"===l.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:t+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({width:t-n+"%"},{queue:!1,duration:a.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:t+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({height:t-n+"%"},{queue:!1,duration:a.animate}))),n=t}):(i=this.value(),r=this._valueMin(),o=this._valueMax(),t=o!==r?100*((i-r)/(o-r)):0,u["horizontal"===l.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:t+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:t+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:a.animate}))}}),e.extend(e.ui.slider,{version:"1.8.23"})}(jQuery),function(e,t){function n(){return++r}function i(){return++o}var r=0,o=0;e.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,t){if("selected"==e){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+n()},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+i());return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(n){function i(t,n){t.css("display",""),!e.support.opacity&&n.opacity&&t[0].style.removeAttribute("filter")}var r=this,o=this.options,s=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=e(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]),this.anchors.each(function(t,n){var i,a=e(n).attr("href"),l=a.split("#")[0];if(l&&(l===location.toString().split("#")[0]||(i=e("base")[0])&&l===i.href)&&(a=n.hash,n.href=a),s.test(a))r.panels=r.panels.add(r.element.find(r._sanitizeSelector(a)));else if(a&&"#"!==a){e.data(n,"href.tabs",a),e.data(n,"load.tabs",a.replace(/#.*$/,""));var c=r._tabId(n);n.href="#"+c;var u=r.element.find("#"+c);u.length||(u=e(o.panelTemplate).attr("id",c).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(r.panels[t-1]||r.list),u.data("destroy.tabs",!0)),r.panels=r.panels.add(u)}else o.disabled.push(t)}),n?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),o.selected===t?(location.hash&&this.anchors.each(function(e,t){return t.hash==location.hash?(o.selected=e,!1):void 0}),"number"!=typeof o.selected&&o.cookie&&(o.selected=parseInt(r._cookie(),10)),"number"!=typeof o.selected&&this.lis.filter(".ui-tabs-selected").length&&(o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),o.selected=o.selected||(this.lis.length?0:-1)):null===o.selected&&(o.selected=-1),o.selected=o.selected>=0&&this.anchors[o.selected]||o.selected<0?o.selected:0,o.disabled=e.unique(o.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e){return r.lis.index(e)}))).sort(),-1!=e.inArray(o.selected,o.disabled)&&o.disabled.splice(e.inArray(o.selected,o.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),o.selected>=0&&this.anchors.length&&(r.element.find(r._sanitizeSelector(r.anchors[o.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(o.selected).addClass("ui-tabs-selected ui-state-active"),r.element.queue("tabs",function(){r._trigger("show",null,r._ui(r.anchors[o.selected],r.element.find(r._sanitizeSelector(r.anchors[o.selected].hash))[0]))}),this.load(o.selected)),e(window).bind("unload",function(){r.lis.add(r.anchors).unbind(".tabs"),r.lis=r.anchors=r.panels=null})):o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[o.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),o.cookie&&this._cookie(o.selected,o.cookie);for(var a,l=0;a=this.lis[l];l++)e(a)[-1==e.inArray(l,o.disabled)||e(a).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(o.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==o.event){var c=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},u=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){c("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){u("hover",e(this))}),this.anchors.bind("focus.tabs",function(){c("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){u("focus",e(this).closest("li"))})}var d,h;o.fx&&(e.isArray(o.fx)?(d=o.fx[0],h=o.fx[1]):d=h=o.fx);var f=h?function(t,n){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),n.hide().removeClass("ui-tabs-hide").animate(h,h.duration||"normal",function(){i(n,h),r._trigger("show",null,r._ui(t,n[0]))})}:function(t,n){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),n.removeClass("ui-tabs-hide"),r._trigger("show",null,r._ui(t,n[0]))},p=d?function(e,t){t.animate(d,d.duration||"normal",function(){r.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),i(t,d),r.element.dequeue("tabs")})}:function(e,t){r.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),r.element.dequeue("tabs")};this.anchors.bind(o.event+".tabs",function(){var t=this,n=e(t).closest("li"),i=r.panels.filter(":not(.ui-tabs-hide)"),s=r.element.find(r._sanitizeSelector(t.hash));if(n.hasClass("ui-tabs-selected")&&!o.collapsible||n.hasClass("ui-state-disabled")||n.hasClass("ui-state-processing")||r.panels.filter(":animated").length||r._trigger("select",null,r._ui(this,s[0]))===!1)return this.blur(),!1;if(o.selected=r.anchors.index(this),r.abort(),o.collapsible){if(n.hasClass("ui-tabs-selected"))return o.selected=-1,o.cookie&&r._cookie(o.selected,o.cookie),r.element.queue("tabs",function(){p(t,i)}).dequeue("tabs"),this.blur(),!1;if(!i.length)return o.cookie&&r._cookie(o.selected,o.cookie),r.element.queue("tabs",function(){f(t,s)}),r.load(r.anchors.index(this)),this.blur(),!1}if(o.cookie&&r._cookie(o.selected,o.cookie),!s.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";i.length&&r.element.queue("tabs",function(){p(t,i)}),r.element.queue("tabs",function(){f(t,s)}),r.load(r.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var n=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){n.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie),this},add:function(n,i,r){r===t&&(r=this.anchors.length);var o=this,s=this.options,a=e(s.tabTemplate.replace(/#\{href\}/g,n).replace(/#\{label\}/g,i)),l=n.indexOf("#")?this._tabId(e("a",a)[0]):n.replace("#","");a.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var c=o.element.find("#"+l);return c.length||(c=e(s.panelTemplate).attr("id",l).data("destroy.tabs",!0)),c.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),r>=this.lis.length?(a.appendTo(this.list),c.appendTo(this.list[0].parentNode)):(a.insertBefore(this.lis[r]),c.insertBefore(this.panels[r])),s.disabled=e.map(s.disabled,function(e){return e>=r?++e:e}),this._tabify(),1==this.anchors.length&&(s.selected=0,a.addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){o._trigger("show",null,o._ui(o.anchors[0],o.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[r],this.panels[r])),this},remove:function(t){t=this._getIndex(t);var n=this.options,i=this.lis.eq(t).remove(),r=this.panels.eq(t).remove();return i.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e){return e!=t}),function(e){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(i.find("a")[0],r[0])),this},enable:function(t){t=this._getIndex(t);var n=this.options;if(-1!=e.inArray(t,n.disabled))return this.lis.eq(t).removeClass("ui-state-disabled"),n.disabled=e.grep(n.disabled,function(e){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])),this},disable:function(e){e=this._getIndex(e);var t=this.options;return e!=t.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),t.disabled.push(e),t.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(e){if(e=this._getIndex(e),-1==e){if(!this.options.collapsible||-1==this.options.selected)return this;e=this.options.selected
}return this.anchors.eq(e).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var n=this,i=this.options,r=this.anchors.eq(t)[0],o=e.data(r,"load.tabs");if(this.abort(),!o||0!==this.element.queue("tabs").length&&e.data(r,"cache.tabs"))return this.element.dequeue("tabs"),void 0;if(this.lis.eq(t).addClass("ui-state-processing"),i.spinner){var s=e("span",r);s.data("label.tabs",s.html()).html(i.spinner)}return this.xhr=e.ajax(e.extend({},i.ajaxOptions,{url:o,success:function(o,s){n.element.find(n._sanitizeSelector(r.hash)).html(o),n._cleanup(),i.cache&&e.data(r,"cache.tabs",!0),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{i.ajaxOptions.success(o,s)}catch(a){}},error:function(e,o){n._cleanup(),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{i.ajaxOptions.error(e,o,t,r)}catch(s){}}})),n.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.8.23"}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,t){var n=this,i=this.options,r=n._rotate||(n._rotate=function(t){clearTimeout(n.rotation),n.rotation=setTimeout(function(){var e=i.selected;n.select(++e<n.anchors.length?e:0)},e),t&&t.stopPropagation()}),o=n._unrotate||(n._unrotate=t?function(){r()}:function(e){e.clientX&&n.rotate(null)});return e?(this.element.bind("tabsshow",r),this.anchors.bind(i.event+".tabs",o),r()):(clearTimeout(n.rotation),this.element.unbind("tabsshow",r),this.anchors.unbind(i.event+".tabs",o),delete this._rotate,delete this._unrotate),this}})}(jQuery),/*
 * jQuery UI Widget 1.10.0+amd
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(o){}r(t)},e.widget=function(t,n,i){var r,o,s,a,l={},c=t.split(".")[0];t=t.split(".")[1],r=c+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[c]=e[c]||{},o=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new s(e,t)},e.extend(s,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),a=new n,a.options=e.widget.extend({},a.options),e.each(i,function(t,i){return e.isFunction(i)?(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}(),void 0):(l[t]=i,void 0)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete o._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(n){for(var r,o,s=i.call(arguments,1),a=0,l=s.length;l>a;a++)for(r in s[a])o=s[a][r],s[a].hasOwnProperty(r)&&o!==t&&(n[r]=e.isPlainObject(o)?e.isPlainObject(n[r])?e.widget.extend({},n[r],o):e.widget.extend({},o):o);return n},e.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;e.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),c=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var i,r=e.data(this,o);return r?e.isFunction(r[s])&&"_"!==s.charAt(0)?(i=r[s].apply(r,l),i!==r&&i!==t?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+s+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+s+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(s||{})._init():e.data(this,o,new r(s,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,o,s,a=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(a={},r=n.split("."),n=r.shift(),r.length){for(o=a[n]=e.widget.extend({},this.options[n]),s=0;s<r.length-1;s++)o[r[s]]=o[r[s]]||{},o=o[r[s]];if(n=r.pop(),i===t)return o[n]===t?null:o[n];o[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,s){function a(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?r.delegate(u,c,a):n.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),s&&e.effects&&e.effects.effect[a]?i[t](r):a!==t&&i[a]?i[a](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}})}),/*
 * JavaScript Load Image 1.2.1
 * https://github.com/blueimp/JavaScript-Load-Image
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";var t=function(e,n,i){var r,o,s=document.createElement("img");return s.onerror=n,s.onload=function(){!o||i&&i.noRevoke||t.revokeObjectURL(o),n(t.scale(s,i))},r=window.Blob&&e instanceof Blob||window.File&&e instanceof File?o=t.createObjectURL(e):e,r?(s.src=r,s):t.readFile(e,function(e){s.src=e})},n=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.scale=function(e,t){t=t||{};var n=document.createElement("canvas"),i=e.width,r=e.height,o=Math.max((t.minWidth||i)/i,(t.minHeight||r)/r);return o>1&&(i=parseInt(i*o,10),r=parseInt(r*o,10)),o=Math.min((t.maxWidth||i)/i,(t.maxHeight||r)/r),1>o&&(i=parseInt(i*o,10),r=parseInt(r*o,10)),e.getContext||t.canvas&&n.getContext?(n.width=i,n.height=r,n.getContext("2d").drawImage(e,0,0,i,r),n):(e.width=i,e.height=r,e)},t.createObjectURL=function(e){return n?n.createObjectURL(e):!1},t.revokeObjectURL=function(e){return n?n.revokeObjectURL(e):!1},t.readFile=function(e,t){if(window.FileReader&&FileReader.prototype.readAsDataURL){var n=new FileReader;return n.onload=function(e){t(e.target.result)},n.readAsDataURL(e),n}return!1},"function"==typeof define&&define.amd?define(function(){return t}):e.loadImage=t}(this),/*
 * JavaScript Canvas to Blob 2.0.3
 * https://github.com/blueimp/JavaScript-Canvas-to-Blob
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 *
 * Based on stackoverflow user Stoive's code snippet:
 * http://stackoverflow.com/q/4998908
 */
function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),i=n&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),r=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,o=(n||r)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,o,s,a,l,c;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),o=new ArrayBuffer(t.length),s=new Uint8Array(o),a=0;a<t.length;a+=1)s[a]=t.charCodeAt(a);return l=e.split(",")[0].split(":")[1].split(";")[0],n?new Blob([i?s:o],{type:l}):(c=new r,c.append(o),c.getBlob(l))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,t){e(this.mozGetAsFile("blob",t))}:t.toDataURL&&o&&(t.toBlob=function(e,t){e(o(this.toDataURL(t)))})),"function"==typeof define&&define.amd?define(function(){return o}):e.dataURLtoBlob=o}(this),/*
 * JavaScript Templates 2.1.0
 * https://github.com/blueimp/JavaScript-Templates
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 *
 * Inspired by John Resig's JavaScript Micro-Templating:
 * http://ejohn.org/blog/javascript-micro-templating/
 */
function(e){"use strict";var t=function(e,n){var i=/[^\w\-\.:]/.test(e)?new Function(t.arg+",tmpl","var _e=tmpl.encode"+t.helper+",_s='"+e.replace(t.regexp,t.func)+"';return _s;"):t.cache[e]=t.cache[e]||t(t.load(e));return n?i(n,t):function(e){return i(e,t)}};t.cache={},t.load=function(e){return document.getElementById(e).innerHTML},t.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,t.func=function(e,t,n,i,r,o){return t?{"\n":"\\n","\r":"\\r","	":"\\t"," ":" "}[e]||"\\"+e:n?"="===n?"'+_e("+i+")+'":"'+("+i+"||'')+'":r?"';":o?"_s+='":void 0},t.encReg=/[<>&"'\x00]/g,t.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},t.encode=function(e){return String(e||"").replace(t.encReg,function(e){return t.encMap[e]||""})},t.arg="o",t.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return t}):e.tmpl=t}(this),/*
 * jQuery Iframe Transport Plugin 1.6.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var i,r,o;return{send:function(s,a){i=e('<form style="display:none;"></form>'),i.attr("accept-charset",n.formAcceptCharset),o=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+o+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+o+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+o+"_method=PATCH",n.type="POST"),r=e('<iframe src="javascript:false;" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var t,o=e.isArray(n.paramName)?n.paramName:[n.paramName];r.unbind("load").bind("load",function(){var t;try{if(t=r.contents(),!t.length||!t[0].firstChild)throw new Error}catch(n){t=void 0}a(200,"success",{iframe:t}),e('<iframe src="javascript:false;"></iframe>').appendTo(i),i.remove()}),i.prop("target",r.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",o[t]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),i.submit(),t&&t.length&&n.fileInput.each(function(n,i){var r=e(t[n]);e(i).prop("name",r.prop("name")),r.replaceWith(i)})}),i.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src","javascript".concat(":false;")),i&&i.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),/*
 * jQuery File Upload Plugin 5.21
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.propHooks.elements={get:function(t){return e.nodeName(t,"form")?e.grep(t.elements,function(t){return!e.nodeName(t,"input")||"file"!==t.type}):null}},e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(e){return e.serializeArray()},add:function(e,t){t.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date,this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=8*(t-this.loaded)*(1e3/i),this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:t.formData?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_onProgress:function(e,t){if(e.lengthComputable){var n,i,r=+new Date;if(t._time&&t.progressInterval&&r-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=r,n=t.total||this._getTotal(t.files),i=parseInt(e.loaded/e.total*(t.chunkSize||n),10)+(t.uploadedBytes||0),this._loaded+=i-(t.loaded||t.uploadedBytes||0),t.lengthComputable=!0,t.loaded=i,t.total=n,t.bitrate=t._bitrateTimer.getBitrate(r,i,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(r,this._loaded,t.bitrateInterval)})}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)}),t.xhr=function(){return i})},_initXHRData:function(t){var n,i=t.files[0],r=t.multipart||!e.support.xhrFileUpload,o=t.paramName[0];t.headers=t.headers||{},t.contentRange&&(t.headers["Content-Range"]=t.contentRange),r?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:o,value:t.blob}):e.each(t.files,function(e,i){n.push({name:t.paramName[e]||o,value:i})})):(t.formData instanceof FormData?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(i.name)+'"',n.append(o,t.blob,i.name)):e.each(t.files,function(e,i){(window.Blob&&i instanceof Blob||window.File&&i instanceof File)&&n.append(t.paramName[e]||o,i,i.name)})),t.data=n):(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(i.name)+'"',t.contentType=i.type,t.data=t.blob||i),t.blob=null},_initIframeSettings:function(t){t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&e("<a></a>").prop("href",t.url).prop("host")!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e,"iframe")},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",r=(t.prop("files")||[1]).length;r;)i.push(n),r-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var r=e.Deferred(),o=r.promise();return n=n||this.options.context||o,t===!0?r.resolveWith(n,i):t===!1&&r.rejectWith(n,i),o.abort=r.promise,this._enhancePromise(o)},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){var i,r,o=this,s=t.files[0],a=s.size,l=t.uploadedBytes=t.uploadedBytes||0,c=t.maxChunkSize||a,u=s.slice||s.webkitSlice||s.mozSlice,d=e.Deferred(),h=d.promise();return this._isXHRUpload(t)&&u&&(l||a>c)&&!t.data?n?!0:l>=a?(s.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,t.context,[null,"error",s.error])):(r=function(){var n=e.extend({},t);n.blob=u.call(s,l,l+c,s.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+a,o._initXHRData(n),o._initProgressListener(n),i=(o._trigger("chunksend",null,n)!==!1&&e.ajax(n)||o._getXHRPromise(!1,n.context)).done(function(i,s,c){l=o._getUploadedBytes(c)||l+n.chunkSize,(!n.loaded||n.loaded<n.total)&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=s,n.jqXHR=c,o._trigger("chunkdone",null,n),o._trigger("chunkalways",null,n),a>l?r():d.resolveWith(n.context,[i,s,c])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,o._trigger("chunkfail",null,n),o._trigger("chunkalways",null,n),d.rejectWith(n.context,[e,t,i])})},this._enhancePromise(h),h.abort=function(){return i.abort()},r(),h):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer),this._active+=1,this._loaded+=t.uploadedBytes||0,this._total+=this._getTotal(t.files)},_onDone:function(t,n,i,r){if(!this._isXHRUpload(r)||!r.loaded||r.loaded<r.total){var o=this._getTotal(r.files)||1;this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),r)}r.result=t,r.textStatus=n,r.jqXHR=i,this._trigger("done",null,r)},_onFail:function(e,t,n,i){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,this._trigger("fail",null,i),i.recalculateProgress&&(this._loaded-=i.loaded||i.uploadedBytes||0,this._total-=i.total||this._getTotal(i.files))},_onAlways:function(e,t,n,i){this._active-=1,this._trigger("always",null,i),0===this._active&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(t,n){var i,r,o,s,a=this,l=a._getAJAXSettings(n),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,i=i||((r||a._trigger("send",t,l)===!1)&&a._getXHRPromise(!1,l.context,r)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,n){a._onDone(e,t,n,l)}).fail(function(e,t,n){a._onFail(e,t,n,l)}).always(function(e,t,n){if(a._sending-=1,a._onAlways(e,t,n,l),l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var i,r=a._slots.shift();r;){if(i=r.state?"pending"===r.state():!r.isRejected()){r.resolve();break}r=a._slots.shift()}})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),s=o.pipe(c)):s=this._sequence=this._sequence.pipe(c,c),s.abort=function(){return r=[void 0,"abort","abort"],i?i.abort():(o&&o.rejectWith(l.context,r),c())},this._enhancePromise(s)):c()},_onAdd:function(t,n){var i,r,o,s,a=this,l=!0,c=e.extend({},this.options,n),u=c.limitMultiFileUploads,d=this._getParamName(c);if((c.singleFileUploads||u)&&this._isXHRUpload(c))if(!c.singleFileUploads&&u)for(o=[],i=[],s=0;s<n.files.length;s+=u)o.push(n.files.slice(s,s+u)),r=d.slice(s,s+u),r.length||(r=d),i.push(r);else i=d;else o=[n.files],i=[d];return n.originalFiles=n.files,e.each(o||n.files,function(r,s){var c=e.extend({},n);return c.files=o?s:[s],c.paramName=i[r],c.submit=function(){return c.jqXHR=this.jqXHR=a._trigger("submit",t,this)!==!1&&a._onSend(t,this),this.jqXHR},l=a._trigger("add",t,c)}),l},_replaceFileInput:function(t){var n=t.clone(!0);e("<form></form>").append(n)[0].reset(),t.after(n).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,i){return i===t[0]?n[0]:i}),t[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,n){var i,r=this,o=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])};return n=n||"",t.isFile?t._file?(t._file.relativePath=n,o.resolve(t._file)):t.file(function(e){e.relativePath=n,o.resolve(e)},s):t.isDirectory?(i=t.createReader(),i.readEntries(function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){o.resolve(e)}).fail(s)},s)):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n,i,r=t.prop("webkitEntries")||t.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(n=e.makeArray(t.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(i=t.prop("value"),!i)return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(e){i.files=e,n.options.replaceFileInput&&n._replaceFileInput(i.fileInput),n._trigger("change",t,i)!==!1&&n._onAdd(t,i)})},_onPaste:function(t){var n=t.originalEvent.clipboardData,i=n&&n.items||[],r={files:[]};return e.each(i,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&r.files.push(n)}),this._trigger("paste",t,r)===!1||this._onAdd(t,r)===!1?!1:void 0},_onDrop:function(e){var t=this,n=e.dataTransfer=e.originalEvent.dataTransfer,i={};n&&n.files&&n.files.length&&e.preventDefault(),this._getDroppedFiles(n).always(function(n){i.files=n,t._trigger("drop",e,i)!==!1&&t._onAdd(e,i)})},_onDragOver:function(t){var n=t.dataTransfer=t.originalEvent.dataTransfer;return this._trigger("dragover",t)===!1?!1:(n&&-1!==e.inArray("Files",n.types)&&(n.dropEffect="copy",t.preventDefault()),void 0)},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var i=-1!==e.inArray(t,this._refreshOptionsList);i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_create:function(){var t=this.options;e.extend(t,e(this.element[0].cloneNode(!1)).data()),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,r=this,o=e.Deferred(),s=o.promise();return s.abort=function(){return i=!0,n?n.abort():(o.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always(function(e){i||(t.files=e,n=r._onSend(null,t).then(function(e,t,n){o.resolve(e,t,n)},function(e,t,n){o.reject(e,t,n)}))}),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),/*
 * jQuery File Upload File Processing Plugin 1.2.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","canvas-to-blob","./jquery.fileupload"],e):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{process:[],add:function(t,n){e(this).fileupload("process",n).done(function(){n.submit()})}},processActions:{load:function(n,i){var r=this,o=n.files[n.index],s=e.Deferred();return window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype.toBlob&&("number"!==e.type(i.maxFileSize)||o.size<i.maxFileSize)&&(!i.fileTypes||i.fileTypes.test(o.type))?t(o,function(e){return e.src?(n.img=e,s.resolveWith(r,[n]),void 0):s.rejectWith(r,[n])}):s.rejectWith(r,[n]),s.promise()},resize:function(n,i){var r,o=n.img;return i=e.extend({canvas:!0},i),o&&(r=t.scale(o,i),(r.width!==o.width||r.height!==o.height)&&(n.canvas=r)),n},save:function(t){if(!t.canvas)return t;var n=this,i=t.files[t.index],r=i.name,o=e.Deferred(),s=function(e){e.name||(i.type===e.type?e.name=i.name:i.name&&(e.name=i.name.replace(/\..+$/,"."+e.type.substr(6)))),t.files[t.index]=e,o.resolveWith(n,[t])};return t.canvas.mozGetAsFile?s(t.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(i.type)&&r||(r&&r.replace(/\..+$/,"")||"blob")+".png",i.type)):t.canvas.toBlob(s,i.type),o.promise()}},_processFile:function(t,n,i){var r=this,o=e.Deferred().resolveWith(r,[{files:t,index:n}]),s=o.promise();return r._processing+=1,e.each(i.process,function(e,t){s=s.pipe(function(e){return r.processActions[t.action].call(this,e,t)})}),s.always(function(){r._processing-=1,0===r._processing&&r.element.removeClass("fileupload-processing")}),1===r._processing&&r.element.addClass("fileupload-processing"),s},process:function(t){var n=this,i=e.extend({},this.options,t);return i.process&&i.process.length&&this._isXHRUpload(i)&&e.each(t.files,function(r){n._processingQueue=n._processingQueue.pipe(function(){var o=e.Deferred();return n._processFile(t.files,r,i).always(function(){o.resolveWith(n)}),o.promise()})}),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})}),/*
 * jQuery File Upload User Interface Plugin 7.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","tmpl","load-image","./jquery.fileupload-fp"],e):e(window.jQuery,window.tmpl,window.loadImage)}(function(e,t,n){"use strict";e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{autoUpload:!1,maxNumberOfFiles:void 0,maxFileSize:void 0,minFileSize:void 0,acceptFileTypes:/.+$/i,previewSourceFileTypes:/^image\/(gif|jpeg|png)$/,previewSourceMaxFileSize:5e6,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:!0,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!1,dataType:"json",add:function(t,n){var i=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),r=i.options,o=n.files;e(this).fileupload("process",n).done(function(){i._adjustMaxNumberOfFiles(-o.length),n.maxNumberOfFilesAdjusted=!0,n.files.valid=n.isValidated=i._validate(o),n.context=i._renderUpload(o).data("data",n),r.filesContainer[r.prependFiles?"prepend":"append"](n.context),i._renderPreviews(n),i._forceReflow(n.context),i._transition(n.context).done(function(){i._trigger("added",t,n)!==!1&&(r.autoUpload||n.autoUpload)&&n.autoUpload!==!1&&n.isValidated&&n.submit()})})},send:function(t,n){var i=e(this).data("blueimp-fileupload")||e(this).data("fileupload");return n.isValidated||(n.maxNumberOfFilesAdjusted||(i._adjustMaxNumberOfFiles(-n.files.length),n.maxNumberOfFilesAdjusted=!0),i._validate(n.files))?(n.context&&n.dataType&&"iframe"===n.dataType.substr(0,6)&&n.context.find(".progress").addClass(!e.support.transition&&"progress-animated").attr("aria-valuenow",100).find(".bar").css("width","100%"),i._trigger("sent",t,n)):!1},done:function(t,n){var i,r,o=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),s=o._getFilesFromResponse(n);n.context?n.context.each(function(r){var a=s[r]||{error:"Empty file upload result"},l=o._addFinishedDeferreds();a.error&&o._adjustMaxNumberOfFiles(1),o._transition(e(this)).done(function(){var r=e(this);i=o._renderDownload([a]).replaceAll(r),o._forceReflow(i),o._transition(i).done(function(){n.context=e(this),o._trigger("completed",t,n),o._trigger("finished",t,n),l.resolve()})})}):(s.length&&(e.each(s,function(e,t){n.maxNumberOfFilesAdjusted&&t.error?o._adjustMaxNumberOfFiles(1):n.maxNumberOfFilesAdjusted||t.error||o._adjustMaxNumberOfFiles(-1)}),n.maxNumberOfFilesAdjusted=!0),i=o._renderDownload(s).appendTo(o.options.filesContainer),o._forceReflow(i),r=o._addFinishedDeferreds(),o._transition(i).done(function(){n.context=e(this),o._trigger("completed",t,n),o._trigger("finished",t,n),r.resolve()}))},fail:function(t,n){var i,r,o=e(this).data("blueimp-fileupload")||e(this).data("fileupload");n.maxNumberOfFilesAdjusted&&o._adjustMaxNumberOfFiles(n.files.length),n.context?n.context.each(function(s){if("abort"!==n.errorThrown){var a=n.files[s];a.error=a.error||n.errorThrown||!0,r=o._addFinishedDeferreds(),o._transition(e(this)).done(function(){var s=e(this);i=o._renderDownload([a]).replaceAll(s),o._forceReflow(i),o._transition(i).done(function(){n.context=e(this),o._trigger("failed",t,n),o._trigger("finished",t,n),r.resolve()})})}else r=o._addFinishedDeferreds(),o._transition(e(this)).done(function(){e(this).remove(),o._trigger("failed",t,n),o._trigger("finished",t,n),r.resolve()})}):"abort"!==n.errorThrown?(n.context=o._renderUpload(n.files).appendTo(o.options.filesContainer).data("data",n),o._forceReflow(n.context),r=o._addFinishedDeferreds(),o._transition(n.context).done(function(){n.context=e(this),o._trigger("failed",t,n),o._trigger("finished",t,n),r.resolve()})):(o._trigger("failed",t,n),o._trigger("finished",t,n),o._addFinishedDeferreds().resolve())},progress:function(e,t){if(t.context){var n=parseInt(100*(t.loaded/t.total),10);t.context.find(".progress").attr("aria-valuenow",n).find(".bar").css("width",n+"%")}},progressall:function(t,n){var i=e(this),r=parseInt(100*(n.loaded/n.total),10),o=i.find(".fileupload-progress"),s=o.find(".progress-extended");s.length&&s.html((i.data("blueimp-fileupload")||i.data("fileupload"))._renderExtendedProgress(n)),o.find(".progress").attr("aria-valuenow",r).find(".bar").css("width",r+"%")},start:function(t){var n=e(this).data("blueimp-fileupload")||e(this).data("fileupload");n._resetFinishedDeferreds(),n._transition(e(this).find(".fileupload-progress")).done(function(){n._trigger("started",t)})},stop:function(t){var n=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),i=n._addFinishedDeferreds();e.when.apply(e,n._getFinishedDeferreds()).done(function(){n._trigger("stopped",t)}),n._transition(e(this).find(".fileupload-progress")).done(function(){e(this).find(".progress").attr("aria-valuenow","0").find(".bar").css("width","0%"),e(this).find(".progress-extended").html("&nbsp;"),i.resolve()})},destroy:function(t,n){var i=e(this).data("blueimp-fileupload")||e(this).data("fileupload");n.url&&(e.ajax(n),i._adjustMaxNumberOfFiles(1)),i._transition(n.context).done(function(){e(this).remove(),i._trigger("destroyed",t,n)})}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(t){return t||(t=e.Deferred()),this._finishedUploads.push(t),t},_getFinishedDeferreds:function(){return this._finishedUploads},_getFilesFromResponse:function(t){return t.result&&e.isArray(t.result.files)?t.result.files:[]},_enableDragToDesktop:function(){var t=e(this),n=t.prop("href"),i=t.prop("download"),r="application/octet-stream";t.bind("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",[r,i,n].join(":"))}catch(t){}})},_adjustMaxNumberOfFiles:function(e){"number"==typeof this.options.maxNumberOfFiles&&(this.options.maxNumberOfFiles+=e,this.options.maxNumberOfFiles<1?this._disableFileInputButton():this._enableFileInputButton())},_formatFileSize:function(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" GB":e>=1e6?(e/1e6).toFixed(2)+" MB":(e/1e3).toFixed(2)+" KB"},_formatBitrate:function(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" Gbit/s":e>=1e6?(e/1e6).toFixed(2)+" Mbit/s":e>=1e3?(e/1e3).toFixed(2)+" kbit/s":e.toFixed(2)+" bit/s"},_formatTime:function(e){var t=new Date(1e3*e),n=parseInt(e/86400,10);return n=n?n+"d ":"",n+("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+":"+("0"+t.getUTCSeconds()).slice(-2)},_formatPercentage:function(e){return(100*e).toFixed(2)+" %"},_renderExtendedProgress:function(e){return this._formatBitrate(e.bitrate)+" | "+this._formatTime(8*(e.total-e.loaded)/e.bitrate)+" | "+this._formatPercentage(e.loaded/e.total)+" | "+this._formatFileSize(e.loaded)+" / "+this._formatFileSize(e.total)},_hasError:function(e){return e.error?e.error:this.options.maxNumberOfFiles<0?"Maximum number of files exceeded":this.options.acceptFileTypes.test(e.type)||this.options.acceptFileTypes.test(e.name)?this.options.maxFileSize&&e.size>this.options.maxFileSize?"File is too big":"number"==typeof e.size&&e.size<this.options.minFileSize?"File is too small":null:"Filetype not allowed"},_validate:function(t){var n=this,i=!!t.length;return e.each(t,function(e,t){t.error=n._hasError(t),t.error&&(i=!1)}),i},_renderTemplate:function(t,n){if(!t)return e();var i=t({files:n,formatFileSize:this._formatFileSize,options:this.options});return i instanceof e?i:e(this.options.templatesContainer).html(i).children()},_renderPreview:function(t,i){var r=this,o=this.options,s=e.Deferred();return(n&&n(t,function(t){i.append(t),r._forceReflow(i),r._transition(i).done(function(){s.resolveWith(i)}),e.contains(r.document[0].body,i[0])||s.resolveWith(i)},{maxWidth:o.previewMaxWidth,maxHeight:o.previewMaxHeight,canvas:o.previewAsCanvas})||s.resolveWith(i))&&s},_renderPreviews:function(t){var n=this,i=this.options;return t.context.find(".preview span").each(function(r,o){var s=t.files[r];i.previewSourceFileTypes.test(s.type)&&("number"!==e.type(i.previewSourceMaxFileSize)||s.size<i.previewSourceMaxFileSize)&&(n._processingQueue=n._processingQueue.pipe(function(){var i=e.Deferred(),r=e.Event("previewdone",{target:o});return n._renderPreview(s,e(o)).done(function(){n._trigger(r.type,r,t),i.resolveWith(n)}),i.promise()}))}),this._processingQueue},_renderUpload:function(e){return this._renderTemplate(this.options.uploadTemplate,e)},_renderDownload:function(e){return this._renderTemplate(this.options.downloadTemplate,e).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(t){t.preventDefault();var n=e(t.currentTarget),i=n.closest(".template-upload"),r=i.data("data");r&&r.submit&&!r.jqXHR&&r.submit()&&n.prop("disabled",!0)},_cancelHandler:function(t){t.preventDefault();var n=e(t.currentTarget).closest(".template-upload"),i=n.data("data")||{};i.jqXHR?i.jqXHR.abort():(i.errorThrown="abort",this._trigger("fail",t,i))},_deleteHandler:function(t){t.preventDefault();var n=e(t.currentTarget);this._trigger("destroy",t,e.extend({context:n.closest(".template-download"),type:"DELETE",dataType:this.options.dataType},n.data()))},_forceReflow:function(t){return e.support.transition&&t.length&&t[0].offsetWidth},_transition:function(t){var n=e.Deferred();return e.support.transition&&t.hasClass("fade")?t.bind(e.support.transition.end,function(i){i.target===t[0]&&(t.unbind(e.support.transition.end),n.resolveWith(t))}).toggleClass("in"):(t.toggleClass("in"),n.resolveWith(t)),n},_initButtonBarEventHandlers:function(){var t=this.element.find(".fileupload-buttonbar"),n=this.options.filesContainer;this._on(t.find(".start"),{click:function(e){e.preventDefault(),n.find(".start button").click()}}),this._on(t.find(".cancel"),{click:function(e){e.preventDefault(),n.find(".cancel button").click()}}),this._on(t.find(".delete"),{click:function(e){e.preventDefault(),n.find(".delete input:checked").siblings("button").click(),t.find(".toggle").prop("checked",!1)}}),this._on(t.find(".toggle"),{change:function(t){n.find(".delete input").prop("checked",e(t.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar button"),"click"),this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super(),this._on(this.options.filesContainer,{"click .start button":this._startHandler,"click .cancel button":this._cancelHandler,"click .delete button":this._deleteHandler}),this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers(),this._off(this.options.filesContainer,"click"),this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var e=this.options;e.templatesContainer=this.document[0].createElement(e.filesContainer.prop("nodeName")),t&&(e.uploadTemplateId&&(e.uploadTemplate=t(e.uploadTemplateId)),e.downloadTemplateId&&(e.downloadTemplate=t(e.downloadTemplateId)))},_initFilesContainer:function(){var t=this.options;void 0===t.filesContainer?t.filesContainer=this.element.find(".files"):t.filesContainer instanceof e||(t.filesContainer=e(t.filesContainer))},_stringToRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_initRegExpOptions:function(){var t=this.options;"string"===e.type(t.acceptFileTypes)&&(t.acceptFileTypes=this._stringToRegExp(t.acceptFileTypes)),"string"===e.type(t.previewSourceFileTypes)&&(t.previewSourceFileTypes=this._stringToRegExp(t.previewSourceFileTypes))},_initSpecialOptions:function(){this._super(),this._initFilesContainer(),this._initTemplates(),this._initRegExpOptions()},_setOption:function(e,t){this._super(e,t),"maxNumberOfFiles"===e&&this._adjustMaxNumberOfFiles(0)},_create:function(){this._super(),this._refreshOptionsList.push("filesContainer","uploadTemplateId","downloadTemplateId"),this._processingQueue||(this._processingQueue=e.Deferred().resolveWith(this).promise(),this.process=function(){return this._processingQueue}),this._resetFinishedDeferreds()},enable:function(){var e=!1;this.options.disabled&&(e=!0),this._super(),e&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton()),this._super()}})}),/*
 * jQuery File Upload Plugin Localization Example 6.5.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
window.locale={fileupload:{errors:{maxFileSize:"File is too big",minFileSize:"File is too small",acceptFileTypes:"Filetype not allowed",maxNumberOfFiles:"Max number of files exceeded",uploadedBytes:"Uploaded bytes exceed file size",emptyResult:"Empty file upload result"},error:"Error",start:"Start",cancel:"Cancel",destroy:"Delete"}},/*
Copyright 2013 Marco Braak

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
function(){var e,t,n,i,r,o,s,a,l,c,u,d,h,f,p,m,g,v,y,b,w,_,x,C,k,T,S,D,N=[].slice,E={}.hasOwnProperty,M=function(e,t){function n(){this.constructor=e}for(var i in t)E.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};e=this.jQuery,g=function(){function t(t,n){this.$el=e(t),this.options=e.extend({},this.defaults,n)}return t.prototype.defaults={},t.prototype.destroy=function(){return this._deinit()},t.prototype._init=function(){return null},t.prototype._deinit=function(){return null},t.register=function(n,i){var r,o,s,a;return a=function(){return"simple_widget_"+i},o=function(t,i){var r,o,s,l,c;for(r=a(),l=0,c=t.length;c>l;l++)o=t[l],s=new n(o,i),e.data(o,r)||e.data(o,r,s),s._init();return t},s=function(n){var i,r,o,s,l,c;for(i=a(),c=[],s=0,l=n.length;l>s;s++)r=n[s],o=e.data(r,i),o&&o instanceof t&&o.destroy(),c.push(e.removeData(r,i));return c},r=function(n,i,r){var o,s,l,c,u,d;for(s=null,u=0,d=n.length;d>u;u++)o=n[u],l=e.data(o,a()),l&&l instanceof t&&(c=l[i],c&&"function"==typeof c&&(s=c.apply(l,r)));return s},e.fn[i]=function(){var e,t,n,i,a;return n=arguments[0],t=2<=arguments.length?N.call(arguments,1):[],e=this,void 0===n||"object"==typeof n?(a=n,o(e,a)):"string"==typeof n&&"_"!==n[0]?(i=n,"destroy"===i?s(e):r(e,i,t)):void 0}},t}(),this.SimpleWidget=g,c=function(t){function n(){return T=n.__super__.constructor.apply(this,arguments)}return M(n,t),n.is_mouse_handled=!1,n.prototype._init=function(){return this.$el.bind("mousedown.mousewidget",e.proxy(this._mouseDown,this)),this.$el.bind("touchstart.mousewidget",e.proxy(this._touchStart,this)),this.is_mouse_started=!1,this.mouse_delay=0,this._mouse_delay_timer=null,this._is_mouse_delay_met=!0,this.mouse_down_info=null},n.prototype._deinit=function(){var t;return this.$el.unbind("mousedown.mousewidget"),this.$el.unbind("touchstart.mousewidget"),t=e(document),t.unbind("mousemove.mousewidget"),t.unbind("mouseup.mousewidget")},n.prototype._mouseDown=function(e){var t;if(1===e.which)return t=this._handleMouseDown(e,this._getPositionInfo(e)),t&&e.preventDefault(),t},n.prototype._handleMouseDown=function(e,t){return!n.is_mouse_handled&&(this.is_mouse_started&&this._handleMouseUp(t),this.mouse_down_info=t,this._mouseCapture(t))?(this._handleStartMouse(),this.is_mouse_handled=!0,!0):void 0},n.prototype._handleStartMouse=function(){var t;return t=e(document),t.bind("mousemove.mousewidget",e.proxy(this._mouseMove,this)),t.bind("touchmove.mousewidget",e.proxy(this._touchMove,this)),t.bind("mouseup.mousewidget",e.proxy(this._mouseUp,this)),t.bind("touchend.mousewidget",e.proxy(this._touchEnd,this)),this.mouse_delay?this._startMouseDelayTimer():void 0},n.prototype._startMouseDelayTimer=function(){var e=this;return this._mouse_delay_timer&&clearTimeout(this._mouse_delay_timer),this._mouse_delay_timer=setTimeout(function(){return e._is_mouse_delay_met=!0},this.mouse_delay),this._is_mouse_delay_met=!1},n.prototype._mouseMove=function(e){return this._handleMouseMove(e,this._getPositionInfo(e))},n.prototype._handleMouseMove=function(e,t){return this.is_mouse_started?(this._mouseDrag(t),e.preventDefault()):this.mouse_delay&&!this._is_mouse_delay_met?!0:(this.is_mouse_started=this._mouseStart(this.mouse_down_info)!==!1,this.is_mouse_started?this._mouseDrag(t):this._handleMouseUp(t),!this.is_mouse_started)},n.prototype._getPositionInfo=function(e){return{page_x:e.pageX,page_y:e.pageY,target:e.target,original_event:e}},n.prototype._mouseUp=function(e){return this._handleMouseUp(this._getPositionInfo(e))},n.prototype._handleMouseUp=function(t){var n;n=e(document),n.unbind("mousemove.mousewidget"),n.unbind("touchmove.mousewidget"),n.unbind("mouseup.mousewidget"),n.unbind("touchend.mousewidget"),this.is_mouse_started&&(this.is_mouse_started=!1,this._mouseStop(t))},n.prototype._mouseCapture=function(){return!0},n.prototype._mouseStart=function(){return null},n.prototype._mouseDrag=function(){return null},n.prototype._mouseStop=function(){return null},n.prototype.setMouseDelay=function(e){return this.mouse_delay=e},n.prototype._touchStart=function(e){var t;if(!(e.originalEvent.touches.length>1))return t=e.originalEvent.changedTouches[0],this._handleMouseDown(e,this._getPositionInfo(t))},n.prototype._touchMove=function(e){var t;if(!(e.originalEvent.touches.length>1))return t=e.originalEvent.changedTouches[0],this._handleMouseMove(e,this._getPositionInfo(t))},n.prototype._touchEnd=function(e){var t;if(!(e.originalEvent.touches.length>1))return t=e.originalEvent.changedTouches[0],this._handleMouseUp(this._getPositionInfo(t))},n}(g),this.Tree={},e=this.jQuery,h={getName:function(e){return h.strings[e-1]},nameToIndex:function(e){var t,n,i;for(t=n=1,i=h.strings.length;i>=1?i>=n:n>=i;t=i>=1?++n:--n)if(h.strings[t-1]===e)return t;return 0}},h.BEFORE=1,h.AFTER=2,h.INSIDE=3,h.NONE=4,h.strings=["before","after","inside","none"],this.Tree.Position=h,u=function(){function t(e,n,i){null==n&&(n=!1),null==i&&(i=t),this.setData(e),this.children=[],this.parent=null,n&&(this.id_mapping={},this.tree=this,this.node_class=i)}return t.prototype.setData=function(e){var t,n,i;if("object"!=typeof e)return this.name=e;i=[];for(t in e)n=e[t],"label"===t?i.push(this.name=n):i.push(this[t]=n);return i},t.prototype.initFromData=function(e){var t,n,i=this;return n=function(e){return i.setData(e),e.children?t(e.children):void 0},t=function(e){var t,n,r,o;for(r=0,o=e.length;o>r;r++)t=e[r],n=new i.tree.node_class(""),n.initFromData(t),i.addChild(n);return null},n(e),null},t.prototype.loadFromData=function(e){var t,n,i,r;for(this.removeChildren(),i=0,r=e.length;r>i;i++)n=e[i],t=new this.tree.node_class(n),this.addChild(t),"object"==typeof n&&n.children&&t.loadFromData(n.children);return null},t.prototype.addChild=function(e){return this.children.push(e),e._setParent(this)},t.prototype.addChildAtPosition=function(e,t){return this.children.splice(t,0,e),e._setParent(this)},t.prototype._setParent=function(e){return this.parent=e,this.tree=e.tree,this.tree.addNodeToIndex(this)},t.prototype.removeChild=function(e){return e.removeChildren(),this._removeChild(e)},t.prototype._removeChild=function(e){return this.children.splice(this.getChildIndex(e),1),this.tree.removeNodeFromIndex(e)},t.prototype.getChildIndex=function(t){return e.inArray(t,this.children)},t.prototype.hasChildren=function(){return 0!==this.children.length},t.prototype.isFolder=function(){return this.hasChildren()||this.load_on_demand},t.prototype.iterate=function(e){var t,n=this;return t=function(i,r){var o,s,a,l,c;if(i.children){for(c=i.children,a=0,l=c.length;l>a;a++)o=c[a],s=e(o,r),n.hasChildren()&&s&&t(o,r+1);return null}},t(this,0),null},t.prototype.moveNode=function(e,t,n){return e.isParentOf(t)?void 0:(e.parent._removeChild(e),n===h.AFTER?t.parent.addChildAtPosition(e,t.parent.getChildIndex(t)+1):n===h.BEFORE?t.parent.addChildAtPosition(e,t.parent.getChildIndex(t)):n===h.INSIDE?t.addChildAtPosition(e,0):void 0)},t.prototype.getData=function(){var e;return e=function(t){var n,i,r,o,s,a,l;for(n=[],a=0,l=t.length;l>a;a++){r=t[a],o={};for(i in r)s=r[i],"parent"!==i&&"children"!==i&&"element"!==i&&"tree"!==i&&Object.prototype.hasOwnProperty.call(r,i)&&(o[i]=s);r.hasChildren()&&(o.children=e(r.children)),n.push(o)}return n},e(this.children)},t.prototype.getNodeByName=function(e){var t;return t=null,this.iterate(function(n){return n.name===e?(t=n,!1):!0}),t},t.prototype.addAfter=function(e){var t,n;return this.parent?(n=new this.tree.node_class(e),t=this.parent.getChildIndex(this),this.parent.addChildAtPosition(n,t+1),n):null},t.prototype.addBefore=function(e){var t,n;return this.parent?(n=new this.tree.node_class(e),t=this.parent.getChildIndex(this),this.parent.addChildAtPosition(n,t),n):null},t.prototype.addParent=function(e){var t,n,i,r,o,s;if(this.parent){for(n=new this.tree.node_class(e),n._setParent(this.tree),i=this.parent,s=i.children,r=0,o=s.length;o>r;r++)t=s[r],n.addChild(t);return i.children=[],i.addChild(n),n}return null},t.prototype.remove=function(){return this.parent?(this.parent.removeChild(this),this.parent=null):void 0},t.prototype.append=function(e){var t;return t=new this.tree.node_class(e),this.addChild(t),t},t.prototype.prepend=function(e){var t;return t=new this.tree.node_class(e),this.addChildAtPosition(t,0),t},t.prototype.isParentOf=function(e){var t;for(t=e.parent;t;){if(t===this)return!0;t=t.parent}return!1},t.prototype.getLevel=function(){var e,t;for(e=0,t=this;t.parent;)e+=1,t=t.parent;return e},t.prototype.getNodeById=function(e){return this.id_mapping[e]},t.prototype.addNodeToIndex=function(e){return null!=e.id?this.id_mapping[e.id]=e:void 0},t.prototype.removeNodeFromIndex=function(e){return null!=e.id?delete this.id_mapping[e.id]:void 0},t.prototype.removeChildren=function(){var e=this;return this.iterate(function(t){return e.tree.removeNodeFromIndex(t),!0}),this.children=[]},t.prototype.getPreviousSibling=function(){var e;return this.parent?(e=this.parent.getChildIndex(this)-1,e>=0?this.parent.children[e]:null):null},t.prototype.getNextSibling=function(){var e;return this.parent?(e=this.parent.getChildIndex(this)+1,e<this.parent.children.length?this.parent.children[e]:null):null},t}(),this.Tree.Node=u,/*
  Copyright 2013 Marco Braak
  
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  
      http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  */
a=function(t){function i(){return S=i.__super__.constructor.apply(this,arguments)}return M(i,t),i.prototype.defaults={autoOpen:!1,saveState:!1,dragAndDrop:!1,selectable:!0,useContextMenu:!0,onCanSelectNode:null,onSetStateFromStorage:null,onGetStateFromStorage:null,onCreateLi:null,onIsMoveHandle:null,onCanMove:null,onCanMoveTo:null,onLoadFailed:null,autoEscape:!0,dataUrl:null,closedIcon:"&#x25ba;",openedIcon:"&#x25bc;",slide:!0,nodeClass:u,dataFilter:null,keyboardSupport:!0},i.prototype.toggle=function(e,t){return null==t&&(t=!0),e.is_open?this.closeNode(e,t):this.openNode(e,t)},i.prototype.getTree=function(){return this.tree},i.prototype.selectNode=function(e){return this._selectNode(e,!1)},i.prototype._selectNode=function(e,t){var n,i,r,o,s=this;if(null==t&&(t=!1),this.select_node_handler){if(n=function(){return s.options.onCanSelectNode?s.options.selectable&&s.options.onCanSelectNode(e):s.options.selectable},r=function(){var t;return t=e.parent,t&&t.parent&&!t.is_open?s.openNode(t,!1):void 0},o=function(){return s.options.saveState?s.save_state_handler.saveState():void 0},!e)return this._deselectCurrentNode(),o(),void 0;if(n())return this.select_node_handler.isNodeSelected(e)?t&&(this._deselectCurrentNode(),this._triggerEvent("tree.select",{node:null,previous_node:e})):(i=this.getSelectedNode(),this._deselectCurrentNode(),this.addToSelection(e),this._triggerEvent("tree.select",{node:e,deselected_node:i}),r()),o()}},i.prototype.getSelectedNode=function(){return this.select_node_handler.getSelectedNode()},i.prototype.toJson=function(){return JSON.stringify(this.tree.getData())},i.prototype.loadData=function(e,t){return this._loadData(e,t)},i.prototype.loadDataFromUrl=function(t,n,i){return"string"!==e.type(t)&&(i=n,n=t,t=null),this._loadDataFromUrl(t,n,i)},i.prototype._loadDataFromUrl=function(t,n,i){var o,s,a,l,c=this;return o=null,s=function(){var e;return n?(e=new r(n,c),o=e.getLi()):o=c.element,o.addClass("jqtree-loading")},l=function(){return o?o.removeClass("jqtree-loading"):void 0},a=function(){return"string"===e.type(t)&&(t={url:t}),t.method?void 0:t.method="get"},s(),t||(t=this._getDataUrlInfo(n)),a(),e.ajax({url:t.url,data:t.data,type:t.method.toUpperCase(),cache:!1,dataType:"json",success:function(t){var r;return r=e.isArray(t)||"object"==typeof t?t:e.parseJSON(t),c.options.dataFilter&&(r=c.options.dataFilter(r)),l(),c._loadData(r,n),i&&e.isFunction(i)?i():void 0},error:function(e){return l(),c.options.onLoadFailed?c.options.onLoadFailed(e):void 0}})},i.prototype._loadData=function(e,t){var n,i,r,o;if(this._triggerEvent("tree.load_data",{tree_data:e}),t){for(i=this.select_node_handler.getSelectedNodes(t),r=0,o=i.length;o>r;r++)n=i[r],this.select_node_handler.removeFromSelection(n);t.loadFromData(e),t.load_on_demand=!1,this._refreshElements(t.parent)}else this._initTree(e);return this.is_dragging?this.dnd_handler.refreshHitAreas():void 0},i.prototype.getNodeById=function(e){return this.tree.getNodeById(e)},i.prototype.getNodeByName=function(e){return this.tree.getNodeByName(e)},i.prototype.openNode=function(e,t){return null==t&&(t=!0),this._openNode(e,t)},i.prototype._openNode=function(e,t,n){var i,o,s=this;if(null==t&&(t=!0),i=function(e,t,n){var i;return i=new r(e,s),i.open(n,t)},e.isFolder()){if(e.load_on_demand)return this._loadFolderOnDemand(e,t,n);for(o=e.parent;o&&!o.is_open;)o.parent&&i(o,!1,null),o=o.parent;return i(e,t,n),this._saveState()}},i.prototype._loadFolderOnDemand=function(e,t,n){var i=this;return null==t&&(t=!0),this._loadDataFromUrl(null,e,function(){return i._openNode(e,t,n)})},i.prototype.closeNode=function(e,t){return null==t&&(t=!0),e.isFolder()?(new r(e,this).close(t),this._saveState()):void 0},i.prototype.isDragging=function(){return this.is_dragging},i.prototype.refreshHitAreas=function(){return this.dnd_handler.refreshHitAreas()},i.prototype.addNodeAfter=function(e,t){var n;return n=t.addAfter(e),this._refreshElements(t.parent),n},i.prototype.addNodeBefore=function(e,t){var n;return n=t.addBefore(e),this._refreshElements(t.parent),n},i.prototype.addParentNode=function(e,t){var n;return n=t.addParent(e),this._refreshElements(n.parent),n},i.prototype.removeNode=function(e){var t;return t=e.parent,t?(this.select_node_handler.removeFromSelection(e,!0),e.remove(),this._refreshElements(t.parent)):void 0},i.prototype.appendNode=function(e,t){var n,i;return t||(t=this.tree),n=t.isFolder(),i=t.append(e),n?this._refreshElements(t):this._refreshElements(t.parent),i},i.prototype.prependNode=function(e,t){var n;return t||(t=this.tree),n=t.prepend(e),this._refreshElements(t),n},i.prototype.updateNode=function(e,t){var n;return n=t.id&&t.id!==e.id,n&&this.tree.removeNodeFromIndex(e),e.setData(t),n&&this.tree.addNodeToIndex(e),this._refreshElements(e.parent),this._selectCurrentNode()},i.prototype.moveNode=function(e,t,n){var i;return i=h.nameToIndex(n),this.tree.moveNode(e,t,i),this._refreshElements()},i.prototype.getStateFromStorage=function(){return this.save_state_handler.getStateFromStorage()},i.prototype.addToSelection=function(e){return this.select_node_handler.addToSelection(e),this._getNodeElementForNode(e).select()},i.prototype.getSelectedNodes=function(){return this.select_node_handler.getSelectedNodes()},i.prototype.isNodeSelected=function(e){return this.select_node_handler.isNodeSelected(e)},i.prototype.removeFromSelection=function(e){return this.select_node_handler.removeFromSelection(e),this._getNodeElementForNode(e).deselect()},i.prototype.scrollToNode=function(t){var n,i;return n=e(t.element),i=n.offset().top-this.$el.offset().top,this.scroll_handler.scrollTo(i)},i.prototype.getState=function(){return this.save_state_handler.getState()},i.prototype.setState=function(e){return this.save_state_handler.setState(e),this._refreshElements()},i.prototype._init=function(){return i.__super__._init.call(this),this.element=this.$el,this.mouse_delay=300,this.is_initialized=!1,"undefined"!=typeof f&&null!==f?this.save_state_handler=new f(this):this.options.saveState=!1,"undefined"!=typeof m&&null!==m&&(this.select_node_handler=new m(this)),"undefined"!=typeof n&&null!==n?this.dnd_handler=new n(this):this.options.dragAndDrop=!1,"undefined"!=typeof p&&null!==p&&(this.scroll_handler=new p(this)),"undefined"!=typeof l&&null!==l&&"undefined"!=typeof m&&null!==m&&(this.key_handler=new l(this)),this._initData(),this.element.click(e.proxy(this._click,this)),this.element.dblclick(e.proxy(this._dblclick,this)),this.options.useContextMenu?this.element.bind("contextmenu",e.proxy(this._contextmenu,this)):void 0},i.prototype._deinit=function(){return this.element.empty(),this.element.unbind(),this.key_handler.deinit(),this.tree=null,i.__super__._deinit.call(this)},i.prototype._initData=function(){return this.options.data?this._loadData(this.options.data):this._loadDataFromUrl(this._getDataUrlInfo())},i.prototype._getDataUrlInfo=function(t){var n,i,r=this;return n=this.options.dataUrl||this.element.data("url"),i=function(){var e,i,o;return o={url:n},t&&t.id?(e={node:t.id},o.data=e):(i=r._getNodeIdToBeSelected(),i&&(e={selected_node:i},o.data=e)),o},e.isFunction(n)?n(t):"string"===e.type(n)?i():n},i.prototype._getNodeIdToBeSelected=function(){return this.options.saveState?this.save_state_handler.getNodeIdToBeSelected():null},i.prototype._initTree=function(e){return this.tree=new this.options.nodeClass(null,!0,this.options.nodeClass),this.select_node_handler&&this.select_node_handler.clear(),this.tree.loadFromData(e),this._openNodes(),this._refreshElements(),this.is_initialized?void 0:(this.is_initialized=!0,this._triggerEvent("tree.init"))},i.prototype._openNodes=function(){var e;if(!(this.options.saveState&&this.save_state_handler.restoreState()||this.options.autoOpen===!1))return e=this.options.autoOpen===!0?-1:parseInt(this.options.autoOpen),this.tree.iterate(function(t,n){return t.hasChildren()&&(t.is_open=!0),n!==e})},i.prototype._refreshElements=function(t){var n,i,r,o,s,a,l,c,u,d=this;return null==t&&(t=null),l=function(e){return d.options.autoEscape?y(e):e},s=function(t){var n;return n=t?"jqtree-tree":"",e('<ul class="jqtree_common '+n+'"></ul>')},r=function(e){var t;return t=e.isFolder()?i(e):o(e),d.options.onCreateLi&&d.options.onCreateLi(e,t),t},o=function(t){var n,i,r;return r=["jqtree_common"],d.select_node_handler&&d.select_node_handler.isNodeSelected(t)&&r.push("jqtree-selected"),n=r.join(" "),i=l(t.name),e('<li class="'+n+'"><div class="jqtree-element jqtree_common"><span class="jqtree-title jqtree_common">'+i+"</span></div></li>")},i=function(t){var n,i,r,o,s,a;return s=function(){var e;return e=["jqtree-toggler"],t.is_open||e.push("jqtree-closed"),e.join(" ")},a=function(){var e;return e=["jqtree-folder"],t.is_open||e.push("jqtree-closed"),d.select_node_handler&&d.select_node_handler.isNodeSelected(t)&&e.push("jqtree-selected"),e.join(" ")},i=s(),o=a(),r=l(t.name),n=t.is_open?d.options.openedIcon:d.options.closedIcon,e('<li class="jqtree_common '+o+'"><div class="jqtree-element jqtree_common"><a class="jqtree_common '+i+'">'+n+'</a><span class="jqtree_common jqtree-title">'+r+"</span></div></li>")},a=function(e,t,n){var i,o,l,c,u;for(o=s(n),e.append(o),c=0,u=t.length;u>c;c++)l=t[c],i=r(l),o.append(i),l.element=i[0],i.data("node",l),l.hasChildren()&&a(i,l.children,!1,l.is_open);return null},t&&t.parent?(c=!1,u=this._getNodeElementForNode(t),u.getUl().remove(),n=u.$element):(t=this.tree,n=this.element,n.empty(),c=!0),a(n,t.children,c,c),this._triggerEvent("tree.refresh")},i.prototype._click=function(e){var t,n,i;if(t=this._getClickTarget(e.target)){if("button"===t.type)return this.toggle(t.node,this.options.slide),e.preventDefault(),e.stopPropagation();if("label"===t.type&&(i=t.node,n=this._triggerEvent("tree.click",{node:i}),!n.isDefaultPrevented()))return this._selectNode(i,!0)}},i.prototype._dblclick=function(e){var t;return t=this._getClickTarget(e.target),t&&"label"===t.type?this._triggerEvent("tree.dblclick",{node:t.node}):void 0},i.prototype._getClickTarget=function(t){var n,i,r,o;if(r=e(t),n=r.closest(".jqtree-toggler"),n.length){if(o=this._getNode(n))return{type:"button",node:o}}else if(i=r.closest(".jqtree-element"),i.length&&(o=this._getNode(i)))return{type:"label",node:o};return null},i.prototype._getNode=function(e){var t;return t=e.closest("li"),0===t.length?null:t.data("node")},i.prototype._getNodeElementForNode=function(e){return e.isFolder()?new r(e,this):new d(e,this)},i.prototype._getNodeElement=function(e){var t;return t=this._getNode(e),t?this._getNodeElementForNode(t):null},i.prototype._contextmenu=function(t){var n,i;return n=e(t.target).closest("ul.jqtree-tree .jqtree-element"),n.length&&(i=this._getNode(n))?(t.preventDefault(),t.stopPropagation(),this._triggerEvent("tree.contextmenu",{node:i,click_event:t}),!1):void 0},i.prototype._saveState=function(){return this.options.saveState?this.save_state_handler.saveState():void 0},i.prototype._mouseCapture=function(e){return this.options.dragAndDrop?this.dnd_handler.mouseCapture(e):!1},i.prototype._mouseStart=function(e){return this.options.dragAndDrop?this.dnd_handler.mouseStart(e):!1},i.prototype._mouseDrag=function(e){var t;return this.options.dragAndDrop?(t=this.dnd_handler.mouseDrag(e),this.scroll_handler&&this.scroll_handler.checkScrolling(),t):!1},i.prototype._mouseStop=function(e){return this.options.dragAndDrop?this.dnd_handler.mouseStop(e):!1},i.prototype._triggerEvent=function(t,n){var i;return i=e.Event(t),e.extend(i,n),this.element.trigger(i),i},i.prototype.testGenerateHitAreas=function(e){return this.dnd_handler.current_item=this._getNodeElementForNode(e),this.dnd_handler.generateHitAreas(),this.dnd_handler.hit_areas},i.prototype._selectCurrentNode=function(){var e,t;return e=this.getSelectedNode(),e&&(t=this._getNodeElementForNode(e))?t.select():void 0},i.prototype._deselectCurrentNode=function(){var e;return e=this.getSelectedNode(),e?this.removeFromSelection(e):void 0},i}(c),g.register(a,"tree"),d=function(){function n(e,t){this.init(e,t)}return n.prototype.init=function(t,n){return this.node=t,this.tree_widget=n,this.$element=e(t.element)},n.prototype.getUl=function(){return this.$element.children("ul:first")},n.prototype.getSpan=function(){return this.$element.children(".jqtree-element").find("span.jqtree-title")},n.prototype.getLi=function(){return this.$element},n.prototype.addDropHint=function(e){return e===h.INSIDE?new t(this.$element):new o(this.node,this.$element,e)},n.prototype.select=function(){return this.getLi().addClass("jqtree-selected")},n.prototype.deselect=function(){return this.getLi().removeClass("jqtree-selected")},n}(),r=function(e){function n(){return D=n.__super__.constructor.apply(this,arguments)}return M(n,e),n.prototype.open=function(e,t){var n,i,r=this;return null==t&&(t=!0),this.node.is_open?void 0:(this.node.is_open=!0,n=this.getButton(),n.removeClass("jqtree-closed"),n.html(this.tree_widget.options.openedIcon),i=function(){return r.getLi().removeClass("jqtree-closed"),e&&e(),r.tree_widget._triggerEvent("tree.open",{node:r.node})},t?this.getUl().slideDown("fast",i):(this.getUl().show(),i()))},n.prototype.close=function(e){var t,n,i=this;return null==e&&(e=!0),this.node.is_open?(this.node.is_open=!1,t=this.getButton(),t.addClass("jqtree-closed"),t.html(this.tree_widget.options.closedIcon),n=function(){return i.getLi().addClass("jqtree-closed"),i.tree_widget._triggerEvent("tree.close",{node:i.node})},e?this.getUl().slideUp("fast",n):(this.getUl().hide(),n())):void 0},n.prototype.getButton=function(){return this.$element.children(".jqtree-element").find("a.jqtree-toggler")},n.prototype.addDropHint=function(e){return this.node.is_open||e!==h.INSIDE?new o(this.node,this.$element,e):new t(this.$element)},n}(d),y=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},k=function(e,t){var n,i,r,o;for(n=r=0,o=e.length;o>r;n=++r)if(i=e[n],i===t)return n;return-1},b=function(e,t){return e.indexOf?e.indexOf(t):k(e,t)},this.Tree.indexOf=b,this.Tree._indexOf=k,(null==this.JSON||null==this.JSON.stringify||"function"!=typeof this.JSON.stringify)&&(w=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},x=function(e){return w.lastIndex=0,w.test(e)?'"'+e.replace(w,function(e){var t;return t=_[e],"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},C=function(e,t){var n,i,r,o,s,a,l;switch(s=t[e],typeof s){case"string":return x(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(r=[],"[object Array]"===Object.prototype.toString.apply(s)){for(n=a=0,l=s.length;l>a;n=++a)o=s[n],r[n]=C(n,s)||"null";return 0===r.length?"[]":"["+r.join(",")+"]"}for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(o=C(i,s),o&&r.push(x(i)+":"+o));return 0===r.length?"{}":"{"+r.join(",")+"}"}},null==this.JSON&&(this.JSON={}),this.JSON.stringify=function(e){return C("",{"":e})}),f=function(){function t(e){this.tree_widget=e}return t.prototype.saveState=function(){var t;return t=JSON.stringify(this.getState()),this.tree_widget.options.onSetStateFromStorage?this.tree_widget.options.onSetStateFromStorage(t):this.supportsLocalStorage()?localStorage.setItem(this.getCookieName(),t):e.cookie?(e.cookie.raw=!0,e.cookie(this.getCookieName(),t,{path:"/"})):void 0},t.prototype.restoreState=function(){var t;return t=this.getStateFromStorage(),t?(this.setState(e.parseJSON(t)),!0):!1},t.prototype.getStateFromStorage=function(){return this.tree_widget.options.onGetStateFromStorage?this.tree_widget.options.onGetStateFromStorage():this.supportsLocalStorage()?localStorage.getItem(this.getCookieName()):e.cookie?(e.cookie.raw=!0,e.cookie(this.getCookieName())):null},t.prototype.getState=function(){var e,t,n;return e=[],this.tree_widget.tree.iterate(function(t){return t.is_open&&t.id&&t.hasChildren()&&e.push(t.id),!0}),t=this.tree_widget.getSelectedNode(),n=t?t.id:"",{open_nodes:e,selected_node:n}},t.prototype.setState=function(e){var t,n,i;return e&&(t=e.open_nodes,i=e.selected_node,this.tree_widget.tree.iterate(function(e){return e.is_open=e.id&&e.hasChildren()&&b(t,e.id)>=0,!0}),i&&this.tree_widget.select_node_handler&&(this.tree_widget.select_node_handler.clear(),n=this.tree_widget.getNodeById(i)))?this.tree_widget.select_node_handler.addToSelection(n):void 0},t.prototype.getCookieName=function(){return"string"==typeof this.tree_widget.options.saveState?this.tree_widget.options.saveState:"tree"},t.prototype.supportsLocalStorage=function(){var e;return e=function(){var e,t;if("undefined"==typeof localStorage||null===localStorage)return!1;try{t="_storage_test",sessionStorage.setItem(t,!0),sessionStorage.removeItem(t)}catch(n){return e=n,!1}return!0},null==this._supportsLocalStorage&&(this._supportsLocalStorage=e()),this._supportsLocalStorage},t.prototype.getNodeIdToBeSelected=function(){var t,n;return n=this.getStateFromStorage(),n?(t=e.parseJSON(n),t.selected_node):null},t}(),m=function(){function e(e){this.tree_widget=e,this.clear()}return e.prototype.getSelectedNode=function(){var e;return e=this.getSelectedNodes(),e.length?e[0]:!1},e.prototype.getSelectedNodes=function(){var e,t,n;if(this.selected_single_node)return[this.selected_single_node];n=[];for(e in this.selected_nodes)t=this.tree_widget.getNodeById(e),t&&n.push(t);return n},e.prototype.isNodeSelected=function(e){return e.id?this.selected_nodes[e.id]:this.selected_single_node?this.selected_single_node.element===e.element:!1},e.prototype.clear=function(){return this.selected_nodes={},this.selected_single_node=null},e.prototype.removeFromSelection=function(e,t){var n=this;if(null==t&&(t=!1),e.id){if(delete this.selected_nodes[e.id],t)return e.iterate(function(){return delete n.selected_nodes[e.id],!0})}else if(e.element===this.selected_single_node.element)return this.selected_single_node=null},e.prototype.addToSelection=function(e){return e.id?this.selected_nodes[e.id]=!0:this.selected_single_node=e},e}(),n=function(){function t(e){this.tree_widget=e,this.hovered_area=null,this.$ghost=null,this.hit_areas=[],this.is_dragging=!1}return t.prototype.mouseCapture=function(t){var n,i;return n=e(t.target),this.tree_widget.options.onIsMoveHandle&&!this.tree_widget.options.onIsMoveHandle(n)?null:(i=this.tree_widget._getNodeElement(n),i&&this.tree_widget.options.onCanMove&&(this.tree_widget.options.onCanMove(i.node)||(i=null)),this.current_item=i,null!==this.current_item)},t.prototype.mouseStart=function(t){var n;return this.refreshHitAreas(),n=e(t.target).offset(),this.drag_element=new i(this.current_item.node,t.page_x-n.left,t.page_y-n.top,this.tree_widget.element),this.is_dragging=!0,this.current_item.$element.addClass("jqtree-moving"),!0},t.prototype.mouseDrag=function(e){var t,n;return this.drag_element.move(e.page_x,e.page_y),t=this.findHoveredArea(e.page_x,e.page_y),n=this.canMoveToArea(t),t?this.hovered_area!==t&&(this.hovered_area=t,this.mustOpenFolderTimer(t)&&this.startOpenFolderTimer(t.node),n&&this.updateDropHint()):(this.removeHover(),this.removeDropHint(),this.stopOpenFolderTimer()),!0},t.prototype.canMoveToArea=function(e){var t;return e?this.tree_widget.options.onCanMoveTo?(t=h.getName(e.position),this.tree_widget.options.onCanMoveTo(this.current_item.node,e.node,t)):!0:!1},t.prototype.mouseStop=function(e){return this.moveItem(e),this.clear(),this.removeHover(),this.removeDropHint(),this.removeHitAreas(),this.current_item&&this.current_item.$element.removeClass("jqtree-moving"),this.is_dragging=!1,!1},t.prototype.refreshHitAreas=function(){return this.removeHitAreas(),this.generateHitAreas()},t.prototype.removeHitAreas=function(){return this.hit_areas=[]},t.prototype.clear=function(){return this.drag_element.remove(),this.drag_element=null},t.prototype.removeDropHint=function(){return this.previous_ghost?this.previous_ghost.remove():void 0},t.prototype.removeHover=function(){return this.hovered_area=null},t.prototype.generateHitAreas=function(){var e;return e=new s(this.tree_widget.tree,this.current_item.node,this.getTreeDimensions().bottom),this.hit_areas=e.generate()},t.prototype.findHoveredArea=function(e,t){var n,i,r,o,s;if(i=this.getTreeDimensions(),e<i.left||t<i.top||e>i.right||t>i.bottom)return null;for(o=0,r=this.hit_areas.length;r>o;)if(s=o+r>>1,n=this.hit_areas[s],t<n.top)r=s;else{if(!(t>n.bottom))return n;o=s+1}return null},t.prototype.mustOpenFolderTimer=function(e){var t;return t=e.node,t.isFolder()&&!t.is_open&&e.position===h.INSIDE},t.prototype.updateDropHint=function(){var e;if(this.hovered_area)return this.removeDropHint(),e=this.tree_widget._getNodeElementForNode(this.hovered_area.node),this.previous_ghost=e.addDropHint(this.hovered_area.position)},t.prototype.startOpenFolderTimer=function(e){var t,n=this;return t=function(){return n.tree_widget._openNode(e,n.tree_widget.options.slide,function(){return n.refreshHitAreas(),n.updateDropHint()})},this.open_folder_timer=setTimeout(t,500)},t.prototype.stopOpenFolderTimer=function(){return this.open_folder_timer?(clearTimeout(this.open_folder_timer),this.open_folder_timer=null):void 0},t.prototype.moveItem=function(e){var t,n,i,r,o,s,a=this;return this.hovered_area&&this.hovered_area.position!==h.NONE&&this.canMoveToArea(this.hovered_area)&&(i=this.current_item.node,s=this.hovered_area.node,r=this.hovered_area.position,o=i.parent,r===h.INSIDE&&(this.hovered_area.node.is_open=!0),t=function(){return a.tree_widget.tree.moveNode(i,s,r),a.tree_widget.element.empty(),a.tree_widget._refreshElements()},n=this.tree_widget._triggerEvent("tree.move",{move_info:{moved_node:i,target_node:s,position:h.getName(r),previous_parent:o,do_move:t,original_event:e.original_event}}),!n.isDefaultPrevented())?t():void 0},t.prototype.getTreeDimensions=function(){var e;return e=this.tree_widget.element.offset(),{left:e.left,top:e.top,right:e.left+this.tree_widget.element.width(),bottom:e.top+this.tree_widget.element.height()+16}},t}(),v=function(){function t(e){this.tree=e}return t.prototype.iterate=function(){var t,n,i=this;return t=!0,n=function(r,o){var s,a,l,c,u,d,h,f;if(u=(r.is_open||!r.element)&&r.hasChildren(),r.element){if(s=e(r.element),!s.is(":visible"))return;t&&(i.handleFirstNode(r,s),t=!1),r.hasChildren()?r.is_open?i.handleOpenFolder(r,s)||(u=!1):i.handleClosedFolder(r,o,s):i.handleNode(r,o,s)}if(u){for(l=r.children.length,f=r.children,c=d=0,h=f.length;h>d;c=++d)a=f[c],c===l-1?n(r.children[c],null):n(r.children[c],r.children[c+1]);if(r.is_open)return i.handleAfterOpenFolder(r,o,s)}},n(this.tree,null)},t.prototype.handleNode=function(){},t.prototype.handleOpenFolder=function(){},t.prototype.handleClosedFolder=function(){},t.prototype.handleAfterOpenFolder=function(){},t.prototype.handleFirstNode=function(){},t}(),s=function(t){function n(e,t,i){n.__super__.constructor.call(this,e),this.current_node=t,this.tree_bottom=i}return M(n,t),n.prototype.generate=function(){return this.positions=[],this.last_top=0,this.iterate(),this.generateHitAreas(this.positions)},n.prototype.getTop=function(e){return e.offset().top},n.prototype.addPosition=function(e,t,n){return this.positions.push({top:n,node:e,position:t}),this.last_top=n},n.prototype.handleNode=function(e,t,n){var i;return i=this.getTop(n),e===this.current_node?this.addPosition(e,h.NONE,i):this.addPosition(e,h.INSIDE,i),t===this.current_node||e===this.current_node?this.addPosition(e,h.NONE,i):this.addPosition(e,h.AFTER,i)},n.prototype.handleOpenFolder=function(e,t){return e===this.current_node?!1:(e.children[0]!==this.current_node&&this.addPosition(e,h.INSIDE,this.getTop(t)),!0)},n.prototype.handleClosedFolder=function(e,t,n){var i;return i=this.getTop(n),e===this.current_node?this.addPosition(e,h.NONE,i):(this.addPosition(e,h.INSIDE,i),t!==this.current_node?this.addPosition(e,h.AFTER,i):void 0)},n.prototype.handleAfterOpenFolder=function(e,t){return e===this.current_node||t===this.current_node?this.addPosition(e,h.NONE,this.last_top):this.addPosition(e,h.AFTER,this.last_top)},n.prototype.handleFirstNode=function(t){return t!==this.current_node?this.addPosition(t,h.BEFORE,this.getTop(e(t.element))):void 0},n.prototype.generateHitAreas=function(e){var t,n,i,r,o,s;for(r=-1,t=[],n=[],o=0,s=e.length;s>o;o++)i=e[o],i.top!==r&&t.length&&(t.length&&this.generateHitAreasForGroup(n,t,r,i.top),r=i.top,t=[]),t.push(i);return this.generateHitAreasForGroup(n,t,r,this.tree_bottom),n},n.prototype.generateHitAreasForGroup=function(e,t,n,i){var r,o,s,a,l;for(r=(i-n)/t.length,o=n,a=0,l=t.length;l>a;a++)s=t[a],e.push({top:o,bottom:o+r,node:s.node,position:s.position}),o+=r;return null},n}(v),i=function(){function t(t,n,i,r){this.offset_x=n,this.offset_y=i,this.$element=e('<span class="jqtree-title jqtree-dragging">'+t.name+"</span>"),this.$element.css("position","absolute"),r.append(this.$element)}return t.prototype.move=function(e,t){return this.$element.offset({left:e-this.offset_x,top:t-this.offset_y})},t.prototype.remove=function(){return this.$element.remove()},t}(),o=function(){function t(t,n,i){this.$element=n,this.node=t,this.$ghost=e('<li class="jqtree_common jqtree-ghost"><span class="jqtree_common jqtree-circle"></span><span class="jqtree_common jqtree-line"></span></li>'),i===h.AFTER?this.moveAfter():i===h.BEFORE?this.moveBefore():i===h.INSIDE&&(t.isFolder()&&t.is_open?this.moveInsideOpenFolder():this.moveInside())}return t.prototype.remove=function(){return this.$ghost.remove()},t.prototype.moveAfter=function(){return this.$element.after(this.$ghost)},t.prototype.moveBefore=function(){return this.$element.before(this.$ghost)},t.prototype.moveInsideOpenFolder=function(){return e(this.node.children[0].element).before(this.$ghost)},t.prototype.moveInside=function(){return this.$element.after(this.$ghost),this.$ghost.addClass("jqtree-inside")},t}(),t=function(){function t(t){var n,i;n=t.children(".jqtree-element"),i=t.width()-4,this.$hint=e('<span class="jqtree-border"></span>'),n.append(this.$hint),this.$hint.css({width:i,height:n.height()-4})}return t.prototype.remove=function(){return this.$hint.remove()},t}(),p=function(){function t(e){this.tree_widget=e,this.previous_top=-1,this._initScrollParent()}return t.prototype._initScrollParent=function(){var t,n,i,r=this;return n=function(){var t,n,i,o,s,a,l,c,u,d;for(n=["overflow","overflow-y"],o=null,u=r.tree_widget.$el.parents(),s=0,l=u.length;l>s;s++)for(i=u[s],a=0,c=n.length;c>a;a++)if(t=n[a],"auto"===(d=e.css(i,t))||"scroll"===d)return e(i);return null},i=function(){return r.scroll_parent_top=0,r.$scroll_parent=null},"fixed"===this.tree_widget.$el.css("position")&&i(),t=n(),t&&t.length&&"HTML"!==t[0].tagName?(this.$scroll_parent=t,this.scroll_parent_top=this.$scroll_parent.offset().top):i()},t.prototype.checkScrolling=function(){var e;return e=this.tree_widget.dnd_handler.hovered_area,e&&e.top!==this.previous_top?(this.previous_top=e.top,this.$scroll_parent?this._handleScrollingWithScrollParent(e):this._handleScrollingWithDocument(e)):void 0},t.prototype._handleScrollingWithScrollParent=function(e){var t;return t=this.scroll_parent_top+this.$scroll_parent[0].offsetHeight-e.bottom,20>t?(this.$scroll_parent[0].scrollTop+=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1):e.top-this.scroll_parent_top<20?(this.$scroll_parent[0].scrollTop-=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1):void 0},t.prototype._handleScrollingWithDocument=function(t){var n;return n=t.top-e(document).scrollTop(),20>n?e(document).scrollTop(e(document).scrollTop()-20):e(window).height()-(t.bottom-e(document).scrollTop())<20?e(document).scrollTop(e(document).scrollTop()+20):void 0},t.prototype.scrollTo=function(t){var n;return this.$scroll_parent?this.$scroll_parent[0].scrollTop=t:(n=this.tree_widget.$el.offset().top,e(document).scrollTop(t+n))},t.prototype.isScrolledIntoView=function(t){var n,i,r,o,s;return n=e(t),this.$scroll_parent?(s=0,o=this.$scroll_parent.height(),r=n.offset().top-this.scroll_parent_top,i=r+n.height()):(s=e(window).scrollTop(),o=s+e(window).height(),r=n.offset().top,i=r+n.height()),o>=i&&r>=s},t}(),l=function(){function t(t){this.tree_widget=t,t.options.keyboardSupport&&e(document).bind("keydown.jqtree",e.proxy(this.handleKeyDown,this))}var n,i,r,o;return i=37,o=38,r=39,n=40,t.prototype.deinit=function(){return e(document).unbind("keydown.jqtree")},t.prototype.handleKeyDown=function(t){var s,a,l,c,u,d,h,f=this;if(e(document.activeElement).is("textarea,input"))return!0;if(s=this.tree_widget.getSelectedNode(),h=function(t){return t?(f.tree_widget.selectNode(t),f.tree_widget.scroll_handler&&!f.tree_widget.scroll_handler.isScrolledIntoView(e(t.element).find(".jqtree-element"))&&f.tree_widget.scrollToNode(t),!1):!0},l=function(){return h(f.getNextNode(s))},d=function(){return h(f.getPreviousNode(s))},u=function(){return s.hasChildren()&&!s.is_open?(f.tree_widget.openNode(s),!1):!0},c=function(){return s.hasChildren()&&s.is_open?(f.tree_widget.closeNode(s),!1):!0},!s)return!0;switch(a=t.which){case n:return l();case o:return d();case r:return u();case i:return c()}},t.prototype.getNextNode=function(e,t){var n;return null==t&&(t=!0),t&&e.hasChildren()&&e.is_open?e.children[0]:e.parent?(n=e.getNextSibling(),n?n:this.getNextNode(e.parent,!1)):null},t.prototype.getPreviousNode=function(e){var t;return e.parent?(t=e.getPreviousSibling(),t?t.hasChildren()&&t.is_open?this.getLastChild(t):t:e.parent.parent?e.parent:null):null},t.prototype.getLastChild=function(e){var t;return e.hasChildren()?(t=e.children[e.children.length-1],t.hasChildren()&&t.is_open?this.getLastChild(t):t):null},t}()}.call(this),/* ============================================================
 * bootstrap-dropdown.js v2.0.0
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";function t(){e(n).parent().removeClass("open")}var n='[data-toggle="dropdown"]',i=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(){var n,i,r=e(this),o=r.attr("data-target");return o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),n=e(o),n.length||(n=r.parent()),i=n.hasClass("open"),t(),!i&&n.toggleClass("open"),!1}},e.fn.dropdown=function(t){return this.each(function(){var n=e(this),r=n.data("dropdown");r||n.data("dropdown",r=new i(this)),"string"==typeof t&&r[t].call(n)})},e.fn.dropdown.Constructor=i,e(function(){e("html").on("click.dropdown.data-api",t),e("body").on("click.dropdown.data-api",n,i.prototype.toggle)})}(window.jQuery),/* ===================================================
 * bootstrap-transition.js v2.0.0
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){e(function(){"use strict";e.support.transition=function(){var t=document.body||document.documentElement,n=t.style,i=void 0!==n.transition||void 0!==n.WebkitTransition||void 0!==n.MozTransition||void 0!==n.MsTransition||void 0!==n.OTransition;return i&&{end:function(){var t="TransitionEnd";return e.browser.webkit?t="webkitTransitionEnd":e.browser.mozilla?t="transitionend":e.browser.opera&&(t="oTransitionEnd"),t}()}}()})}(window.jQuery),/* =============================================================
 * bootstrap-collapse.js v2.0.0
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n=this.dimension(),i=e.camelCase(["scroll",n].join("-")),r=this.$parent&&this.$parent.find(".in");r&&r.length&&(t=r.data("collapse"),r.collapse("hide"),t||r.data("collapse",null)),this.$element[n](0),this.transition("addClass","show","shown"),this.$element[n](this.$element[0][i])},hide:function(){var e=this.dimension();this.reset(this.$element[e]()),this.transition("removeClass","hide","hidden"),this.$element[e](0)},reset:function(e){var t=this.dimension();this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element.addClass("collapse")},transition:function(t,n,i){var r=this,o=function(){"show"==n&&r.reset(),r.$element.trigger(i)};this.$element.trigger(n)[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,o):o()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},e.fn.collapse=function(n){return this.each(function(){var i=e(this),r=i.data("collapse"),o="object"==typeof n&&n;r||i.data("collapse",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e(function(){e("body").on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),r=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=e(r).data("collapse")?"toggle":i.data();e(r).collapse(o)})})}(window.jQuery),/* ============================================================
 * bootstrap-button.js v2.0.0
 * http://twitter.github.com/bootstrap/javascript.html#buttons
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype={constructor:t,setState:function(e){var t="disabled",n=this.$element,i=n.data(),r=n.is("input")?"val":"html";e+="Text",i.resetText||n.data("resetText",n[r]()),n[r](i[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},toggle:function(){var e=this.$element.parent('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")}},e.fn.button=function(n){return this.each(function(){var i=e(this),r=i.data("button"),o="object"==typeof n&&n;r||i.data("button",r=new t(this,o)),"toggle"==n?r.toggle():n&&r.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){e(t.target).button("toggle")})})}(window.jQuery),/* ===========================================================
 * bootstrap-tooltip.js v2.0.0
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,i){var r,o;this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.enabled=!0,"manual"!=this.options.trigger&&(r="hover"==this.options.trigger?"mouseenter":"focus",o="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(r,this.options.selector,e.proxy(this.enter,this)),this.$element.on(o,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);n.options.delay&&n.options.delay.show?(n.hoverState="in",setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);n.options.delay&&n.options.delay.hide?(n.hoverState="out",setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},show:function(){var e,t,n,i,r,o,s;if(this.hasContent()&&this.enabled){switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(o),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),n=this.getPosition(t),i=e[0].offsetWidth,r=e[0].offsetHeight,t?o.split(" ")[1]:o){case"bottom":s={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":s={top:n.top-r,left:n.left+n.width/2-i/2};break;case"left":s={top:n.top+n.height/2-r/2,left:n.left-i};break;case"right":s={top:n.top+n.height/2-r/2,left:n.left+n.width}}e.css(s).addClass(o).addClass("in")}},setContent:function(){var e=this.tip();e.find(".tooltip-inner").html(this.getTitle()),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){n.off(e.support.transition.end).remove()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.remove()})}var n=this.tip();n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():n.remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title),e=e.toString().replace(/(^\s*|\s*$)/,"")},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},e.fn.tooltip=function(n){return this.each(function(){var i=e(this),r=i.data("tooltip"),o="object"==typeof n&&n;r||i.data("tooltip",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,delay:0,selector:!1,placement:"top",trigger:"hover",title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery),/* =========================================================
 * bootstrap-colorpicker.js 
 * http://www.eyecon.ro/bootstrap-colorpicker
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(e){var t=function(e){this.value={h:1,s:1,b:1,a:1},this.setColor(e)};t.prototype={constructor:t,setColor:function(t){t=t.toLowerCase();var n=this;e.each(i.stringParsers,function(e,r){var o=r.re.exec(t),s=o&&r.parse(o),a=r.space||"rgba";return s?(n.value="hsla"===a?i.RGBtoHSB.apply(null,i.HSLtoRGB.apply(null,s)):i.RGBtoHSB.apply(null,s),!1):void 0})},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,n,i){e||(e=this.value.h,t=this.value.s,n=this.value.b),e*=360;var r,o,s,a,l;return e=e%360/60,l=n*t,a=l*(1-Math.abs(e%2-1)),r=o=s=n-l,e=~~e,r+=[l,a,0,0,a,l][e],o+=[a,l,l,a,0,0][e],s+=[0,0,a,l,l,a][e],{r:Math.round(255*r),g:Math.round(255*o),b:Math.round(255*s),a:i||this.value.a}},toHex:function(e,t,n,i){var r=this.toRGB(e,t,n,i);return"#"+(1<<24|parseInt(r.r)<<16|parseInt(r.g)<<8|parseInt(r.b)).toString(16).substr(1)},toHSL:function(e,t,n,i){e||(e=this.value.h,t=this.value.s,n=this.value.b);var r=e,o=(2-t)*n,s=t*n;return s/=o>0&&1>=o?o:2-o,o/=2,s>1&&(s=1),{h:r,s:s,l:o,a:i||this.value.a}}};var n=function(t,n){this.element=e(t);var r=n.format||this.element.data("color-format")||"hex";this.format=i.translateFormats[r],this.isInput=this.element.is("input"),this.component=this.element.is(".color")?this.element.find(".add-on"):!1,this.picker=e(i.template).appendTo("body").on("mousedown",e.proxy(this.mousedown,this)),this.isInput?this.element.on({focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this)}):this.component?this.component.on({click:e.proxy(this.show,this)}):this.element.on({click:e.proxy(this.show,this)}),("rgba"===r||"hsla"===r)&&(this.picker.addClass("alpha"),this.alpha=this.picker.find(".colorpicker-alpha")[0].style),this.component?(this.picker.find(".colorpicker-color").hide(),this.preview=this.element.find("i")[0].style):this.preview=this.picker.find("div:last")[0].style,this.base=this.picker.find("div:first")[0].style,this.update()};n.prototype={constructor:n,show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),e(window).on("resize",e.proxy(this.place,this)),this.isInput||t&&(t.stopPropagation(),t.preventDefault()),e(document).on({mousedown:e.proxy(this.hide,this)}),this.element.trigger({type:"show",color:this.color})},update:function(){this.color=new t(this.isInput?this.element.prop("value"):this.element.data("color")),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor()},setValue:function(e){this.color=new t(e),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color})},hide:function(){this.picker.hide(),e(window).off("resize",this.place),this.isInput?this.element.prop("value",this.format.call(this)):(e(document).off({mousedown:this.hide}),this.component&&this.element.find("input").prop("value",this.format.call(this)),this.element.data("color",this.format.call(this))),this.element.trigger({type:"hide",color:this.color})},place:function(){var e=this.component?this.component.offset():this.element.offset();this.picker.css({top:e.top+this.height,left:e.left})},previewColor:function(){try{this.preview.backgroundColor=this.format.call(this)}catch(e){this.preview.backgroundColor=this.color.toHex()}this.base.backgroundColor=this.color.toHex(this.color.value.h,1,1,1),this.alpha&&(this.alpha.backgroundColor=this.color.toHex())},pointer:null,slider:null,mousedown:function(t){t.stopPropagation(),t.preventDefault();var n=e(t.target),r=n.closest("div");if(!r.is(".colorpicker")){if(r.is(".colorpicker-saturation"))this.slider=e.extend({},i.sliders.saturation);else if(r.is(".colorpicker-hue"))this.slider=e.extend({},i.sliders.hue);else{if(!r.is(".colorpicker-alpha"))return!1;this.slider=e.extend({},i.sliders.alpha)}var o=r.offset();this.slider.knob=r.find("i")[0].style,this.slider.left=t.pageX-o.left,this.slider.top=t.pageY-o.top,this.pointer={left:t.pageX,top:t.pageY},e(document).on({mousemove:e.proxy(this.mousemove,this),mouseup:e.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(this.slider.maxLeft,this.slider.left+((e.pageX||this.pointer.left)-this.pointer.left))),n=Math.max(0,Math.min(this.slider.maxTop,this.slider.top+((e.pageY||this.pointer.top)-this.pointer.top)));return this.slider.knob.left=t+"px",this.slider.knob.top=n+"px",this.slider.callLeft&&this.color[this.slider.callLeft].call(this.color,t/100),this.slider.callTop&&this.color[this.slider.callTop].call(this.color,n/100),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){return t.stopPropagation(),t.preventDefault(),e(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),!1}},e.fn.colorpicker=function(t,i){return this.each(function(){var r=e(this),o=r.data("colorpicker"),s="object"==typeof t&&t;o||r.data("colorpicker",o=new n(this,e.extend({},e.fn.colorpicker.defaults,s))),"string"==typeof t&&o[t](i)})},e.fn.colorpicker.defaults={},e.fn.colorpicker.Constructor=n;var i={translateFormats:{rgb:function(){var e=this.color.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.color.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hsl:function(){var e=this.color.toHSL();return"hsl("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%)"},hsla:function(){var e=this.color.toHSL();return"hsla("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%,"+e.a+")"},hex:function(){return this.color.toHex()}},sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},RGBtoHSB:function(e,t,n,i){e/=255,t/=255,n/=255;var r,o,s,a;return s=Math.max(e,t,n),a=s-Math.min(e,t,n),r=0===a?null:s==e?(t-n)/a:s==t?(n-e)/a+2:(e-t)/a+4,r=60*((r+360)%6)/360,o=0===a?0:a/s,{h:r||1,s:o,b:s,a:i||1}},HueToRGB:function(e,t,n){return 0>n?n+=1:n>1&&(n-=1),1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e},HSLtoRGB:function(e,t,n,r){0>t&&(t=0);var o;o=.5>=n?n*(1+t):n+t-n*t;var s=2*n-o,a=e+1/3,l=e,c=e-1/3,u=Math.round(255*i.HueToRGB(s,o,a)),d=Math.round(255*i.HueToRGB(s,o,l)),h=Math.round(255*i.HueToRGB(s,o,c));return[u,d,h,r||1]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}}],template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'}}(window.jQuery),/**
 * @license
 * =========================================================
 * bootstrap-datetimepicker.js
 * http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Contributions:
 *  - Andrew Rowls
 *  - Thiago de Arruda
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================
 */
function(e){function t(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function n(e,t,n){return t<e.length?e:Array(t-e.length+1).join(n||" ")+e}function i(e,t,n,i,r,o){return t&&n?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><ul><li'+(o?' class="collapse in"':"")+">"+'<div class="datepicker">'+f.template+"</div>"+"</li>"+'<li class="picker-switch accordion-toggle"><a><i class="'+e+'"></i></a></li>'+"<li"+(o?' class="collapse"':"")+">"+'<div class="timepicker">'+p.getTemplate(i,r)+"</div>"+"</li>"+"</ul>"+"</div>":n?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+p.getTemplate(i,r)+"</div>"+"</div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+f.template+"</div>"+"</div>"}function r(){return new Date(Date.UTC.apply(Date,arguments))}void 0!=window.orientation;var o=function(e,t){this.id=s++,this.init(e,t)};o.prototype={constructor:o,init:function(t,n){var r;if(!n.pickTime&&!n.pickDate)throw new Error("Must choose at least one picker");if(this.options=n,this.$element=e(t),this.language=n.language in a?n.language:"en",this.pickDate=n.pickDate,this.pickTime=n.pickTime,this.isInput=this.$element.is("input"),this.component=!1,(this.$element.find(".input-append")||this.$element.find(".input-prepend"))&&(this.component=this.$element.find(".add-on")),this.format=n.format,this.format||(this.format=this.isInput?this.$element.data("format"):this.$element.find("input").data("format"),this.format||(this.format="MM/dd/yyyy")),this._compileFormat(),this.component&&(r=this.component.find("i")),this.pickTime&&(r&&r.length&&(this.timeIcon=r.data("time-icon")),this.timeIcon||(this.timeIcon="icon-time"),r.addClass(this.timeIcon)),this.pickDate&&(r&&r.length&&(this.dateIcon=r.data("date-icon")),this.dateIcon||(this.dateIcon="icon-calendar"),r.removeClass(this.timeIcon),r.addClass(this.dateIcon)),this.widget=e(i(this.timeIcon,n.pickDate,n.pickTime,n.pick12HourFormat,n.pickSeconds,n.collapse)).appendTo("body"),this.minViewMode=n.minViewMode||this.$element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=n.viewMode||this.$element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=n.weekStart||this.$element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.setStartDate(n.startDate||this.$element.data("date-startdate")),this.setEndDate(n.endDate||this.$element.data("date-enddate")),this.fillDow(),this.fillMonths(),this.fillHours(),this.fillMinutes(),this.fillSeconds(),this.update(),this.showMode(),this._attachDatePickerEvents()},show:function(e){this.widget.show(),this.height=this.component?this.component.outerHeight():this.$element.outerHeight(),this.place(),this.$element.trigger({type:"show",date:this._date}),this._attachDatePickerGlobalEvents(),e&&(e.stopPropagation(),e.preventDefault())},disable:function(){this.$element.find("input").prop("disabled",!0),this._detachDatePickerEvents()},enable:function(){this.$element.find("input").prop("disabled",!1),this._attachDatePickerEvents()},hide:function(){for(var e=this.widget.find(".collapse"),t=0;t<e.length;t++){var n=e.eq(t).data("collapse");if(n&&n.transitioning)return}this.widget.hide(),this.viewMode=this.startViewMode,this.showMode(),this.set(),this.$element.trigger({type:"hide",date:this._date}),this._detachDatePickerGlobalEvents()},set:function(){var e="";if(this._unset||(e=this.formatDate(this._date)),this.isInput)this.$element.val(e),this._resetMaskPos(this.$element);else{if(this.component){var t=this.$element.find("input");t.val(e),this._resetMaskPos(t)}this.$element.data("date",e)}},setValue:function(e){this._unset=e?!1:!0,"string"==typeof e?this._date=this.parseDate(e):e&&(this._date=new Date(e)),this.set(),this.viewDate=r(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},getDate:function(){return this._unset?null:new Date(this._date.valueOf())},setDate:function(e){e?this.setValue(e.valueOf()):this.setValue(null)},setStartDate:function(e){e instanceof Date?this.startDate=e:"string"==typeof e?(this.startDate=new r(e),this.startDate.getUTCFullYear()||(this.startDate=-1/0)):this.startDate=-1/0,this.viewDate&&this.update()},setEndDate:function(e){e instanceof Date?this.endDate=e:"string"==typeof e?(this.endDate=new r(e),this.endDate.getUTCFullYear()||(this.endDate=1/0)):this.endDate=1/0,this.viewDate&&this.update()},getLocalDate:function(){if(this._unset)return null;var e=this._date;return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())},setLocalDate:function(e){e?this.setValue(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())):this.setValue(null)},place:function(){var t="absolute",n=this.component?this.component.offset():this.$element.offset();this.width=this.component?this.component.outerWidth():this.$element.outerWidth(),n.top=n.top+this.height;var i=e(window);void 0!=this.options.width&&this.widget.width(this.options.width),"left"==this.options.orientation&&(this.widget.addClass("left-oriented"),n.left=n.left-this.widget.width()+20),this._isInFixed()&&(t="fixed",n.top-=i.scrollTop(),n.left-=i.scrollLeft()),i.width()<n.left+this.widget.outerWidth()?(n.right=i.width()-n.left-this.width,n.left="auto",this.widget.addClass("pull-right")):(n.right="auto",this.widget.removeClass("pull-right")),this.widget.css({position:t,top:n.top,left:n.left,right:n.right})},notifyChange:function(){this.$element.trigger({type:"changeDate",date:this.getDate(),localDate:this.getLocalDate()})},update:function(e){var t=e;if(!t&&(t=this.isInput?this.$element.val():this.$element.find("input").val(),t&&(this._date=this.parseDate(t)),!this._date)){var n=new Date;this._date=r(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}this.viewDate=r(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},fillDow:function(){for(var t=this.weekStart,n=e("<tr>");t<this.weekStart+7;)n.append('<th class="dow">'+a[this.language].daysMin[t++%7]+"</th>");this.widget.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+a[this.language].monthsShort[t++]+"</span>";this.widget.find(".datepicker-months td").append(e)},fillDate:function(){var t=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),i=r(this._date.getUTCFullYear(),this._date.getUTCMonth(),this._date.getUTCDate(),0,0,0,0),o="object"==typeof this.startDate?this.startDate.getUTCFullYear():-1/0,s="object"==typeof this.startDate?this.startDate.getUTCMonth():-1,l="object"==typeof this.endDate?this.endDate.getUTCFullYear():1/0,c="object"==typeof this.endDate?this.endDate.getUTCMonth():12;this.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-days th:eq(1)").text(a[this.language].months[n]+" "+t);var u=r(t,n-1,28,0,0,0,0),d=f.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(d),u.setUTCDate(d-(u.getUTCDay()-this.weekStart+7)%7),(t==o&&s>=n||o>t)&&this.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(t==l&&n>=c||t>l)&&this.widget.find(".datepicker-days th:eq(2)").addClass("disabled");var h=new Date(u.valueOf());h.setUTCDate(h.getUTCDate()+42),h=h.valueOf();for(var p,m,g=[];u.valueOf()<h;)u.getUTCDay()===this.weekStart&&(p=e("<tr>"),g.push(p)),m="",u.getUTCFullYear()<t||u.getUTCFullYear()==t&&u.getUTCMonth()<n?m+=" old":(u.getUTCFullYear()>t||u.getUTCFullYear()==t&&u.getUTCMonth()>n)&&(m+=" new"),u.valueOf()===i.valueOf()&&(m+=" active"),u.valueOf()+864e5<=this.startDate&&(m+=" disabled"),u.valueOf()>this.endDate&&(m+=" disabled"),p.append('<td class="day'+m+'">'+u.getUTCDate()+"</td>"),u.setUTCDate(u.getUTCDate()+1);this.widget.find(".datepicker-days tbody").empty().append(g);var v=this._date.getUTCFullYear(),y=this.widget.find(".datepicker-months").find("th:eq(1)").text(t).end().find("span").removeClass("active");v===t&&y.eq(this._date.getUTCMonth()).addClass("active"),o>v-1&&this.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),v+1>l&&this.widget.find(".datepicker-months th:eq(2)").addClass("disabled");for(var b=0;12>b;b++)t==o&&s>b||o>t?e(y[b]).addClass("disabled"):(t==l&&b>c||t>l)&&e(y[b]).addClass("disabled");g="",t=10*parseInt(t/10,10);var w=this.widget.find(".datepicker-years").find("th:eq(1)").text(t+"-"+(t+9)).end().find("td");this.widget.find(".datepicker-years").find("th").removeClass("disabled"),o>t&&this.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),t+9>l&&this.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),t-=1;for(var b=-1;11>b;b++)g+='<span class="year'+(-1===b||10===b?" old":"")+(v===t?" active":"")+(o>t||t>l?" disabled":"")+'">'+t+"</span>",t+=1;w.html(g)},fillHours:function(){var e=this.widget.find(".timepicker .timepicker-hours table");e.parent().hide();var t="";if(this.options.pick12HourFormat)for(var i=1,r=0;3>r;r+=1){t+="<tr>";for(var o=0;4>o;o+=1){var s=i.toString();t+='<td class="hour">'+n(s,2,"0")+"</td>",i++}t+="</tr>"}else for(var i=0,r=0;6>r;r+=1){t+="<tr>";for(var o=0;4>o;o+=1){var s=i.toString();t+='<td class="hour">'+n(s,2,"0")+"</td>",i++}t+="</tr>"}e.html(t)},fillMinutes:function(){var e=this.widget.find(".timepicker .timepicker-minutes table");e.parent().hide();for(var t="",i=0,r=0;5>r;r++){t+="<tr>";for(var o=0;4>o;o+=1){var s=i.toString();t+='<td class="minute">'+n(s,2,"0")+"</td>",i+=3}t+="</tr>"}e.html(t)},fillSeconds:function(){var e=this.widget.find(".timepicker .timepicker-seconds table");e.parent().hide();for(var t="",i=0,r=0;5>r;r++){t+="<tr>";for(var o=0;4>o;o+=1){var s=i.toString();t+='<td class="second">'+n(s,2,"0")+"</td>",i+=3}t+="</tr>"}e.html(t)},fillTime:function(){if(this._date){var e=this.widget.find(".timepicker span[data-time-component]");e.closest("table");var t=this.options.pick12HourFormat,i=this._date.getUTCHours(),r="AM";t&&(i>=12&&(r="PM"),0===i?i=12:12!=i&&(i%=12),this.widget.find(".timepicker [data-action=togglePeriod]").text(r)),i=n(i.toString(),2,"0");var o=n(this._date.getUTCMinutes().toString(),2,"0"),s=n(this._date.getUTCSeconds().toString(),2,"0");e.filter("[data-time-component=hours]").text(i),e.filter("[data-time-component=minutes]").text(o),e.filter("[data-time-component=seconds]").text(s)}},click:function(t){t.stopPropagation(),t.preventDefault(),this._unset=!1;var n=e(t.target).closest("span, td, th");if(1===n.length&&!n.is(".disabled"))switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var i=this.viewDate,o=f.modes[this.viewMode].navFnc,s=f.modes[this.viewMode].navStep;"prev"===n[0].className&&(s=-1*s),i["set"+o](i["get"+o]()+s),this.fillDate(),this.set()}break;case"span":if(n.is(".month")){var a=n.parent().find("span").index(n);this.viewDate.setUTCMonth(a)}else{var l=parseInt(n.text(),10)||0;this.viewDate.setUTCFullYear(l)}0!==this.viewMode&&(this._date=r(this.viewDate.getUTCFullYear(),this.viewDate.getUTCMonth(),this.viewDate.getUTCDate(),this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.notifyChange()),this.showMode(-1),this.fillDate(),this.set();break;case"td":if(n.is(".day")){var c=parseInt(n.text(),10)||1,a=this.viewDate.getUTCMonth(),l=this.viewDate.getUTCFullYear();n.is(".old")?0===a?(a=11,l-=1):a-=1:n.is(".new")&&(11==a?(a=0,l+=1):a+=1),this._date=r(l,a,c,this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.viewDate=r(l,a,Math.min(28,c),0,0,0,0),this.fillDate(),this.set(),this.notifyChange()}}},actions:{incrementHours:function(){this._date.setUTCHours(this._date.getUTCHours()+1)},incrementMinutes:function(){this._date.setUTCMinutes(this._date.getUTCMinutes()+1)},incrementSeconds:function(){this._date.setUTCSeconds(this._date.getUTCSeconds()+1)},decrementHours:function(){this._date.setUTCHours(this._date.getUTCHours()-1)},decrementMinutes:function(){this._date.setUTCMinutes(this._date.getUTCMinutes()-1)},decrementSeconds:function(){this._date.setUTCSeconds(this._date.getUTCSeconds()-1)},togglePeriod:function(){var e=this._date.getUTCHours();e>=12?e-=12:e+=12,this._date.setUTCHours(e)},showPicker:function(){this.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),this.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var n=e(t.target),i=parseInt(n.text(),10);if(this.options.pick12HourFormat){var r=this._date.getUTCHours();r>=12?12!=i&&(i=(i+12)%24):12===i?i=0:i%=12}this._date.setUTCHours(i),this.actions.showPicker.call(this)},selectMinute:function(t){var n=e(t.target),i=parseInt(n.text(),10);this._date.setUTCMinutes(i),this.actions.showPicker.call(this)},selectSecond:function(t){var n=e(t.target),i=parseInt(n.text(),10);this._date.setUTCSeconds(i),this.actions.showPicker.call(this)}},doAction:function(t){t.stopPropagation(),t.preventDefault(),this._date||(this._date=r(1970,0,0,0,0,0,0));var n=e(t.currentTarget).data("action"),i=this.actions[n].apply(this,arguments);return this.set(),this.fillTime(),this.notifyChange(),i},stopEvent:function(e){e.stopPropagation(),e.preventDefault()},keydown:function(t){var n=this,i=t.which,r=e(t.target);(8==i||46==i)&&setTimeout(function(){n._resetMaskPos(r)})},keypress:function(t){var n=t.which;if(8!=n&&46!=n){var i=e(t.target),r=String.fromCharCode(n),o=i.val()||"";o+=r;var s=this._mask[this._maskPos];if(!s)return!1;if(s.end==o.length){if(!s.pattern.test(o.slice(s.start))){for(o=o.slice(0,o.length-1);(s=this._mask[this._maskPos])&&s.character;)o+=s.character,this._maskPos++;return o+=r,s.end!=o.length?(i.val(o),!1):s.pattern.test(o.slice(s.start))?(i.val(o),this._maskPos++,!1):(i.val(o.slice(0,s.start)),!1)}this._maskPos++}}},change:function(t){var n=e(t.target),i=n.val();this._formatPattern.test(i)?(this.update(),this.setValue(this._date.getTime()),this.notifyChange(),this.set()):i&&i.trim()?(this.setValue(this._date.getTime()),this._date?this.set():n.val("")):this._date&&(this.setValue(null),this.notifyChange(),this._unset=!0),this._resetMaskPos(n)},showMode:function(e){e&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+e))),this.widget.find(".datepicker > div").hide().filter(".datepicker-"+f.modes[this.viewMode].clsName).show()},destroy:function(){this._detachDatePickerEvents(),this._detachDatePickerGlobalEvents(),this.widget.remove(),this.$element.removeData("datetimepicker"),this.component.removeData("datetimepicker")},formatDate:function(e){return this.format.replace(h,function(t){var i,r,o,s=t.length;if("ms"===t&&(s=1),r=l[t].property,"Hours12"===r)o=e.getUTCHours(),0===o?o=12:12!==o&&(o%=12);else{if("Period12"===r)return e.getUTCHours()>=12?"PM":"AM";i="get"+r,o=e[i]()}return"getUTCMonth"===i&&(o+=1),"getUTCYear"===i&&(o=o+1900-2e3),n(o.toString(),s,"0")})},parseDate:function(e){var t,n,i,r,o={};if(!(t=this._formatPattern.exec(e)))return null;for(n=1;n<t.length;n++)i=this._propertiesByIndex[n],i&&(r=t[n],/^\d+$/.test(r)&&(r=parseInt(r,10)),o[i]=r);return this._finishParsingDate(o)},_resetMaskPos:function(e){for(var t=e.val(),n=0;n<this._mask.length;n++){if(this._mask[n].end>t.length){this._maskPos=n;break}if(this._mask[n].end===t.length){this._maskPos=n+1;break}}},_finishParsingDate:function(e){var t,n,i,o,s,a,l;return t=e.UTCFullYear,e.UTCYear&&(t=2e3+e.UTCYear),t||(t=1970),n=e.UTCMonth?e.UTCMonth-1:0,i=e.UTCDate||1,o=e.UTCHours||0,s=e.UTCMinutes||0,a=e.UTCSeconds||0,l=e.UTCMilliseconds||0,e.Hours12&&(o=e.Hours12),e.Period12&&(/pm/i.test(e.Period12)?12!=o&&(o=(o+12)%24):o%=12),r(t,n,i,o,s,a,l)},_compileFormat:function(){for(var e,n,i=[],r=[],o=this.format,s={},a=0,c=0;e=d.exec(o);)n=e[0],n in l?(a++,s[a]=l[n].property,i.push("\\s*"+l[n].getPattern(this)+"\\s*"),r.push({pattern:new RegExp(l[n].getPattern(this)),property:l[n].property,start:c,end:c+=n.length})):(i.push(t(n)),r.push({pattern:new RegExp(t(n)),character:n,start:c,end:++c})),o=o.slice(n.length);this._mask=r,this._maskPos=0,this._formatPattern=new RegExp("^\\s*"+i.join("")+"\\s*$"),this._propertiesByIndex=s},_attachDatePickerEvents:function(){var t=this;this.widget.on("click",".datepicker *",e.proxy(this.click,this)),this.widget.on("click","[data-action]",e.proxy(this.doAction,this)),this.widget.on("mousedown",e.proxy(this.stopEvent,this)),this.pickDate&&this.pickTime&&this.widget.on("click.togglePicker",".accordion-toggle",function(n){n.stopPropagation();var i=e(this),r=i.closest("ul"),o=r.find(".collapse.in"),s=r.find(".collapse:not(.in)");if(o&&o.length){var a=o.data("collapse");if(a&&a.transitioning)return;o.collapse("hide"),s.collapse("show"),i.find("i").toggleClass(t.timeIcon+" "+t.dateIcon),t.$element.find(".add-on i").toggleClass(t.timeIcon+" "+t.dateIcon)}}),this.isInput?(this.$element.on({focus:e.proxy(this.show,this),change:e.proxy(this.change,this)}),this.options.maskInput&&this.$element.on({keydown:e.proxy(this.keydown,this),keypress:e.proxy(this.keypress,this)})):(this.$element.on({change:e.proxy(this.change,this)},"input"),this.options.maskInput&&this.$element.on({keydown:e.proxy(this.keydown,this),keypress:e.proxy(this.keypress,this)},"input"),this.component?this.component.on("click",e.proxy(this.show,this)):this.$element.on("click",e.proxy(this.show,this)))},_attachDatePickerGlobalEvents:function(){e(window).on("resize.datetimepicker"+this.id,e.proxy(this.place,this)),this.isInput||e(document).on("mousedown.datetimepicker"+this.id,e.proxy(this.hide,this))},_detachDatePickerEvents:function(){this.widget.off("click",".datepicker *",this.click),this.widget.off("click","[data-action]"),this.widget.off("mousedown",this.stopEvent),this.pickDate&&this.pickTime&&this.widget.off("click.togglePicker"),this.isInput?(this.$element.off({focus:this.show,change:this.change}),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress})):(this.$element.off({change:this.change},"input"),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress},"input"),this.component?this.component.off("click",this.show):this.$element.off("click",this.show))},_detachDatePickerGlobalEvents:function(){e(window).off("resize.datetimepicker"+this.id),this.isInput||e(document).off("mousedown.datetimepicker"+this.id)},_isInFixed:function(){if(this.$element){for(var t=this.$element.parents(),n=!1,i=0;i<t.length;i++)if("fixed"==e(t[i]).css("position")){n=!0;break}return n}return!1}},e.fn.datetimepicker=function(t,n){return this.each(function(){var i=e(this),r=i.data("datetimepicker"),s="object"==typeof t&&t;r||i.data("datetimepicker",r=new o(this,e.extend({},e.fn.datetimepicker.defaults,s))),"string"==typeof t&&r[t](n)})},e.fn.datetimepicker.defaults={maskInput:!1,pickDate:!0,pickTime:!0,pick12HourFormat:!1,pickSeconds:!0,startDate:-1/0,endDate:1/0,collapse:!0},e.fn.datetimepicker.Constructor=o;var s=0,a=e.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},l={dd:{property:"UTCDate",getPattern:function(){return"(0?[1-9]|[1-2][0-9]|3[0-1])\\b"}},MM:{property:"UTCMonth",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},yy:{property:"UTCYear",getPattern:function(){return"(\\d{2})\\b"}},yyyy:{property:"UTCFullYear",getPattern:function(){return"(\\d{4})\\b"}},hh:{property:"UTCHours",getPattern:function(){return"(0?[0-9]|1[0-9]|2[0-3])\\b"}},mm:{property:"UTCMinutes",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ss:{property:"UTCSeconds",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ms:{property:"UTCMilliseconds",getPattern:function(){return"([0-9]{1,3})\\b"}},HH:{property:"Hours12",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},PP:{property:"Period12",getPattern:function(){return"(AM|PM|am|pm|Am|aM|Pm|pM)\\b"}}},c=[];for(var u in l)c.push(u);c[c.length-1]+="\\b",c.push(".");var d=new RegExp(c.join("\\b|"));c.pop();var h=new RegExp(c.join("\\b|"),"g"),f={modes:[{clsName:"days",navFnc:"UTCMonth",navStep:1},{clsName:"months",navFnc:"UTCFullYear",navStep:1},{clsName:"years",navFnc:"UTCFullYear",navStep:10}],isLeapYear:function(e){return 0===e%4&&0!==e%100||0===e%400},getDaysInMonth:function(e,t){return[31,f.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};f.template='<div class="datepicker-days"><table class="table-condensed">'+f.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+f.headTemplate+f.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+f.headTemplate+f.contTemplate+"</table>"+"</div>";var p={hourTemplate:'<span data-action="showHours" data-time-component="hours" class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds" data-time-component="seconds" class="timepicker-second"></span>'};p.getTemplate=function(e,t){return'<div class="timepicker-picker"><table class="table-condensed"'+(e?' data-hour-format="12"':"")+">"+"<tr>"+'<td><a href="#" class="btn" data-action="incrementHours"><i class="icon-chevron-up"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" class="btn" data-action="incrementMinutes"><i class="icon-chevron-up"></i></a></td>'+(t?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><i class="icon-chevron-up"></i></a></td>':"")+(e?'<td class="separator"></td>':"")+"</tr>"+"<tr>"+"<td>"+p.hourTemplate+"</td> "+'<td class="separator">:</td>'+"<td>"+p.minuteTemplate+"</td> "+(t?'<td class="separator">:</td><td>'+p.secondTemplate+"</td>":"")+(e?'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>':"")+"</tr>"+"<tr>"+'<td><a href="#" class="btn" data-action="decrementHours"><i class="icon-chevron-down"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" class="btn" data-action="decrementMinutes"><i class="icon-chevron-down"></i></a></td>'+(t?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><i class="icon-chevron-down"></i></a></td>':"")+(e?'<td class="separator"></td>':"")+"</tr>"+"</table>"+"</div>"+'<div class="timepicker-hours" data-action="selectHour">'+'<table class="table-condensed">'+"</table>"+"</div>"+'<div class="timepicker-minutes" data-action="selectMinute">'+'<table class="table-condensed">'+"</table>"+"</div>"+(t?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")}}(window.jQuery),!function(e){var t=function(n,i,r){r&&(r.stopPropagation(),r.preventDefault()),this.$element=e(n),this.$newElement=null,this.button=null,this.options=e.extend({},e.fn.selectpicker.defaults,this.$element.data(),"object"==typeof i&&i),null==this.options.title&&(this.options.title=this.$element.attr("title")),this.val=t.prototype.val,this.render=t.prototype.render,this.refresh=t.prototype.refresh,this.selectAll=t.prototype.selectAll,this.deselectAll=t.prototype.deselectAll,this.init()};t.prototype={constructor:t,init:function(){this.options.container?this.$element.css("visibility","hidden"):this.$element.hide(),this.multiple=this.$element.prop("multiple");var t=void 0!==this.$element.attr("class")?this.$element.attr("class").split(/\s+/):"",n=this.$element.attr("id");if(this.$element.after(this.createView()),this.$newElement=this.$element.next(".bootstrap-select"),this.options.container&&this.selectPosition(),this.button=this.$newElement.find("> button"),void 0!==n){var i=this;this.button.attr("data-id",n),e('label[for="'+n+'"]').click(function(){i.$newElement.find("button[data-id="+n+"]").focus()})}for(var r=0;r<t.length;r++)"selectpicker"!=t[r]&&this.$newElement.addClass(t[r]);this.multiple&&this.$newElement.addClass("show-tick"),this.button.addClass(this.options.style),this.checkDisabled(),this.checkTabIndex(),this.clickListener(),this.render(),this.setSize()},createDropdown:function(){var t="<div class='btn-group bootstrap-select'><button type='button' class='btn dropdown-toggle' data-toggle='dropdown'><span class='filter-option pull-left'></span>&nbsp;<span class='caret'></span></button><ul class='dropdown-menu' role='menu'></ul></div>";return e(t)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul").append(t),e},reloadLi:function(){this.destroyLi(),$li=this.createLi(),this.$newElement.find("ul").append($li)},destroyLi:function(){this.$newElement.find("li").remove()},createLi:function(){var t=this,n=[],i=[],r="";if(this.$element.find("option").each(function(){n.push(e(this).text())}),this.$element.find("option").each(function(){var n=e(this),r=void 0!==n.attr("class")?n.attr("class"):"",o=n.text(),s=void 0!==n.data("subtext")?'<small class="muted">'+n.data("subtext")+"</small>":"",a=void 0!==n.data("icon")?'<i class="'+n.data("icon")+'"></i> ':"";if((n.is(":disabled")||n.parent().is(":disabled"))&&(a="<span>"+a+"</span>"),o=a+'<span class="text">'+o+s+"</span>",t.options.hideDisabled&&(n.is(":disabled")||n.parent().is(":disabled")))i.push('<a style="min-height: 0; padding: 0"></a>');else if(n.parent().is("optgroup")&&1!=n.data("divider"))if(0==n.index()){var l=n.parent().attr("label"),c=void 0!==n.parent().data("subtext")?'<small class="muted">'+n.parent().data("subtext")+"</small>":"",u=n.parent().data("icon")?'<i class="'+n.parent().data("icon")+'"></i> ':"";l=u+'<span class="text">'+l+c+"</span>",0!=n[0].index?i.push('<div class="div-contain"><div class="divider"></div></div><dt>'+l+"</dt>"+t.createA(o,"opt "+r)):i.push("<dt>"+l+"</dt>"+t.createA(o,"opt "+r))}else i.push(t.createA(o,"opt "+r));else 1==n.data("divider")?i.push('<div class="div-contain"><div class="divider"></div></div>'):1==e(this).data("hidden")?i.push(""):i.push(t.createA(o,r))}),n.length>0)for(var o=0;o<n.length;o++)this.$element.find("option").eq(o),r+="<li rel="+o+">"+i[o]+"</li>";return this.multiple||0!=this.$element.find("option:selected").length||t.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),e(r)},createA:function(e,t){return'<a tabindex="0" class="'+t+'">'+e+'<i class="icon-ok check-mark"></i>'+"</a>"},render:function(){var t=this;this.$element.find("option").each(function(n){t.setDisabled(n,e(this).is(":disabled")||e(this).parent().is(":disabled")),t.setSelected(n,e(this).is(":selected"))});var n=this.$element.find("option:selected").map(function(){return void 0!=e(this).attr("title")?e(this).attr("title"):e(this).text()}).toArray(),i=this.multiple?n.join(", "):n[0];if(t.multiple&&t.options.selectedTextFormat.indexOf("count")>-1){var r=t.options.selectedTextFormat.split(">");(r.length>1&&n.length>r[1]||1==r.length&&n.length>=2)&&(i=n.length+" of "+this.$element.find("option").length+" selected")}i||(i=void 0!=t.options.title?t.options.title:t.options.noneSelectedText),t.$newElement.find(".filter-option").html(i)},setSize:function(){function t(){var t=s-e(window).scrollTop(),o=window.innerHeight,c=l+parseInt(i.css("margin-top"))+parseInt(i.css("margin-bottom"))+2,u=o-t-a-c;menuHeight=u,n.$newElement.hasClass("dropup")&&(menuHeight=t-c),minHeight=i.find("li").length+i.find("dt").length>3?3*r+c-2:0,i.css({"max-height":menuHeight+"px","overflow-y":"auto","min-height":minHeight+"px"})}var n=this,i=this.$newElement.find(".dropdown-menu");i.find("li > a");var r=this.$newElement.addClass("open").find(".dropdown-menu li > a").outerHeight();this.$newElement.removeClass("open");var o=i.find("li .divider").outerHeight(!0),s=this.$newElement.offset().top,a=this.$newElement.outerHeight(),l=parseInt(i.css("padding-top"))+parseInt(i.css("padding-bottom"))+parseInt(i.css("border-top-width"))+parseInt(i.css("border-bottom-width")),c=this.options.hideDisabled?":not(.disabled)":"";if("auto"==this.options.size)t(),e(window).resize(t),e(window).scroll(t);else if(this.options.size&&"auto"!=this.options.size&&i.find("li"+c).length>this.options.size){var u=i.find("li"+c+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index(),d=i.find("li").slice(0,u+1).find(".div-contain").length;menuHeight=r*this.options.size+d*o+l,i.css({"max-height":menuHeight+"px","overflow-y":"auto"})}if("auto"==this.options.width){this.$newElement.find(".dropdown-menu").css("min-width","0");var h=this.$newElement.find(".dropdown-menu").css("width");this.$newElement.css("width",h),this.options.container&&this.$element.css("width",h)}else this.options.width&&"auto"!=this.options.width&&(this.$newElement.css("width",this.options.width),this.options.container&&this.$element.css("width",this.options.width))},selectPosition:function(){var e=this.$element.offset().top,t=this.$element.offset().left;this.$newElement.appendTo(this.options.container),this.$newElement.css({position:"absolute",top:e+"px",left:t+"px"})},refresh:function(){this.reloadLi(),this.render(),this.setSize(),this.checkDisabled(),this.options.container&&this.selectPosition()},setSelected:function(e,t){t?this.$newElement.find("li").eq(e).addClass("selected"):this.$newElement.find("li").eq(e).removeClass("selected")},setDisabled:function(e,t){t?this.$newElement.find("li").eq(e).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):this.$newElement.find("li").eq(e).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")||this.$element.attr("readonly")},checkDisabled:function(){this.isDisabled()?(this.button.addClass("disabled"),this.button.click(function(e){e.preventDefault()}),this.button.attr("tabindex","-1")):!this.isDisabled()&&this.button.hasClass("disabled")&&(this.button.removeClass("disabled"),this.button.click(function(){return!0}),this.button.removeAttr("tabindex"))},checkTabIndex:function(){if(this.$element.is("[tabindex]")){var e=this.$element.attr("tabindex");this.button.attr("tabindex",e)}},clickListener:function(){var t=this;e("body").on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()}),this.$newElement.on("click","li a",function(n){var i=e(this).parent().index(),r=e(this).parent(),o=r.parents(".bootstrap-select"),s=t.$element.val();if(t.multiple&&n.stopPropagation(),n.preventDefault(),t.$element.not(":disabled")&&!e(this).parent().hasClass("disabled")){if(t.multiple){var a=t.$element.find("option").eq(i).prop("selected");a?t.$element.find("option").eq(i).removeAttr("selected"):t.$element.find("option").eq(i).prop("selected",!0).attr("selected","selected")}else t.$element.find("option").removeAttr("selected"),t.$element.find("option").eq(i).prop("selected",!0).attr("selected","selected");o.find(".filter-option").html(r.text()),o.find("button").focus(),s!=t.$element.val()&&t.$element.trigger("change"),t.render()}}),this.$newElement.on("click","li.disabled a, li dt, li .div-contain",function(t){t.preventDefault(),t.stopPropagation(),$select=e(this).parent().parents(".bootstrap-select"),$select.find("button").focus()}),this.$element.on("change",function(){t.render()})},val:function(e){return void 0!=e?(this.$element.val(e),this.$element.trigger("change"),this.$element):this.$element.val()},selectAll:function(){this.$element.find("option").prop("selected",!0).attr("selected","selected"),this.render()
},deselectAll:function(){this.$element.find("option").prop("selected",!1).removeAttr("selected"),this.render()},keydown:function(t){var n,i,r,o,s,a,l,c,u;if(n=e(this),r=n.parent(),i=e("[role=menu] li:not(.divider):visible a",r),i.length){if(/(38|40)/.test(t.keyCode))o=i.index(i.filter(":focus")),a=i.parent(":not(.disabled)").first().index(),l=i.parent(":not(.disabled)").last().index(),s=i.eq(o).parent().nextAll(":not(.disabled)").eq(0).index(),c=i.eq(o).parent().prevAll(":not(.disabled)").eq(0).index(),u=i.eq(s).parent().prevAll(":not(.disabled)").eq(0).index(),38==t.keyCode&&(o!=u&&o>c&&(o=c),a>o&&(o=a)),40==t.keyCode&&(o!=u&&s>o&&(o=s),o>l&&(o=l)),i.eq(o).focus();else{var d={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},h=[];i.each(function(){e(this).parent().is(":not(.disabled)")&&e.trim(e(this).text().toLowerCase()).substring(0,1)==d[t.keyCode]&&h.push(e(this).parent().index())});var f=e(document).data("keycount");f++,e(document).data("keycount",f);var p=e.trim(e(":focus").text().toLowerCase()).substring(0,1);p!=d[t.keyCode]?(f=1,e(document).data("keycount",f)):f>=h.length&&e(document).data("keycount",0),i.eq(h[f-1]).focus()}/(13)/.test(t.keyCode)&&(e(":focus").click(),r.addClass("open"),e(document).data("keycount",0))}}},e.fn.selectpicker=function(n,i){var r,o=arguments,s=this.each(function(){if(e(this).is("select")){var s=e(this),a=s.data("selectpicker"),l="object"==typeof n&&n;if(a){if(l)for(var c in l)a.options[c]=l[c]}else s.data("selectpicker",a=new t(this,l,i));"string"==typeof n&&(property=n,a[property]instanceof Function?([].shift.apply(o),r=a[property].apply(a,o)):r=a.options[property])}});return void 0!=r?r:s},e.fn.selectpicker.defaults={style:null,size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",width:null,container:!1,hideDisabled:!1},e(document).data("keycount",0).on("keydown","[data-toggle=dropdown], [role=menu]",t.prototype.keydown)}(window.jQuery),/* =========================================================
 * bootstrap-modal.js v2.0.0
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(e){"use strict";function t(){var t=this,i=setTimeout(function(){t.$element.off(e.support.transition.end),n.call(t)},500);this.$element.one(e.support.transition.end,function(){clearTimeout(i),n.call(t)})}function n(){this.$element.hide().trigger("hidden"),i.call(this)}function i(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),"static"!=this.options.backdrop&&this.$backdrop.click(e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(r,this)):r.call(this)):t&&t()}function r(){this.$backdrop.remove(),this.$backdrop=null}function o(){var t=this;this.isShown&&this.options.keyboard?e(document).on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||e(document).off("keyup.dismiss.modal")}var s=function(t,n){this.options=e.extend({},e.fn.modal.defaults,n),this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this))};s.prototype={constructor:s,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this;this.isShown||(e("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),o.call(this),i.call(this,function(){var n=e.support.transition&&t.$element.hasClass("fade");!t.$element.parent().length&&t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in"),n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")}))},hide:function(i){i&&i.preventDefault(),this.isShown&&(this.isShown=!1,e("body").removeClass("modal-open"),o.call(this),this.$element.trigger("hide").removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?t.call(this):n.call(this))}},e.fn.modal=function(t){return this.each(function(){var n=e(this),i=n.data("modal"),r="object"==typeof t&&t;i||n.data("modal",i=new s(this,r)),"string"==typeof t?i[t]():i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0},e.fn.modal.Constructor=s,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n,i=e(this),r=e(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("modal")?"toggle":e.extend({},r.data(),i.data());t.preventDefault(),r.modal(o)})})}(window.jQuery);/**
 * @license wysihtml5 v0.3.0
 * https://github.com/xing/wysihtml5
 *
 * Author: Christopher Blum (https://github.com/tiff)
 *
 * Copyright (C) 2012 XING AG
 * Licensed under the MIT license (MIT)
 *
 */
var wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"﻿",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};/**
 * @license Rangy, a cross-browser JavaScript range and selection library
 * http://code.google.com/p/rangy/
 *
 * Copyright 2011, Tim Down
 * Licensed under the MIT license.
 * Version: 1.2.2
 * Build date: 13 November 2011
 */
window.rangy=function(){function e(e,t){var n=typeof e[t];return n==d||!(n!=u||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=u||!e[t])}function n(e,t){return typeof e[t]!=h}function i(e){return function(t,n){for(var i=n.length;i--;)if(!e(t,n[i]))return!1;return!0}}function r(e){return e&&v(e,g)&&b(e,m)}function o(e){window.alert("Rangy not supported in your browser. Reason: "+e),w.initialized=!0,w.supported=!1}function s(e){var t="Rangy warning: "+e;w.config.alertOnWarn?window.alert(t):typeof window.console!=h&&typeof window.console.log!=h&&window.console.log(t)}function a(){if(!w.initialized){var n,i=!1,s=!1;e(document,"createRange")&&(n=document.createRange(),v(n,p)&&b(n,f)&&(i=!0),n.detach());var a=t(document,"body")?document.body:document.getElementsByTagName("body")[0];a&&e(a,"createTextRange")&&(n=a.createTextRange(),r(n)&&(s=!0)),i||s||o("Neither Range nor TextRange are implemented"),w.initialized=!0,w.features={implementsDomRange:i,implementsTextRange:s};for(var l=x.concat(_),c=0,u=l.length;u>c;++c)try{l[c](w)}catch(d){t(window,"console")&&e(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",d)}}}function l(e){e=e||window,a();for(var t=0,n=C.length;n>t;++t)C[t](e)}function c(e){this.name=e,this.initialized=!1,this.supported=!1}var u="object",d="function",h="undefined",f=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],p=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],m=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],g=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],v=i(e),y=i(t),b=i(n),w={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:v,areHostObjects:y,areHostProperties:b,isTextRange:r},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};w.fail=o,w.warn=s,{}.hasOwnProperty?w.util.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}:o("hasOwnProperty not supported");var _=[],x=[];w.init=a,w.addInitListener=function(e){w.initialized?e(w):_.push(e)};var C=[];w.addCreateMissingNativeApiListener=function(e){C.push(e)},w.createMissingNativeApi=l,c.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+e)},c.prototype.warn=function(e){w.warn("Module "+this.name+": "+e)},c.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},w.createModule=function(e,t){var n=new c(e);w.modules[e]=n,x.push(function(e){t(e,n),n.initialized=!0,n.supported=!0})},w.requireModules=function(e){for(var t,n,i=0,r=e.length;r>i;++i){if(n=e[i],t=w.modules[n],!(t&&t instanceof c))throw new Error("Module '"+n+"' not found");if(!t.supported)throw new Error("Module '"+n+"' not supported")}};var k=!1,T=function(){k||(k=!0,w.initialized||a())};return typeof window==h?(o("No window found"),void 0):typeof document==h?(o("No document found"),void 0):(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",T,!1),e(window,"addEventListener")?window.addEventListener("load",T,!1):e(window,"attachEvent")?window.attachEvent("onload",T):o("Window does not have required addEventListener or attachEvent method"),w)}(),rangy.createModule("DomUtil",function(e,t){function n(e){var t;return typeof e.namespaceURI==T||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function i(e){var t=e.parentNode;return 1==t.nodeType?t:null}function r(e){for(var t=0;e=e.previousSibling;)t++;return t}function o(e){var t;return c(e)?e.length:(t=e.childNodes)?t.length:0}function s(e,t){var n,i=[];for(n=e;n;n=n.parentNode)i.push(n);for(n=t;n;n=n.parentNode)if(E(i,n))return n;return null}function a(e,t,n){for(var i=n?t:t.parentNode;i;){if(i===e)return!0;i=i.parentNode}return!1}function l(e,t,n){for(var i,r=n?e:e.parentNode;r;){if(i=r.parentNode,i===t)return r;r=i}return null}function c(e){var t=e.nodeType;return 3==t||4==t||8==t}function u(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e}function d(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),u(n,e),n}function h(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=T)return e.ownerDocument;if(typeof e.document!=T)return e.document;if(e.parentNode)return h(e.parentNode);throw new Error("getDocument: no document found for node")}function f(e){var t=h(e);if(typeof t.defaultView!=T)return t.defaultView;if(typeof t.parentWindow!=T)return t.parentWindow;throw new Error("Cannot get a window object for node")}function p(e){if(typeof e.contentDocument!=T)return e.contentDocument;if(typeof e.contentWindow!=T)return e.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function m(e){if(typeof e.contentWindow!=T)return e.contentWindow;if(typeof e.contentDocument!=T)return e.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function g(e){return S.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]}function v(e){for(var t;t=e.parentNode;)e=t;return e}function y(e,t,n,i){var o,a,c,u,d;if(e==n)return t===i?0:i>t?-1:1;if(o=l(n,e,!0))return t<=r(o)?-1:1;if(o=l(e,n,!0))return r(o)<i?-1:1;if(a=s(e,n),c=e===a?a:l(e,a,!0),u=n===a?a:l(n,a,!0),c===u)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(d=a.firstChild;d;){if(d===c)return-1;if(d===u)return 1;d=d.nextSibling}throw new Error("Should not be here!")}function b(e){for(var t,n=h(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function w(e){if(!e)return"[No node]";if(c(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">["+e.childNodes.length+"]"}return e.nodeName}function _(e){this.root=e,this._next=e}function x(e){return new _(e)}function C(e,t){this.node=e,this.offset=t}function k(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var T="undefined",S=e.util;S.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),S.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var D=document.createElement("div");S.areHostMethods(D,["insertBefore","appendChild","cloneNode"]||!S.areHostObjects(D,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),S.isHostProperty(D,"innerHTML")||t.fail("Element is missing innerHTML property");var N=document.createTextNode("test");S.areHostMethods(N,["splitText","deleteData","insertData","appendData","cloneNode"]||!S.areHostObjects(D,["previousSibling","nextSibling","childNodes","parentNode"])||!S.areHostProperties(N,["data"]))||t.fail("Incomplete Text Node implementation");var E=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};_.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},C.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+w(this.node)+":"+this.offset+")]"}},k.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},k.prototype.toString=function(){return this.message},e.dom={arrayContains:E,isHtmlNamespace:n,parentElement:i,getNodeIndex:r,getNodeLength:o,getCommonAncestor:s,isAncestorOf:a,getClosestAncestorIn:l,isCharacterDataNode:c,insertAfter:u,splitDataNode:d,getDocument:h,getWindow:f,getIframeWindow:m,getIframeDocument:p,getBody:g,getRootContainer:v,comparePoints:y,inspectNode:w,fragmentFromNodeChildren:b,createIterator:x,DomPosition:C},e.DOMException=k}),rangy.createModule("DomRange",function(e){function t(e,t){return 3!=e.nodeType&&(O.isAncestorOf(e,t.startContainer,!0)||O.isAncestorOf(e,t.endContainer,!0))}function n(e){return O.getDocument(e.startContainer)}function i(e,t,n){var i=e._listeners[t];if(i)for(var r=0,o=i.length;o>r;++r)i[r].call(e,{target:e,args:n})}function r(e){return new H(e.parentNode,O.getNodeIndex(e))}function o(e){return new H(e.parentNode,O.getNodeIndex(e)+1)}function s(e,t,n){var i=11==e.nodeType?e.firstChild:e;return O.isCharacterDataNode(t)?n==t.length?O.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:O.splitDataNode(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),i}function a(e){for(var t,i,r,o=n(e.range).createDocumentFragment();i=e.next();){if(t=e.isPartiallySelectedSubtree(),i=i.cloneNode(!t),t&&(r=e.getSubtreeIterator(),i.appendChild(a(r)),r.detach(!0)),10==i.nodeType)throw new R("HIERARCHY_REQUEST_ERR");o.appendChild(i)}return o}function l(e,t,n){var i,r;n=n||{stop:!1};for(var o,s;o=e.next();)if(e.isPartiallySelectedSubtree()){if(t(o)===!1)return n.stop=!0,void 0;if(s=e.getSubtreeIterator(),l(s,t,n),s.detach(!0),n.stop)return}else for(i=O.createIterator(o);r=i.next();)if(t(r)===!1)return n.stop=!0,void 0}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach(!0)):e.remove()}function u(e){for(var t,i,r=n(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),i=e.getSubtreeIterator(),t.appendChild(u(i)),i.detach(!0)):e.remove(),10==t.nodeType)throw new R("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function d(e,t,n){var i,r=!(!t||!t.length),o=!!n;r&&(i=new RegExp("^("+t.join("|")+")$"));var s=[];return l(new f(e,!1),function(e){r&&!i.test(e.nodeType)||o&&!n(e)||s.push(e)}),s}function h(e){var t="undefined"==typeof e.getName?"Range":e.getName();return"["+t+"("+O.inspectNode(e.startContainer)+":"+e.startOffset+", "+O.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function f(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&O.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||O.isCharacterDataNode(this.sc)?O.getClosestAncestorIn(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||O.isCharacterDataNode(this.ec)?O.getClosestAncestorIn(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function p(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function m(e,t,n){this.nodes=d(e,t,n),this._next=this.nodes[0],this._position=0}function g(e){return function(t,n){for(var i,r=n?t:t.parentNode;r;){if(i=r.nodeType,O.arrayContains(e,i))return r;r=r.parentNode}return null}}function v(e,t){if(V(e,t))throw new p("INVALID_NODE_TYPE_ERR")}function y(e){if(!e.startContainer)throw new R("INVALID_STATE_ERR")}function b(e,t){if(!O.arrayContains(t,e.nodeType))throw new p("INVALID_NODE_TYPE_ERR")}function w(e,t){if(0>t||t>(O.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new R("INDEX_SIZE_ERR")}function _(e,t){if(q(e,!0)!==q(t,!0))throw new R("WRONG_DOCUMENT_ERR")}function x(e){if(Y(e,!0))throw new R("NO_MODIFICATION_ALLOWED_ERR")}function C(e,t){if(!e)throw new R(t)}function k(e){return!O.arrayContains(j,e.nodeType)&&!q(e,!0)}function T(e,t){return t<=(O.isCharacterDataNode(e)?e.length:e.childNodes.length)}function S(e){if(y(e),k(e.startContainer)||k(e.endContainer)||!T(e.startContainer,e.startOffset)||!T(e.endContainer,e.endOffset))throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function D(){}function N(e){e.START_TO_START=J,e.START_TO_END=et,e.END_TO_END=tt,e.END_TO_START=nt,e.NODE_BEFORE=it,e.NODE_AFTER=rt,e.NODE_BEFORE_AND_AFTER=ot,e.NODE_INSIDE=st}function E(e){N(e),N(e.prototype)}function M(e,t){return function(){S(this);var n,i,r=this.startContainer,s=this.startOffset,a=this.commonAncestorContainer,c=new f(this,!0);r!==a&&(n=O.getClosestAncestorIn(r,a,!0),i=o(n),r=i.node,s=i.offset),l(c,x),c.reset();var u=e(c);return c.detach(),t(this,r,s,r,s),u}}function $(n,i,s){function a(e,t){return function(n){y(this),b(n,F),b(U(n),j);var i=(e?r:o)(n);(t?l:d)(this,i.node,i.offset)}}function l(e,t,n){var r=e.endContainer,o=e.endOffset;(t!==e.startContainer||n!==e.startOffset)&&((U(t)!=U(r)||1==O.comparePoints(t,n,r,o))&&(r=t,o=n),i(e,t,n,r,o))}function d(e,t,n){var r=e.startContainer,o=e.startOffset;(t!==e.endContainer||n!==e.endOffset)&&((U(t)!=U(r)||-1==O.comparePoints(t,n,r,o))&&(r=t,o=n),i(e,r,o,t,n))}function h(e,t,n){(t!==e.startContainer||n!==e.startOffset||t!==e.endContainer||n!==e.endOffset)&&i(e,t,n,t,n)}n.prototype=new D,e.util.extend(n.prototype,{setStart:function(e,t){y(this),v(e,!0),w(e,t),l(this,e,t)},setEnd:function(e,t){y(this),v(e,!0),w(e,t),d(this,e,t)},setStartBefore:a(!0,!0),setStartAfter:a(!1,!0),setEndBefore:a(!0,!1),setEndAfter:a(!1,!1),collapse:function(e){S(this),e?i(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):i(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){y(this),v(e,!0),i(this,e,0,e,O.getNodeLength(e))},selectNode:function(e){y(this),v(e,!1),b(e,F);var t=r(e),n=o(e);i(this,t.node,t.offset,n.node,n.offset)},extractContents:M(u,i),deleteContents:M(c,i),canSurroundContents:function(){S(this),x(this.startContainer),x(this.endContainer);var e=new f(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},detach:function(){s(this)},splitBoundaries:function(){S(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,r=this.endOffset,o=e===n;O.isCharacterDataNode(n)&&r>0&&r<n.length&&O.splitDataNode(n,r),O.isCharacterDataNode(e)&&t>0&&t<e.length&&(e=O.splitDataNode(e,t),o?(r-=t,n=e):n==e.parentNode&&r>=O.getNodeIndex(e)&&r++,t=0),i(this,e,t,n,r)},normalizeBoundaries:function(){S(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,r=this.endOffset,o=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(n=e,r=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},s=function(i){var o=i.previousSibling;if(o&&o.nodeType==i.nodeType){e=i;var s=i.length;if(t=o.length,i.insertData(0,o.data),o.parentNode.removeChild(o),e==n)r+=t,n=e;else if(n==i.parentNode){var a=O.getNodeIndex(i);r==a?(n=i,r=s):r>a&&r--}}},a=!0;if(O.isCharacterDataNode(n))n.length==r&&o(n);else{if(r>0){var l=n.childNodes[r-1];l&&O.isCharacterDataNode(l)&&o(l)}a=!this.collapsed}if(a){if(O.isCharacterDataNode(e))0==t&&s(e);else if(t<e.childNodes.length){var c=e.childNodes[t];c&&O.isCharacterDataNode(c)&&s(c)}}else e=n,t=r;i(this,e,t,n,r)},collapseToPoint:function(e,t){y(this),v(e,!0),w(e,t),h(this,e,t)}}),E(n)}function I(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:O.getCommonAncestor(e.startContainer,e.endContainer)}function A(e,t,n,r,o){var s=e.startContainer!==t||e.startOffset!==n,a=e.endContainer!==r||e.endOffset!==o;e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=o,I(e),i(e,"boundarychange",{startMoved:s,endMoved:a})}function L(e){y(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,i(e,"detach",null),e._listeners=null}function P(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},I(this)}e.requireModules(["DomUtil"]);var O=e.dom,H=O.DomPosition,R=e.DOMException;f.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,O.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!O.isCharacterDataNode(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){var e=this._current;return t(e,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse();else{e=new P(n(this.range));var t=this._current,i=t,r=0,o=t,s=O.getNodeLength(t);O.isAncestorOf(t,this.sc,!0)&&(i=this.sc,r=this.so),O.isAncestorOf(t,this.ec,!0)&&(o=this.ec,s=this.eo),A(e,i,r,o,s)}return new f(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},p.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},p.prototype.toString=function(){return this.message},m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var F=[1,3,4,5,7,8,10],j=[2,9,11],z=[5,6,10,12],W=[1,3,4,5,7,8,10,11],B=[1,3,4,5,7,8],U=O.getRootContainer,q=g([9,11]),Y=g(z),V=g([6,10,12]),X=document.createElement("style"),G=!1;try{X.innerHTML="<b>x</b>",G=3==X.firstChild.nodeType}catch(K){}e.features.htmlParsingConforms=G;var Q=G?function(e){var t=this.startContainer,n=O.getDocument(t);if(!t)throw new R("INVALID_STATE_ERR");var i=null;return 1==t.nodeType?i=t:O.isCharacterDataNode(t)&&(i=O.parentElement(t)),i=null===i||"HTML"==i.nodeName&&O.isHtmlNamespace(O.getDocument(i).documentElement)&&O.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1),i.innerHTML=e,O.fragmentFromNodeChildren(i)}:function(e){y(this);var t=n(this),i=t.createElement("body");return i.innerHTML=e,O.fragmentFromNodeChildren(i)},Z=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],J=0,et=1,tt=2,nt=3,it=0,rt=1,ot=2,st=3;D.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){S(this),_(this.startContainer,t.startContainer);var n,i,r,o,s=e==nt||e==J?"start":"end",a=e==et||e==J?"start":"end";return n=this[s+"Container"],i=this[s+"Offset"],r=t[a+"Container"],o=t[a+"Offset"],O.comparePoints(n,i,r,o)},insertNode:function(e){if(S(this),b(e,W),x(this.startContainer),O.isAncestorOf(e,this.startContainer,!0))throw new R("HIERARCHY_REQUEST_ERR");var t=s(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){S(this);var e,t;if(this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&O.isCharacterDataNode(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=n(this).createDocumentFragment(),t.appendChild(e),t;var i=new f(this,!0);return e=a(i),i.detach(),e},canSurroundContents:function(){S(this),x(this.startContainer),x(this.endContainer);var e=new f(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},surroundContents:function(e){if(b(e,B),!this.canSurroundContents())throw new p("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);s(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){S(this);for(var e,t=new P(n(this)),i=Z.length;i--;)e=Z[i],t[e]=this[e];return t},toString:function(){S(this);var e=this.startContainer;if(e===this.endContainer&&O.isCharacterDataNode(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new f(this,!0);return l(n,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){S(this);var t=e.parentNode,n=O.getNodeIndex(e);if(!t)throw new R("NOT_FOUND_ERR");var i=this.comparePoint(t,n),r=this.comparePoint(t,n+1);return 0>i?r>0?ot:it:r>0?rt:st},comparePoint:function(e,t){return S(this),C(e,"HIERARCHY_REQUEST_ERR"),_(e,this.startContainer),O.comparePoints(e,t,this.startContainer,this.startOffset)<0?-1:O.comparePoints(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Q,toHtml:function(){S(this);var e=n(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){if(S(this),C(e,"NOT_FOUND_ERR"),O.getDocument(e)!==n(this))return!1;var i=e.parentNode,r=O.getNodeIndex(e);C(i,"NOT_FOUND_ERR");var o=O.comparePoints(i,r,this.endContainer,this.endOffset),s=O.comparePoints(i,r+1,this.startContainer,this.startOffset);return t?0>=o&&s>=0:0>o&&s>0},isPointInRange:function(e,t){return S(this),C(e,"HIERARCHY_REQUEST_ERR"),_(e,this.startContainer),O.comparePoints(e,t,this.startContainer,this.startOffset)>=0&&O.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){if(S(this),n(e)!=n(this))throw new R("WRONG_DOCUMENT_ERR");var i=O.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),r=O.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?0>=i&&r>=0:0>i&&r>0},intersection:function(e){if(this.intersectsRange(e)){var t=O.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=O.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange();return-1==t&&i.setStart(e.startContainer,e.startOffset),1==n&&i.setEnd(e.endContainer,e.endOffset),i}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return-1==O.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==O.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new p("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==st},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,O.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var i=n.pop();t.setEnd(i,i.length);var r=this.containsRange(t);return t.detach(),r}return this.containsNodeContents(e)},createNodeIterator:function(e,t){return S(this),new m(this,e,t)},getNodes:function(e,t){return S(this),d(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){y(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){y(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return P.rangesEqual(this,e)},inspect:function(){return h(this)}},$(P,A,L),e.rangePrototype=D.prototype,P.rangeProperties=Z,P.RangeIterator=f,P.copyComparisonConstants=E,P.createPrototypeRange=$,P.inspect=h,P.getRangeDocument=n,P.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},e.DomRange=P,e.RangeException=p}),rangy.createModule("WrappedRange",function(e){function t(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var i=n.parentElement();n=e.duplicate(),n.collapse(!1);var r=n.parentElement(),o=i==r?i:s.getCommonAncestor(i,r);return o==t?o:s.getCommonAncestor(t,o)}function n(e){return 0==e.compareEndPoints("StartToEnd",e)}function i(e,t,n,i){var r=e.duplicate();r.collapse(n);var o=r.parentElement();if(s.isAncestorOf(t,o,!0)||(o=t),!o.canHaveHTML)return new a(o.parentNode,s.getNodeIndex(o));var l,c,u,d,h,f=s.getDocument(o).createElement("span"),p=n?"StartToStart":"StartToEnd";do o.insertBefore(f,f.previousSibling),r.moveToElementText(f);while((l=r.compareEndPoints(p,e))>0&&f.previousSibling);if(h=f.nextSibling,-1==l&&h&&s.isCharacterDataNode(h)){r.setEndPoint(n?"EndToStart":"EndToEnd",e);var m;if(/[\r\n]/.test(h.data)){var g=r.duplicate(),v=g.text.replace(/\r\n/g,"\r").length;for(m=g.moveStart("character",v);-1==(l=g.compareEndPoints("StartToEnd",g));)m++,g.moveStart("character",1)}else m=r.text.length;d=new a(h,m)}else c=(i||!n)&&f.previousSibling,u=(i||n)&&f.nextSibling,d=u&&s.isCharacterDataNode(u)?new a(u,0):c&&s.isCharacterDataNode(c)?new a(c,c.length):new a(o,s.getNodeIndex(f));return f.parentNode.removeChild(f),d}function r(e,t){var n,i,r,o,a=e.offset,l=s.getDocument(e.node),c=l.body.createTextRange(),u=s.isCharacterDataNode(e.node);return u?(n=e.node,i=n.parentNode):(o=e.node.childNodes,n=a<o.length?o[a]:null,i=e.node),r=l.createElement("span"),r.innerHTML="&#feff;",n?i.insertBefore(r,n):i.appendChild(r),c.moveToElementText(r),c.collapse(!t),i.removeChild(r),u&&c[t?"moveStart":"moveEnd"]("character",a),c}e.requireModules(["DomUtil","DomRange"]);var o,s=e.dom,a=s.DomPosition,l=e.DomRange;if(!e.features.implementsDomRange||e.features.implementsTextRange&&e.config.preferTextRange){if(e.features.implementsTextRange){o=function(e){this.textRange=e,this.refresh()},o.prototype=new l(document),o.prototype.refresh=function(){var e,r,o=t(this.textRange);n(this.textRange)?r=e=i(this.textRange,o,!0,!0):(e=i(this.textRange,o,!0,!1),r=i(this.textRange,o,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(r.node,r.offset)},l.copyComparisonConstants(o);var c=function(){return this}();"undefined"==typeof c.Range&&(c.Range=o),e.createNativeRange=function(e){return e=e||document,e.body.createTextRange()}}}else!function(){function t(e){for(var t,n=u.length;n--;)t=u[n],e[t]=e.nativeRange[t]}function n(e,t,n,i,r){var o=e.startContainer!==t||e.startOffset!=n,s=e.endContainer!==i||e.endOffset!=r;(o||s)&&(e.setEnd(i,r),e.setStart(t,n))}function i(e){e.nativeRange.detach(),e.detached=!0;for(var t,n=u.length;n--;)t=u[n],e[t]=null}var r,a,c,u=l.rangeProperties;o=function(e){if(!e)throw new Error("Range must be specified");this.nativeRange=e,t(this)},l.createPrototypeRange(o,n,i),r=o.prototype,r.selectNode=function(e){this.nativeRange.selectNode(e),t(this)},r.deleteContents=function(){this.nativeRange.deleteContents(),t(this)},r.extractContents=function(){var e=this.nativeRange.extractContents();return t(this),e},r.cloneContents=function(){return this.nativeRange.cloneContents()},r.surroundContents=function(e){this.nativeRange.surroundContents(e),t(this)},r.collapse=function(e){this.nativeRange.collapse(e),t(this)},r.cloneRange=function(){return new o(this.nativeRange.cloneRange())},r.refresh=function(){t(this)},r.toString=function(){return this.nativeRange.toString()};var d=document.createTextNode("test");s.getBody(document).appendChild(d);var h=document.createRange();h.setStart(d,0),h.setEnd(d,0);try{h.setStart(d,1),a=!0,r.setStart=function(e,n){this.nativeRange.setStart(e,n),t(this)},r.setEnd=function(e,n){this.nativeRange.setEnd(e,n),t(this)},c=function(e){return function(n){this.nativeRange[e](n),t(this)}}}catch(f){a=!1,r.setStart=function(e,n){try{this.nativeRange.setStart(e,n)}catch(i){this.nativeRange.setEnd(e,n),this.nativeRange.setStart(e,n)}t(this)},r.setEnd=function(e,n){try{this.nativeRange.setEnd(e,n)}catch(i){this.nativeRange.setStart(e,n),this.nativeRange.setEnd(e,n)}t(this)},c=function(e,n){return function(i){try{this.nativeRange[e](i)}catch(r){this.nativeRange[n](i),this.nativeRange[e](i)}t(this)}}}r.setStartBefore=c("setStartBefore","setEndBefore"),r.setStartAfter=c("setStartAfter","setEndAfter"),r.setEndBefore=c("setEndBefore","setStartBefore"),r.setEndAfter=c("setEndAfter","setStartAfter"),h.selectNodeContents(d),r.selectNodeContents=h.startContainer==d&&h.endContainer==d&&0==h.startOffset&&h.endOffset==d.length?function(e){this.nativeRange.selectNodeContents(e),t(this)}:function(e){this.setStart(e,0),this.setEnd(e,l.getEndOffset(e))},h.selectNodeContents(d),h.setEnd(d,3);var p=document.createRange();p.selectNodeContents(d),p.setEnd(d,4),p.setStart(d,2),r.compareBoundaryPoints=-1==h.compareBoundaryPoints(h.START_TO_END,p)&1==h.compareBoundaryPoints(h.END_TO_START,p)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},e.util.isHostMethod(h,"createContextualFragment")&&(r.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),s.getBody(document).removeChild(d),h.detach(),p.detach()}(),e.createNativeRange=function(e){return e=e||document,e.createRange()};e.features.implementsTextRange&&(o.rangeToTextRange=function(e){if(e.collapsed){var t=r(new a(e.startContainer,e.startOffset),!0);return t}var n=r(new a(e.startContainer,e.startOffset),!0),i=r(new a(e.endContainer,e.endOffset),!1),o=s.getDocument(e.startContainer).body.createTextRange();return o.setEndPoint("StartToStart",n),o.setEndPoint("EndToEnd",i),o}),o.prototype.getName=function(){return"WrappedRange"},e.WrappedRange=o,e.createRange=function(t){return t=t||document,new o(e.createNativeRange(t))},e.createRangyRange=function(e){return e=e||document,new l(e)},e.createIframeRange=function(t){return e.createRange(s.getIframeDocument(t))},e.createIframeRangyRange=function(t){return e.createRangyRange(s.getIframeDocument(t))},e.addCreateMissingNativeApiListener(function(t){var n=t.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return e.createRange(this)}),n=t=null})}),rangy.createModule("WrappedSelection",function(e,t){function n(e){return(e||window).getSelection()}function i(e){return(e||window).document.selection}function r(e,t,n){var i=n?"end":"start",r=n?"start":"end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[r+"Container"],e.focusOffset=t[r+"Offset"]}function o(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function s(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function a(t){var n;return t instanceof k?(n=t._selectionNativeRange,n||(n=e.createNativeRange(x.getDocument(t.startContainer)),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset),t._selectionNativeRange=n,t.attachListener("detach",function(){this._selectionNativeRange=null}))):t instanceof T?n=t.nativeRange:e.features.implementsDomRange&&t instanceof x.getWindow(t.startContainer).Range&&(n=t),n}function l(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;n>t;++t)if(!x.isAncestorOf(e[0],e[t]))return!1;return!0}function c(e){var t=e.getNodes();if(!l(t))throw new Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return t[0]}function u(e){return!!e&&"undefined"!=typeof e.text}function d(e,t){var n=new T(t);e._ranges=[n],r(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function h(t){if(t._ranges.length=0,"None"==t.docSelection.type)s(t);else{var n=t.docSelection.createRange();if(u(n))d(t,n);else{t.rangeCount=n.length;for(var i,o=x.getDocument(n.item(0)),a=0;a<t.rangeCount;++a)i=e.createRange(o),i.selectNode(n.item(a)),t._ranges.push(i);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,r(t,t._ranges[t.rangeCount-1],!1)}}}function f(e,t){for(var n=e.docSelection.createRange(),i=c(t),r=x.getDocument(n.item(0)),o=x.getBody(r).createControlRange(),s=0,a=n.length;a>s;++s)o.add(n.item(s));try{o.add(i)}catch(l){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),h(e)}function p(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function m(e,t){for(var n,i=x.getDocument(t[0].startContainer),r=x.getBody(i).createControlRange(),o=0;rangeCount>o;++o){n=c(t[o]);try{r.add(n)}catch(s){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")
}}r.select(),h(e)}function g(e,t){if(e.anchorNode&&x.getDocument(e.anchorNode)!==x.getDocument(t))throw new S("WRONG_DOCUMENT_ERR")}function v(e){var t=[],n=new D(e.anchorNode,e.anchorOffset),i=new D(e.focusNode,e.focusOffset),r="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var o=0,s=e.rangeCount;s>o;++o)t[o]=k.inspect(e.getRangeAt(o));return"["+r+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]),e.config.checkSelectionRanges=!0;var y,b,w="boolean",_="_rangySelection",x=e.dom,C=e.util,k=e.DomRange,T=e.WrappedRange,S=e.DOMException,D=x.DomPosition,N="Control",E=e.util.isHostMethod(window,"getSelection"),M=e.util.isHostObject(document,"selection"),$=M&&(!E||e.config.preferTextRange);$?(y=i,e.isSelectionValid=function(e){var t=(e||window).document,n=t.selection;return"None"!=n.type||x.getDocument(n.createRange().parentElement())==t}):E?(y=n,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=y;var I=y(),A=e.createNativeRange(document),L=x.getBody(document),P=C.areHostObjects(I,["anchorNode","focusNode"]&&C.areHostProperties(I,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=P;var O=C.isHostMethod(I,"extend");e.features.selectionHasExtend=O;var H="number"==typeof I.rangeCount;e.features.selectionHasRangeCount=H;var R=!1,F=!0;C.areHostMethods(I,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof I.rangeCount&&e.features.implementsDomRange&&function(){var e=document.createElement("iframe");L.appendChild(e);var t=x.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var n=x.getIframeWindow(e).getSelection(),i=t.documentElement,r=i.lastChild,o=r.firstChild,s=t.createRange();s.setStart(o,1),s.collapse(!0),n.addRange(s),F=1==n.rangeCount,n.removeAllRanges();var a=s.cloneRange();s.setStart(o,0),a.setEnd(o,2),n.addRange(s),n.addRange(a),R=2==n.rangeCount,s.detach(),a.detach(),L.removeChild(e)}(),e.features.selectionSupportsMultipleRanges=R,e.features.collapsedNonEditableSelectionsSupported=F;var j,z=!1;L&&C.isHostMethod(L,"createControlRange")&&(j=L.createControlRange(),C.areHostProperties(j,["item","add"])&&(z=!0)),e.features.implementsControlRange=z,b=P?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};var W;C.isHostMethod(I,"getRangeAt")?W=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:P&&(W=function(t){var n=x.getDocument(t.anchorNode),i=e.createRange(n);return i.setStart(t.anchorNode,t.anchorOffset),i.setEnd(t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&(i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset)),i}),e.getSelection=function(e){e=e||window;var t=e[_],n=y(e),r=M?i(e):null;return t?(t.nativeSelection=n,t.docSelection=r,t.refresh(e)):(t=new p(n,r,e),e[_]=t),t},e.getIframeSelection=function(t){return e.getSelection(x.getIframeWindow(t))};var B=p.prototype;if(!$&&P&&C.areHostMethods(I,["removeAllRanges","addRange"])){B.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),s(this)};var U=function(t,n){var i=k.getRangeDocument(n),r=e.createRange(i);r.collapseToPoint(n.endContainer,n.endOffset),t.nativeSelection.addRange(a(r)),t.nativeSelection.extend(n.startContainer,n.startOffset),t.refresh()};B.addRange=H?function(t,n){if(z&&M&&this.docSelection.type==N)f(this,t);else if(n&&O)U(this,t);else{var i;if(R?i=this.rangeCount:(this.removeAllRanges(),i=0),this.nativeSelection.addRange(a(t)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==i+1){if(e.config.checkSelectionRanges){var o=W(this.nativeSelection,this.rangeCount-1);o&&!k.rangesEqual(o,t)&&(t=new T(o))}this._ranges[this.rangeCount-1]=t,r(this,t,V(this.nativeSelection)),this.isCollapsed=b(this)}else this.refresh()}}:function(e,t){t&&O?U(this,e):(this.nativeSelection.addRange(a(e)),this.refresh())},B.setRanges=function(e){if(z&&e.length>1)m(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;n>t;++t)this.addRange(e[t])}}}else{if(!(C.isHostMethod(I,"empty")&&C.isHostMethod(A,"select")&&z&&$))return t.fail("No means of selecting a Range or TextRange was found"),!1;B.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=x.getDocument(this.anchorNode);else if(this.docSelection.type==N){var t=this.docSelection.createRange();t.length&&(e=x.getDocument(t.item(0)).body.createTextRange())}if(e){var n=e.body.createTextRange();n.select(),this.docSelection.empty()}}}catch(i){}s(this)},B.addRange=function(e){this.docSelection.type==N?f(this,e):(T.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,r(this,e,!1))},B.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?m(this,e):t&&this.addRange(e[0])}}B.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new S("INDEX_SIZE_ERR");return this._ranges[e]};var q;if($)q=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=x.getBody(t.win.document).createTextRange(),n.collapse(!0)),t.docSelection.type==N?h(t):u(n)?d(t,n):s(t)};else if(C.isHostMethod(I,"getRangeAt")&&"number"==typeof I.rangeCount)q=function(t){if(z&&M&&t.docSelection.type==N)h(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,i=t.rangeCount;i>n;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));r(t,t._ranges[t.rangeCount-1],V(t.nativeSelection)),t.isCollapsed=b(t)}else s(t)};else{if(!P||typeof I.isCollapsed!=w||typeof A.collapsed!=w||!e.features.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;q=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=W(n,0),e._ranges=[t],e.rangeCount=1,o(e),e.isCollapsed=b(e)):s(e)}}B.refresh=function(e){var t=e?this._ranges.slice(0):null;if(q(this),e){var n=t.length;if(n!=this._ranges.length)return!1;for(;n--;)if(!k.rangesEqual(t[n],this._ranges[n]))return!1;return!0}};var Y=function(e,t){var n=e.getAllRanges(),i=!1;e.removeAllRanges();for(var r=0,o=n.length;o>r;++r)i||t!==n[r]?e.addRange(n[r]):i=!0;e.rangeCount||s(e)};B.removeRange=z?function(e){if(this.docSelection.type==N){for(var t,n=this.docSelection.createRange(),i=c(e),r=x.getDocument(n.item(0)),o=x.getBody(r).createControlRange(),s=!1,a=0,l=n.length;l>a;++a)t=n.item(a),t!==i||s?o.add(n.item(a)):s=!0;o.select(),h(this)}else Y(this,e)}:function(e){Y(this,e)};var V;!$&&P&&e.features.implementsDomRange?(V=function(e){var t=!1;return e.anchorNode&&(t=1==x.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t},B.isBackwards=function(){return V(this)}):V=B.isBackwards=function(){return!1},B.toString=function(){for(var e=[],t=0,n=this.rangeCount;n>t;++t)e[t]=""+this._ranges[t];return e.join("")},B.collapse=function(t,n){g(this,t);var i=e.createRange(x.getDocument(t));i.collapseToPoint(t,n),this.removeAllRanges(),this.addRange(i),this.isCollapsed=!0},B.collapseToStart=function(){if(!this.rangeCount)throw new S("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},B.collapseToEnd=function(){if(!this.rangeCount)throw new S("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},B.selectAllChildren=function(t){g(this,t);var n=e.createRange(x.getDocument(t));n.selectNodeContents(t),this.removeAllRanges(),this.addRange(n)},B.deleteFromDocument=function(){if(z&&M&&this.docSelection.type==N){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),e.parentNode.removeChild(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var i=0,r=n.length;r>i;++i)n[i].deleteContents();this.addRange(n[r-1])}},B.getAllRanges=function(){return this._ranges.slice(0)},B.setSingleRange=function(e){this.setRanges([e])},B.containsNode=function(e,t){for(var n=0,i=this._ranges.length;i>n;++n)if(this._ranges[n].containsNode(e,t))return!0;return!1},B.toHtml=function(){var e="";if(this.rangeCount){for(var t=k.getRangeDocument(this._ranges[0]).createElement("div"),n=0,i=this._ranges.length;i>n;++n)t.appendChild(this._ranges[n].cloneContents());e=t.innerHTML}return e},B.getName=function(){return"WrappedSelection"},B.inspect=function(){return v(this)},B.detach=function(){this.win[_]=null,this.win=this.anchorNode=this.focusNode=null},p.inspect=v,e.Selection=p,e.selectionPrototype=B,e.addCreateMissingNativeApiListener(function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return e.getSelection(this)}),t=null})});/*
	Base.js, version 1.1a
	Copyright 2006-2010, Dean Edwards
	License: http://www.opensource.org/licenses/mit-license.php
*/
var Base=function(){};Base.extend=function(e,t){var n=Base.prototype.extend;Base._prototyping=!0;var i=new this;n.call(i,e),i.base=function(){},delete Base._prototyping;var r=i.constructor,o=i.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==o)this._constructing=!0,r.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||n).call(arguments[0],i)};return o.ancestor=this,o.extend=this.extend,o.forEach=this.forEach,o.implement=this.implement,o.prototype=i,o.toString=this.toString,o.valueOf=function(e){return"object"==e?o:r.valueOf()},n.call(o,t),"function"==typeof o.init&&o.init(),o},Base.prototype={extend:function(e,t){if(arguments.length>1){var n=this[e];if(n&&"function"==typeof t&&(!n.valueOf||n.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var i=t.valueOf();t=function(){var e=this.base||Base.prototype.base;this.base=n;var t=i.apply(this,arguments);return this.base=e,t},t.valueOf=function(e){return"object"==e?t:i},t.toString=Base.toString}this[e]=t}else if(e){var r=Base.prototype.extend;Base._prototyping||"function"==typeof this||(r=this.extend||r);for(var o={toSource:null},s=["constructor","toString","valueOf"],a=Base._prototyping?0:1;l=s[a++];)e[l]!=o[l]&&r.call(this,l,e[l]);for(var l in e)o[l]||r.call(this,l,e[l])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var i in e)void 0===this.prototype[i]&&t.call(n,e[i],i,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}}),wysihtml5.browser=function(){function e(e){return(/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/)||[,0])[1]}var t=navigator.userAgent,n=document.createElement("div"),i=-1!==t.indexOf("MSIE")&&-1===t.indexOf("Opera"),r=-1!==t.indexOf("Gecko")&&-1===t.indexOf("KHTML"),o=-1!==t.indexOf("AppleWebKit/"),s=-1!==t.indexOf("Chrome/"),a=-1!==t.indexOf("Opera/");return{USER_AGENT:t,supported:function(){var t=this.USER_AGENT.toLowerCase(),i="contentEditable"in n,r=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,o=document.querySelector&&document.querySelectorAll,s=this.isIos()&&e(t)<5||-1!==t.indexOf("opera mobi")||-1!==t.indexOf("hpwos/");return i&&r&&o&&!s},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var e=this.USER_AGENT.toLowerCase();return-1!==e.indexOf("webkit")&&-1!==e.indexOf("mobile")},supportsSandboxedIframes:function(){return i},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!r},hasCurrentStyleProperty:function(){return"currentStyle"in n},insertsLineBreaksOnReturn:function(){return r},supportsPlaceholderAttributeOn:function(e){return"placeholder"in e},supportsEvent:function(e){return"on"+e in n||function(){return n.setAttribute("on"+e,"return;"),"function"==typeof n["on"+e]}()},supportsEventsInIframeCorrectly:function(){return!a},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return o||r},supportsDataTransfer:function(){try{return o&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(e){return!1}},supportsHTML5Tags:function(e){var t=e.createElement("div"),n="<article>foo</article>";return t.innerHTML=n,t.innerHTML.toLowerCase()===n},supportsCommand:function(){var e={formatBlock:i,insertUnorderedList:i||a||o,insertOrderedList:i||a||o},t={insertHTML:r};return function(n,i){var r=e[i];if(!r){try{return n.queryCommandSupported(i)}catch(o){}try{return n.queryCommandEnabled(i)}catch(s){return!!t[i]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return i},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return r||a||o},supportsGetAttributeCorrectly:function(){var e=document.createElement("td");return"1"!=e.getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return r||i||a},clearsListsInContentEditableCorrectly:function(){return r||i||o},autoScrollsToCaret:function(){return!o},autoClosesUnclosedTags:function(){var e,t,i=n.cloneNode(!1);return i.innerHTML="<p><div></div>",t=i.innerHTML.toLowerCase(),e="<p></p><div></div>"===t||"<p><div></div></p>"===t,this.autoClosesUnclosedTags=function(){return e},e},supportsNativeGetElementsByClassName:function(){return-1!==String(document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},supportsClassList:function(){return"classList"in n},needsSpaceAfterLineBreak:function(){return a},supportsSpeechApiOn:function(e){var n=t.match(/Chrome\/(\d+)/)||[,0];return n[1]>=11&&("onwebkitspeechchange"in e||"speech"in e)},crashesWhenDefineProperty:function(e){return i&&("XMLHttpRequest"===e||"XDomainRequest"===e)},doesAsyncFocus:function(){return i},hasProblemsSettingCaretAfterImg:function(){return i},hasUndoInContextMenu:function(){return r||s||a}}}(),wysihtml5.lang.array=function(e){return{contains:function(t){if(e.indexOf)return-1!==e.indexOf(t);for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return!0;return!1},without:function(t){t=wysihtml5.lang.array(t);for(var n=[],i=0,r=e.length;r>i;i++)t.contains(e[i])||n.push(e[i]);return n},get:function(){for(var t=0,n=e.length,i=[];n>t;t++)i.push(e[t]);return i}}},wysihtml5.lang.Dispatcher=Base.extend({observe:function(e,t){return this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t),this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(e,t){this.events=this.events||{};for(var n=this.events[e]||[],i=0;i<n.length;i++)n[i].call(this,t);return this},stopObserving:function(e,t){this.events=this.events||{};var n,i,r=0;if(e){for(n=this.events[e]||[],i=[];r<n.length;r++)n[r]!==t&&t&&i.push(n[r]);this.events[e]=i}else this.events={};return this}}),wysihtml5.lang.object=function(e){return{merge:function(t){for(var n in t)e[n]=t[n];return this},get:function(){return e},clone:function(){var t,n={};for(t in e)n[t]=e[t];return n},isArray:function(){return"[object Array]"===Object.prototype.toString.call(e)}}},function(){var e=/^\s+/,t=/\s+$/;wysihtml5.lang.string=function(n){return n=String(n),{trim:function(){return n.replace(e,"").replace(t,"")},interpolate:function(e){for(var t in e)n=this.replace("#{"+t+"}").by(e[t]);return n},replace:function(e){return{by:function(t){return n.split(e).join(t)}}}}}}(),function(e){function t(e){return o(e)?e:(e===e.ownerDocument.documentElement&&(e=e.ownerDocument.body),s(e))}function n(e){return e.replace(l,function(e,t){var n=(t.match(c)||[])[1]||"",i=d[n];t=t.replace(c,""),t.split(i).length>t.split(n).length&&(t+=n,n="");var r=t,o=t;return t.length>u&&(o=o.substr(0,u)+"..."),"www."===r.substr(0,4)&&(r="http://"+r),'<a href="'+r+'">'+o+"</a>"+n})}function i(e){var t=e._wysihtml5_tempElement;return t||(t=e._wysihtml5_tempElement=e.createElement("div")),t}function r(e){var t=e.parentNode,r=i(t.ownerDocument);for(r.innerHTML="<span></span>"+n(e.data),r.removeChild(r.firstChild);r.firstChild;)t.insertBefore(r.firstChild,e);t.removeChild(e)}function o(e){for(var t;e.parentNode;){if(e=e.parentNode,t=e.nodeName,a.contains(t))return!0;if("body"===t)return!1}return!1}function s(t){if(!a.contains(t.nodeName)){if(t.nodeType===e.TEXT_NODE&&t.data.match(l))return r(t),void 0;for(var n=e.lang.array(t.childNodes).get(),i=n.length,o=0;i>o;o++)s(n[o]);return t}}var a=e.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),l=/((https?:\/\/|www\.)[^\s<]{3,})/gi,c=/([^\w\/\-](,?))$/i,u=100,d={")":"(","]":"[","}":"{"};e.dom.autoLink=t,e.dom.autoLink.URL_REG_EXP=l}(wysihtml5),function(e){var t=e.browser.supportsClassList(),n=e.dom;n.addClass=function(e,i){return t?e.classList.add(i):(n.hasClass(e,i)||(e.className+=" "+i),void 0)},n.removeClass=function(e,n){return t?e.classList.remove(n):(e.className=e.className.replace(new RegExp("(^|\\s+)"+n+"(\\s+|$)")," "),void 0)},n.hasClass=function(e,n){if(t)return e.classList.contains(n);var i=e.className;return i.length>0&&(i==n||new RegExp("(^|\\s)"+n+"(\\s|$)").test(i))}}(wysihtml5),wysihtml5.dom.contains=function(){var e=document.documentElement;return e.contains?function(e,t){return t.nodeType!==wysihtml5.ELEMENT_NODE&&(t=t.parentNode),e!==t&&e.contains(t)}:e.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:void 0}(),wysihtml5.dom.convertToList=function(){function e(e,t){var n=e.createElement("li");return t.appendChild(n),n}function t(e,t){return e.createElement(t)}function n(n,i){if("UL"===n.nodeName||"OL"===n.nodeName||"MENU"===n.nodeName)return n;var r,o,s,a,l,c,u,d,h,f=n.ownerDocument,p=t(f,i),m=n.querySelectorAll("br"),g=m.length;for(h=0;g>h;h++)for(a=m[h];(l=a.parentNode)&&l!==n&&l.lastChild===a;){if("block"===wysihtml5.dom.getStyle("display").from(l)){l.removeChild(a);break}wysihtml5.dom.insert(a).after(a.parentNode)}for(r=wysihtml5.lang.array(n.childNodes).get(),o=r.length,h=0;o>h;h++)d=d||e(f,p),s=r[h],c="block"===wysihtml5.dom.getStyle("display").from(s),u="BR"===s.nodeName,c?(d=d.firstChild?e(f,p):d,d.appendChild(s),d=null):u?d=d.firstChild?null:d:d.appendChild(s);return n.parentNode.replaceChild(p,n),p}return n}(),wysihtml5.dom.copyAttributes=function(e){return{from:function(t){return{to:function(n){for(var i,r=0,o=e.length;o>r;r++)i=e[r],"undefined"!=typeof t[i]&&""!==t[i]&&(n[i]=t[i]);return{andTo:arguments.callee}}}}}},function(e){var t=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],n=function(t){return i(t)?parseInt(e.getStyle("width").from(t),10)<t.offsetWidth:!1},i=function(n){for(var i=0,r=t.length;r>i;i++)if("border-box"===e.getStyle(t[i]).from(n))return t[i]};e.copyStyles=function(i){return{from:function(r){n(r)&&(i=wysihtml5.lang.array(i).without(t));for(var o,s="",a=i.length,l=0;a>l;l++)o=i[l],s+=o+":"+e.getStyle(o).from(r)+";";return{to:function(t){return e.setStyles(s).on(t),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(e){e.dom.delegate=function(t,n,i,r){return e.dom.observe(t,i,function(i){for(var o=i.target,s=e.lang.array(t.querySelectorAll(n));o&&o!==t;){if(s.contains(o)){r.call(o,i);break}o=o.parentNode}})}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var e=function(e,t){var n=t.createElement("div");n.style.display="none",t.body.appendChild(n);try{n.innerHTML=e}catch(i){}return t.body.removeChild(n),n},t=function(e){if(!e._wysihtml5_supportsHTML5Tags){for(var t=0,i=n.length;i>t;t++)e.createElement(n[t]);e._wysihtml5_supportsHTML5Tags=!0}},n=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(n,i){i=i||document;var r;return"object"==typeof n&&n.nodeType?(r=i.createElement("div"),r.appendChild(n)):wysihtml5.browser.supportsHTML5Tags(i)?(r=i.createElement("div"),r.innerHTML=n):(t(i),r=e(n,i)),r}}(),wysihtml5.dom.getParentElement=function(){function e(e,t){return t&&t.length?"string"==typeof t?e===t:wysihtml5.lang.array(t).contains(e):!0}function t(e){return e.nodeType===wysihtml5.ELEMENT_NODE}function n(e,t,n){var i=(e.className||"").match(n)||[];return t?i[i.length-1]===t:!!i.length}function i(t,n,i){for(;i--&&t&&"BODY"!==t.nodeName;){if(e(t.nodeName,n))return t;t=t.parentNode}return null}function r(i,r,o,s,a){for(;a--&&i&&"BODY"!==i.nodeName;){if(t(i)&&e(i.nodeName,r)&&n(i,o,s))return i;i=i.parentNode}return null}return function(e,t,n){return n=n||50,t.className||t.classRegExp?r(e,t.nodeName,t.className,t.classRegExp,n):i(e,t.nodeName,n)}}(),wysihtml5.dom.getStyle=function(){function e(e){return e.replace(n,function(e){return e.charAt(1).toUpperCase()})}var t={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},n=/\-[a-z]/g;return function(n){return{from:function(i){if(i.nodeType===wysihtml5.ELEMENT_NODE){var r=i.ownerDocument,o=t[n]||e(n),s=i.style,a=i.currentStyle,l=s[o];if(l)return l;if(a)try{return a[o]}catch(c){}var u,d,h=r.defaultView||r.parentWindow,f=("height"===n||"width"===n)&&"TEXTAREA"===i.nodeName;return h.getComputedStyle?(f&&(u=s.overflow,s.overflow="hidden"),d=h.getComputedStyle(i,null).getPropertyValue(n),f&&(s.overflow=u||""),d):void 0}}}}}(),wysihtml5.dom.hasElementWithTagName=function(){function e(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=n++)}var t={},n=1;return function(n,i){var r=e(n)+":"+i,o=t[r];return o||(o=t[r]=n.getElementsByTagName(i)),o.length>0}}(),function(e){function t(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=i++)}var n={},i=1;e.dom.hasElementWithClassName=function(i,r){if(!e.browser.supportsNativeGetElementsByClassName())return!!i.querySelector("."+r);var o=t(i)+":"+r,s=n[o];return s||(s=n[o]=i.getElementsByClassName(r)),s.length>0}}(wysihtml5),wysihtml5.dom.insert=function(e){return{after:function(t){t.parentNode.insertBefore(e,t.nextSibling)},before:function(t){t.parentNode.insertBefore(e,t)},into:function(t){t.appendChild(e)}}},wysihtml5.dom.insertCSS=function(e){return e=e.join("\n"),{into:function(t){var n=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),n&&n.appendChild(i)}}},wysihtml5.dom.observe=function(e,t,n){t="string"==typeof t?[t]:t;for(var i,r,o=0,s=t.length;s>o;o++)r=t[o],e.addEventListener?e.addEventListener(r,n,!1):(i=function(t){"target"in t||(t.target=t.srcElement),t.preventDefault=t.preventDefault||function(){this.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0},n.call(e,t)},e.attachEvent("on"+r,i));return{stop:function(){for(var r,o=0,s=t.length;s>o;o++)r=t[o],e.removeEventListener?e.removeEventListener(r,n,!1):e.detachEvent("on"+r,i)}}},wysihtml5.dom.parse=function(){function e(e,n,i,r){wysihtml5.lang.object(d).merge(u).merge(n).get(),i=i||e.ownerDocument||document;var o,s,a,l=i.createDocumentFragment(),c="string"==typeof e;for(o=c?wysihtml5.dom.getAsDom(e,i):e;o.firstChild;)a=o.firstChild,o.removeChild(a),s=t(a,r),s&&l.appendChild(s);return o.innerHTML="",o.appendChild(l),c?wysihtml5.quirks.getCorrectInnerHTML(o):o}function t(e,n){var i,r=e.nodeType,o=e.childNodes,s=o.length,c=a[r],u=0;if(i=c&&c(e),!i)return null;for(u=0;s>u;u++)newChild=t(o[u],n),newChild&&i.appendChild(newChild);return n&&i.childNodes.length<=1&&i.nodeName.toLowerCase()===l&&!i.attributes.length?i.firstChild:i}function n(e){var t,n,r=d.tags,o=e.nodeName.toLowerCase(),s=e.scopeName;if(e._wysihtml5)return null;if(e._wysihtml5=1,"wysihtml5-temp"===e.className)return null;if(s&&"HTML"!=s&&(o=s+":"+o),"outerHTML"in e&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==e.nodeName||"</p>"===e.outerHTML.slice(-4).toLowerCase()||(o="div")),o in r){if(t=r[o],!t||t.remove)return null;t="string"==typeof t?{rename_tag:t}:t}else{if(!e.firstChild)return null;t={rename_tag:l}}return n=e.ownerDocument.createElement(t.rename_tag||o),i(e,n,t),e=null,n}function i(e,t,n){var i,o,s,a,l,u,h,m={},g=n.set_class,v=n.add_class,y=n.set_attributes,b=n.check_attributes,w=d.classes,_=0,x=[],C=[],k=[],T=[];if(y&&(m=wysihtml5.lang.object(y).clone()),b)for(l in b)h=f[b[l]],h&&(u=h(r(e,l)),"string"==typeof u&&(m[l]=u));if(g&&x.push(g),v)for(l in v)h=p[v[l]],h&&(a=h(r(e,l)),"string"==typeof a&&x.push(a));for(w["_wysihtml5-temp-placeholder"]=1,T=e.getAttribute("class"),T&&(x=x.concat(T.split(c))),i=x.length;i>_;_++)s=x[_],w[s]&&C.push(s);for(o=C.length;o--;)s=C[o],wysihtml5.lang.array(k).contains(s)||k.unshift(s);k.length&&(m["class"]=k.join(" "));for(l in m)try{t.setAttribute(l,m[l])}catch(S){}m.src&&("undefined"!=typeof m.width&&t.setAttribute("width",m.width),"undefined"!=typeof m.height&&t.setAttribute("height",m.height))}function r(e,t){t=t.toLowerCase();var n=e.nodeName;if("IMG"==n&&"src"==t&&o(e)===!0)return e.src;if(h&&"outerHTML"in e){var i=e.outerHTML.toLowerCase(),r=-1!=i.indexOf(" "+t+"=");return r?e.getAttribute(t):null}return e.getAttribute(t)}function o(e){try{return e.complete&&!e.mozMatchesSelector(":-moz-broken")}catch(t){if(e.complete&&"complete"===e.readyState)return!0}}function s(e){return e.ownerDocument.createTextNode(e.data)}var a={1:n,3:s},l="span",c=/\s+/,u={tags:{},classes:{}},d={},h=!wysihtml5.browser.supportsGetAttributeCorrectly(),f={url:function(){var e=/^https?:\/\//i;return function(t){return t&&t.match(e)?t.replace(e,function(e){return e.toLowerCase()}):null}}(),alt:function(){var e=/[^ a-z0-9_\-]/gi;return function(t){return t?t.replace(e,""):""}}(),numbers:function(){var e=/\D/g;return function(t){return t=(t||"").replace(e,""),t||null}}()},p={align_img:function(){var e={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return e[String(t).toLowerCase()]}}(),align_text:function(){var e={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return e[String(t).toLowerCase()]}}(),clear_br:function(){var e={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return e[String(t).toLowerCase()]}}(),size_font:function(){var e={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return e[String(t).charAt(0)]}}()};return e}(),wysihtml5.dom.removeEmptyTextNodes=function(e){for(var t,n=wysihtml5.lang.array(e.childNodes).get(),i=n.length,r=0;i>r;r++)t=n[r],t.nodeType===wysihtml5.TEXT_NODE&&""===t.data&&t.parentNode.removeChild(t)},wysihtml5.dom.renameElement=function(e,t){for(var n,i=e.ownerDocument.createElement(t);n=e.firstChild;)i.appendChild(n);return wysihtml5.dom.copyAttributes(["align","className"]).from(e).to(i),e.parentNode.replaceChild(i,e),i},wysihtml5.dom.replaceWithChildNodes=function(e){if(e.parentNode){if(!e.firstChild)return e.parentNode.removeChild(e),void 0;for(var t=e.ownerDocument.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e),e=t=null}},function(e){function t(t){return"block"===e.getStyle("display").from(t)}function n(e){return"BR"===e.nodeName}function i(e){var t=e.ownerDocument.createElement("br");e.appendChild(t)}function r(e){if("MENU"===e.nodeName||"UL"===e.nodeName||"OL"===e.nodeName){var r,o,s,a,l,c=e.ownerDocument,u=c.createDocumentFragment(),d=e.previousElementSibling||e.previousSibling;for(d&&!t(d)&&i(u);l=e.firstChild;){for(o=l.lastChild;r=l.firstChild;)s=r===o,a=s&&!t(r)&&!n(r),u.appendChild(r),a&&i(u);l.parentNode.removeChild(l)}e.parentNode.replaceChild(u,e)}}e.resolveList=r}(wysihtml5.dom),function(e){var t=document,n=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],i=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],r=["referrer","write","open","close"];e.dom.Sandbox=Base.extend({constructor:function(t,n){this.callback=t||e.EMPTY_FUNCTION,this.config=e.lang.object({}).merge(n).get(),this.iframe=this._createIframe()},insertInto:function(e){"string"==typeof e&&(e=t.getElementById(e)),e.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var n=this,i=t.createElement("iframe");return i.className="wysihtml5-sandbox",e.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(i),e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(i.src="javascript:'<html></html>'"),i.onload=function(){i.onreadystatechange=i.onload=null,n._onLoadIframe(i)},i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&(i.onreadystatechange=i.onload=null,n._onLoadIframe(i))},i},_onLoadIframe:function(o){if(e.dom.contains(t.documentElement,o)){var s=this,a=o.contentWindow,l=o.contentWindow.document,c=t.characterSet||t.charset||"utf-8",u=this._getHtml({charset:c,stylesheets:this.config.stylesheets});if(l.open("text/html","replace"),l.write(u),l.close(),this.getWindow=function(){return o.contentWindow},this.getDocument=function(){return o.contentWindow.document},a.onerror=function(e,t,n){throw new Error("wysihtml5.Sandbox: "+e,t,n)},!e.browser.supportsSandboxedIframes()){var d,h;for(d=0,h=n.length;h>d;d++)this._unset(a,n[d]);for(d=0,h=i.length;h>d;d++)this._unset(a,i[d],e.EMPTY_FUNCTION);for(d=0,h=r.length;h>d;d++)this._unset(l,r[d]);this._unset(l,"cookie","",!0)}this.loaded=!0,setTimeout(function(){s.callback(s)},0)}},_getHtml:function(t){var n,i=t.stylesheets,r="",o=0;if(i="string"==typeof i?[i]:i)for(n=i.length;n>o;o++)r+='<link rel="stylesheet" href="'+i[o]+'">';return t.stylesheets=r,e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)},_unset:function(t,n,i,r){try{t[n]=i}catch(o){}try{t.__defineGetter__(n,function(){return i})}catch(o){}if(r)try{t.__defineSetter__(n,function(){})}catch(o){}if(!e.browser.crashesWhenDefineProperty(n))try{var s={get:function(){return i}};r&&(s.set=function(){}),Object.defineProperty(t,n,s)}catch(o){}}})}(wysihtml5),function(){var e={className:"class"};wysihtml5.dom.setAttributes=function(t){return{on:function(n){for(var i in t)n.setAttribute(e[i]||i,t[i])}}}}(),wysihtml5.dom.setStyles=function(e){return{on:function(t){var n=t.style;if("string"==typeof e)return n.cssText+=";"+e,void 0;for(var i in e)"float"===i?(n.cssFloat=e[i],n.styleFloat=e[i]):n[i]=e[i]}}},function(e){e.simulatePlaceholder=function(t,n,i){var r="placeholder",o=function(){n.hasPlaceholderSet()&&n.clear(),e.removeClass(n.element,r)},s=function(){n.isEmpty()&&(n.setValue(i),e.addClass(n.element,r))};t.observe("set_placeholder",s).observe("unset_placeholder",o).observe("focus:composer",o).observe("paste:composer",o).observe("blur:composer",s),s()}}(wysihtml5.dom),function(e){var t=document.documentElement;"textContent"in t?(e.setTextContent=function(e,t){e.textContent=t},e.getTextContent=function(e){return e.textContent}):"innerText"in t?(e.setTextContent=function(e,t){e.innerText=t},e.getTextContent=function(e){return e.innerText}):(e.setTextContent=function(e,t){e.nodeValue=t},e.getTextContent=function(e){return e.nodeValue})}(wysihtml5.dom),wysihtml5.quirks.cleanPastedHTML=function(){function e(e,n,i){n=n||t,i=i||e.ownerDocument||document;var r,o,s,a,l,c="string"==typeof e,u=0;r=c?wysihtml5.dom.getAsDom(e,i):e;for(l in n)for(s=r.querySelectorAll(l),o=n[l],a=s.length;a>u;u++)o(s[u]);return s=e=n=null,c?r.innerHTML:r}var t={"a u":wysihtml5.dom.replaceWithChildNodes};return e}(),function(e){var t=e.dom;e.quirks.ensureProperClearing=function(){var e=function(){var e=this;setTimeout(function(){var t=e.innerHTML.toLowerCase();("<p>&nbsp;</p>"==t||"<p>&nbsp;</p><p>&nbsp;</p>"==t)&&(e.innerHTML="")},0)};return function(n){t.observe(n.element,["cut","keydown"],e)}}(),e.quirks.ensureProperClearingOfLists=function(){var n=["OL","UL","MENU"],i=function(i,r){if(r.firstChild&&e.lang.array(n).contains(r.firstChild.nodeName)){var o=t.getParentElement(i,{nodeName:n});if(o){var s=o==r.firstChild;if(s){var a=o.childNodes.length<=1;if(a){var l=o.firstChild?""===o.firstChild.innerHTML:!0;l&&o.parentNode.removeChild(o)}}}}};return function(n){t.observe(n.element,"keydown",function(t){if(t.keyCode===e.BACKSPACE_KEY){var r=n.selection.getSelectedNode();i(r,n.element)}})}}()}(wysihtml5),function(e){var t="%7E";e.quirks.getCorrectInnerHTML=function(n){var i=n.innerHTML;if(-1===i.indexOf(t))return i;var r,o,s,a,l=n.querySelectorAll("[href*='~'], [src*='~']");for(a=0,s=l.length;s>a;a++)r=l[a].href||l[a].src,o=e.lang.string(r).replace("~").by(t),i=e.lang.string(i).replace(o).by(r);return i}}(wysihtml5),function(e){var t=e.dom,n=["LI","P","H1","H2","H3","H4","H5","H6"],i=["UL","OL","MENU"];e.quirks.insertLineBreakOnReturn=function(r){function o(n){var i=t.getParentElement(n,{nodeName:["P","DIV"]},2);if(i){var o=document.createTextNode(e.INVISIBLE_SPACE);t.insert(o).before(i),t.replaceWithChildNodes(i),r.selection.selectNode(o)}}function s(s){var a=s.keyCode;if(!(s.shiftKey||a!==e.ENTER_KEY&&a!==e.BACKSPACE_KEY)){var l=(s.target,r.selection.getSelectedNode()),c=t.getParentElement(l,{nodeName:n},4);return c?("LI"!==c.nodeName||a!==e.ENTER_KEY&&a!==e.BACKSPACE_KEY?c.nodeName.match(/H[1-6]/)&&a===e.ENTER_KEY&&setTimeout(function(){o(r.selection.getSelectedNode())},0):setTimeout(function(){var e,n=r.selection.getSelectedNode();n&&(e=t.getParentElement(n,{nodeName:i},2),e||o(n))},0),void 0):(a!==e.ENTER_KEY||e.browser.insertsLineBreaksOnReturn()||(r.commands.exec("insertLineBreak"),s.preventDefault()),void 0)}}t.observe(r.element.ownerDocument,"keydown",s)}}(wysihtml5),function(e){var t="wysihtml5-quirks-redraw";e.quirks.redraw=function(n){e.dom.addClass(n,t),e.dom.removeClass(n,t);try{var i=n.ownerDocument;i.execCommand("italic",!1,null),i.execCommand("italic",!1,null)}catch(r){}}}(wysihtml5),function(e){function t(e){var t=0;if(e.parentNode)do t+=e.offsetTop||0,e=e.offsetParent;while(e);return t}var n=e.dom;e.Selection=Base.extend({constructor:function(e){window.rangy.init(),this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},getBookmark:function(){var e=this.getRange();return e&&e.cloneRange()},setBookmark:function(e){e&&this.setSelection(e)},setBefore:function(e){var t=rangy.createRange(this.doc);return t.setStartBefore(e),t.setEndBefore(e),this.setSelection(t)},setAfter:function(e){var t=rangy.createRange(this.doc);return t.setStartAfter(e),t.setEndAfter(e),this.setSelection(t)},selectNode:function(t){var i=rangy.createRange(this.doc),r=t.nodeType===e.ELEMENT_NODE,o="canHaveHTML"in t?t.canHaveHTML:"IMG"!==t.nodeName,s=r?t.innerHTML:t.data,a=""===s||s===e.INVISIBLE_SPACE,l=n.getStyle("display").from(t),c="block"===l||"list-item"===l;if(a&&r&&o)try{t.innerHTML=e.INVISIBLE_SPACE}catch(u){}o?i.selectNodeContents(t):i.selectNode(t),o&&a&&r?i.collapse(c):o&&a&&(i.setStartAfter(t),i.setEndAfter(t)),this.setSelection(i)},getSelectedNode:function(e){var t,n;return e&&this.doc.selection&&"Control"===this.doc.selection.type&&(n=this.doc.selection.createRange(),n&&n.length)?n.item(0):(t=this.getSelection(this.doc),t.focusNode===t.anchorNode?t.focusNode:(n=this.getRange(this.doc),n?n.commonAncestorContainer:this.doc.body))},executeAndRestore:function(t,n){var i,r=this.doc.body,o=n&&r.scrollTop,s=n&&r.scrollLeft,a="_wysihtml5-temp-placeholder",l='<span class="'+a+'">'+e.INVISIBLE_SPACE+"</span>",c=this.getRange(this.doc);if(!c)return t(r,r),void 0;var u=c.createContextualFragment(l);c.insertNode(u);try{t(c.startContainer,c.endContainer)}catch(d){setTimeout(function(){throw d},0)}caretPlaceholder=this.doc.querySelector("."+a),caretPlaceholder?(i=rangy.createRange(this.doc),i.selectNode(caretPlaceholder),i.deleteContents(),this.setSelection(i)):r.focus(),n&&(r.scrollTop=o,r.scrollLeft=s);try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(h){}},executeAndRestoreSimple:function(e){var t,n,i,r,o,s=this.getRange(),a=this.doc.body;if(!s)return e(a,a),void 0;r=s.getNodes([3]),n=r[0]||s.startContainer,i=r[r.length-1]||s.endContainer,o={collapsed:s.collapsed,startContainer:n,startOffset:n===s.startContainer?s.startOffset:0,endContainer:i,endOffset:i===s.endContainer?s.endOffset:i.length};try{e(s.startContainer,s.endContainer)}catch(l){setTimeout(function(){throw l},0)}t=rangy.createRange(this.doc);try{t.setStart(o.startContainer,o.startOffset)}catch(c){}try{t.setEnd(o.endContainer,o.endOffset)}catch(u){}try{this.setSelection(t)}catch(d){}},insertHTML:function(e){var t=rangy.createRange(this.doc),n=t.createContextualFragment(e),i=n.lastChild;this.insertNode(n),i&&this.setAfter(i)},insertNode:function(e){var t=this.getRange();t&&t.insertNode(e)},surround:function(e){var t=this.getRange();if(t)try{t.surroundContents(e),this.selectNode(e)}catch(n){e.appendChild(t.extractContents()),t.insertNode(e)}},scrollIntoView:function(){var n,i=this.doc,r=i.documentElement.scrollHeight>i.documentElement.offsetHeight,o=i._wysihtml5ScrollIntoViewElement=i._wysihtml5ScrollIntoViewElement||function(){var t=i.createElement("span");return t.innerHTML=e.INVISIBLE_SPACE,t}();r&&(this.insertNode(o),n=t(o),o.parentNode.removeChild(o),n>i.body.scrollTop&&(i.body.scrollTop=n))},selectLine:function(){e.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var e=this.doc.defaultView,t=e.getSelection();t.modify("extend","left","lineboundary"),t.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var e,t,n,i,r,o=this.doc.selection.createRange(),s=o.boundingTop,a=(o.boundingHeight,this.doc.body.scrollWidth);if(o.moveToPoint){for(0===s&&(n=this.doc.createElement("span"),this.insertNode(n),s=n.offsetTop,n.parentNode.removeChild(n)),s+=1,i=-10;a>i;i+=2)try{o.moveToPoint(i,s);break}catch(l){}for(e=s,t=this.doc.selection.createRange(),r=a;r>=0;r--)try{t.moveToPoint(r,e);break}catch(c){}o.setEndPoint("EndToEnd",t),o.select()}},getText:function(){var e=this.getSelection();return e?e.toString():""},getNodes:function(e,t){var n=this.getRange();return n?n.getNodes([e],t):[]},getRange:function(){var e=this.getSelection();return e&&e.rangeCount&&e.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(e){var t=this.doc.defaultView||this.doc.parentWindow,n=rangy.getSelection(t);return n.setSingleRange(e)}})}(wysihtml5),function(e,t){function n(e,t,n){if(!e.className)return!1;var i=e.className.match(n)||[];return i[i.length-1]===t}function i(e,t,n){e.className?(r(e,n),e.className+=" "+t):e.className=t}function r(e,t){e.className&&(e.className=e.className.replace(t,""))}function o(e,t){return e.className.replace(f," ")==t.className.replace(f," ")}function s(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}function a(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,i,r,o=0,s=e.attributes.length;s>o;++o)if(n=e.attributes[o],r=n.name,"class"!=r){if(i=t.attributes.getNamedItem(r),n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function l(e,n){return t.dom.isCharacterDataNode(e)?0==n?!!e.previousSibling:n==e.length?!!e.nextSibling:!0:n>0&&n<e.childNodes.length}function c(e,n,i){var r;if(t.dom.isCharacterDataNode(n)&&(0==i?(i=t.dom.getNodeIndex(n),n=n.parentNode):i==n.length?(i=t.dom.getNodeIndex(n)+1,n=n.parentNode):r=t.dom.splitDataNode(n,i)),!r){r=n.cloneNode(!1),r.id&&r.removeAttribute("id");for(var o;o=n.childNodes[i];)r.appendChild(o);t.dom.insertAfter(r,n)}return n==e?r:c(e,r.parentNode,t.dom.getNodeIndex(r))}function u(t){this.isElementMerge=t.nodeType==e.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?t.lastChild:t,this.textNodes=[this.firstTextNode]}function d(e,t,n,i){this.tagNames=e||[h],this.cssClass=t||"",this.similarClassRegExp=n,this.normalize=i,this.applyToAnyTagName=!1}var h="span",f=/\s+/g;u.prototype={doMerge:function(){for(var e,t,n,i=[],r=0,o=this.textNodes.length;o>r;++r)e=this.textNodes[r],t=e.parentNode,i[r]=e.data,r&&(t.removeChild(e),t.hasChildNodes()||t.parentNode.removeChild(t));return this.firstTextNode.data=n=i.join(""),n},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){for(var e=[],t=0,n=this.textNodes.length;n>t;++t)e[t]="'"+this.textNodes[t].data+"'";return"[Merge("+e.join(",")+")]"}},d.prototype={getAncestorWithClass:function(i){for(var r;i;){if(r=this.cssClass?n(i,this.cssClass,this.similarClassRegExp):!0,i.nodeType==e.ELEMENT_NODE&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&r)return i;i=i.parentNode}return!1},postApply:function(e,t){for(var n,i,r,o=e[0],s=e[e.length-1],a=[],l=o,c=s,d=0,h=s.length,f=0,p=e.length;p>f;++f)i=e[f],r=this.getAdjacentMergeableTextNode(i.parentNode,!1),r?(n||(n=new u(r),a.push(n)),n.textNodes.push(i),i===o&&(l=n.firstTextNode,d=l.length),i===s&&(c=n.firstTextNode,h=n.getLength())):n=null;
var m=this.getAdjacentMergeableTextNode(s.parentNode,!0);if(m&&(n||(n=new u(s),a.push(n)),n.textNodes.push(m)),a.length){for(f=0,p=a.length;p>f;++f)a[f].doMerge();t.setStart(l,d),t.setEnd(c,h)}},getAdjacentMergeableTextNode:function(t,n){var i,r=t.nodeType==e.TEXT_NODE,o=r?t.parentNode:t,s=n?"nextSibling":"previousSibling";if(r){if(i=t[s],i&&i.nodeType==e.TEXT_NODE)return i}else if(i=o[s],i&&this.areElementsMergeable(t,i))return i[n?"firstChild":"lastChild"];return null},areElementsMergeable:function(e,n){return t.dom.arrayContains(this.tagNames,(e.tagName||"").toLowerCase())&&t.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase())&&o(e,n)&&a(e,n)},createContainer:function(e){var t=e.createElement(this.tagNames[0]);return this.cssClass&&(t.className=this.cssClass),t},applyToTextNode:function(e){var n=e.parentNode;if(1==n.childNodes.length&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase()))this.cssClass&&i(n,this.cssClass,this.similarClassRegExp);else{var r=this.createContainer(t.dom.getDocument(e));e.parentNode.insertBefore(r,e),r.appendChild(e)}},isRemovable:function(n){return t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&e.lang.string(n.className).trim()==this.cssClass},undoToTextNode:function(e,t,n){if(!t.containsNode(n)){var i=t.cloneRange();i.selectNode(n),i.isPointInRange(t.endContainer,t.endOffset)&&l(t.endContainer,t.endOffset)&&(c(n,t.endContainer,t.endOffset),t.setEndAfter(n)),i.isPointInRange(t.startContainer,t.startOffset)&&l(t.startContainer,t.startOffset)&&(n=c(n,t.startContainer,t.startOffset))}this.similarClassRegExp&&r(n,this.similarClassRegExp),this.isRemovable(n)&&s(n)},applyToRange:function(t){var n=t.getNodes([e.TEXT_NODE]);if(!n.length)try{var i=this.createContainer(t.endContainer.ownerDocument);return t.surroundContents(i),this.selectNode(t,i),void 0}catch(r){}if(t.splitBoundaries(),n=t.getNodes([e.TEXT_NODE]),n.length){for(var o,s=0,a=n.length;a>s;++s)o=n[s],this.getAncestorWithClass(o)||this.applyToTextNode(o);t.setStart(n[0],0),o=n[n.length-1],t.setEnd(o,o.length),this.normalize&&this.postApply(n,t)}},undoToRange:function(t){var n,i,r=t.getNodes([e.TEXT_NODE]);if(r.length)t.splitBoundaries(),r=t.getNodes([e.TEXT_NODE]);else{var o=t.endContainer.ownerDocument,s=o.createTextNode(e.INVISIBLE_SPACE);t.insertNode(s),t.selectNode(s),r=[s]}for(var a=0,l=r.length;l>a;++a)n=r[a],i=this.getAncestorWithClass(n),i&&this.undoToTextNode(n,t,i);1==l?this.selectNode(t,r[0]):(t.setStart(r[0],0),n=r[r.length-1],t.setEnd(n,n.length),this.normalize&&this.postApply(r,t))},selectNode:function(t,n){var i=n.nodeType===e.ELEMENT_NODE,r="canHaveHTML"in n?n.canHaveHTML:!0,o=i?n.innerHTML:n.data,s=""===o||o===e.INVISIBLE_SPACE;if(s&&i&&r)try{n.innerHTML=e.INVISIBLE_SPACE}catch(a){}t.selectNodeContents(n),s&&i?t.collapse(!1):s&&(t.setStartAfter(n),t.setEndAfter(n))},getTextSelectedByRange:function(e,t){var n=t.cloneRange();n.selectNodeContents(e);var i=n.intersection(t),r=i?i.toString():"";return n.detach(),r},isAppliedToRange:function(t){var n,i=[],r=t.getNodes([e.TEXT_NODE]);if(!r.length)return n=this.getAncestorWithClass(t.startContainer),n?[n]:!1;for(var o,s=0,a=r.length;a>s;++s){if(o=this.getTextSelectedByRange(r[s],t),n=this.getAncestorWithClass(r[s]),""!=o&&!n)return!1;i.push(n)}return i},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)}},e.selection.HTMLApplier=d}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},support:function(e){return wysihtml5.browser.supportsCommand(this.doc,e)},exec:function(e,t){var n=wysihtml5.commands[e],i=wysihtml5.lang.array(arguments).get(),r=n&&n.exec,o=null;if(this.editor.fire("beforecommand:composer"),r)i.unshift(this.composer),o=r.apply(n,i);else try{o=this.doc.execCommand(e,!1,t)}catch(s){}return this.editor.fire("aftercommand:composer"),o},state:function(e){var t=wysihtml5.commands[e],n=wysihtml5.lang.array(arguments).get(),i=t&&t.state;if(i)return n.unshift(this.composer),i.apply(t,n);try{return this.doc.queryCommandState(e)}catch(r){return!1}},value:function(e){var t=wysihtml5.commands[e],n=t&&t.value;if(n)return n.call(t,this.composer,e);try{return this.doc.queryCommandValue(e)}catch(i){return null}}}),function(e){var t;e.commands.bold={exec:function(t,n){return e.commands.formatInline.exec(t,n,"b")},state:function(t,n){return e.commands.formatInline.state(t,n,"b")},value:function(){return t}}}(wysihtml5),function(e){function t(e,t){for(var n,i,r,s=t.length,a=0;s>a;a++)n=t[a],i=o.getParentElement(n,{nodeName:"code"}),r=o.getTextContent(n),r.match(o.autoLink.URL_REG_EXP)&&!i?i=o.renameElement(n,"code"):o.replaceWithChildNodes(n)}function n(t,n){var s,a,l,c,u,d,h,f,p,m=t.doc,g="_wysihtml5-temp-"+ +new Date,v=/non-matching-class/g,y=0;for(e.commands.formatInline.exec(t,i,r,g,v),a=m.querySelectorAll(r+"."+g),s=a.length;s>y;y++){l=a[y],l.removeAttribute("class");for(p in n)l.setAttribute(p,n[p])}d=l,1===s&&(h=o.getTextContent(l),c=!!l.querySelector("*"),u=""===h||h===e.INVISIBLE_SPACE,!c&&u&&(o.setTextContent(l,n.text||l.href),f=m.createTextNode(" "),t.selection.setAfter(l),t.selection.insertNode(f),d=f)),t.selection.setAfter(d)}var i,r="A",o=e.dom;e.commands.createLink={exec:function(e,i,r){var o=this.state(e,i);o?e.selection.executeAndRestore(function(){t(e,o)}):(r="object"==typeof r?r:{href:r},n(e,r))},state:function(t,n){return e.commands.formatInline.state(t,n,"A")},value:function(){return i}}}(wysihtml5),function(e){var t,n=/wysiwyg-font-size-[a-z\-]+/g;e.commands.fontSize={exec:function(t,i,r){return e.commands.formatInline.exec(t,i,"span","wysiwyg-font-size-"+r,n)},state:function(t,i,r){return e.commands.formatInline.state(t,i,"span","wysiwyg-font-size-"+r,n)},value:function(){return t}}}(wysihtml5),function(e){var t,n=/wysiwyg-color-[a-z]+/g;e.commands.foreColor={exec:function(t,i,r){return e.commands.formatInline.exec(t,i,"span","wysiwyg-color-"+r,n)},state:function(t,i,r){return e.commands.formatInline.state(t,i,"span","wysiwyg-color-"+r,n)},value:function(){return t}}}(wysihtml5),function(e){function t(e,t,i){e.className?(n(e,i),e.className+=" "+t):e.className=t}function n(e,t){e.className=e.className.replace(t,"")}function i(t){return t.nodeType===e.TEXT_NODE&&!e.lang.string(t.data).trim()}function r(e){for(var t=e.previousSibling;t&&i(t);)t=t.previousSibling;return t}function o(e){for(var t=e.nextSibling;t&&i(t);)t=t.nextSibling;return t}function s(e){var t=e.ownerDocument,n=o(e),i=r(e);n&&!u(n)&&e.parentNode.insertBefore(t.createElement("br"),n),i&&!u(i)&&e.parentNode.insertBefore(t.createElement("br"),e)}function a(e){var t=o(e),n=r(e);t&&c(t)&&t.parentNode.removeChild(t),n&&c(n)&&n.parentNode.removeChild(n)}function l(e){var t=e.lastChild;t&&c(t)&&t.parentNode.removeChild(t)}function c(e){return"BR"===e.nodeName}function u(e){return c(e)?!0:"block"===m.getStyle("display").from(e)?!0:!1}function d(t,n,i,r){if(r)var o=m.observe(t,"DOMNodeInserted",function(t){var n,i=t.target;i.nodeType===e.ELEMENT_NODE&&(n=m.getStyle("display").from(i),"inline"!==n.substr(0,6)&&(i.className+=" "+r))});t.execCommand(n,!1,i),o&&o.stop()}function h(e,t){e.selection.selectLine(),e.selection.surround(t),a(t),l(t),e.selection.selectNode(t)}function f(t){return!!e.lang.string(t.className).trim()}var p,m=e.dom,g="DIV",v=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE",g];e.commands.formatBlock={exec:function(i,r,o,a,l){var c,u=i.doc,p=this.state(i,r,o,a,l);return o="string"==typeof o?o.toUpperCase():o,p?(i.selection.executeAndRestoreSimple(function(){l&&n(p,l);var e=f(p);e||p.nodeName!==(o||g)?e&&m.renameElement(p,g):(s(p),m.replaceWithChildNodes(p))}),void 0):(null===o||e.lang.array(v).contains(o))&&(c=i.selection.getSelectedNode(),p=m.getParentElement(c,{nodeName:v}))?(i.selection.executeAndRestoreSimple(function(){o&&(p=m.renameElement(p,o)),a&&t(p,a,l)}),void 0):i.commands.support(r)?(d(u,r,o||g,a),void 0):(p=u.createElement(o||g),a&&(p.className=a),h(i,p),void 0)},state:function(e,t,n,i,r){n="string"==typeof n?n.toUpperCase():n;var o=e.selection.getSelectedNode();return m.getParentElement(o,{nodeName:n,className:i,classRegExp:r})},value:function(){return p}}}(wysihtml5),function(e){function t(e){var t=r[e];return t?[e.toLowerCase(),t.toLowerCase()]:[e.toLowerCase()]}function n(n,i,r){var s=n+":"+i;return o[s]||(o[s]=new e.selection.HTMLApplier(t(n),i,r,!0)),o[s]}var i,r={strong:"b",em:"i",b:"strong",i:"em"},o={};e.commands.formatInline={exec:function(e,t,i,r,o){var s=e.selection.getRange();return s?(n(i,r,o).toggleRange(s),e.selection.setSelection(s),void 0):!1},state:function(t,i,o,s,a){var l,c=t.doc,u=r[o]||o;return e.dom.hasElementWithTagName(c,o)||e.dom.hasElementWithTagName(c,u)?s&&!e.dom.hasElementWithClassName(c,s)?!1:(l=t.selection.getRange(),l?n(o,s,a).isAppliedToRange(l):!1):!1},value:function(){return i}}}(wysihtml5),function(e){var t;e.commands.insertHTML={exec:function(e,t,n){e.commands.support(t)?e.doc.execCommand(t,!1,n):e.selection.insertHTML(n)},state:function(){return!1},value:function(){return t}}}(wysihtml5),function(e){var t="IMG";e.commands.insertImage={exec:function(n,i,r){r="object"==typeof r?r:{src:r};var o,s,a,l=n.doc,c=this.state(n);if(c)return n.selection.setBefore(c),a=c.parentNode,a.removeChild(c),e.dom.removeEmptyTextNodes(a),"A"!==a.nodeName||a.firstChild||(n.selection.setAfter(a),a.parentNode.removeChild(a)),e.quirks.redraw(n.element),void 0;c=l.createElement(t);for(s in r)c[s]=r[s];n.selection.insertNode(c),e.browser.hasProblemsSettingCaretAfterImg()?(o=l.createTextNode(e.INVISIBLE_SPACE),n.selection.insertNode(o),n.selection.setAfter(o)):n.selection.setAfter(c)},state:function(n){var i,r,o,s=n.doc;return e.dom.hasElementWithTagName(s,t)?(i=n.selection.getSelectedNode())?i.nodeName===t?i:i.nodeType!==e.ELEMENT_NODE?!1:(r=n.selection.getText(),(r=e.lang.string(r).trim())?!1:(o=n.selection.getNodes(e.ELEMENT_NODE,function(e){return"IMG"===e.nodeName}),1!==o.length?!1:o[0])):!1:!1},value:function(e){var t=this.state(e);return t&&t.src}}}(wysihtml5),function(e){var t,n="<br>"+(e.browser.needsSpaceAfterLineBreak()?" ":"");e.commands.insertLineBreak={exec:function(t,i){t.commands.support(i)?(t.doc.execCommand(i,!1,null),e.browser.autoScrollsToCaret()||t.selection.scrollIntoView()):t.commands.exec("insertHTML",n)},state:function(){return!1},value:function(){return t}}}(wysihtml5),function(e){var t;e.commands.insertOrderedList={exec:function(t,n){var i,r,o=t.doc,s=t.selection.getSelectedNode(),a=e.dom.getParentElement(s,{nodeName:"OL"}),l=e.dom.getParentElement(s,{nodeName:"UL"}),c="_wysihtml5-temp-"+(new Date).getTime();return t.commands.support(n)?(o.execCommand(n,!1,null),void 0):(a?t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(a)}):l?t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(l,"ol")}):(t.commands.exec("formatBlock","div",c),r=o.querySelector("."+c),i=""===r.innerHTML||r.innerHTML===e.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){a=e.dom.convertToList(r,"ol")}),i&&t.selection.selectNode(a.querySelector("li"))),void 0)},state:function(t){var n=t.selection.getSelectedNode();return e.dom.getParentElement(n,{nodeName:"OL"})},value:function(){return t}}}(wysihtml5),function(e){var t;e.commands.insertUnorderedList={exec:function(t,n){var i,r,o=t.doc,s=t.selection.getSelectedNode(),a=e.dom.getParentElement(s,{nodeName:"UL"}),l=e.dom.getParentElement(s,{nodeName:"OL"}),c="_wysihtml5-temp-"+(new Date).getTime();return t.commands.support(n)?(o.execCommand(n,!1,null),void 0):(a?t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(a)}):l?t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(l,"ul")}):(t.commands.exec("formatBlock","div",c),r=o.querySelector("."+c),i=""===r.innerHTML||r.innerHTML===e.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){a=e.dom.convertToList(r,"ul")}),i&&t.selection.selectNode(a.querySelector("li"))),void 0)},state:function(t){var n=t.selection.getSelectedNode();return e.dom.getParentElement(n,{nodeName:"UL"})},value:function(){return t}}}(wysihtml5),function(e){var t;e.commands.italic={exec:function(t,n){return e.commands.formatInline.exec(t,n,"i")},state:function(t,n){return e.commands.formatInline.state(t,n,"i")},value:function(){return t}}}(wysihtml5),function(e){var t,n="wysiwyg-text-align-center",i=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyCenter={exec:function(t){return e.commands.formatBlock.exec(t,"formatBlock",null,n,i)},state:function(t){return e.commands.formatBlock.state(t,"formatBlock",null,n,i)},value:function(){return t}}}(wysihtml5),function(e){var t,n="wysiwyg-text-align-left",i=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyLeft={exec:function(t){return e.commands.formatBlock.exec(t,"formatBlock",null,n,i)},state:function(t){return e.commands.formatBlock.state(t,"formatBlock",null,n,i)},value:function(){return t}}}(wysihtml5),function(e){var t,n="wysiwyg-text-align-right",i=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyRight={exec:function(t){return e.commands.formatBlock.exec(t,"formatBlock",null,n,i)},state:function(t){return e.commands.formatBlock.state(t,"formatBlock",null,n,i)},value:function(){return t}}}(wysihtml5),function(e){var t;e.commands.underline={exec:function(t,n){return e.commands.formatInline.exec(t,n,"u")},state:function(t,n){return e.commands.formatInline.state(t,n,"u")},value:function(){return t}}}(wysihtml5),function(e){function t(e){for(var t;t=e.querySelector("._wysihtml5-temp");)t.parentNode.removeChild(t)}var n=90,i=89,r=8,o=46,s=40,a='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",l='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",c=e.dom;e.UndoManager=e.lang.Dispatcher.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.element=this.composer.element,this.history=[this.composer.getValue()],this.position=1,this.composer.commands.support("insertHTML")&&this._observe()},_observe:function(){var s,u=this,d=this.composer.sandbox.getDocument();if(c.observe(this.element,"keydown",function(e){if(!e.altKey&&(e.ctrlKey||e.metaKey)){var t=e.keyCode,r=t===n&&!e.shiftKey,o=t===n&&e.shiftKey||t===i;r?(u.undo(),e.preventDefault()):o&&(u.redo(),e.preventDefault())}}),c.observe(this.element,"keydown",function(e){var t=e.keyCode;t!==s&&(s=t,(t===r||t===o)&&u.transact())}),e.browser.hasUndoInContextMenu()){var h,f,p=function(){t(d),clearInterval(h)};c.observe(this.element,"contextmenu",function(){p(),u.composer.selection.executeAndRestoreSimple(function(){u.element.lastChild&&u.composer.selection.setAfter(u.element.lastChild),d.execCommand("insertHTML",!1,a),d.execCommand("insertHTML",!1,l),d.execCommand("undo",!1,null)}),h=setInterval(function(){d.getElementById("_wysihtml5-redo")?(p(),u.redo()):d.getElementById("_wysihtml5-undo")||(p(),u.undo())},400),f||(f=!0,c.observe(document,"mousedown",p),c.observe(d,["mousedown","paste","cut","copy"],p))})}this.editor.observe("newword:composer",function(){u.transact()}).observe("beforecommand:composer",function(){u.transact()})},transact:function(){var e=this.history[this.position-1],t=this.composer.getValue();if(t!=e){var n=this.history.length=this.position;n>s&&(this.history.shift(),this.position--),this.position++,this.history.push(t)}},undo:function(){this.transact(),this.position<=1||(this.set(this.history[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.position>=this.history.length||(this.set(this.history[++this.position-1]),this.editor.fire("redo:composer"))},set:function(e){this.composer.setValue(e),this.editor.focus(!0)}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(e,t,n){this.parent=e,this.element=t,this.config=n,this._observeViewChange()},_observeViewChange:function(){var e=this;this.parent.observe("beforeload",function(){e.parent.observe("change_view",function(t){t===e.name?(e.parent.currentView=e,e.show(),setTimeout(function(){e.focus()},0)):e.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(e){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(e){var t=e.dom,n=e.browser;e.views.Composer=e.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(e,t,n){this.base(e,t,n),this.textarea=this.parent.textarea,this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(t){var n=this.isEmpty()?"":e.quirks.getCorrectInnerHTML(this.element);return t&&(n=this.parent.parse(n)),n=e.lang.string(n).replace(e.INVISIBLE_SPACE).by("")},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.innerHTML=e},show:function(){this.iframe.style.display=this._displayStyle||"",this.disable(),this.enable()},hide:function(){this._displayStyle=t.getStyle("display").from(this.iframe),"none"===this._displayStyle&&(this._displayStyle=null),this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable"),this.base()},enable:function(){this.element.setAttribute("contentEditable","true"),this.base()},focus:function(t){e.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var n=this.element.lastChild;t&&n&&("BR"===n.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var e=this.element.innerHTML,t="blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea";return""===e||e===this.CARET_HACK||this.hasPlaceholderSet()||""===this.getTextContent()&&!this.element.querySelector(t)},_initSandbox:function(){var e=this;this.sandbox=new t.Sandbox(function(){e._create()},{stylesheets:this.config.stylesheets}),this.iframe=this.sandbox.getIframe();var n=document.createElement("input");n.type="hidden",n.name="_wysihtml5_mode",n.value=1;var i=this.textarea.element;t.insert(this.iframe).after(i),t.insert(n).after(i)},_create:function(){var i=this;this.doc=this.sandbox.getDocument(),this.element=this.doc.body,this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0),this.enable(),this.selection=new e.Selection(this.parent),this.commands=new e.Commands(this.parent),t.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),t.addClass(this.element,this.config.composerClassName),this.config.style&&this.style(),this.observe();var r=this.config.name;r&&(t.addClass(this.element,r),t.addClass(this.iframe,r));var o="string"==typeof this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder");o&&t.simulatePlaceholder(this.parent,this,o),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&&setTimeout(function(){i.focus()},100),e.quirks.insertLineBreakOnReturn(this),n.clearsContentEditableCorrectly()||e.quirks.ensureProperClearing(this),n.clearsListsInContentEditableCorrectly()||e.quirks.ensureProperClearingOfLists(this),this.initSync&&this.config.sync&&this.initSync(),this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var i=this,r=n.canDisableAutoLinking(),o=n.doesAutoLinkingInContentEditable();if(r&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink){(!o||o&&r)&&this.parent.observe("newword:composer",function(){i.selection.executeAndRestore(function(e,n){t.autoLink(n.parentNode)})});var s=this.sandbox.getDocument().getElementsByTagName("a"),a=t.autoLink.URL_REG_EXP,l=function(n){var i=e.lang.string(t.getTextContent(n)).trim();return"www."===i.substr(0,4)&&(i="http://"+i),i};t.observe(this.element,"keydown",function(e){if(s.length){var n,r=i.selection.getSelectedNode(e.target.ownerDocument),o=t.getParentElement(r,{nodeName:"A"},4);o&&(n=l(o),setTimeout(function(){var e=l(o);e!==n&&e.match(a)&&o.setAttribute("href",e)},0))}})}},_initObjectResizing:function(){var i=["width","height"],r=i.length,o=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing),this.config.allowObjectResizing?n.supportsEvent("resizeend")&&t.observe(o,"resizeend",function(t){for(var n,s=t.target||t.srcElement,a=s.style,l=0;r>l;l++)n=i[l],a[n]&&(s.setAttribute(n,parseInt(a[n],10)),a[n]="");e.quirks.redraw(o)}):n.supportsEvent("resizestart")&&t.observe(o,"resizestart",function(e){e.preventDefault()})},_initUndoManager:function(){new e.UndoManager(this.parent)}})}(wysihtml5),function(e){var t=e.dom,n=document,i=window,r=n.createElement("div"),o=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],s=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],a=["width","height","top","left","right","bottom"],l=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",e.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],c=function(e){if(e.setActive)try{e.setActive()}catch(r){}else{var o=e.style,s=n.documentElement.scrollTop||n.body.scrollTop,a=n.documentElement.scrollLeft||n.body.scrollLeft,l={position:o.position,top:o.top,left:o.left,WebkitUserSelect:o.WebkitUserSelect};t.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(e),e.focus(),t.setStyles(l).on(e),i.scrollTo&&i.scrollTo(a,s)}};e.views.Composer.prototype.style=function(){var u=this,d=n.querySelector(":focus"),h=this.textarea.element,f=h.hasAttribute("placeholder"),p=f&&h.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||r.cloneNode(!1),this.blurStylesHost=this.blurStylesHost||r.cloneNode(!1),f&&h.removeAttribute("placeholder"),h===d&&h.blur(),t.copyStyles(s).from(h).to(this.iframe).andTo(this.blurStylesHost),t.copyStyles(o).from(h).to(this.element).andTo(this.blurStylesHost),t.insertCSS(l).into(this.element.ownerDocument),c(h),t.copyStyles(s).from(h).to(this.focusStylesHost),t.copyStyles(o).from(h).to(this.focusStylesHost);var m=e.lang.array(s).without(["display"]);if(d?d.focus():h.blur(),f&&h.setAttribute("placeholder",p),!e.browser.hasCurrentStyleProperty())var g=t.observe(i,"resize",function(){if(!t.contains(document.documentElement,u.iframe))return g.stop(),void 0;var e=t.getStyle("display").from(h),n=t.getStyle("display").from(u.iframe);h.style.display="",u.iframe.style.display="none",t.copyStyles(a).from(h).to(u.iframe).andTo(u.focusStylesHost).andTo(u.blurStylesHost),u.iframe.style.display=n,h.style.display=e});return this.parent.observe("focus:composer",function(){t.copyStyles(m).from(u.focusStylesHost).to(u.iframe),t.copyStyles(o).from(u.focusStylesHost).to(u.element)}),this.parent.observe("blur:composer",function(){t.copyStyles(m).from(u.blurStylesHost).to(u.iframe),t.copyStyles(o).from(u.blurStylesHost).to(u.element)}),this}}(wysihtml5),function(e){var t=e.dom,n=e.browser,i={66:"bold",73:"italic",85:"underline"};e.views.Composer.prototype.observe=function(){var r=this,o=this.getValue(),s=this.sandbox.getIframe(),a=this.element,l=n.supportsEventsInIframeCorrectly()?a:this.sandbox.getWindow(),c=n.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];t.observe(s,"DOMNodeRemoved",function(){clearInterval(u),r.parent.fire("destroy:composer")});var u=setInterval(function(){t.contains(document.documentElement,s)||(clearInterval(u),r.parent.fire("destroy:composer"))},250);t.observe(l,"focus",function(){r.parent.fire("focus").fire("focus:composer"),setTimeout(function(){o=r.getValue()},0)}),t.observe(l,"blur",function(){o!==r.getValue()&&r.parent.fire("change").fire("change:composer"),r.parent.fire("blur").fire("blur:composer")}),e.browser.isIos()&&t.observe(a,"blur",function(){var e=a.ownerDocument.createElement("input"),t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft;try{r.selection.insertNode(e)}catch(i){a.appendChild(e)}e.focus(),e.parentNode.removeChild(e),window.scrollTo(n,t)}),t.observe(a,"dragenter",function(){r.parent.fire("unset_placeholder")}),n.firesOnDropOnlyWhenOnDragOverIsCancelled()&&t.observe(a,["dragover","dragenter"],function(e){e.preventDefault()}),t.observe(a,c,function(e){var t,i=e.dataTransfer;console.log("PASTED",e),i&&n.supportsDataTransfer()&&(t=i.getData("text/html")||i.getData("text/plain")),t?(a.focus(),r.commands.exec("insertHTML",t),r.parent.fire("paste").fire("paste:composer"),e.stopPropagation(),e.preventDefault()):setTimeout(function(){r.parent.fire("paste").fire("paste:composer")},0)}),t.observe(a,"keyup",function(t){var n=t.keyCode;(n===e.SPACE_KEY||n===e.ENTER_KEY)&&r.parent.fire("newword:composer")}),this.parent.observe("paste:composer",function(){setTimeout(function(){r.parent.fire("newword:composer")},0)}),n.canSelectImagesInContentEditable()||t.observe(a,"mousedown",function(e){var t=e.target;"IMG"===t.nodeName&&(r.selection.selectNode(t),e.preventDefault())}),t.observe(a,"keydown",function(e){var t=e.keyCode,n=i[t];(e.ctrlKey||e.metaKey)&&!e.altKey&&n&&(r.commands.exec(n),e.preventDefault())}),t.observe(a,"keydown",function(t){var n,i=r.selection.getSelectedNode(!0),o=t.keyCode;!i||"IMG"!==i.nodeName||o!==e.BACKSPACE_KEY&&o!==e.DELETE_KEY||(n=i.parentNode,n.removeChild(i),"A"!==n.nodeName||n.firstChild||n.parentNode.removeChild(n),setTimeout(function(){e.quirks.redraw(a)},0),t.preventDefault())});var d={IMG:"Image: ",A:"Link: "};t.observe(a,"mouseover",function(e){var t,n=e.target,i=n.nodeName;if("A"===i||"IMG"===i){var r=n.hasAttribute("title");r||(t=d[i]+(n.getAttribute("href")||n.getAttribute("src")),n.setAttribute("title",t))}})}}(wysihtml5),function(e){var t=400;e.views.Synchronizer=Base.extend({constructor:function(e,t,n){this.editor=e,this.textarea=t,this.composer=n,this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(e.lang.string(this.composer.getValue()).trim(),t)},fromTextareaToComposer:function(e){var t=this.textarea.getValue();t?this.composer.setValue(t,e):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(e){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(e):this.fromComposerToTextarea(e)},_observe:function(){var n,i=this,r=this.textarea.element.form,o=function(){n=setInterval(function(){i.fromComposerToTextarea()},t)},s=function(){clearInterval(n),n=null};o(),r&&(e.dom.observe(r,"submit",function(){i.sync(!0)}),e.dom.observe(r,"reset",function(){setTimeout(function(){i.fromTextareaToComposer()},0)})),this.editor.observe("change_view",function(e){"composer"!==e||n?"textarea"===e&&(i.fromComposerToTextarea(!0),s()):(i.fromTextareaToComposer(!0),o())}),this.editor.observe("destroy:composer",s)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(e,t,n){this.base(e,t,n),this._observe()},clear:function(){this.element.value=""},getValue:function(e){var t=this.isEmpty()?"":this.element.value;return e&&(t=this.parent.parse(t)),t},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.value=e},hasPlaceholderSet:function(){var e=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),t=this.element.getAttribute("placeholder")||null,n=this.element.value,i=!n;return e&&i||n===t},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var e=this.element,t=this.parent,n={focusin:"focus",focusout:"blur"},i=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];t.observe("beforeload",function(){wysihtml5.dom.observe(e,i,function(e){var i=n[e.type]||e.type;t.fire(i).fire(i+":textarea")}),wysihtml5.dom.observe(e,["paste","drop"],function(){setTimeout(function(){t.fire("paste").fire("paste:textarea")},0)})})}}),function(e){var t=e.dom,n="wysihtml5-command-dialog-opened",i="input, select, textarea",r="[data-wysihtml5-dialog-field]",o="data-wysihtml5-dialog-field";e.toolbar.Dialog=e.lang.Dispatcher.extend({constructor:function(e,t){this.link=e,this.container=t},_observe:function(){if(!this._observed){var r=this,o=function(e){var t=r._serialize();t==r.elementToChange?r.fire("edit",t):r.fire("save",t),r.hide(),e.preventDefault(),e.stopPropagation()};t.observe(r.link,"click",function(){t.hasClass(r.link,n)&&setTimeout(function(){r.hide()},0)}),t.observe(this.container,"keydown",function(t){var n=t.keyCode;n===e.ENTER_KEY&&o(t),n===e.ESCAPE_KEY&&r.hide()}),t.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",o),t.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(e){r.fire("cancel"),r.hide(),e.preventDefault(),e.stopPropagation()});for(var s=this.container.querySelectorAll(i),a=0,l=s.length,c=function(){clearInterval(r.interval)};l>a;a++)t.observe(s[a],"change",c);this._observed=!0}},_serialize:function(){for(var e=this.elementToChange||{},t=this.container.querySelectorAll(r),n=t.length,i=0;n>i;i++)e[t[i].getAttribute(o)]=t[i].value;return e},_interpolate:function(e){for(var t,n,i,s=document.querySelector(":focus"),a=this.container.querySelectorAll(r),l=a.length,c=0;l>c;c++)t=a[c],t!==s&&(e&&"hidden"===t.type||(n=t.getAttribute(o),i=this.elementToChange?this.elementToChange[n]||"":t.defaultValue,t.value=i))},show:function(e){var r=this,o=this.container.querySelector(i);if(this.elementToChange=e,this._observe(),this._interpolate(),e&&(this.interval=setInterval(function(){r._interpolate(!0)},500)),t.addClass(this.link,n),this.container.style.display="",this.fire("show"),o&&!e)try{o.focus()}catch(s){}},hide:function(){clearInterval(this.interval),this.elementToChange=null,t.removeClass(this.link,n),this.container.style.display="none",this.fire("hide")}})}(wysihtml5),function(e){var t=e.dom,n={position:"relative"},i={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},r={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},o={"x-webkit-speech":"",speech:""};e.toolbar.Speech=function(s,a){var l=document.createElement("input");if(!e.browser.supportsSpeechApiOn(l))return a.style.display="none",void 0;var c=document.createElement("div");e.lang.object(i).merge({width:a.offsetWidth+"px",height:a.offsetHeight+"px"}),t.insert(l).into(c),t.insert(c).into(a),t.setStyles(r).on(l),t.setAttributes(o).on(l),t.setStyles(i).on(c),t.setStyles(n).on(a);var u="onwebkitspeechchange"in l?"webkitspeechchange":"speechchange";t.observe(l,u,function(){s.execCommand("insertText",l.value),l.value=""}),t.observe(l,"click",function(e){t.hasClass(a,"wysihtml5-command-disabled")&&e.preventDefault(),e.stopPropagation()})}}(wysihtml5),function(e){var t="wysihtml5-command-disabled",n="wysihtml5-commands-disabled",i="wysihtml5-command-active",r="wysihtml5-action-active",o=e.dom;
e.toolbar.Toolbar=Base.extend({constructor:function(t,n){this.editor=t,this.container="string"==typeof n?document.getElementById(n):n,this.composer=t.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),this.show();for(var i=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),r=i.length,o=0;r>o;o++)new e.toolbar.Speech(this,i[o])},_getLinks:function(t){for(var n,i,r,o,s,a=this[t+"Links"]=e.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+t+"]")).get(),l=a.length,c=0,u=this[t+"Mapping"]={};l>c;c++)n=a[c],r=n.getAttribute("data-wysihtml5-"+t),o=n.getAttribute("data-wysihtml5-"+t+"-value"),i=this.container.querySelector("[data-wysihtml5-"+t+"-group='"+r+"']"),s=this._getDialog(n,r),u[r+":"+o]={link:n,group:i,name:r,value:o,dialog:s,state:!1}},_getDialog:function(t,n){var i,r,o=this,s=this.container.querySelector("[data-wysihtml5-dialog='"+n+"']");return s&&(i=new e.toolbar.Dialog(t,s),i.observe("show",function(){r=o.composer.selection.getBookmark(),o.editor.fire("show:dialog",{command:n,dialogContainer:s,commandLink:t})}),i.observe("save",function(e){r&&o.composer.selection.setBookmark(r),o._execCommand(n,e),o.editor.fire("save:dialog",{command:n,dialogContainer:s,commandLink:t})}),i.observe("cancel",function(){o.editor.focus(!1),o.editor.fire("cancel:dialog",{command:n,dialogContainer:s,commandLink:t})})),i},execCommand:function(e,t){if(!this.commandsDisabled){var n=this.commandMapping[e+":"+t];n&&n.dialog&&!n.state?n.dialog.show():this._execCommand(e,t)}},_execCommand:function(e,t){this.editor.focus(!1),this.composer.commands.exec(e,t),this._updateLinkStates()},execAction:function(e){var t=this.editor;switch(e){case"change_view":t.currentView===t.textarea?t.fire("change_view","composer"):t.fire("change_view","textarea")}},_observe:function(){for(var e=this,t=this.editor,i=this.container,r=this.commandLinks.concat(this.actionLinks),s=r.length,a=0;s>a;a++)o.setAttributes({href:"javascript:;",unselectable:"on"}).on(r[a]);o.delegate(i,"[data-wysihtml5-command]","mousedown",function(e){e.preventDefault()}),o.delegate(i,"[data-wysihtml5-command]","click",function(t){var n=this,i=n.getAttribute("data-wysihtml5-command"),r=n.getAttribute("data-wysihtml5-command-value");e.execCommand(i,r),t.preventDefault()}),o.delegate(i,"[data-wysihtml5-action]","click",function(t){var n=this.getAttribute("data-wysihtml5-action");e.execAction(n),t.preventDefault()}),t.observe("focus:composer",function(){e.bookmark=null,clearInterval(e.interval),e.interval=setInterval(function(){e._updateLinkStates()},500)}),t.observe("blur:composer",function(){clearInterval(e.interval)}),t.observe("destroy:composer",function(){clearInterval(e.interval)}),t.observe("change_view",function(t){setTimeout(function(){e.commandsDisabled="composer"!==t,e._updateLinkStates(),e.commandsDisabled?o.addClass(i,n):o.removeClass(i,n)},0)})},_updateLinkStates:function(){var n,s,a,l,c=(this.composer.element,this.commandMapping),u=this.actionMapping;for(n in c)l=c[n],this.commandsDisabled?(s=!1,o.removeClass(l.link,i),l.group&&o.removeClass(l.group,i),l.dialog&&l.dialog.hide()):(s=this.composer.commands.state(l.name,l.value),e.lang.object(s).isArray()&&(s=1===s.length?s[0]:!0),o.removeClass(l.link,t),l.group&&o.removeClass(l.group,t)),l.state!==s&&(l.state=s,s?(o.addClass(l.link,i),l.group&&o.addClass(l.group,i),l.dialog&&("object"==typeof s?l.dialog.show(s):l.dialog.hide())):(o.removeClass(l.link,i),l.group&&o.removeClass(l.group,i),l.dialog&&l.dialog.hide()));for(n in u)a=u[n],"change_view"===a.name&&(a.state=this.editor.currentView===this.editor.textarea,a.state?o.addClass(a.link,r):o.removeClass(a.link,r))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(e){var t,n={name:t,style:!0,toolbar:t,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:e.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:t,allowObjectResizing:!0,supportTouchDevices:!0};e.Editor=e.lang.Dispatcher.extend({constructor:function(t,i){if(this.textareaElement="string"==typeof t?document.getElementById(t):t,this.config=e.lang.object({}).merge(n).merge(i).get(),this.textarea=new e.views.Textarea(this,this.textareaElement,this.config),this.currentView=this.textarea,this._isCompatible=e.browser.supported(),!this._isCompatible||!this.config.supportTouchDevices&&e.browser.isTouchDevice()){var r=this;return setTimeout(function(){r.fire("beforeload").fire("load")},0),void 0}e.dom.addClass(document.body,this.config.bodyClassName),this.composer=new e.views.Composer(this,this.textareaElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.observe("beforeload",function(){this.synchronizer=new e.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new e.toolbar.Toolbar(this,this.config.toolbar))});try{console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")}catch(o){}},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(e){return this.currentView.getValue(e)},setValue:function(e,t){return e?(this.currentView.setValue(e,t),this):this.clear()},focus:function(e){return this.currentView.focus(e),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(t){var n=this.config.parser(t,this.config.parserRules,this.composer.sandbox.getDocument(),!0);return"object"==typeof t&&e.quirks.redraw(t),n},_initParser:function(){this.observe("paste:composer",function(){var t=!0,n=this;n.composer.selection.executeAndRestore(function(){e.quirks.cleanPastedHTML(n.composer.element),n.parse(n.composer.element)},t)}),this.observe("paste:textarea",function(){var e,t=this.textarea.getValue();e=this.parse(t),this.textarea.setValue(e)})}})}(wysihtml5),!function(e,t){"use strict";var n={"font-styles":function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle"+n+"' data-toggle='dropdown' href='#'>"+"<i class='icon-font'></i>&nbsp;<span class='current-font'>"+e.font_styles.normal+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div' tabindex='-1'>"+e.font_styles.normal+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1' tabindex='-1'>"+e.font_styles.h1+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2' tabindex='-1'>"+e.font_styles.h2+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3' tabindex='-1'>"+e.font_styles.h3+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h4'>"+e.font_styles.h4+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h5'>"+e.font_styles.h5+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h6'>"+e.font_styles.h6+"</a></li>"+"</ul>"+"</li>"},emphasis:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn"+n+"' data-wysihtml5-command='bold' title='CTRL+B' tabindex='-1'>"+e.emphasis.bold+"</a>"+"<a class='btn"+n+"' data-wysihtml5-command='italic' title='CTRL+I' tabindex='-1'>"+e.emphasis.italic+"</a>"+"<a class='btn"+n+"' data-wysihtml5-command='underline' title='CTRL+U' tabindex='-1'>"+e.emphasis.underline+"</a>"+"</div>"+"</li>"},lists:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn"+n+"' data-wysihtml5-command='insertUnorderedList' title='"+e.lists.unordered+"' tabindex='-1'><i class='icon-list'></i></a>"+"<a class='btn"+n+"' data-wysihtml5-command='insertOrderedList' title='"+e.lists.ordered+"' tabindex='-1'><i class='icon-th-list'></i></a>"+"<a class='btn"+n+"' data-wysihtml5-command='Outdent' title='"+e.lists.outdent+"' tabindex='-1'><i class='icon-indent-right'></i></a>"+"<a class='btn"+n+"' data-wysihtml5-command='Indent' title='"+e.lists.indent+"' tabindex='-1'><i class='icon-indent-left'></i></a>"+"</div>"+"</li>"},link:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='bootstrap-wysihtml5-insert-link-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+e.link.insert+"</h3>"+"</div>"+"<div class='modal-body'>"+"<input value='http://' class='bootstrap-wysihtml5-insert-link-url input-xlarge'>"+"<label class='checkbox'> <input type='checkbox' class='bootstrap-wysihtml5-insert-link-target' checked>"+e.link.target+"</label>"+"</div>"+"<div class='modal-footer'>"+"<a href='#' class='btn' data-dismiss='modal'>"+e.link.cancel+"</a>"+"<a href='#' class='btn btn-primary' data-dismiss='modal'>"+e.link.insert+"</a>"+"</div>"+"</div>"+"<a class='btn"+n+"' data-wysihtml5-command='createLink' title='"+e.link.insert+"' tabindex='-1'><i class='icon-share'></i></a>"+"</li>"},image:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='bootstrap-wysihtml5-insert-image-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+e.image.insert+"</h3>"+"</div>"+"<div class='modal-body'>"+"<input value='http://' class='bootstrap-wysihtml5-insert-image-url input-xlarge'>"+"</div>"+"<div class='modal-footer'>"+"<a href='#' class='btn' data-dismiss='modal'>"+e.image.cancel+"</a>"+"<a href='#' class='btn btn-primary' data-dismiss='modal'>"+e.image.insert+"</a>"+"</div>"+"</div>"+"<a class='btn"+n+"' data-wysihtml5-command='insertImage' title='"+e.image.insert+"' tabindex='-1'><i class='icon-picture'></i></a>"+"</li>"},html:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn"+n+"' data-wysihtml5-action='change_view' title='"+e.html.edit+"' tabindex='-1'><i class='icon-pencil'></i></a>"+"</div>"+"</li>"},color:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle"+n+"' data-toggle='dropdown' href='#' tabindex='-1'>"+"<span class='current-color'>"+e.colours.black+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+e.colours.black+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+e.colours.silver+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+e.colours.gray+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+e.colours.maroon+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+e.colours.red+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+e.colours.purple+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+e.colours.green+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+e.colours.olive+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+e.colours.navy+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+e.colours.blue+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+e.colours.orange+"</a></li>"+"</ul>"+"</li>"}},i=function(e,t,i){return n[e](t,i)},r=function(t,i){this.el=t;var r=i||s;for(var o in r.customTemplates)n[o]=r.customTemplates[o];this.toolbar=this.createToolbar(t,r),this.editor=this.createEditor(i),window.editor=this.editor,e("iframe.wysihtml5-sandbox").each(function(t,n){e(n.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){e("li.dropdown").removeClass("open")}})})};r.prototype={constructor:r,createEditor:function(n){n=n||{},n=e.extend(!0,{},n),n.toolbar=this.toolbar[0];var i=new t.Editor(this.el[0],n);if(n&&n.events)for(var r in n.events)i.on(r,n.events[r]);return i},createToolbar:function(t,n){var r=this,o=e("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),l=n.locale||s.locale||"en";for(var c in s){var u=!1;void 0!==n[c]?n[c]===!0&&(u=!0):u=s[c],u===!0&&(o.append(i(c,a[l],n)),"html"===c&&this.initHtml(o),"link"===c&&this.initInsertLink(o),"image"===c&&this.initInsertImage(o))}if(n.toolbar)for(c in n.toolbar)o.append(n.toolbar[c]);return o.find("a[data-wysihtml5-command='formatBlock']").click(function(t){var n=t.target||t.srcElement,i=e(n);r.toolbar.find(".current-font").text(i.html())}),o.find("a[data-wysihtml5-command='foreColor']").click(function(t){var n=t.target||t.srcElement,i=e(n);r.toolbar.find(".current-color").text(i.html())}),this.el.before(o),o},initHtml:function(e){var t="a[data-wysihtml5-action='change_view']";e.find(t).click(function(){e.find("a.btn").not(t).toggleClass("disabled")})},initInsertImage:function(t){var n,i=this,r=t.find(".bootstrap-wysihtml5-insert-image-modal"),o=r.find(".bootstrap-wysihtml5-insert-image-url"),s=r.find("a.btn-primary"),a=o.val(),l=function(){var e=o.val();o.val(a),i.editor.currentView.element.focus(),n&&(i.editor.composer.selection.setBookmark(n),n=null),i.editor.composer.commands.exec("insertImage",e)};o.keypress(function(e){13==e.which&&(l(),r.modal("hide"))}),s.click(l),r.on("shown",function(){o.focus()}),r.on("hide",function(){i.editor.currentView.element.focus()}),t.find("a[data-wysihtml5-command=insertImage]").click(function(){var t=e(this).hasClass("wysihtml5-command-active");return t?!0:(i.editor.currentView.element.focus(!1),n=i.editor.composer.selection.getBookmark(),r.appendTo("body").modal("show"),r.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()}),!1)})},initInsertLink:function(t){var n,i=this,r=t.find(".bootstrap-wysihtml5-insert-link-modal"),o=r.find(".bootstrap-wysihtml5-insert-link-url"),s=r.find(".bootstrap-wysihtml5-insert-link-target"),a=r.find("a.btn-primary"),l=o.val(),c=function(){var e=o.val();o.val(l),i.editor.currentView.element.focus(),n&&(i.editor.composer.selection.setBookmark(n),n=null);var t=s.prop("checked");i.editor.composer.commands.exec("createLink",{href:e,target:t?"_blank":"_self",rel:t?"nofollow":""})};o.keypress(function(e){13==e.which&&(c(),r.modal("hide"))}),a.click(c),r.on("shown",function(){o.focus()}),r.on("hide",function(){i.editor.currentView.element.focus()}),t.find("a[data-wysihtml5-command=createLink]").click(function(){var t=e(this).hasClass("wysihtml5-command-active");return t?!0:(i.editor.currentView.element.focus(!1),n=i.editor.composer.selection.getBookmark(),r.appendTo("body").modal("show"),r.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()}),!1)})}};var o={resetDefaults:function(){e.fn.wysihtml5.defaultOptions=e.extend(!0,{},e.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(t){return this.each(function(){var n=e(this);n.data("wysihtml5",new r(n,t))})},shallowExtend:function(t){var n=e.extend({},e.fn.wysihtml5.defaultOptions,t||{},e(this).data()),i=this;return o.bypassDefaults.apply(i,[n])},deepExtend:function(t){var n=e.extend(!0,{},e.fn.wysihtml5.defaultOptions,t||{}),i=this;return o.bypassDefaults.apply(i,[n])},init:function(e){var t=this;return o.shallowExtend.apply(t,[e])}};e.fn.wysihtml5=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.wysihtml5"),void 0):o.init.apply(this,arguments)},e.fn.wysihtml5.Constructor=r;var s=e.fn.wysihtml5.defaultOptions={"font-styles":!0,color:!1,emphasis:!0,lists:!0,html:!1,link:!0,image:!0,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url",target:"alt",rel:"alt"}},span:1,div:1,code:1,pre:1}},stylesheets:["/assets/bootstrap-wysihtml5/wysiwyg-color.css"],locale:"en"};"undefined"==typeof e.fn.wysihtml5.defaultOptionsCache&&(e.fn.wysihtml5.defaultOptionsCache=e.extend(!0,{},e.fn.wysihtml5.defaultOptions));var a=e.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5),// Copyright (c) 2011 Joseph Cava-Lynch
// The above copyright notice and this permission notice shall be included in all
// COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
function(e){e.isScrollToFixed=function(t){return!!e(t).data("ScrollToFixed")},e.ScrollToFixed=function(t,n){function i(){_.trigger("preUnfixed.ScrollToFixed"),u(),_.trigger("unfixed.ScrollToFixed"),T=-1,x=_.offset().top,C=_.offset().left,g.options.offsets&&(C+=_.offset().left-_.position().left),-1==k&&(k=C),v=_.css("position"),w=!0,-1!=g.options.bottom&&(_.trigger("preFixed.ScrollToFixed"),l(),_.trigger("fixed.ScrollToFixed"))}function r(){var e=g.options.limit;return e?"function"==typeof e?e.apply(_):e:0}function o(){return"fixed"===v}function s(){return"absolute"===v}function a(){return!(o()||s())}function l(){o()||(S.css({display:_.css("display"),width:_.outerWidth(!0),height:_.outerHeight(!0),"float":_.css("float")}),cssOptions={position:"fixed",top:-1==g.options.bottom?h():"",bottom:-1==g.options.bottom?"":g.options.bottom,"margin-left":"0px"},g.options.dontSetWidth||(cssOptions.width=_.width()),_.css(cssOptions),_.addClass("scroll-to-fixed-fixed"),g.options.className&&_.addClass(g.options.className),v="fixed")}function c(){var e=r(),t=C;g.options.removeOffsets&&(t=0,e-=x),cssOptions={position:"absolute",top:e,left:t,"margin-left":"0px",bottom:""},g.options.dontSetWidth||(cssOptions.width=_.width()),_.css(cssOptions),v="absolute"}function u(){a()||(T=-1,S.css("display","none"),_.css({width:"",position:y,left:"",top:b.top,"margin-left":""}),_.removeClass("scroll-to-fixed-fixed"),g.options.className&&_.removeClass(g.options.className),v=null)}function d(e){e!=T&&(_.css("left",C-e),T=e)}function h(){var e=g.options.marginTop;return e?"function"==typeof e?e.apply(_):e:0}function f(){if(e.isScrollToFixed(_)){var t=w;w||i();var n=e(window).scrollLeft(),f=e(window).scrollTop(),v=r();g.options.minWidth&&e(window).width()<g.options.minWidth?a()&&t||(m(),_.trigger("preUnfixed.ScrollToFixed"),u(),_.trigger("unfixed.ScrollToFixed")):-1==g.options.bottom?v>0&&f>=v-h()?s()&&t||(m(),_.trigger("preAbsolute.ScrollToFixed"),c(),_.trigger("unfixed.ScrollToFixed")):f>=x-h()?(o()&&t||(m(),_.trigger("preFixed.ScrollToFixed"),l(),T=-1,_.trigger("fixed.ScrollToFixed")),d(n)):a()&&t||(m(),_.trigger("preUnfixed.ScrollToFixed"),u(),_.trigger("unfixed.ScrollToFixed")):v>0?f+e(window).height()-_.outerHeight(!0)>=v-(h()||-p())?o()&&(m(),_.trigger("preUnfixed.ScrollToFixed"),"absolute"===y?c():u(),_.trigger("unfixed.ScrollToFixed")):(o()||(m(),_.trigger("preFixed.ScrollToFixed"),l()),d(n),_.trigger("fixed.ScrollToFixed")):d(n)}}function p(){return g.options.bottom?g.options.bottom:0}function m(){var e=_.css("position");"absolute"==e?_.trigger("postAbsolute.ScrollToFixed"):"fixed"==e?_.trigger("postFixed.ScrollToFixed"):_.trigger("postUnfixed.ScrollToFixed")}var g=this;g.$el=e(t),g.el=t,g.$el.data("ScrollToFixed",g);var v,y,b,w=!1,_=g.$el,x=0,C=0,k=-1,T=-1,S=null,D=function(){_.is(":visible")&&(w=!1,f())},N=function(){f()},E=function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1};g.init=function(){g.options=e.extend({},e.ScrollToFixed.defaultOptions,n),g.$el.css("z-index",g.options.zIndex),S=e("<div />"),v=_.css("position"),y=_.css("position"),b=e.extend({},_.offset()),a()&&g.$el.after(S),e(window).bind("resize.ScrollToFixed",D),e(window).bind("scroll.ScrollToFixed",N),g.options.preFixed&&_.bind("preFixed.ScrollToFixed",g.options.preFixed),g.options.postFixed&&_.bind("postFixed.ScrollToFixed",g.options.postFixed),g.options.preUnfixed&&_.bind("preUnfixed.ScrollToFixed",g.options.preUnfixed),g.options.postUnfixed&&_.bind("postUnfixed.ScrollToFixed",g.options.postUnfixed),g.options.preAbsolute&&_.bind("preAbsolute.ScrollToFixed",g.options.preAbsolute),g.options.postAbsolute&&_.bind("postAbsolute.ScrollToFixed",g.options.postAbsolute),g.options.fixed&&_.bind("fixed.ScrollToFixed",g.options.fixed),g.options.unfixed&&_.bind("unfixed.ScrollToFixed",g.options.unfixed),g.options.spacerClass&&S.addClass(g.options.spacerClass),_.bind("resize.ScrollToFixed",function(){S.height(_.height())}),_.bind("scroll.ScrollToFixed",function(){_.trigger("preUnfixed.ScrollToFixed"),u(),_.trigger("unfixed.ScrollToFixed"),f()}),_.bind("detach.ScrollToFixed",function(t){E(t),_.trigger("preUnfixed.ScrollToFixed"),u(),_.trigger("unfixed.ScrollToFixed"),e(window).unbind("resize.ScrollToFixed",D),e(window).unbind("scroll.ScrollToFixed",N),_.unbind(".ScrollToFixed"),g.$el.removeData("ScrollToFixed")}),D()},g.init()},e.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3},e.fn.scrollToFixed=function(t){return this.each(function(){new e.ScrollToFixed(this,t)})}}(jQuery),/**
 * jquery.purr.js
 * Copyright (c) 2008 Net Perspective (net-perspective.com)
 * Licensed under the MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * @author R.A. Ray
 * @projectDescription  jQuery plugin for dynamically displaying unobtrusive messages in the browser. Mimics the behavior of the MacOS program "Growl."
 * @version 0.1.0
 *
 * @requires jquery.js (tested with 1.2.6)
 *
 * @param fadeInSpeed           int - Duration of fade in animation in miliseconds
 *                          default: 500
 *  @param fadeOutSpeed         int - Duration of fade out animationin miliseconds
                            default: 500
 *  @param removeTimer          int - Timeout, in miliseconds, before notice is removed once it is the top non-sticky notice in the list
                            default: 4000
 *  @param isSticky             bool - Whether the notice should fade out on its own or wait to be manually closed
                            default: false
 *  @param usingTransparentPNG  bool - Whether or not the notice is using transparent .png images in its styling
                            default: false
 */
function(e){e.purr=function(t,n){function i(){var i=document.createElement("a");if(e(i).attr({className:"close",href:"#close"}).appendTo(t).click(function(){return r(),!1}),e(document).keyup(function(e){27===e.keyCode&&r()}),t.appendTo(o).hide(),t.fadeIn(n.fadeInSpeed),!n.isSticky)var s=setInterval(function(){0===t.prevAll(".purr").length&&(clearInterval(s),setTimeout(function(){r()},n.removeTimer))},200)}function r(){t.animate({opacity:"0"},{duration:n.fadeOutSpeed,complete:function(){t.animate({height:"0px"},{duration:n.fadeOutSpeed,complete:function(){t.remove()}})}})}t=e(t),t.addClass("purr");var o=document.getElementById("purr-container");o||(o='<div id="purr-container"></div>'),o=e(o),e("body").append(o),i()},e.fn.purr=function(t){return t=t||{},t.fadeInSpeed=t.fadeInSpeed||500,t.fadeOutSpeed=t.fadeOutSpeed||500,t.removeTimer=t.removeTimer||4e3,t.isSticky=t.isSticky||!1,t.usingTransparentPNG=t.usingTransparentPNG||!1,this.each(function(){new e.purr(this,t)}),this}}(jQuery),BestInPlaceEditor.prototype={activate:function(){var e="";e=this.isNil()?"":this.original_content?this.original_content:this.sanitize?this.element.text():this.element.html(),this.oldValue=this.isNil()?"":this.element.html(),this.display_value=e,jQuery(this.activator).unbind("click",this.clickHandler),this.activateForm(),this.element.trigger(jQuery.Event("best_in_place:activate"))},abort:function(){this.activateText(this.oldValue),jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:abort")),this.element.trigger(jQuery.Event("best_in_place:deactivate"))},abortIfConfirm:function(){return this.useConfirm?(confirm("Are you sure you want to discard your changes?")&&this.abort(),void 0):(this.abort(),void 0)},update:function(){var e=this;if(this.formType in{input:1,textarea:1}&&this.getValue()==this.oldValue)return this.abort(),!0;if(e.ajax({type:"post",dataType:"text",data:e.requestData(),success:function(t){e.loadSuccessCallback(t)},error:function(t,n){e.loadErrorCallback(t,n)}}),"select"==this.formType){var t=this.getValue();this.previousCollectionValue=t,jQuery.each(this.values,function(n,i){t==i[0]&&e.element.html(i[1])})}else"checkbox"==this.formType?e.element.html(this.getValue()?this.values[1]:this.values[0]):""!==this.getValue()?e.element.text(this.getValue()):e.element.html(this.nil);e.element.trigger(jQuery.Event("best_in_place:update"))},activateForm:function(){alert("The form was not properly initialized. activateForm is unbound")},activateText:function(e){this.element.html(e),this.isNil()&&this.element.html(this.nil)},initOptions:function(){var e=this;e.element.parents().each(function(){$parent=jQuery(this),e.url=e.url||$parent.attr("data-url"),e.collection=e.collection||$parent.attr("data-collection"),e.formType=e.formType||$parent.attr("data-type"),e.objectName=e.objectName||$parent.attr("data-object"),e.attributeName=e.attributeName||$parent.attr("data-attribute"),e.activator=e.activator||$parent.attr("data-activator"),e.okButton=e.okButton||$parent.attr("data-ok-button"),e.okButtonClass=e.okButtonClass||$parent.attr("data-ok-button-class"),e.cancelButton=e.cancelButton||$parent.attr("data-cancel-button"),e.cancelButtonClass=e.cancelButtonClass||$parent.attr("data-cancel-button-class"),e.nil=e.nil||$parent.attr("data-nil"),e.inner_class=e.inner_class||$parent.attr("data-inner-class"),e.html_attrs=e.html_attrs||$parent.attr("data-html-attrs"),e.original_content=e.original_content||$parent.attr("data-original-content"),e.collectionValue=e.collectionValue||$parent.attr("data-value")}),e.element.parents().each(function(){var t=this.id.match(/^(\w+)_(\d+)$/i);t&&(e.objectName=e.objectName||t[1])}),e.url=e.element.attr("data-url")||e.url||document.location.pathname,e.collection=e.element.attr("data-collection")||e.collection,e.formType=e.element.attr("data-type")||e.formtype||"input",e.objectName=e.element.attr("data-object")||e.objectName,e.attributeName=e.element.attr("data-attribute")||e.attributeName,e.activator=e.element.attr("data-activator")||e.element,e.okButton=e.element.attr("data-ok-button")||e.okButton,e.okButtonClass=e.element.attr("data-ok-button-class")||e.okButtonClass||"",e.cancelButton=e.element.attr("data-cancel-button")||e.cancelButton,e.cancelButtonClass=e.element.attr("data-cancel-button-class")||e.cancelButtonClass||"",e.nil=e.element.attr("data-nil")||e.nil||"—",e.inner_class=e.element.attr("data-inner-class")||e.inner_class||null,e.html_attrs=e.element.attr("data-html-attrs")||e.html_attrs,e.original_content=e.element.attr("data-original-content")||e.original_content,e.collectionValue=e.element.attr("data-value")||e.collectionValue,e.sanitize=e.element.attr("data-sanitize")?"true"==e.element.attr("data-sanitize"):!0,e.useConfirm=e.element.attr("data-use-confirm")?"false"!=e.element.attr("data-use-confirm"):!0,"select"!=e.formType&&"checkbox"!=e.formType||null===e.collection||(e.values=jQuery.parseJSON(e.collection))},bindForm:function(){this.activateForm=BestInPlaceEditor.forms[this.formType].activateForm,this.getValue=BestInPlaceEditor.forms[this.formType].getValue},initNil:function(){""===this.element.html()&&this.element.html(this.nil)},isNil:function(){return""===this.element.html()||this.element.html()===this.nil},getValue:function(){alert("The form was not properly initialized. getValue is unbound")},sanitizeValue:function(e){return jQuery.trim(e)},requestData:function(){csrf_token=jQuery("meta[name=csrf-token]").attr("content"),csrf_param=jQuery("meta[name=csrf-param]").attr("content");var e="_method=put";return e+="&"+this.objectName+"["+this.attributeName+"]="+encodeURIComponent(this.getValue()),void 0!==csrf_param&&void 0!==csrf_token&&(e+="&"+csrf_param+"="+encodeURIComponent(csrf_token)),e},ajax:function(e){return e.url=this.url,e.beforeSend=function(e){e.setRequestHeader("Accept","application/json")},jQuery.ajax(e)},loadSuccessCallback:function(e){if(e=jQuery.trim(e),e&&""!=e){var t=jQuery.parseJSON(jQuery.trim(e));null!==t&&t.hasOwnProperty("display_as")&&(this.element.attr("data-original-content",this.element.text()),this.original_content=this.element.text(),this.element.html(t.display_as)),this.element.trigger(jQuery.Event("best_in_place:success"),e),this.element.trigger(jQuery.Event("ajax:success"),e)}else this.element.trigger(jQuery.Event("best_in_place:success")),this.element.trigger(jQuery.Event("ajax:success"));jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:deactivate")),null!==this.collectionValue&&"select"==this.formType&&(this.collectionValue=this.previousCollectionValue,this.previousCollectionValue=null)},loadErrorCallback:function(e,t){this.activateText(this.oldValue),this.element.trigger(jQuery.Event("best_in_place:error"),[e,t]),this.element.trigger(jQuery.Event("ajax:error"),e,t),jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:deactivate"))},clickHandler:function(e){e.preventDefault(),e.data.editor.activate()},setHtmlAttributes:function(){var e=this.element.find(this.formType);if(this.html_attrs){var t=jQuery.parseJSON(this.html_attrs);for(var n in t)e.attr(n,t[n])}}},BestInPlaceEditor.forms={input:{activateForm:function(){var e=jQuery(document.createElement("form")).addClass("form_in_place").attr("action","javascript:void(0);").attr("style","display:inline"),t=jQuery(document.createElement("input")).attr("type","text").attr("name",this.attributeName).val(this.display_value);null!==this.inner_class&&t.addClass(this.inner_class),e.append(t),this.okButton&&e.append(jQuery(document.createElement("input")).attr("type","submit").attr("class",this.okButtonClass).attr("value",this.okButton)),this.cancelButton&&e.append(jQuery(document.createElement("input")).attr("type","button").attr("class",this.cancelButtonClass).attr("value",this.cancelButton)),this.element.html(e),this.setHtmlAttributes(),this.element.find("input[type='text']")[0].select(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.input.submitHandler),this.cancelButton&&this.element.find("input[type='button']").bind("click",{editor:this},BestInPlaceEditor.forms.input.cancelButtonHandler),this.element.find("input[type='text']").bind("blur",{editor:this},BestInPlaceEditor.forms.input.inputBlurHandler),this.element.find("input[type='text']").bind("keyup",{editor:this},BestInPlaceEditor.forms.input.keyupHandler),this.blurTimer=null,this.userClicked=!1},getValue:function(){return this.sanitizeValue(this.element.find("input").val())},inputBlurHandler:function(e){e.data.editor.okButton?e.data.editor.blurTimer=setTimeout(function(){e.data.editor.userClicked||e.data.editor.abort()},500):e.data.editor.cancelButton?e.data.editor.blurTimer=setTimeout(function(){e.data.editor.userClicked||e.data.editor.update()},500):e.data.editor.update()},submitHandler:function(e){e.data.editor.userClicked=!0,clearTimeout(e.data.editor.blurTimer),e.data.editor.update()},cancelButtonHandler:function(e){e.data.editor.userClicked=!0,clearTimeout(e.data.editor.blurTimer),e.data.editor.abort(),e.stopPropagation()},keyupHandler:function(e){27==e.keyCode&&e.data.editor.abort()}},date:{activateForm:function(){var e=this,t=jQuery(document.createElement("form")).addClass("form_in_place").attr("action","javascript:void(0);").attr("style","display:inline"),n=jQuery(document.createElement("input")).attr("type","text").attr("name",this.attributeName).attr("value",this.sanitizeValue(this.display_value));null!==this.inner_class&&n.addClass(this.inner_class),t.append(n),this.element.html(t),this.setHtmlAttributes(),this.element.find("input")[0].select(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.input.submitHandler),this.element.find("input").bind("keyup",{editor:this},BestInPlaceEditor.forms.input.keyupHandler),this.element.find("input").datepicker({onClose:function(){e.update()}}).datepicker("show")},getValue:function(){return this.sanitizeValue(this.element.find("input").val())},submitHandler:function(e){e.data.editor.update()},keyupHandler:function(e){27==e.keyCode&&e.data.editor.abort()}},select:{activateForm:function(){var e=jQuery(document.createElement("form")).attr("action","javascript:void(0)").attr("style","display:inline");selected="",oldValue=this.oldValue,select_elt=jQuery(document.createElement("select")).attr("class",null!==this.inned_class?this.inner_class:""),currentCollectionValue=this.collectionValue,jQuery.each(this.values,function(e,t){var n=jQuery(document.createElement("option")).val(t[0]).html(t[1]);t[0]==currentCollectionValue&&n.attr("selected","selected"),select_elt.append(n)}),e.append(select_elt),this.element.html(e),this.setHtmlAttributes(),this.element.find("select").bind("change",{editor:this},BestInPlaceEditor.forms.select.blurHandler),this.element.find("select").bind("blur",{editor:this},BestInPlaceEditor.forms.select.blurHandler),this.element.find("select").bind("keyup",{editor:this},BestInPlaceEditor.forms.select.keyupHandler),this.element.find("select")[0].focus()},getValue:function(){return this.sanitizeValue(this.element.find("select").val())},blurHandler:function(e){e.data.editor.update()},keyupHandler:function(e){27==e.keyCode&&e.data.editor.abort()}},checkbox:{activateForm:function(){this.collectionValue=!this.getValue(),this.setHtmlAttributes(),this.update()},getValue:function(){return this.collectionValue}},textarea:{activateForm:function(){width=this.element.css("width"),height=this.element.css("height");var e=jQuery(document.createElement("form")).attr("action","javascript:void(0)").attr("style","display:inline").append(jQuery(document.createElement("textarea")).val(this.sanitizeValue(this.display_value)));this.okButton&&e.append(jQuery(document.createElement("input")).attr("type","submit").attr("value",this.okButton)),this.cancelButton&&e.append(jQuery(document.createElement("input")).attr("type","button").attr("value",this.cancelButton)),this.element.html(e),this.setHtmlAttributes(),jQuery(this.element.find("textarea")[0]).css({"min-width":width,"min-height":height}),jQuery(this.element.find("textarea")[0]).elastic(),this.element.find("textarea")[0].focus(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.textarea.submitHandler),this.cancelButton&&this.element.find("input[type='button']").bind("click",{editor:this},BestInPlaceEditor.forms.textarea.cancelButtonHandler),this.element.find("textarea").bind("blur",{editor:this},BestInPlaceEditor.forms.textarea.blurHandler),this.element.find("textarea").bind("keyup",{editor:this},BestInPlaceEditor.forms.textarea.keyupHandler),this.blurTimer=null,this.userClicked=!1},getValue:function(){return this.sanitizeValue(this.element.find("textarea").val())},blurHandler:function(e){e.data.editor.okButton?e.data.editor.blurTimer=setTimeout(function(){e.data.editor.userClicked||e.data.editor.abortIfConfirm()},500):e.data.editor.cancelButton?e.data.editor.blurTimer=setTimeout(function(){e.data.editor.userClicked||e.data.editor.update()},500):e.data.editor.update()},submitHandler:function(e){e.data.editor.userClicked=!0,clearTimeout(e.data.editor.blurTimer),e.data.editor.update()},cancelButtonHandler:function(e){e.data.editor.userClicked=!0,clearTimeout(e.data.editor.blurTimer),e.data.editor.abortIfConfirm(),e.stopPropagation()},keyupHandler:function(e){27==e.keyCode&&e.data.editor.abortIfConfirm()}}},jQuery.fn.best_in_place=function(){function e(e){return e.data("bestInPlaceEditor")?void 0:(e.data("bestInPlaceEditor",new BestInPlaceEditor(e)),!0)}return jQuery(this.context).delegate(this.selector,"click",function(){var t=jQuery(this);e(t)&&t.click()}),this.each(function(){e(jQuery(this))}),this},function(e){"undefined"==typeof e.fn.elastic&&e.fn.extend({elastic:function(){var t=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight"];return this.each(function(){function n(e,t){curratedHeight=Math.floor(parseInt(e,10)),r.height()!=curratedHeight&&r.css({height:curratedHeight+"px",overflow:t})}function i(){var e=r.val().replace(/&/g,"&amp;").replace(/  /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),t=o.html().replace(/<br>/gi,"<br />");if(e+"&nbsp;"!=t&&(o.html(e+"&nbsp;"),Math.abs(o.height()+s-r.height())>3)){var i=o.height()+s;i>=l?n(l,"auto"):a>=i?n(a,"hidden"):n(i,"hidden")}}if("textarea"!=this.type)return!1;var r=e(this),o=e("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}),s=parseInt(r.css("line-height"),10)||parseInt(r.css("font-size"),"10"),a=parseInt(r.css("height"),10)||3*s,l=parseInt(r.css("max-height"),10)||Number.MAX_VALUE,c=0;for(0>l&&(l=Number.MAX_VALUE),o.appendTo(r.parent()),c=t.length;c--;)o.css(t[c].toString(),r.css(t[c].toString()));r.css({overflow:"hidden"}),r.bind("keyup change cut paste",function(){i()}),r.bind("blur",function(){o.height()<l&&(o.height()>a?r.height(o.height()):r.height(a))}),r.on("input paste",function(){setTimeout(i,250)}),i()})}})}(jQuery),window.CodeMirror=function(){"use strict";function e(n,i){if(!(this instanceof e))return new e(n,i);this.options=i=i||{};for(var r in no)!i.hasOwnProperty(r)&&no.hasOwnProperty(r)&&(i[r]=no[r]);h(i);var o="string"==typeof i.value?0:i.value.first,s=this.display=t(n,o);s.wrapper.CodeMirror=this,c(this),i.autofocus&&!Or&&ht(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Ui},a(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var l=i.value;"string"==typeof l&&(l=new mo(i.value,i.mode)),rt(this,ui)(this,l),Cr&&setTimeout(Ji(dt,this,!0),20),pt(this);var u;try{u=document.activeElement==s.input}catch(d){}u||i.autofocus&&!Or?setTimeout(Ji(Mt,this),20):$t(this),rt(this,function(){for(var e in to)to.propertyIsEnumerable(e)&&to[e](this,i[e],io);for(var t=0;t<ao.length;++t)ao[t](this)})()}function t(e,t){var n={},i=n.input=nr("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return Sr?i.style.width="1000px":i.setAttribute("wrap","off"),Pr&&(i.style.border="1px solid black"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),i.setAttribute("spellcheck","false"),n.inputDiv=nr("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=nr("div",[nr("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=nr("div",[nr("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=nr("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=nr("div",null,"CodeMirror-gutter-filler"),n.lineDiv=nr("div",null,"CodeMirror-code"),n.selectionDiv=nr("div",null,null,"position: relative; z-index: 1"),n.cursor=nr("div"," ","CodeMirror-cursor"),n.otherCursor=nr("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),n.measure=nr("div",null,"CodeMirror-measure"),n.lineSpace=nr("div",[n.measure,n.selectionDiv,n.lineDiv,n.cursor,n.otherCursor],null,"position: relative; outline: none"),n.mover=nr("div",[nr("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=nr("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=nr("div",null,null,"position: absolute; height: "+wo+"px; width: 1px;"),n.gutters=nr("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=nr("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=nr("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),kr&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),e.appendChild?e.appendChild(n.wrapper):e(n.wrapper),Pr&&(i.style.width="0px"),Sr||(n.scroller.draggable=!0),$r?(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"):kr&&(n.scrollbarH.style.minWidth=n.scrollbarV.style.minWidth="18px"),n.viewOffset=n.lastSizeC=0,n.showingFrom=n.showingTo=t,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new Ui,n.cachedCharWidth=n.cachedTextHeight=null,n.measureLineCache=[],n.measureLineCachePos=0,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),t.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),t.doc.frontier=t.doc.first,$(t,100),t.state.modeGen++,t.curOp&&at(t)}function i(e){e.options.lineWrapping?(e.display.wrapper.className+=" CodeMirror-wrap",e.display.sizer.style.minWidth=""):(e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),d(e)),o(e),at(e),U(e),setTimeout(function(){f(e)},100)}function r(e){var t=et(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/tt(e.display)-3);return function(r){return Fn(e.doc,r)?0:n?(Math.ceil(r.text.length/i)||1)*t:t}}function o(e){var t=e.doc,n=r(e);t.iter(function(e){var t=n(e);t!=e.height&&pi(e,t)})}function s(e){var t=co[e.options.keyMap],n=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:""),e.state.disableInput=t.disableInput}function a(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),U(e)}function l(e){c(e),at(e),setTimeout(function(){m(e)},20)}function c(e){var t=e.display.gutters,n=e.options.gutters;ir(t);for(var i=0;i<n.length;++i){var r=n[i],o=t.appendChild(nr("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=i?"":"none"}function u(e,t){if(0==t.height)return 0;for(var n,i=t.text.length,r=t;n=On(r);){var o=n.find();r=di(e,o.from.line),i+=o.from.ch-o.to.ch}for(r=t;n=Hn(r);){var o=n.find();i-=r.text.length-o.from.ch,r=di(e,o.to.line),i+=r.text.length-o.to.ch}return i}function d(e){var t=e.display,n=e.doc;t.maxLine=di(n,n.first),t.maxLineLength=u(n,t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var i=u(n,e);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=e)})}function h(e){for(var t=!1,n=0;n<e.gutters.length;++n)"CodeMirror-linenumbers"==e.gutters[n]&&(e.lineNumbers?t=!0:e.gutters.splice(n--,1));!t&&e.lineNumbers&&e.gutters.push("CodeMirror-linenumbers")}function f(e){var t=e.display,n=e.doc.height,i=n+O(t);t.sizer.style.minHeight=t.heightForcer.style.top=i+"px",t.gutters.style.height=Math.max(i,t.scroller.clientHeight-wo)+"px";var r=Math.max(i,t.scroller.scrollHeight),o=t.scroller.scrollWidth>t.scroller.clientWidth+1,s=r>t.scroller.clientHeight+1;s?(t.scrollbarV.style.display="block",t.scrollbarV.style.bottom=o?lr(t.measure)+"px":"0",t.scrollbarV.firstChild.style.height=r-t.scroller.clientHeight+t.scrollbarV.clientHeight+"px"):t.scrollbarV.style.display="",o?(t.scrollbarH.style.display="block",t.scrollbarH.style.right=s?lr(t.measure)+"px":"0",t.scrollbarH.firstChild.style.width=t.scroller.scrollWidth-t.scroller.clientWidth+t.scrollbarH.clientWidth+"px"):t.scrollbarH.style.display="",o&&s?(t.scrollbarFiller.style.display="block",t.scrollbarFiller.style.height=t.scrollbarFiller.style.width=lr(t.measure)+"px"):t.scrollbarFiller.style.display="",o&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(t.gutterFiller.style.display="block",t.gutterFiller.style.height=lr(t.measure)+"px",t.gutterFiller.style.width=t.gutters.offsetWidth+"px"):t.gutterFiller.style.display="",Ir&&0===lr(t.measure)&&(t.scrollbarV.style.minWidth=t.scrollbarH.style.minHeight=Ar?"18px":"12px")}function p(e,t,n){var i=e.scroller.scrollTop,r=e.wrapper.clientHeight;"number"==typeof n?i=n:n&&(i=n.top,r=n.bottom-n.top),i=Math.floor(i-P(e));var o=Math.ceil(i+r);return{from:gi(t,i),to:gi(t,o)}}function m(e){var t=e.display;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=y(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,r=n+"px",o=t.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var s=0,a=o.alignable;s<a.length;++s)a[s].style.left=r;e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function g(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=v(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(nr("div",[nr("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s),i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",!0}return!1}function v(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function y(e){return sr(e.scroller).left-sr(e.sizer).left}function b(e,t,n){for(var i,r=e.display.showingFrom,o=e.display.showingTo,s=p(e.display,e.doc,n);w(e,t,s)&&(i=!0,D(e),f(e),n&&(n=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,"number"==typeof n?n:n.top)),s=p(e.display,e.doc,n),!(s.from>=e.display.showingFrom&&s.to<=e.display.showingTo));)t=[];return i&&(ji(e,"update",e),(e.display.showingFrom!=r||e.display.showingTo!=o)&&ji(e,"viewportChange",e,e.display.showingFrom,e.display.showingTo)),i}function w(e,t,n){var i=e.display,r=e.doc;if(!i.wrapper.clientWidth)return i.showingFrom=i.showingTo=r.first,i.viewOffset=0,void 0;if(!(0==t.length&&n.from>i.showingFrom&&n.to<i.showingTo)){g(e)&&(t=[{from:r.first,to:r.first+r.size}]);var o=i.sizer.style.marginLeft=i.gutters.offsetWidth+"px";i.scrollbarH.style.left=e.options.fixedGutter?o:"0";var s=1/0;if(e.options.lineNumbers)for(var a=0;a<t.length;++a)if(t[a].diff){s=t[a].from;break}var l=r.first+r.size,c=Math.max(n.from-e.options.viewportMargin,r.first),u=Math.min(l,n.to+e.options.viewportMargin);if(i.showingFrom<c&&c-i.showingFrom<20&&(c=Math.max(r.first,i.showingFrom)),i.showingTo>u&&i.showingTo-u<20&&(u=Math.min(l,i.showingTo)),Yr)for(c=mi(Rn(r,di(r,c)));l>u&&Fn(r,di(r,u));)++u;var d=[{from:Math.max(i.showingFrom,r.first),to:Math.min(i.showingTo,l)}];if(d=d[0].from>=d[0].to?[]:x(d,t),Yr)for(var a=0;a<d.length;++a)for(var h,f=d[a];h=Hn(di(r,f.to-1));){var p=h.find().from.line;if(!(p>f.from)){d.splice(a--,1);break}f.to=p}for(var m=0,a=0;a<d.length;++a){var f=d[a];f.from<c&&(f.from=c),f.to>u&&(f.to=u),f.from>=f.to?d.splice(a--,1):m+=f.to-f.from}if(m==u-c&&c==i.showingFrom&&u==i.showingTo)return _(e),void 0;d.sort(function(e,t){return e.from-t.from});try{var v=document.activeElement}catch(y){}.7*(u-c)>m&&(i.lineDiv.style.display="none"),k(e,c,u,d,s),i.lineDiv.style.display="",v&&document.activeElement!=v&&v.offsetHeight&&v.focus();var b=c!=i.showingFrom||u!=i.showingTo||i.lastSizeC!=i.wrapper.clientHeight;b&&(i.lastSizeC=i.wrapper.clientHeight,$(e,400)),i.showingFrom=c,i.showingTo=u;for(var w,C=i.lineDiv.offsetTop,T=i.lineDiv.firstChild;T;T=T.nextSibling)if(T.lineObj){if(kr){var S=T.offsetTop+T.offsetHeight;w=S-C,C=S}else{var D=sr(T);w=D.bottom-D.top}var N=T.lineObj.height-w;if(2>w&&(w=et(i)),N>.001||-.001>N){pi(T.lineObj,w);var E=T.lineObj.widgets;if(E)for(var a=0;a<E.length;++a)E[a].height=E[a].node.offsetHeight}}return _(e),!0}}function _(e){var t=e.display.viewOffset=vi(e,di(e.doc,e.display.showingFrom));e.display.mover.style.top=t+"px"}function x(e,t){for(var n=0,i=t.length||0;i>n;++n){for(var r=t[n],o=[],s=r.diff||0,a=0,l=e.length;l>a;++a){var c=e[a];r.to<=c.from&&r.diff?o.push({from:c.from+s,to:c.to+s}):r.to<=c.from||r.from>=c.to?o.push(c):(r.from>c.from&&o.push({from:c.from,to:r.from}),r.to<c.to&&o.push({from:r.to+s,to:c.to+s}))}e=o}return e}function C(e){for(var t=e.display,n={},i={},r=t.gutters.firstChild,o=0;r;r=r.nextSibling,++o)n[e.options.gutters[o]]=r.offsetLeft,i[e.options.gutters[o]]=r.offsetWidth;return{fixedPos:y(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function k(e,t,n,i,r){function o(t){var n=t.nextSibling;return Sr&&Hr&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),n}var s=C(e),a=e.display,l=e.options.lineNumbers;i.length||Sr&&e.display.currentWheelTarget||ir(a.lineDiv);var c=a.lineDiv,u=c.firstChild,d=i.shift(),h=t;for(e.doc.iter(t,n,function(t){if(d&&d.to==h&&(d=i.shift()),Fn(e.doc,t)){if(0!=t.height&&pi(t,0),t.widgets&&u.previousSibling)for(var n=0;n<t.widgets.length;++n){var a=t.widgets[n];if(a.showIfHidden){var f=u.previousSibling;if(/pre/i.test(f.nodeName)){var p=nr("div",null,null,"position: relative");f.parentNode.replaceChild(p,f),p.appendChild(f),f=p}var m=f.appendChild(nr("div",[a.node],"CodeMirror-linewidget"));a.handleMouseEvents||(m.ignoreEvents=!0),S(a,m,f,s)}}}else if(d&&d.from<=h&&d.to>h){for(;u.lineObj!=t;)u=o(u);l&&h>=r&&u.lineNumber&&or(u.lineNumber,v(e.options,h)),u=u.nextSibling}else{if(t.widgets)for(var g,y=0,b=u;b&&20>y;++y,b=b.nextSibling)if(b.lineObj==t&&/div/i.test(b.nodeName)){g=b;break}var w=T(e,t,h,s,g);if(w!=g)c.insertBefore(w,u);else{for(;u!=g;)u=o(u);u=u.nextSibling}w.lineObj=t}++h});u;)u=o(u)}function T(e,t,n,i,r){var o,s=ei(e,t),a=t.gutterMarkers,l=e.display;if(!(e.options.lineNumbers||a||t.bgClass||t.wrapClass||t.widgets))return s;if(r){r.alignable=null;for(var c,u=!0,d=0,h=null,f=r.firstChild;f;f=c)if(c=f.nextSibling,/\bCodeMirror-linewidget\b/.test(f.className)){for(var p=0,m=!0;p<t.widgets.length;++p){var g=t.widgets[p];if(g.above||(h=f,m=!1),g.node==f.firstChild){S(g,f,r,i),++d;break}}if(p==t.widgets.length){u=!1;break}}else r.removeChild(f);r.insertBefore(s,h),u&&d==t.widgets.length&&(o=r,r.className=t.wrapClass||"")}if(o||(o=nr("div",null,t.wrapClass,"position: relative"),o.appendChild(s)),t.bgClass&&o.insertBefore(nr("div",null,t.bgClass+" CodeMirror-linebackground"),o.firstChild),e.options.lineNumbers||a){var y=o.insertBefore(nr("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),o.firstChild);if(e.options.fixedGutter&&(o.alignable||(o.alignable=[])).push(y),!e.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(o.lineNumber=y.appendChild(nr("div",v(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.lineNumInnerWidth+"px"))),a)for(var b=0;b<e.options.gutters.length;++b){var w=e.options.gutters[b],_=a.hasOwnProperty(w)&&a[w];_&&y.appendChild(nr("div",[_],"CodeMirror-gutter-elt","left: "+i.gutterLeft[w]+"px; width: "+i.gutterWidth[w]+"px"))}}if(kr&&(o.style.zIndex=2),t.widgets&&o!=r)for(var p=0,x=t.widgets;p<x.length;++p){var g=x[p],C=nr("div",[g.node],"CodeMirror-linewidget");g.handleMouseEvents||(C.ignoreEvents=!0),S(g,C,o,i),g.above?o.insertBefore(C,e.options.lineNumbers&&0!=t.height?y:s):o.appendChild(C),ji(g,"redraw")}return o}function S(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function D(e){var t=e.display,n=Ut(e.doc.sel.from,e.doc.sel.to);if(n||e.options.showCursorWhenSelecting?N(e):t.cursor.style.display=t.otherCursor.style.display="none",n?t.selectionDiv.style.display="none":E(e),e.options.moveInputWithCursor){var i=K(e,e.doc.sel.head,"div"),r=sr(t.wrapper),o=sr(t.lineDiv);t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+o.top-r.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+o.left-r.left))+"px"}}function N(e){var t=e.display,n=K(e,e.doc.sel.head,"div");t.cursor.style.left=n.left+"px",t.cursor.style.top=n.top+"px",t.cursor.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",t.cursor.style.display="",n.other?(t.otherCursor.style.display="",t.otherCursor.style.left=n.other.left+"px",t.otherCursor.style.top=n.other.top+"px",t.otherCursor.style.height=.85*(n.other.bottom-n.other.top)+"px"):t.otherCursor.style.display="none"}function E(e){function t(e,t,n,i){0>t&&(t=0),s.appendChild(nr("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?a-e:n)+"px; height: "+(i-t)+"px"))}function n(n,i,o){function s(t,i){return G(e,Bt(n,t),"div",d,i)}var c,u,d=di(r,n),h=d.text.length;return ur(yi(d),i||0,null==o?h:o,function(e,n,r){var d,f,p,m=s(e,"left");if(e==n)d=m,f=p=m.left;else{if(d=s(n-1,"right"),"rtl"==r){var g=m;m=d,d=g}f=m.left,p=d.right}null==i&&0==e&&(f=l),d.top-m.top>3&&(t(f,m.top,null,m.bottom),f=l,m.bottom<d.top&&t(f,m.bottom,null,d.top)),null==o&&n==h&&(p=a),(!c||m.top<c.top||m.top==c.top&&m.left<c.left)&&(c=m),(!u||d.bottom>u.bottom||d.bottom==u.bottom&&d.right>u.right)&&(u=d),l+1>f&&(f=l),t(f,d.top,p-f,d.bottom)}),{start:c,end:u}}var i=e.display,r=e.doc,o=e.doc.sel,s=document.createDocumentFragment(),a=i.lineSpace.offsetWidth,l=H(e.display);if(o.from.line==o.to.line)n(o.from.line,o.from.ch,o.to.ch);else{var c=di(r,o.from.line),u=di(r,o.to.line),d=Rn(r,c)==Rn(r,u),h=n(o.from.line,o.from.ch,d?c.text.length:null).end,f=n(o.to.line,d?0:null,o.to.ch).start;d&&(h.top<f.top-2?(t(h.right,h.top,null,h.bottom),t(l,f.top,f.left,f.bottom)):t(h.right,h.top,f.left-h.right,h.bottom)),h.bottom<f.top&&t(l,h.bottom,null,f.top)}rr(i.selectionDiv,s),i.selectionDiv.style.display=""}function M(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",t.blinker=setInterval(function(){t.cursor.style.visibility=t.otherCursor.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate)}}function $(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.showingTo&&e.state.highlight.set(t,Ji(I,e))}function I(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.showingTo)){var n,i=+new Date+e.options.workTime,r=gn(t.mode,L(e,t.frontier)),o=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.showingTo+500),function(s){if(t.frontier>=e.display.showingFrom){var a=s.styles;s.styles=Kn(e,s,r);for(var l=!a||a.length!=s.styles.length,c=0;!l&&c<a.length;++c)l=a[c]!=s.styles[c];l&&(n&&n.end==t.frontier?n.end++:o.push(n={start:t.frontier,end:t.frontier+1})),s.stateAfter=gn(t.mode,r)}else Zn(e,s,r),s.stateAfter=0==t.frontier%5?gn(t.mode,r):null;return++t.frontier,+new Date>i?($(e,e.options.workDelay),!0):void 0}),o.length&&rt(e,function(){for(var e=0;e<o.length;++e)at(this,o[e].start,o[e].end)})()}}function A(e,t,n){for(var i,r,o=e.doc,s=t,a=t-100;s>a;--s){if(s<=o.first)return o.first;var l=di(o,s-1);if(l.stateAfter&&(!n||s<=o.frontier))return s;var c=qi(l.text,null,e.options.tabSize);
(null==r||i>c)&&(r=s-1,i=c)}return r}function L(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return!0;var o=A(e,t,n),s=o>i.first&&di(i,o-1).stateAfter;return s=s?gn(i.mode,s):vn(i.mode),i.iter(o,t,function(n){Zn(e,n,s);var a=o==t-1||0==o%5||o>=r.showingFrom&&o<r.showingTo;n.stateAfter=a?gn(i.mode,s):null,++o}),s}function P(e){return e.lineSpace.offsetTop}function O(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function H(e){var t=rr(e.measure,nr("pre",null,null,"text-align: left")).appendChild(nr("span","x"));return t.offsetLeft}function R(e,t,n,i,r){var o=-1;i=i||z(e,t);for(var s=n;;s+=o){var a=i[s];if(a)break;0>o&&0==s&&(o=1)}var l=(n>s||"right"==r)&&null!=a.topRight;return{left:n>s?a.right:a.left,right:s>n?a.left:a.right,top:l?a.topRight:a.top,bottom:l?a.bottomRight:a.bottom}}function F(e,t){for(var n=e.display.measureLineCache,i=0;i<n.length;++i){var r=n[i];if(r.text==t.text&&r.markedSpans==t.markedSpans&&e.display.scroller.clientWidth==r.width&&r.classes==t.textClass+"|"+t.bgClass+"|"+t.wrapClass)return r}}function j(e,t){var n=F(e,t);n&&(n.text=n.measure=n.markedSpans=null)}function z(e,t){var n=F(e,t);if(n)return n.measure;var i=W(e,t),r=e.display.measureLineCache,o={text:t.text,width:e.display.scroller.clientWidth,markedSpans:t.markedSpans,measure:i,classes:t.textClass+"|"+t.bgClass+"|"+t.wrapClass};return 16==r.length?r[++e.display.measureLineCachePos%16]=o:r.push(o),i}function W(e,t){function n(e,t){t>g&&(t=g),0>e&&(e=0);for(var n=0;n<p.length;n+=2){var i=p[n],r=p[n+1];if(!(i>t||e>r)&&(e>=i&&r>=t||i>=e&&t>=r||Math.min(t,r)-Math.max(e,i)>=t-e>>1))return p[n]=Math.min(e,i),p[n+1]=Math.max(t,r),n}return p.push(e,t),n}var i=e.display,r=Zi(t.text.length),o=ei(e,t,r);if(Cr&&!kr&&!e.options.lineWrapping&&o.childNodes.length>100){for(var s=document.createDocumentFragment(),a=10,l=o.childNodes.length,c=0,u=Math.ceil(l/a);u>c;++c){for(var d=nr("div",null,null,"display: inline-block"),h=0;a>h&&l;++h)d.appendChild(o.firstChild),--l;s.appendChild(d)}o.appendChild(s)}rr(i.measure,o);var f=sr(i.lineDiv),p=[],m=Zi(t.text.length),g=o.offsetHeight;Tr&&i.measure.first!=o&&rr(i.measure,o);for(var v,c=0;c<r.length;++c)if(v=r[c]){var y,b=v;if(/\bCodeMirror-widget\b/.test(v.className)&&v.getClientRects){1==v.firstChild.nodeType&&(b=v.firstChild);var w=b.getClientRects(),_=w[0],x=w[w.length-1];if(w.length>1){var C=n(_.top-f.top,_.bottom-f.top),k=n(x.top-f.top,x.bottom-f.top);m[c]={left:_.left-f.left,right:x.right-f.left,top:C,topRight:k};continue}}y=sr(b);var T=n(y.top-f.top,y.bottom-f.top),S=y.right;v.measureRight&&(S=sr(v.measureRight).left),m[c]={left:y.left-f.left,right:S-f.left,top:T}}for(var v,c=0;c<m.length;++c)if(v=m[c]){var D=v.top,N=v.topRight;v.top=p[D],v.bottom=p[D+1],null!=N&&(v.topRight=p[N],v.bottomRight=p[N+1])}return m}function B(e,t){var n=!1;if(t.markedSpans)for(var i=0;i<t.markedSpans;++i){var r=t.markedSpans[i];!r.collapsed||null!=r.to&&r.to!=t.text.length||(n=!0)}var o=!n&&F(e,t);if(o)return R(e,t,t.text.length,o.measure,"right").right;var s=ei(e,t),a=s.appendChild(cr(e.display.measure));return rr(e.display.measure,s),sr(a).right-sr(e.display.lineDiv).left}function U(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function q(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Y(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function V(e,t,n,i){if(t.widgets)for(var r=0;r<t.widgets.length;++r)if(t.widgets[r].above){var o=Un(t.widgets[r]);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=vi(e,t);if("local"==i?s+=P(e.display):s-=e.display.viewOffset,"page"==i||"window"==i){var a=sr(e.display.lineSpace);s+=a.top+("window"==i?0:Y());var l=a.left+("window"==i?0:q());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function X(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=q(),r-=Y();else if("local"==n||!n){var o=sr(e.display.sizer);i+=o.left,r+=o.top}var s=sr(e.display.lineSpace);return{left:i-s.left,top:r-s.top}}function G(e,t,n,i,r){return i||(i=di(e.doc,t.line)),V(e,i,R(e,i,t.ch,null,r),n)}function K(e,t,n,i,r){function o(t,o){var s=R(e,i,t,r,o?"right":"left");return o?s.left=s.right:s.right=s.left,V(e,i,s,n)}function s(e,t){var n=a[t],i=n.level%2;return e==dr(n)&&t&&n.level<a[t-1].level?(n=a[--t],e=hr(n)-(n.level%2?0:1),i=!0):e==hr(n)&&t<a.length-1&&n.level<a[t+1].level&&(n=a[++t],e=dr(n)-n.level%2,i=!1),i&&e==n.to&&e>n.from?o(e-1):o(e,i)}i=i||di(e.doc,t.line),r||(r=z(e,i));var a=yi(i),l=t.ch;if(!a)return o(l);var c=yr(a,l),u=s(l,c);return null!=Io&&(u.other=s(l,Io)),u}function Q(e,t,n,i){var r=new Bt(e,t);return r.xRel=i,n&&(r.outside=!0),r}function Z(e,t,n){var i=e.doc;if(n+=e.display.viewOffset,0>n)return Q(i.first,0,!0,-1);var r=gi(i,n),o=i.first+i.size-1;if(r>o)return Q(i.first+i.size-1,di(i,o).text.length,!0,1);for(0>t&&(t=0);;){var s=di(i,r),a=J(e,s,r,t,n),l=Hn(s),c=l&&l.find();if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;r=c.to.line}}function J(e,t,n,i,r){function o(i){var r=K(e,Bt(n,i),"line",t,c);return a=!0,s>r.bottom?r.left-l:s<r.top?r.left+l:(a=!1,r.left)}var s=r-vi(e,t),a=!1,l=2*e.display.wrapper.clientWidth,c=z(e,t),u=yi(t),d=t.text.length,h=fr(t),f=pr(t),p=o(h),m=a,g=o(f),v=a;if(i>g)return Q(n,f,v,1);for(;;){if(u?f==h||f==wr(t,h,1):1>=f-h){for(var y=p>i||g-i>=i-p?h:f,b=i-(y==h?p:g);ko.test(t.text.charAt(y));)++y;var w=Q(n,y,y==h?m:v,0>b?-1:b?1:0);return w}var _=Math.ceil(d/2),x=h+_;if(u){x=h;for(var C=0;_>C;++C)x=wr(t,x,1)}var k=o(x);k>i?(f=x,g=k,(v=a)&&(g+=1e3),d=_):(h=x,p=k,m=a,d-=_)}}function et(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==jr){jr=nr("pre");for(var t=0;49>t;++t)jr.appendChild(document.createTextNode("x")),jr.appendChild(nr("br"));jr.appendChild(document.createTextNode("x"))}rr(e.measure,jr);var n=jr.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),ir(e.measure),n||1}function tt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=nr("span","x"),n=nr("pre",[t]);rr(e.measure,n);var i=t.offsetWidth;return i>2&&(e.cachedCharWidth=i),i||10}function nt(e){e.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Vr},bo++||(yo=[])}function it(e){var t=e.curOp,n=e.doc,i=e.display;if(e.curOp=null,t.updateMaxLine&&d(e),i.maxLineChanged&&!e.options.lineWrapping&&i.maxLine){var r=B(e,i.maxLine);i.sizer.style.minWidth=Math.max(0,r+3+wo)+"px",i.maxLineChanged=!1;var o=Math.max(0,i.sizer.offsetLeft+i.sizer.offsetWidth-i.scroller.clientWidth);o<n.scrollLeft&&!t.updateScrollPos&&xt(e,Math.min(i.scroller.scrollLeft,o),!0)}var s,a;if(t.updateScrollPos)s=t.updateScrollPos;else if(t.selectionChanged&&i.scroller.clientHeight){var l=K(e,n.sel.head);s=sn(e,l.left,l.top,l.left,l.bottom)}(t.changes.length||s&&null!=s.scrollTop)&&(a=b(e,t.changes,s&&s.scrollTop),e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop)),!a&&t.selectionChanged&&D(e),t.updateScrollPos?(i.scroller.scrollTop=i.scrollbarV.scrollTop=n.scrollTop=s.scrollTop,i.scroller.scrollLeft=i.scrollbarH.scrollLeft=n.scrollLeft=s.scrollLeft,m(e),t.scrollToPos&&rn(e,Xt(e.doc,t.scrollToPos),t.scrollToPosMargin)):s&&nn(e),t.selectionChanged&&M(e),e.state.focused&&t.updateInput&&dt(e,t.userSelChange);var c=t.maybeHiddenMarkers,u=t.maybeUnhiddenMarkers;if(c)for(var h=0;h<c.length;++h)c[h].lines.length||Fi(c[h],"hide");if(u)for(var h=0;h<u.length;++h)u[h].lines.length&&Fi(u[h],"unhide");var f;if(--bo||(f=yo,yo=null),t.textChanged&&Fi(e,"change",e,t.textChanged),t.cursorActivity&&Fi(e,"cursorActivity",e),f)for(var h=0;h<f.length;++h)f[h]()}function rt(e,t){return function(){var n=e||this,i=!n.curOp;i&&nt(n);try{var r=t.apply(n,arguments)}finally{i&&it(n)}return r}}function ot(e){return function(){var t,n=this.cm&&!this.cm.curOp;n&&nt(this.cm);try{t=e.apply(this,arguments)}finally{n&&it(this.cm)}return t}}function st(e,t){var n,i=!e.curOp;i&&nt(e);try{n=t()}finally{i&&it(e)}return n}function at(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),e.curOp.changes.push({from:t,to:n,diff:i})}function lt(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){ut(e),e.state.focused&&lt(e)})}function ct(e){function t(){var i=ut(e);i||n?(e.display.pollingFast=!1,lt(e)):(n=!0,e.display.poll.set(60,t))}var n=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function ut(e){var t=e.display.input,n=e.display.prevInput,i=e.doc,r=i.sel;if(!e.state.focused||Eo(t)||ft(e)||e.state.disableInput)return!1;var o=t.value;if(o==n&&Ut(r.from,r.to))return!1;if(Cr&&!Tr&&e.display.inputHasSelection===o)return dt(e,!0),!1;var s=!e.curOp;s&&nt(e),r.shift=!1;for(var a=0,l=Math.min(n.length,o.length);l>a&&n.charCodeAt(a)==o.charCodeAt(a);)++a;var c=r.from,u=r.to;a<n.length?c=Bt(c.line,c.ch-(n.length-a)):e.state.overwrite&&Ut(c,u)&&!e.state.pasteIncoming&&(u=Bt(u.line,Math.min(di(i,u.line).text.length,u.ch+(o.length-a))));var d=e.curOp.updateInput,h={from:c,to:u,text:No(o.slice(a)),origin:e.state.pasteIncoming?"paste":"+input"};return Ot(e.doc,h,"end"),e.curOp.updateInput=d,ji(e,"inputRead",e,h),o.length>1e3||o.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=o,s&&it(e),e.state.pasteIncoming=!1,!0}function dt(e,t){var n,i,r=e.doc;if(Ut(r.sel.from,r.sel.to))t&&(e.display.prevInput=e.display.input.value="",Cr&&!Tr&&(e.display.inputHasSelection=null));else{e.display.prevInput="",n=Mo&&(r.sel.to.line-r.sel.from.line>100||(i=e.getSelection()).length>1e3);var o=n?"-":i||e.getSelection();e.display.input.value=o,e.state.focused&&Xi(e.display.input),Cr&&!Tr&&(e.display.inputHasSelection=o)}e.display.inaccurateSelection=n}function ht(e){"nocursor"==e.options.readOnly||Or&&document.activeElement==e.display.input||e.display.input.focus()}function ft(e){return e.options.readOnly||e.doc.cantEdit}function pt(e){function t(){e.state.focused&&setTimeout(Ji(ht,e),0)}function n(){null==a&&(a=setTimeout(function(){a=null,s.cachedCharWidth=s.cachedTextHeight=So=null,U(e),st(e,Ji(at,e))},100))}function i(){for(var e=s.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(i,5e3):Ri(window,"resize",n)}function r(t){zi(e,t)||e.options.onDragEvent&&e.options.onDragEvent(e,Mi(t))||Li(t)}function o(){s.inaccurateSelection&&(s.prevInput="",s.inaccurateSelection=!1,s.input.value=e.getSelection(),Xi(s.input))}var s=e.display;Hi(s.scroller,"mousedown",rt(e,vt)),Cr?Hi(s.scroller,"dblclick",rt(e,function(t){if(!zi(e,t)){var n=gt(e,t);if(n&&!yt(e,t)&&!mt(e.display,t)){$i(t);var i=fn(di(e.doc,n.line).text,n);Qt(e.doc,i.from,i.to)}}})):Hi(s.scroller,"dblclick",function(t){zi(e,t)||$i(t)}),Hi(s.lineSpace,"selectstart",function(e){mt(s,e)||$i(e)}),Ur||Hi(s.scroller,"contextmenu",function(t){It(e,t)}),Hi(s.scroller,"scroll",function(){s.scroller.clientHeight&&(_t(e,s.scroller.scrollTop),xt(e,s.scroller.scrollLeft,!0),Fi(e,"scroll",e))}),Hi(s.scrollbarV,"scroll",function(){s.scroller.clientHeight&&_t(e,s.scrollbarV.scrollTop)}),Hi(s.scrollbarH,"scroll",function(){s.scroller.clientHeight&&xt(e,s.scrollbarH.scrollLeft)}),Hi(s.scroller,"mousewheel",function(t){Ct(e,t)}),Hi(s.scroller,"DOMMouseScroll",function(t){Ct(e,t)}),Hi(s.scrollbarH,"mousedown",t),Hi(s.scrollbarV,"mousedown",t),Hi(s.wrapper,"scroll",function(){s.wrapper.scrollTop=s.wrapper.scrollLeft=0});var a;Hi(window,"resize",n),setTimeout(i,5e3),Hi(s.input,"keyup",rt(e,function(t){zi(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,Mi(t))||16==t.keyCode&&(e.doc.sel.shift=!1)})),Hi(s.input,"input",Ji(ct,e)),Hi(s.input,"keydown",rt(e,Nt)),Hi(s.input,"keypress",rt(e,Et)),Hi(s.input,"focus",Ji(Mt,e)),Hi(s.input,"blur",Ji($t,e)),e.options.dragDrop&&(Hi(s.scroller,"dragstart",function(t){wt(e,t)}),Hi(s.scroller,"dragenter",r),Hi(s.scroller,"dragover",r),Hi(s.scroller,"drop",rt(e,bt))),Hi(s.scroller,"paste",function(t){mt(s,t)||(ht(e),ct(e))}),Hi(s.input,"paste",function(){e.state.pasteIncoming=!0,ct(e)}),Hi(s.input,"cut",o),Hi(s.input,"copy",o),$r&&Hi(s.sizer,"mouseup",function(){document.activeElement==s.input&&s.input.blur(),ht(e)})}function mt(e,t){for(var n=Pi(t);n!=e.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==e.sizer&&n!=e.mover)return!0}function gt(e,t,n){var i=e.display;if(!n){var r=Pi(t);if(r==i.scrollbarH||r==i.scrollbarH.firstChild||r==i.scrollbarV||r==i.scrollbarV.firstChild||r==i.scrollbarFiller||r==i.gutterFiller)return null}var o,s,a=sr(i.lineSpace);try{o=t.clientX,s=t.clientY}catch(t){return null}return Z(e,o-a.left,s-a.top)}function vt(e){function t(e){if(!Ut(v,e)){if(v=e,"single"==u)return Qt(r.doc,Xt(s,l),e),void 0;if(m=Xt(s,m),g=Xt(s,g),"double"==u){var t=fn(di(s,e.line).text,e);qt(e,m)?Qt(r.doc,t.from,g):Qt(r.doc,m,t.to)}else"triple"==u&&(qt(e,m)?Qt(r.doc,g,Xt(s,Bt(e.line,0))):Qt(r.doc,m,Xt(s,Bt(e.line+1,0))))}}function n(e){var i=++b,a=gt(r,e,!0);if(a)if(Ut(a,h)){var l=e.clientY<y.top?-20:e.clientY>y.bottom?20:0;l&&setTimeout(rt(r,function(){b==i&&(o.scroller.scrollTop+=l,n(e))}),50)}else{r.state.focused||Mt(r),h=a,t(a);var c=p(o,s);(a.line>=c.to||a.line<c.from)&&setTimeout(rt(r,function(){b==i&&n(e)}),150)}}function i(e){b=1/0,$i(e),ht(r),Ri(document,"mousemove",w),Ri(document,"mouseup",_)}if(!zi(this,e)){var r=this,o=r.display,s=r.doc,a=s.sel;if(a.shift=e.shiftKey,mt(o,e))return Sr||(o.scroller.draggable=!1,setTimeout(function(){o.scroller.draggable=!0},100)),void 0;if(!yt(r,e)){var l=gt(r,e);switch(Oi(e)){case 3:return Ur&&It.call(r,r,e),void 0;case 2:return l&&Qt(r.doc,l),setTimeout(Ji(ht,r),20),$i(e),void 0}if(!l)return Pi(e)==o.scroller&&$i(e),void 0;r.state.focused||Mt(r);var c=+new Date,u="single";if(Wr&&Wr.time>c-400&&Ut(Wr.pos,l))u="triple",$i(e),setTimeout(Ji(ht,r),20),pn(r,l.line);else if(zr&&zr.time>c-400&&Ut(zr.pos,l)){u="double",Wr={time:c,pos:l},$i(e);var d=fn(di(s,l.line).text,l);Qt(r.doc,d.from,d.to)}else zr={time:c,pos:l};var h=l;if(r.options.dragDrop&&To&&!ft(r)&&!Ut(a.from,a.to)&&!qt(l,a.from)&&!qt(a.to,l)&&"single"==u){var f=rt(r,function(t){Sr&&(o.scroller.draggable=!1),r.state.draggingText=!1,Ri(document,"mouseup",f),Ri(o.scroller,"drop",f),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&($i(t),Qt(r.doc,l),ht(r))});return Sr&&(o.scroller.draggable=!0),r.state.draggingText=f,o.scroller.dragDrop&&o.scroller.dragDrop(),Hi(document,"mouseup",f),Hi(o.scroller,"drop",f),void 0}$i(e),"single"==u&&Qt(r.doc,Xt(s,l));var m=a.from,g=a.to,v=l,y=sr(o.wrapper),b=0,w=rt(r,function(e){Cr||Oi(e)?n(e):i(e)}),_=rt(r,i);Hi(document,"mousemove",w),Hi(document,"mouseup",_)}}}function yt(e,t){var n=e.display;try{var i=t.clientX,r=t.clientY}catch(t){return!1}if(i>=Math.floor(sr(n.gutters).right))return!1;if($i(t),!Bi(e,"gutterClick"))return!0;var o=sr(n.lineDiv);if(r>o.bottom)return!0;r-=o.top-n.viewOffset;for(var s=0;s<e.options.gutters.length;++s){var a=n.gutters.childNodes[s];if(a&&sr(a).right>=i){var l=gi(e.doc,r),c=e.options.gutters[s];ji(e,"gutterClick",e,l,c,t);break}}return!0}function bt(e){var t=this;if(!(zi(t,e)||mt(t.display,e)||t.options.onDragEvent&&t.options.onDragEvent(t,Mi(e)))){$i(e),Cr&&(Xr=+new Date);var n=gt(t,e,!0),i=e.dataTransfer.files;if(n&&!ft(t))if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),s=0,a=function(e,i){var a=new FileReader;a.onload=function(){o[i]=a.result,++s==r&&(n=Xt(t.doc,n),Ot(t.doc,{from:n,to:n,text:No(o.join("\n")),origin:"paste"},"around"))},a.readAsText(e)},l=0;r>l;++l)a(i[l],l);else{if(t.state.draggingText&&!qt(n,t.doc.sel.from)&&!qt(t.doc.sel.to,n))return t.state.draggingText(e),setTimeout(Ji(ht,t),20),void 0;try{var o=e.dataTransfer.getData("Text");if(o){var c=t.doc.sel.from,u=t.doc.sel.to;Jt(t.doc,n,n),t.state.draggingText&&Wt(t.doc,"",c,u,"paste"),t.replaceSelection(o,null,"paste"),ht(t),Mt(t)}}catch(e){}}}}function wt(e,t){if(Cr&&(!e.state.draggingText||+new Date-Xr<100))return Li(t),void 0;if(!zi(e,t)&&!mt(e.display,t)){var n=e.getSelection();if(t.dataTransfer.setData("Text",n),t.dataTransfer.setDragImage&&!Mr){var i=nr("img",null,null,"position: fixed; left: 0; top: 0;");Er&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),Er&&i.parentNode.removeChild(i)}}}function _t(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,xr||b(e,[],t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),xr&&b(e,[]),$(e,100))}function xt(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,m(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function Ct(e,t){var n=t.wheelDeltaX,i=t.wheelDeltaY;null==n&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(n=t.detail),null==i&&t.detail&&t.axis==t.VERTICAL_AXIS?i=t.detail:null==i&&(i=t.wheelDelta);var r=e.display,o=r.scroller;if(n&&o.scrollWidth>o.clientWidth||i&&o.scrollHeight>o.clientHeight){if(i&&Hr&&Sr)for(var s=t.target;s!=o;s=s.parentNode)if(s.lineObj){e.display.currentWheelTarget=s;break}if(n&&!xr&&!Er&&null!=Kr)return i&&_t(e,Math.max(0,Math.min(o.scrollTop+i*Kr,o.scrollHeight-o.clientHeight))),xt(e,Math.max(0,Math.min(o.scrollLeft+n*Kr,o.scrollWidth-o.clientWidth))),$i(t),r.wheelStartX=null,void 0;if(i&&null!=Kr){var a=i*Kr,l=e.doc.scrollTop,c=l+r.wrapper.clientHeight;0>a?l=Math.max(0,l+a-50):c=Math.min(e.doc.height,c+a+50),b(e,[],{top:l,bottom:c})}20>Gr&&(null==r.wheelStartX?(r.wheelStartX=o.scrollLeft,r.wheelStartY=o.scrollTop,r.wheelDX=n,r.wheelDY=i,setTimeout(function(){if(null!=r.wheelStartX){var e=o.scrollLeft-r.wheelStartX,t=o.scrollTop-r.wheelStartY,n=t&&r.wheelDY&&t/r.wheelDY||e&&r.wheelDX&&e/r.wheelDX;r.wheelStartX=r.wheelStartY=null,n&&(Kr=(Kr*Gr+n)/(Gr+1),++Gr)}},200)):(r.wheelDX+=n,r.wheelDY+=i))}}function kt(e,t,n){if("string"==typeof t&&(t=lo[t],!t))return!1;e.display.pollingFast&&ut(e)&&(e.display.pollingFast=!1);var i=e.doc,r=i.sel.shift,o=!1;try{ft(e)&&(e.state.suppressEdits=!0),n&&(i.sel.shift=!1),o=t(e)!=_o}finally{i.sel.shift=r,e.state.suppressEdits=!1}return o}function Tt(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function St(e,t){var n=yn(e.options.keyMap),i=n.auto;clearTimeout(Qr),i&&!wn(t)&&(Qr=setTimeout(function(){yn(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i,s(e))},50));var r=_n(t,!0),o=!1;if(!r)return!1;var a=Tt(e);return o=t.shiftKey?bn("Shift-"+r,a,function(t){return kt(e,t,!0)})||bn(r,a,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?kt(e,t):void 0}):bn(r,a,function(t){return kt(e,t)}),o&&($i(t),M(e),Tr&&(t.oldKeyCode=t.keyCode,t.keyCode=0),ji(e,"keyHandled",e,r,t)),o}function Dt(e,t,n){var i=bn("'"+n+"'",Tt(e),function(t){return kt(e,t,!0)});return i&&($i(t),M(e),ji(e,"keyHandled",e,"'"+n+"'",t)),i}function Nt(e){var t=this;if(t.state.focused||Mt(t),Cr&&27==e.keyCode&&(e.returnValue=!1),!(zi(t,e)||t.options.onKeyEvent&&t.options.onKeyEvent(t,Mi(e)))){var n=e.keyCode;t.doc.sel.shift=16==n||e.shiftKey;var i=St(t,e);Er&&(Jr=i?n:null,!i&&88==n&&!Mo&&(Hr?e.metaKey:e.ctrlKey)&&t.replaceSelection(""))}}function Et(e){var t=this;if(!(zi(t,e)||t.options.onKeyEvent&&t.options.onKeyEvent(t,Mi(e)))){var n=e.keyCode,i=e.charCode;if(Er&&n==Jr)return Jr=null,$i(e),void 0;if(!(Er&&(!e.which||e.which<10)||$r)||!St(t,e)){var r=String.fromCharCode(null==i?n:i);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!ft(this)&&this.doc.mode.electricChars.indexOf(r)>-1&&setTimeout(rt(t,function(){cn(t,t.doc.sel.to.line,"smart")}),75),Dt(t,e,r)||(Cr&&!Tr&&(t.display.inputHasSelection=null),ct(t))}}}function Mt(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(Fi(e,"focus",e),e.state.focused=!0,-1==e.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(e.display.wrapper.className+=" CodeMirror-focused"),dt(e,!0)),lt(e),M(e))}function $t(e){e.state.focused&&(Fi(e,"blur",e),e.state.focused=!1,e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.doc.sel.shift=!1)},150)}function It(e,t){function n(){if(null!=r.input.selectionStart){var e=r.input.value=" "+(Ut(o.from,o.to)?"":r.input.value);r.prevInput=" ",r.input.selectionStart=1,r.input.selectionEnd=e.length}}function i(){if(r.inputDiv.style.position="relative",r.input.style.cssText=l,Tr&&(r.scrollbarV.scrollTop=r.scroller.scrollTop=a),lt(e),null!=r.input.selectionStart){(!Cr||Tr)&&n(),clearTimeout(Zr);var t=0,i=function(){" "==r.prevInput&&0==r.input.selectionStart?rt(e,lo.selectAll)(e):t++<10?Zr=setTimeout(i,500):dt(e)};Zr=setTimeout(i,200)}}var r=e.display,o=e.doc.sel;if(!mt(r,t)){var s=gt(e,t),a=r.scroller.scrollTop;if(s&&!Er){(Ut(o.from,o.to)||qt(s,o.from)||!qt(s,o.to))&&rt(e,Jt)(e.doc,s,s);var l=r.input.style.cssText;if(r.inputDiv.style.position="absolute",r.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",ht(e),dt(e,!0),Ut(o.from,o.to)&&(r.input.value=r.prevInput=" "),Cr&&!Tr&&n(),Ur){Li(t);var c=function(){Ri(window,"mouseup",c),setTimeout(i,20)};Hi(window,"mouseup",c)}else setTimeout(i,50)}}}function At(e,t,n){if(!qt(t.from,n))return Xt(e,n);var i=t.text.length-1-(t.to.line-t.from.line);if(n.line>t.to.line+i){var r=n.line-i,o=e.first+e.size-1;return r>o?Bt(o,di(e,o).text.length):Gt(n,di(e,r).text.length)}if(n.line==t.to.line+i)return Gt(n,Vi(t.text).length+(1==t.text.length?t.from.ch:0)+di(e,t.to.line).text.length-t.to.ch);var s=n.line-t.from.line;return Gt(n,t.text[s].length+(s?0:t.from.ch))}function Lt(e,t,n){if(n&&"object"==typeof n)return{anchor:At(e,t,n.anchor),head:At(e,t,n.head)};if("start"==n)return{anchor:t.from,head:t.from};var i=eo(t);if("around"==n)return{anchor:t.from,head:i};if("end"==n)return{anchor:i,head:i};var r=function(e){if(qt(e,t.from))return e;if(!qt(t.to,e))return i;var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=i.ch-t.to.ch),Bt(n,r)};return{anchor:r(e.sel.anchor),head:r(e.sel.head)}}function Pt(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(i.update=function(t,n,i,r){t&&(this.from=Xt(e,t)),n&&(this.to=Xt(e,n)),i&&(this.text=i),void 0!==r&&(this.origin=r)}),Fi(e,"beforeChange",e,i),e.cm&&Fi(e.cm,"beforeChange",e.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Ot(e,t,n,i){if(e.cm){if(!e.cm.curOp)return rt(e.cm,Ot)(e,t,n,i);if(e.cm.state.suppressEdits)return}if(!(Bi(e,"beforeChange")||e.cm&&Bi(e.cm,"beforeChange"))||(t=Pt(e,t,!0))){var r=qr&&!i&&Ln(e,t.from,t.to);if(r){for(var o=r.length-1;o>=1;--o)Ht(e,{from:r[o].from,to:r[o].to,text:[""]});r.length&&Ht(e,{from:r[0].from,to:r[0].to,text:t.text},n)}else Ht(e,t,n)}}function Ht(e,t,n){var i=Lt(e,t,n);xi(e,t,i,e.cm?e.cm.curOp.id:0/0),jt(e,t,i,In(e,t));var r=[];ci(e,function(e,n){n||-1!=Gi(r,e.history)||(Ni(e.history,t),r.push(e.history)),jt(e,t,null,In(e,t))})}function Rt(e,t){if(!e.cm||!e.cm.state.suppressEdits){var n=e.history,i=("undo"==t?n.done:n.undone).pop();if(i){var r={changes:[],anchorBefore:i.anchorAfter,headBefore:i.headAfter,anchorAfter:i.anchorBefore,headAfter:i.headBefore,generation:n.generation};("undo"==t?n.undone:n.done).push(r),n.generation=i.generation||++n.maxGeneration;for(var o=Bi(e,"beforeChange")||e.cm&&Bi(e.cm,"beforeChange"),s=i.changes.length-1;s>=0;--s){var a=i.changes[s];if(a.origin=t,o&&!Pt(e,a,!1))return("undo"==t?n.done:n.undone).length=0,void 0;r.changes.push(_i(e,a));var l=s?Lt(e,a,null):{anchor:i.anchorBefore,head:i.headBefore};jt(e,a,l,An(e,a));var c=[];ci(e,function(e,t){t||-1!=Gi(c,e.history)||(Ni(e.history,a),c.push(e.history)),jt(e,a,null,An(e,a))})}}}}function Ft(e,t){function n(e){return Bt(e.line+t,e.ch)}e.first+=t,e.cm&&at(e.cm,e.first,e.first,t),e.sel.head=n(e.sel.head),e.sel.anchor=n(e.sel.anchor),e.sel.from=n(e.sel.from),e.sel.to=n(e.sel.to)}function jt(e,t,n,i){if(e.cm&&!e.cm.curOp)return rt(e.cm,jt)(e,t,n,i);if(t.to.line<e.first)return Ft(e,t.text.length-1-(t.to.line-t.from.line)),void 0;if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);Ft(e,r),t={from:Bt(e.first,0),to:Bt(t.to.line+r,t.to.ch),text:[Vi(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:Bt(o,di(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=hi(e,t.from,t.to),n||(n=Lt(e,t,null)),e.cm?zt(e.cm,t,i,n):si(e,t,i,n)}}function zt(e,t,n,i){var o=e.doc,s=e.display,a=t.from,l=t.to,c=!1,d=a.line;e.options.lineWrapping||(d=mi(Rn(o,di(o,a.line))),o.iter(d,l.line+1,function(e){return e==s.maxLine?(c=!0,!0):void 0})),qt(o.sel.head,t.from)||qt(t.to,o.sel.head)||(e.curOp.cursorActivity=!0),si(o,t,n,i,r(e)),e.options.lineWrapping||(o.iter(d,a.line+t.text.length,function(e){var t=u(o,e);t>s.maxLineLength&&(s.maxLine=e,s.maxLineLength=t,s.maxLineChanged=!0,c=!1)}),c&&(e.curOp.updateMaxLine=!0)),o.frontier=Math.min(o.frontier,a.line),$(e,400);var h=t.text.length-(l.line-a.line)-1;if(at(e,a.line,l.line+1,h),Bi(e,"change")){var f={from:a,to:l,text:t.text,removed:t.removed,origin:t.origin};if(e.curOp.textChanged){for(var p=e.curOp.textChanged;p.next;p=p.next);p.next=f}else e.curOp.textChanged=f}}function Wt(e,t,n,i,r){if(i||(i=n),qt(i,n)){var o=i;i=n,n=o}"string"==typeof t&&(t=No(t)),Ot(e,{from:n,to:i,text:t,origin:r},null)}function Bt(e,t){return this instanceof Bt?(this.line=e,this.ch=t,void 0):new Bt(e,t)}function Ut(e,t){return e.line==t.line&&e.ch==t.ch}function qt(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Yt(e){return Bt(e.line,e.ch)}function Vt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Xt(e,t){if(t.line<e.first)return Bt(e.first,0);var n=e.first+e.size-1;return t.line>n?Bt(n,di(e,n).text.length):Gt(t,di(e,t.line).text.length)}function Gt(e,t){var n=e.ch;return null==n||n>t?Bt(e.line,t):0>n?Bt(e.line,0):e}function Kt(e,t){return t>=e.first&&t<e.first+e.size}function Qt(e,t,n,i){if(e.sel.shift||e.sel.extend){var r=e.sel.anchor;if(n){var o=qt(t,r);o!=qt(n,r)?(r=t,t=n):o!=qt(t,n)&&(t=n)}Jt(e,r,t,i)}else Jt(e,t,n||t,i);e.cm&&(e.cm.curOp.userSelChange=!0)}function Zt(e,t,n){var i={anchor:t,head:n};return Fi(e,"beforeSelectionChange",e,i),e.cm&&Fi(e.cm,"beforeSelectionChange",e.cm,i),i.anchor=Xt(e,i.anchor),i.head=Xt(e,i.head),i}function Jt(e,t,n,i,r){if(!r&&Bi(e,"beforeSelectionChange")||e.cm&&Bi(e.cm,"beforeSelectionChange")){var o=Zt(e,t,n);n=o.head,t=o.anchor}var s=e.sel;if(s.goalColumn=null,(r||!Ut(t,s.anchor))&&(t=tn(e,t,i,"push"!=r)),(r||!Ut(n,s.head))&&(n=tn(e,n,i,"push"!=r)),!Ut(s.anchor,t)||!Ut(s.head,n)){s.anchor=t,s.head=n;var a=qt(n,t);s.from=a?n:t,s.to=a?t:n,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=e.cm.curOp.cursorActivity=!0),ji(e,"cursorActivity",e)}}function en(e){Jt(e.doc,e.doc.sel.from,e.doc.sel.to,null,"push")}function tn(e,t,n,i){var r=!1,o=t,s=n||1;e.cantEdit=!1;e:for(;;){var a=di(e,o.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(u.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(i&&(Fi(u,"beforeCursorEnter"),u.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!u.atomic)continue;var d=u.find()[0>s?"from":"to"];if(Ut(d,o)&&(d.ch+=s,d.ch<0?d=d.line>e.first?Xt(e,Bt(d.line-1)):null:d.ch>a.text.length&&(d=d.line<e.first+e.size-1?Bt(d.line+1,0):null),!d)){if(r)return i?(e.cantEdit=!0,Bt(e.first,0)):tn(e,t,n,!0);r=!0,d=t,s=-s}o=d;continue e}}return o}}function nn(e){var t=rn(e,e.doc.sel.head,e.options.cursorScrollMargin);if(e.state.focused){var n=e.display,i=sr(n.sizer),r=null;if(t.top+i.top<0?r=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!Lr){var o="none"==n.cursor.style.display;o&&(n.cursor.style.display="",n.cursor.style.left=t.left+"px",n.cursor.style.top=t.top-n.viewOffset+"px"),n.cursor.scrollIntoView(r),o&&(n.cursor.style.display="none")}}}function rn(e,t,n){for(null==n&&(n=0);;){var i=!1,r=K(e,t),o=sn(e,r.left,r.top-n,r.left,r.bottom+n),s=e.doc.scrollTop,a=e.doc.scrollLeft;if(null!=o.scrollTop&&(_t(e,o.scrollTop),Math.abs(e.doc.scrollTop-s)>1&&(i=!0)),null!=o.scrollLeft&&(xt(e,o.scrollLeft),Math.abs(e.doc.scrollLeft-a)>1&&(i=!0)),!i)return r}}function on(e,t,n,i,r){var o=sn(e,t,n,i,r);null!=o.scrollTop&&_t(e,o.scrollTop),null!=o.scrollLeft&&xt(e,o.scrollLeft)}function sn(e,t,n,i,r){var o=e.display,s=et(e.display);0>n&&(n=0);var a=o.scroller.clientHeight-wo,l=o.scroller.scrollTop,c={},u=e.doc.height+O(o),d=s>n,h=r>u-s;if(l>n)c.scrollTop=d?0:n;else if(r>l+a){var f=Math.min(n,(h?u:r)-a);f!=l&&(c.scrollTop=f)}var p=o.scroller.clientWidth-wo,m=o.scroller.scrollLeft;t+=o.gutters.offsetWidth,i+=o.gutters.offsetWidth;var g=o.gutters.offsetWidth,v=g+10>t;return m+g>t||v?(v&&(t=0),c.scrollLeft=Math.max(0,t-10-g)):i>p+m-3&&(c.scrollLeft=i+10-p),c}function an(e,t,n){e.curOp.updateScrollPos={scrollLeft:null==t?e.doc.scrollLeft:t,scrollTop:null==n?e.doc.scrollTop:n}}function ln(e,t,n){var i=e.curOp.updateScrollPos||(e.curOp.updateScrollPos={scrollLeft:e.doc.scrollLeft,scrollTop:e.doc.scrollTop}),r=e.display.scroller;i.scrollTop=Math.max(0,Math.min(r.scrollHeight-r.clientHeight,i.scrollTop+n)),i.scrollLeft=Math.max(0,Math.min(r.scrollWidth-r.clientWidth,i.scrollLeft+t))}function cn(e,t,n,i){var r=e.doc;if(null==n&&(n="add"),"smart"==n)if(e.doc.mode.indent)var o=L(e,t);else n="prev";var s,a=e.options.tabSize,l=di(r,t),c=qi(l.text,null,a),u=l.text.match(/^\s*/)[0];if("smart"==n&&(s=e.doc.mode.indent(o,l.text.slice(u.length),l.text),s==_o)){if(!i)return;n="prev"}"prev"==n?s=t>r.first?qi(di(r,t-1).text,null,a):0:"add"==n?s=c+e.options.indentUnit:"subtract"==n?s=c-e.options.indentUnit:"number"==typeof n&&(s=c+n),s=Math.max(0,s);var d="",h=0;if(e.options.indentWithTabs)for(var f=Math.floor(s/a);f;--f)h+=a,d+="	";s>h&&(d+=Yi(s-h)),d!=u&&Wt(e.doc,d,Bt(t,0),Bt(t,u.length),"+input"),l.stateAfter=null}function un(e,t,n){var i=t,r=t,o=e.doc;return"number"==typeof t?r=di(o,Vt(o,t)):i=mi(t),null==i?null:n(r,i)?(at(e,i,i+1),r):null}function dn(e,t,n,i,r){function o(){var t=a+n;return t<e.first||t>=e.first+e.size?d=!1:(a=t,u=di(e,t))}function s(e){var t=(r?wr:_r)(u,l,n,!0);if(null==t){if(e||!o())return d=!1;l=r?(0>n?pr:fr)(u):0>n?u.text.length:0}else l=t;return!0}var a=t.line,l=t.ch,c=n,u=di(e,a),d=!0;if("char"==i)s();else if("column"==i)s(!0);else if("word"==i||"group"==i)for(var h=null,f="group"==i,p=!0;!(0>n)||s(!p);p=!1){var m=u.text.charAt(l)||"\n",g=er(m)?"w":f?/\s/.test(m)?null:"p":null;if(h&&h!=g){0>n&&(n=1,s());break}if(g&&(h=g),n>0&&!s(!p))break}var v=tn(e,Bt(a,l),c,!0);return d||(v.hitSide=!0),v}function hn(e,t,n,i){var r,o=e.doc,s=t.left;if("page"==i){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=t.top+n*(a-(0>n?1.5:.5)*et(e.display))}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(;;){var l=Z(e,s,r);if(!l.outside)break;if(0>n?0>=r:r>=o.height){l.hitSide=!0;break}r+=5*n}return l}function fn(e,t){var n=t.ch,i=t.ch;if(e){t.xRel<0||i==e.length?--n:++i;for(var r=e.charAt(n),o=er(r)?er:/\s/.test(r)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!er(e)};n>0&&o(e.charAt(n-1));)--n;for(;i<e.length&&o(e.charAt(i));)++i}return{from:Bt(t.line,n),to:Bt(t.line,i)}}function pn(e,t){Qt(e.doc,Bt(t,0),Xt(e.doc,Bt(t+1,0)))}function mn(t,n,i,r){e.defaults[t]=n,i&&(to[t]=r?function(e,t,n){n!=io&&i(e,t,n)}:i)}function gn(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function vn(e,t,n){return e.startState?e.startState(t,n):!0}function yn(e){return"string"==typeof e?co[e]:e}function bn(e,t,n){function i(t){t=yn(t);var r=t[e];if(r===!1)return"stop";if(null!=r&&n(r))return!0;if(t.nofallthrough)return"stop";var o=t.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return i(o);for(var s=0,a=o.length;a>s;++s){var l=i(o[s]);if(l)return l}return!1}for(var r=0;r<t.length;++r){var o=i(t[r]);if(o)return"stop"!=o}}function wn(e){var t=$o[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function _n(e,t){if(Er&&34==e.keyCode&&e["char"])return!1;var n=$o[e.keyCode];return null==n||e.altGraphKey?!1:(e.altKey&&(n="Alt-"+n),(Br?e.metaKey:e.ctrlKey)&&(n="Ctrl-"+n),(Br?e.ctrlKey:e.metaKey)&&(n="Cmd-"+n),!t&&e.shiftKey&&(n="Shift-"+n),n)
}function xn(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0}function Cn(e,t){this.lines=[],this.type=t,this.doc=e}function kn(e,t,n,i,r){if(i&&i.shared)return Sn(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return rt(e.cm,kn)(e,t,n,i,r);var o=new Cn(e,r);if("range"==r&&!qt(t,n))return o;i&&Qi(i,o),o.replacedWith&&(o.collapsed=!0,o.replacedWith=nr("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||(o.replacedWith.ignoreEvents=!0)),o.collapsed&&(Yr=!0),o.addToHistory&&xi(e,{from:t,to:n,origin:"markText"},{head:e.sel.head,anchor:e.sel.anchor},0/0);var s,a,l,c=t.line,u=0,d=e.cm;if(e.iter(c,n.line+1,function(i){d&&o.collapsed&&!d.options.lineWrapping&&Rn(e,i)==d.display.maxLine&&(l=!0);var r={from:null,to:null,marker:o};u+=i.text.length,c==t.line&&(r.from=t.ch,u-=t.ch),c==n.line&&(r.to=n.ch,u-=i.text.length-n.ch),o.collapsed&&(c==n.line&&(a=Pn(i,n.ch)),c==t.line?s=Pn(i,t.ch):pi(i,0)),En(i,r),++c}),o.collapsed&&e.iter(t.line,n.line+1,function(t){Fn(e,t)&&pi(t,0)}),o.clearOnEnter&&Hi(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(qr=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed){if(s!=a)throw new Error("Inserting collapsed marker overlapping an existing one");o.size=u,o.atomic=!0}return d&&(l&&(d.curOp.updateMaxLine=!0),(o.className||o.startStyle||o.endStyle||o.collapsed)&&at(d,t.line,n.line+1),o.atomic&&en(d)),o}function Tn(e,t){this.markers=e,this.primary=t;for(var n=0,i=this;n<e.length;++n)e[n].parent=this,Hi(e[n],"clear",function(){i.clear()})}function Sn(e,t,n,i,r){i=Qi(i),i.shared=!1;var o=[kn(e,t,n,i,r)],s=o[0],a=i.replacedWith;return ci(e,function(e){a&&(i.replacedWith=a.cloneNode(!0)),o.push(kn(e,Xt(e,t),Xt(e,n),i,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=Vi(o)}),new Tn(o,s)}function Dn(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Nn(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function En(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Mn(e,t,n){if(e)for(var i,r=0;r<e.length;++r){var o=e[r],s=o.marker,a=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);if(a||"bookmark"==s.type&&o.from==t&&(!n||!o.marker.insertLeft)){var l=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push({from:o.from,to:l?null:o.to,marker:s})}}return i}function $n(e,t,n){if(e)for(var i,r=0;r<e.length;++r){var o=e[r],s=o.marker,a=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);if(a||"bookmark"==s.type&&o.from==t&&(!n||o.marker.insertLeft)){var l=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push({from:l?null:o.from-t,to:null==o.to?null:o.to-t,marker:s})}}return i}function In(e,t){var n=Kt(e,t.from.line)&&di(e,t.from.line).markedSpans,i=Kt(e,t.to.line)&&di(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,o=t.to.ch,s=Ut(t.from,t.to),a=Mn(n,r,s),l=$n(i,o,s),c=1==t.text.length,u=Vi(t.text).length+(c?r:0);if(a)for(var d=0;d<a.length;++d){var h=a[d];if(null==h.to){var f=Dn(l,h.marker);f?c&&(h.to=null==f.to?null:f.to+u):h.to=r}}if(l)for(var d=0;d<l.length;++d){var h=l[d];if(null!=h.to&&(h.to+=u),null==h.from){var f=Dn(a,h.marker);f||(h.from=u,c&&(a||(a=[])).push(h))}else h.from+=u,c&&(a||(a=[])).push(h)}if(c&&a){for(var d=0;d<a.length;++d)null!=a[d].from&&a[d].from==a[d].to&&"bookmark"!=a[d].marker.type&&a.splice(d--,1);a.length||(a=null)}var p=[a];if(!c){var m,g=t.text.length-2;if(g>0&&a)for(var d=0;d<a.length;++d)null==a[d].to&&(m||(m=[])).push({from:null,to:null,marker:a[d].marker});for(var d=0;g>d;++d)p.push(m);p.push(l)}return p}function An(e,t){var n=ki(e,t),i=In(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],s=i[r];if(o&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else s&&(n[r]=s)}return n}function Ln(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=Gi(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:t,to:n}],o=0;o<i.length;++o)for(var s=i[o],a=s.find(),l=0;l<r.length;++l){var c=r[l];if(!qt(c.to,a.from)&&!qt(a.to,c.from)){var u=[l,1];(qt(c.from,a.from)||!s.inclusiveLeft&&Ut(c.from,a.from))&&u.push({from:c.from,to:a.from}),(qt(a.to,c.to)||!s.inclusiveRight&&Ut(c.to,a.to))&&u.push({from:a.to,to:c.to}),r.splice.apply(r,u),l+=u.length-1}}return r}function Pn(e,t){var n,i=Yr&&e.markedSpans;if(i)for(var r,o=0;o<i.length;++o)r=i[o],r.marker.collapsed&&(null==r.from||r.from<t)&&(null==r.to||r.to>t)&&(!n||n.width<r.marker.width)&&(n=r.marker);return n}function On(e){return Pn(e,-1)}function Hn(e){return Pn(e,e.text.length+1)}function Rn(e,t){for(var n;n=On(t);)t=di(e,n.find().from.line);return t}function Fn(e,t){var n=Yr&&t.markedSpans;if(n)for(var i,r=0;r<n.length;++r)if(i=n[r],i.marker.collapsed){if(null==i.from)return!0;if(!i.marker.replacedWith&&0==i.from&&i.marker.inclusiveLeft&&jn(e,t,i))return!0}}function jn(e,t,n){if(null==n.to){var i=n.marker.find().to,r=di(e,i.line);return jn(e,r,Dn(r.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var o,s=0;s<t.markedSpans.length;++s)if(o=t.markedSpans[s],o.marker.collapsed&&!o.marker.replacedWith&&o.from==n.to&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&jn(e,t,o))return!0}function zn(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Wn(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Bn(e){return function(){var t=!this.cm.curOp;t&&nt(this.cm);try{var n=e.apply(this,arguments)}finally{t&&it(this.cm)}return n}}function Un(e){return null!=e.height?e.height:(e.node.parentNode&&1==e.node.parentNode.nodeType||rr(e.cm.display.measure,nr("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function qn(e,t,n,i){var r=new uo(e,n,i);return r.noHScroll&&(e.display.alignWidgets=!0),un(e,t,function(t){if((t.widgets||(t.widgets=[])).push(r),r.line=t,!Fn(e.doc,t)||r.showIfHidden){var n=vi(e,t)<e.display.scroller.scrollTop;pi(t,t.height+Un(r)),n&&ln(e,0,r.height)}return!0}),r}function Yn(e,t,n){var i={text:e};return Wn(i,t),i.height=n?n(i):1,i}function Vn(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),zn(e),Wn(e,n);var r=i?i(e):1;r!=e.height&&pi(e,r)}function Xn(e){e.parent=null,zn(e)}function Gn(e,t,n,i,r){var o=n.flattenSpans;null==o&&(o=e.options.flattenSpans);var s,a=0,l=null,c=new xn(t,e.options.tabSize);for(""==t&&n.blankLine&&n.blankLine(i);!c.eol();)c.pos>e.options.maxHighlightLength?(o=!1,c.pos=Math.min(t.length,c.start+5e4),s=null):s=n.token(c,i),o&&l==s||(a<c.start&&r(c.start,l),a=c.start,l=s),c.start=c.pos;a<c.pos&&r(c.pos,l)}function Kn(e,t,n){var i=[e.state.modeGen];Gn(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)});for(var r=0;r<e.state.overlays.length;++r){var o=e.state.overlays[r],s=1,a=0;Gn(e,t.text,o.mode,!0,function(e,t){for(var n=s;e>a;){var r=i[s];r>e&&i.splice(s,1,e,i[s+1],r),s+=2,a=Math.min(e,r)}if(t)if(o.opaque)i.splice(n,s-n,e,t),s=n+2;else for(;s>n;n+=2){var l=i[n+1];i[n+1]=l?l+" "+t:t}})}return i}function Qn(e,t){return t.styles&&t.styles[0]==e.state.modeGen||(t.styles=Kn(e,t,t.stateAfter=L(e,mi(t)))),t.styles}function Zn(e,t,n){var i=e.doc.mode,r=new xn(t.text,e.options.tabSize);for(""==t.text&&i.blankLine&&i.blankLine(n);!r.eol()&&r.pos<=e.options.maxHighlightLength;)i.token(r,n),r.start=r.pos}function Jn(e){return e?ho[e]||(ho[e]="cm-"+e.replace(/ +/g," cm-")):null}function ei(e,t,n){for(var i,r=t,o=!0;i=On(r);)r=di(e.doc,i.find().from.line);var s={pre:nr("pre"),col:0,pos:0,display:!n,measure:null,measuredSomething:!1,cm:e};r.textClass&&(s.pre.className=r.textClass);do{r.text&&(o=!1),s.measure=r==t&&n,s.pos=0,s.addToken=s.measure?ni:ti,(Cr||Sr)&&e.getOption("lineWrapping")&&(s.addToken=ii(s.addToken));var a=oi(r,s,Qn(e,r));n&&r==t&&!s.measuredSomething&&(n[0]=s.pre.appendChild(cr(e.display.measure)),s.measuredSomething=!0),a&&(r=di(e.doc,a.to.line))}while(a);!n||s.measuredSomething||n[0]||(n[0]=s.pre.appendChild(o?nr("span"," "):cr(e.display.measure))),s.pre.firstChild||Fn(e.doc,t)||s.pre.appendChild(document.createTextNode(" "));var l;if(n&&Cr&&(l=yi(r))){var c=l.length-1;l[c].from==l[c].to&&--c;var u=l[c],d=l[c-1];if(u.from+1==u.to&&d&&u.level<d.level){var h=n[s.pos-1];h&&h.parentNode.insertBefore(h.measureRight=cr(e.display.measure),h.nextSibling)}}return Fi(e,"renderLine",e,t,s.pre),s.pre}function ti(e,t,n,i,r){if(t){if(fo.test(t))for(var o=document.createDocumentFragment(),s=0;;){fo.lastIndex=s;var a=fo.exec(t),l=a?a.index-s:t.length-s;if(l&&(o.appendChild(document.createTextNode(t.slice(s,s+l))),e.col+=l),!a)break;if(s+=l+1,"	"==a[0]){var c=e.cm.options.tabSize,u=c-e.col%c;o.appendChild(nr("span",Yi(u),"cm-tab")),e.col+=u}else{var d=nr("span","•","cm-invalidchar");d.title="\\u"+a[0].charCodeAt(0).toString(16),o.appendChild(d),e.col+=1}}else{e.col+=t.length;var o=document.createTextNode(t)}if(n||i||r||e.measure){var h=n||"";return i&&(h+=i),r&&(h+=r),e.pre.appendChild(nr("span",[o],h))}e.pre.appendChild(o)}}function ni(e,t,n,i,r){for(var o=e.cm.options.lineWrapping,s=0;s<t.length;++s){var a=t.charAt(s),l=0==s;a>=""&&"">a&&s<t.length-1?(a=t.slice(s,s+2),++s):s&&o&&ar(t,s)&&e.pre.appendChild(nr("wbr"));var c=e.measure[e.pos]=ti(e,a,n,l&&i,s==t.length-1&&r);Cr&&o&&" "==a&&s&&!/\s/.test(t.charAt(s-1))&&s<t.length-1&&!/\s/.test(t.charAt(s+1))&&(c.style.whiteSpace="normal"),e.pos+=a.length}t.length&&(e.measuredSomething=!0)}function ii(e){function t(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+=" "}return function(n,i,r,o,s){return e(n,i.replace(/ {3,}/,t),r,o,s)}}function ri(e,t,n){n&&(e.display||(n=n.cloneNode(!0)),e.measure&&(e.measure[e.pos]=t?n:e.pre.appendChild(cr(e.cm.display.measure)),e.measuredSomething=!0),e.pre.appendChild(n)),e.pos+=t}function oi(e,t,n){var i=e.markedSpans,r=e.text,o=0;if(i)for(var s,a,l,c,u,d=r.length,h=0,f=1,p="",m=0;;){if(m==h){a=l=c="",u=null,m=1/0;for(var g=null,v=0;v<i.length;++v){var y=i[v],b=y.marker;y.from<=h&&(null==y.to||y.to>h)?(null!=y.to&&m>y.to&&(m=y.to,l=""),b.className&&(a+=" "+b.className),b.startStyle&&y.from==h&&(c+=" "+b.startStyle),b.endStyle&&y.to==m&&(l+=" "+b.endStyle),b.collapsed&&(!u||u.marker.size<b.size)&&(u=y)):y.from>h&&m>y.from&&(m=y.from),"bookmark"==b.type&&y.from==h&&b.replacedWith&&(g=b.replacedWith)}if(u&&(u.from||0)==h&&(ri(t,(null==u.to?d:u.to)-h,null!=u.from&&u.marker.replacedWith),null==u.to))return u.marker.find();g&&!u&&ri(t,0,g)}if(h>=d)break;for(var w=Math.min(d,m);;){if(p){var _=h+p.length;if(!u){var x=_>w?p.slice(0,w-h):p;t.addToken(t,x,s?s+a:a,c,h+x.length==m?l:"")}if(_>=w){p=p.slice(w-h),h=w;break}h=_,c=""}p=r.slice(o,o=n[f++]),s=Jn(n[f++])}}else for(var f=1;f<n.length;f+=2)t.addToken(t,r.slice(o,o=n[f]),Jn(n[f+1]))}function si(e,t,n,i,r){function o(e){return n?n[e]:null}function s(e,n,i){Vn(e,n,i,r),ji(e,"change",e,t)}var a=t.from,l=t.to,c=t.text,u=di(e,a.line),d=di(e,l.line),h=Vi(c),f=o(c.length-1),p=l.line-a.line;if(0==a.ch&&0==l.ch&&""==h){for(var m=0,g=c.length-1,v=[];g>m;++m)v.push(Yn(c[m],o(m),r));s(d,d.text,f),p&&e.remove(a.line,p),v.length&&e.insert(a.line,v)}else if(u==d)if(1==c.length)s(u,u.text.slice(0,a.ch)+h+u.text.slice(l.ch),f);else{for(var v=[],m=1,g=c.length-1;g>m;++m)v.push(Yn(c[m],o(m),r));v.push(Yn(h+u.text.slice(l.ch),f,r)),s(u,u.text.slice(0,a.ch)+c[0],o(0)),e.insert(a.line+1,v)}else if(1==c.length)s(u,u.text.slice(0,a.ch)+c[0]+d.text.slice(l.ch),o(0)),e.remove(a.line+1,p);else{s(u,u.text.slice(0,a.ch)+c[0],o(0)),s(d,h+d.text.slice(l.ch),f);for(var m=1,g=c.length-1,v=[];g>m;++m)v.push(Yn(c[m],o(m),r));p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,v)}ji(e,"change",e,t),Jt(e,i.anchor,i.head,null,!0)}function ai(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,i=0;n>t;++t)e[t].parent=this,i+=e[t].height;this.height=i}function li(e){this.children=e;for(var t=0,n=0,i=0,r=e.length;r>i;++i){var o=e[i];t+=o.chunkSize(),n+=o.height,o.parent=this}this.size=t,this.height=n,this.parent=null}function ci(e,t,n){function i(e,r,o){if(e.linked)for(var s=0;s<e.linked.length;++s){var a=e.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;(!n||l)&&(t(a.doc,l),i(a.doc,e,l))}}}i(e,null,!0)}function ui(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,o(e),n(e),e.options.lineWrapping||d(e),e.options.mode=t.modeOption,at(e)}function di(e,t){for(t-=e.first;!e.lines;)for(var n=0;;++n){var i=e.children[n],r=i.chunkSize();if(r>t){e=i;break}t-=r}return e.lines[t]}function hi(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;r==n.line&&(o=o.slice(0,n.ch)),r==t.line&&(o=o.slice(t.ch)),i.push(o),++r}),i}function fi(e,t,n){var i=[];return e.iter(t,n,function(e){i.push(e.text)}),i}function pi(e,t){for(var n=t-e.height,i=e;i;i=i.parent)i.height+=n}function mi(e){if(null==e.parent)return null;for(var t=e.parent,n=Gi(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function gi(e,t){var n=e.first;e:do{for(var i=0,r=e.children.length;r>i;++i){var o=e.children[i],s=o.height;if(s>t){e=o;continue e}t-=s,n+=o.chunkSize()}return n}while(!e.lines);for(var i=0,r=e.lines.length;r>i;++i){var a=e.lines[i],l=a.height;if(l>t)break;t-=l}return n+i}function vi(e,t){t=Rn(e.doc,t);for(var n=0,i=t.parent,r=0;r<i.lines.length;++r){var o=i.lines[r];if(o==t)break;n+=o.height}for(var s=i.parent;s;i=s,s=i.parent)for(var r=0;r<s.children.length;++r){var a=s.children[r];if(a==i)break;n+=a.height}return n}function yi(e){var t=e.order;return null==t&&(t=e.order=Ao(e.text)),t}function bi(e){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:e||1,maxGeneration:e||1}}function wi(e,t,n,i){var r=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function _i(e,t){var n={from:t.from,to:eo(t),text:hi(e,t.from,t.to)};return wi(e,n,t.from.line,t.to.line+1),ci(e,function(e){wi(e,n,t.from.line,t.to.line+1)},!0),n}function xi(e,t,n,i){var r=e.history;r.undone.length=0;var o=+new Date,s=Vi(r.done);if(s&&(r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&r.lastTime>o-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))){var a=Vi(s.changes);Ut(t.from,t.to)&&Ut(t.from,a.to)?a.to=eo(t):s.changes.push(_i(e,t)),s.anchorAfter=n.anchor,s.headAfter=n.head}else for(s={changes:[_i(e,t)],generation:r.generation,anchorBefore:e.sel.anchor,headBefore:e.sel.head,anchorAfter:n.anchor,headAfter:n.head},r.done.push(s),r.generation=++r.maxGeneration;r.done.length>r.undoDepth;)r.done.shift();r.lastTime=o,r.lastOp=i,r.lastOrigin=t.origin}function Ci(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function ki(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=0,r=[];i<t.text.length;++i)r.push(Ci(n[i]));return r}function Ti(e,t){for(var n=0,i=[];n<e.length;++n){var r=e[n],o=r.changes,s=[];i.push({changes:s,anchorBefore:r.anchorBefore,headBefore:r.headBefore,anchorAfter:r.anchorAfter,headAfter:r.headAfter});for(var a=0;a<o.length;++a){var l,c=o[a];if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var u in c)(l=u.match(/^spans_(\d+)$/))&&Gi(t,Number(l[1]))>-1&&(Vi(s)[u]=c[u],delete c[u])}}return i}function Si(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function Di(e,t,n,i){for(var r=0;r<e.length;++r){for(var o=e[r],s=!0,a=0;a<o.changes.length;++a){var l=o.changes[a];if(o.copied||(l.from=Yt(l.from),l.to=Yt(l.to)),n<l.from.line)l.from.line+=i,l.to.line+=i;else if(t<=l.to.line){s=!1;break}}o.copied||(o.anchorBefore=Yt(o.anchorBefore),o.headBefore=Yt(o.headBefore),o.anchorAfter=Yt(o.anchorAfter),o.readAfter=Yt(o.headAfter),o.copied=!0),s?(Si(o.anchorBefore),Si(o.headBefore),Si(o.anchorAfter),Si(o.headAfter)):(e.splice(0,r+1),r=0)}}function Ni(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;Di(e.done,n,i,r),Di(e.undone,n,i,r)}function Ei(){Li(this)}function Mi(e){return e.stop||(e.stop=Ei),e}function $i(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Ii(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ai(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Li(e){$i(e),Ii(e)}function Pi(e){return e.target||e.srcElement}function Oi(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Hr&&e.ctrlKey&&1==t&&(t=3),t}function Hi(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={}),r=i[t]||(i[t]=[]);r.push(n)}}function Ri(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers&&e._handlers[t];if(!i)return;for(var r=0;r<i.length;++r)if(i[r]==n){i.splice(r,1);break}}}function Fi(e,t){var n=e._handlers&&e._handlers[t];if(n)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function ji(e,t){function n(e){return function(){e.apply(null,r)}}var i=e._handlers&&e._handlers[t];if(i){var r=Array.prototype.slice.call(arguments,2);yo||(++bo,yo=[],setTimeout(Wi,0));for(var o=0;o<i.length;++o)yo.push(n(i[o]))}}function zi(e,t){return Fi(e,t.type,e,t),Ai(t)}function Wi(){--bo;var e=yo;yo=null;for(var t=0;t<e.length;++t)e[t]()}function Bi(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function Ui(){this.id=null}function qi(e,t,n,i,r){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var o=i||0,s=r||0;t>o;++o)"	"==e.charAt(o)?s+=n-s%n:++s;return s}function Yi(e){for(;xo.length<=e;)xo.push(Vi(xo)+" ");return xo[e]}function Vi(e){return e[e.length-1]}function Xi(e){if(Pr)e.selectionStart=0,e.selectionEnd=e.value.length;else try{e.select()}catch(t){}}function Gi(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;++n)if(e[n]==t)return n;return-1}function Ki(e,t){function n(){}n.prototype=e;var i=new n;return t&&Qi(t,i),i}function Qi(e,t){t||(t={});for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Zi(e){for(var t=[],n=0;e>n;++n)t.push(void 0);return t}function Ji(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function er(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Co.test(e))}function tr(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function nr(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)or(r,t);else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function ir(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function rr(e,t){return ir(e).appendChild(t)}function or(e,t){Tr?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function sr(e){return e.getBoundingClientRect()}function ar(){return!1}function lr(e){if(null!=So)return So;var t=nr("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return rr(e,t),t.offsetWidth&&(So=t.offsetHeight-t.clientHeight),So||0}function cr(e){if(null==Do){var t=nr("span","​");rr(e,nr("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Do=t.offsetWidth<=1&&t.offsetHeight>2&&!kr)}return Do?nr("span","​"):nr("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function ur(e,t,n,i){if(!e)return i(t,n,"ltr");for(var r=0;r<e.length;++r){var o=e[r];(o.from<n&&o.to>t||t==n&&o.to==t)&&i(Math.max(o.from,t),Math.min(o.to,n),1==o.level?"rtl":"ltr")}}function dr(e){return e.level%2?e.to:e.from}function hr(e){return e.level%2?e.from:e.to}function fr(e){var t=yi(e);return t?dr(t[0]):0}function pr(e){var t=yi(e);return t?hr(Vi(t)):e.text.length}function mr(e,t){var n=di(e.doc,t),i=Rn(e.doc,n);i!=n&&(t=mi(i));var r=yi(i),o=r?r[0].level%2?pr(i):fr(i):0;return Bt(t,o)}function gr(e,t){for(var n,i;n=Hn(i=di(e.doc,t));)t=n.find().to.line;var r=yi(i),o=r?r[0].level%2?fr(i):pr(i):i.text.length;return Bt(t,o)}function vr(e,t,n){var i=e[0].level;return t==i?!0:n==i?!1:n>t}function yr(e,t){for(var n,i=0;i<e.length;++i){var r=e[i];if(r.from<t&&r.to>t)return Io=null,i;if(r.from==t||r.to==t){if(null!=n)return vr(e,r.level,e[n].level)?(Io=n,i):(Io=i,n);n=i}}return Io=null,n}function br(e,t,n,i){if(!i)return t+n;do t+=n;while(t>0&&ko.test(e.text.charAt(t)));return t}function wr(e,t,n,i){var r=yi(e);if(!r)return _r(e,t,n,i);for(var o=yr(r,t),s=r[o],a=br(e,t,s.level%2?-n:n,i);;){if(a>s.from&&a<s.to)return a;if(a==s.from||a==s.to)return yr(r,a)==o?a:(s=r[o+=n],n>0==s.level%2?s.to:s.from);if(s=r[o+=n],!s)return null;a=n>0==s.level%2?br(e,s.to,-1,i):br(e,s.from,1,i)}}function _r(e,t,n,i){var r=t+n;if(i)for(;r>0&&ko.test(e.text.charAt(r));)r+=n;return 0>r||r>e.text.length?null:r}var xr=/gecko\/\d/i.test(navigator.userAgent),Cr=/MSIE \d/.test(navigator.userAgent),kr=Cr&&(null==document.documentMode||document.documentMode<8),Tr=Cr&&(null==document.documentMode||document.documentMode<9),Sr=/WebKit\//.test(navigator.userAgent),Dr=Sr&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Nr=/Chrome\//.test(navigator.userAgent),Er=/Opera\//.test(navigator.userAgent),Mr=/Apple Computer/.test(navigator.vendor),$r=/KHTML\//.test(navigator.userAgent),Ir=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Ar=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Lr=/PhantomJS/.test(navigator.userAgent),Pr=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Or=Pr||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Hr=Pr||/Mac/.test(navigator.platform),Rr=/windows/i.test(navigator.platform),Fr=Er&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Fr&&(Fr=Number(Fr[1]));var jr,zr,Wr,Br=Hr&&(Dr||Er&&(null==Fr||12.11>Fr)),Ur=xr||Cr&&!Tr,qr=!1,Yr=!1,Vr=0,Xr=0,Gr=0,Kr=null;Cr?Kr=-.53:xr?Kr=15:Nr?Kr=-.7:Mr&&(Kr=-1/3);var Qr,Zr,Jr=null,eo=e.changeEnd=function(e){return e.text?Bt(e.from.line+e.text.length-1,Vi(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.Pos=Bt,e.prototype={constructor:e,focus:function(){window.focus(),ht(this),Mt(this),ct(this)},setOption:function(e,t){var n=this.options,i=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,to.hasOwnProperty(e)&&rt(this,to[e])(this,t,i))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(("string"==typeof e?t[n].name:t[n])==e)return t.splice(n,1),!0},addOverlay:rt(null,function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,at(this)}),removeOverlay:rt(null,function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,at(this),void 0}}),indentLine:rt(null,function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Kt(this.doc,e)&&cn(this,e,t,n)}),indentSelection:rt(null,function(e){var t=this.doc.sel;if(Ut(t.from,t.to))return cn(this,t.from.line,e);for(var n=t.to.line-(t.to.ch?0:1),i=t.from.line;n>=i;++i)cn(this,i,e)}),getTokenAt:function(e,t){var n=this.doc;e=Xt(n,e);for(var i=L(this,e.line,t),r=this.doc.mode,o=di(n,e.line),s=new xn(o.text,this.options.tabSize);s.pos<e.ch&&!s.eol();){s.start=s.pos;var a=r.token(s,i)}return{start:s.start,end:s.pos,string:s.current(),className:a||null,type:a||null,state:i}},getTokenTypeAt:function(e){e=Xt(this.doc,e);for(var t=Qn(this,di(this.doc,e.line)),n=0,i=(t.length-1)/2,r=e.ch;;){var o=n+i>>1;if((o?t[2*o-1]:0)>=r)i=o;else{if(!(t[2*o+1]<r))return t[2*o+2];n=o+1}}},getStateAfter:function(e,t){var n=this.doc;return e=Vt(n,null==e?n.first+n.size-1:e),L(this,e+1,t)},cursorCoords:function(e,t){var n,i=this.doc.sel;return n=null==e?i.head:"object"==typeof e?Xt(this.doc,e):e?i.from:i.to,K(this,n,t||"page")},charCoords:function(e,t){return G(this,Xt(this.doc,e),t||"page")},coordsChar:function(e,t){return e=X(this,e,t||"page"),Z(this,e.left,e.top)},lineAtHeight:function(e,t){return e=X(this,{top:e,left:0},t||"page").top,gi(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n=!1,i=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>i&&(e=i,n=!0);var r=di(this.doc,e);return V(this,di(this.doc,e),{top:0,left:0},t||"page").top+(n?r.height:0)},defaultTextHeight:function(){return et(this.display)},defaultCharWidth:function(){return tt(this.display)},setGutterMarker:rt(null,function(e,t,n){return un(this,e,function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&tr(i)&&(e.gutterMarkers=null),!0})}),clearGutter:rt(null,function(e){var t=this,n=t.doc,i=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,at(t,i,i+1),tr(n.gutterMarkers)&&(n.gutterMarkers=null)),++i})}),addLineClass:rt(null,function(e,t,n){return un(this,e,function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[i]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0})}),removeLineClass:rt(null,function(e,t,n){return un(this,e,function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var o=r.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!o)return!1;var s=o.index+o[0].length;e[i]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0})}),addLineWidget:rt(null,function(e,t,n){return qn(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!Kt(this.doc,e))return null;var t=e;if(e=di(this.doc,e),!e)return null}else{var t=mi(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,n,i,r){var o=this.display;e=K(this,Xt(this.doc,e));var s=e.bottom,a=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==i)s=e.top;else if("above"==i||"near"==i){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?s=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(s=e.bottom),a+t.offsetWidth>c&&(a=c-t.offsetWidth)}t.style.top=s+"px",t.style.left=t.style.right="","right"==r?(a=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),n&&on(this,a,s,a+t.offsetWidth,s+t.offsetHeight)},triggerOnKeyDown:rt(null,Nt),execCommand:function(e){return lo[e](this)},findPosH:function(e,t,n,i){var r=1;0>t&&(r=-1,t=-t);for(var o=0,s=Xt(this.doc,e);t>o&&(s=dn(this.doc,s,r,n,i),!s.hitSide);++o);return s},moveH:rt(null,function(e,t){var n,i=this.doc.sel;n=i.shift||i.extend||Ut(i.from,i.to)?dn(this.doc,i.head,e,t,this.options.rtlMoveVisually):0>e?i.from:i.to,Qt(this.doc,n,n,e)}),deleteH:rt(null,function(e,t){var n=this.doc.sel;Ut(n.from,n.to)?Wt(this.doc,"",n.from,dn(this.doc,n.head,e,t,!1),"+delete"):Wt(this.doc,"",n.from,n.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(e,t,n,i){var r=1,o=i;0>t&&(r=-1,t=-t);for(var s=0,a=Xt(this.doc,e);t>s;++s){var l=K(this,a,"div");if(null==o?o=l.left:l.left=o,a=hn(this,l,r,n),a.hitSide)break}return a},moveV:rt(null,function(e,t){var n=this.doc.sel,i=K(this,n.head,"div");null!=n.goalColumn&&(i.left=n.goalColumn);var r=hn(this,i,e,t);"page"==t&&ln(this,0,G(this,r,"div").top-i.top),Qt(this.doc,r,r,e),n.goalColumn=i.left}),toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:rt(null,function(e,t){an(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller,t=wo;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:rt(null,function(e,t){"number"==typeof e&&(e=Bt(e,0)),t||(t=0);var n=e;e&&null==e.line||(this.curOp.scrollToPos=e?Xt(this.doc,e):this.doc.sel.head,this.curOp.scrollToPosMargin=t,n=K(this,this.curOp.scrollToPos));var i=sn(this,n.left,n.top-t,n.right,n.bottom+t);an(this,i.scrollLeft,i.scrollTop)}),setSize:function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.refresh()},on:function(e,t){Hi(this,e,t)},off:function(e,t){Ri(this,e,t)},operation:function(e){return st(this,e)},refresh:rt(null,function(){U(this),an(this,this.doc.scrollLeft,this.doc.scrollTop),at(this)}),swapDoc:rt(null,function(e){var t=this.doc;return t.cm=null,ui(this,e),U(this),dt(this,!0),an(this,e.scrollLeft,e.scrollTop),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var to=e.optionHandlers={},no=e.defaults={},io=e.Init={toString:function(){return"CodeMirror.Init"}};mn("value","",function(e,t){e.setValue(t)},!0),mn("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),mn("indentUnit",2,n,!0),mn("indentWithTabs",!1),mn("smartIndent",!0),mn("tabSize",4,function(e){n(e),U(e),at(e)},!0),mn("electricChars",!0),mn("rtlMoveVisually",!Rr),mn("theme","default",function(e){a(e),l(e)},!0),mn("keyMap","default",s),mn("extraKeys",null),mn("onKeyEvent",null),mn("onDragEvent",null),mn("lineWrapping",!1,i,!0),mn("gutters",[],function(e){h(e.options),l(e)},!0),mn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?y(e.display)+"px":"0",e.refresh()},!0),mn("coverGutterNextToScrollbar",!1,f,!0),mn("lineNumbers",!1,function(e){h(e.options),l(e)},!0),mn("firstLineNumber",1,l,!0),mn("lineNumberFormatter",function(e){return e},l,!0),mn("showCursorWhenSelecting",!1,D,!0),mn("readOnly",!1,function(e,t){"nocursor"==t?($t(e),e.display.input.blur()):t||dt(e,!0)}),mn("dragDrop",!0),mn("cursorBlinkRate",530),mn("cursorScrollMargin",0),mn("cursorHeight",1),mn("workTime",100),mn("workDelay",100),mn("flattenSpans",!0),mn("pollInterval",100),mn("undoDepth",40,function(e,t){e.doc.history.undoDepth=t}),mn("historyEventDelay",500),mn("viewportMargin",10,function(e){e.refresh()},!0),mn("maxHighlightLength",1e4,function(e){n(e),e.refresh()},!0),mn("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),mn("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),mn("autofocus",null);var ro=e.modes={},oo=e.mimeModes={};e.defineMode=function(t,n){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){n.dependencies=[];for(var i=2;i<arguments.length;++i)n.dependencies.push(arguments[i])}ro[t]=n},e.defineMIME=function(e,t){oo[e]=t},e.resolveMode=function(t){if("string"==typeof t&&oo.hasOwnProperty(t))t=oo[t];else if(t&&"string"==typeof t.name&&oo.hasOwnProperty(t.name)){var n=oo[t.name];t=Ki(n,t),t.name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){n=e.resolveMode(n);var i=ro[n.name];if(!i)return e.getMode(t,"text/plain");var r=i(t,n);if(so.hasOwnProperty(n.name)){var o=so[n.name];for(var s in o)o.hasOwnProperty(s)&&(r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=o[s])}return r.name=n.name,r},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var so=e.modeExtensions={};e.extendMode=function(e,t){var n=so.hasOwnProperty(e)?so[e]:so[e]={};Qi(t,n)},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){mo.prototype[e]=t},e.defineOption=mn;var ao=[];e.defineInitHook=function(e){ao.push(e)},e.copyState=gn,e.startState=vn,e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);t=n.state,e=n.mode}return n||{mode:e,state:t}};var lo=e.commands={selectAll:function(e){e.setSelection(Bt(e.firstLine(),0),Bt(e.lastLine()))
},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),i=!Ut(t,n);i||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,i?n:Bt(t.line),"+delete"):e.replaceRange("",t,Bt(t.line+1,0),"+delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",Bt(t,0),Bt(t),"+delete")},delLineLeft:function(e){var t=e.getCursor();e.replaceRange("",Bt(t.line,0),t,"+delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection(Bt(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Bt(e.lastLine()))},goLineStart:function(e){e.extendSelection(mr(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),n=mr(e,t.line),i=e.getLineHandle(n.line),r=yi(i);if(r&&0!=r[0].level)e.extendSelection(n);else{var o=Math.max(0,i.text.search(/\S/)),s=t.line==n.line&&t.ch<=o&&t.ch;e.extendSelection(Bt(n.line,s?0:o))}},goLineEnd:function(e){e.extendSelection(gr(e,e.getCursor().line))},goLineRight:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:t},"div"))},goLineLeft:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:0,top:t},"div"))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","+input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","+input")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),Bt(t.line,t.ch-1),Bt(t.line,t.ch+1))},newlineAndIndent:function(e){rt(e,function(){e.replaceSelection("\n","end","+input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},co=e.keyMap={};co.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},co.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},co.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},co["default"]=Hr?co.macDefault:co.pcDefault,co.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.lookupKey=bn,e.isModifierKey=wn,e.keyName=_n,e.fromTextArea=function(t,n){function i(){t.value=c.getValue()}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var r=document.body;try{r=document.activeElement}catch(o){}n.autofocus=r==t||null!=t.getAttribute("autofocus")&&r==document.body}if(t.form&&(Hi(t.form,"submit",i),!n.leaveSubmitMethodAlone)){var s=t.form,a=s.submit;try{var l=s.submit=function(){i(),s.submit=a,s.submit(),s.submit=l}}catch(o){}}t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return c.save=i,c.getTextArea=function(){return t},c.toTextArea=function(){i(),t.parentNode.removeChild(c.getWrapperElement()),t.style.display="",t.form&&(Ri(t.form,"submit",i),"function"==typeof t.form.submit&&(t.form.submit=a))},c},xn.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=qi(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return qi(this.string,null,this.tabSize)},match:function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);return r(o)==r(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=xn,e.TextMarker=Cn,Cn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;t&&nt(e);for(var n=null,i=null,r=0;r<this.lines.length;++r){var o=this.lines[r],s=Dn(o.markedSpans,this);null!=s.to&&(i=mi(o)),o.markedSpans=Nn(o.markedSpans,s),null!=s.from?n=mi(o):this.collapsed&&!Fn(this.doc,o)&&e&&pi(o,et(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var r=0;r<this.lines.length;++r){var a=Rn(e.doc,this.lines[r]),l=u(e.doc,a);l>e.display.maxLineLength&&(e.display.maxLine=a,e.display.maxLineLength=l,e.display.maxLineChanged=!0)}null!=n&&e&&at(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&en(e)),t&&it(e),ji(this,"clear")}},Cn.prototype.find=function(){for(var e,t,n=0;n<this.lines.length;++n){var i=this.lines[n],r=Dn(i.markedSpans,this);if(null!=r.from||null!=r.to){var o=mi(i);null!=r.from&&(e=Bt(o,r.from)),null!=r.to&&(t=Bt(o,r.to))}}return"bookmark"==this.type?e:e&&{from:e,to:t}},Cn.prototype.changed=function(){var e=this.find(),t=this.doc.cm;if(e&&t){var n=di(this.doc,e.from.line);if(j(t,n),e.from.line>=t.display.showingFrom&&e.from.line<t.display.showingTo){for(var i=t.display.lineDiv.firstChild;i;i=i.nextSibling)if(i.lineObj==n){i.offsetHeight!=n.height&&pi(n,i.offsetHeight);break}st(t,function(){t.curOp.selectionChanged=!0})}}},Cn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Gi(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Cn.prototype.detachLine=function(e){if(this.lines.splice(Gi(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},e.SharedTextMarker=Tn,Tn.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ji(this,"clear")}},Tn.prototype.find=function(){return this.primary.find()};var uo=e.LineWidget=function(e,t,n){for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.cm=e,this.node=t};uo.prototype.clear=Bn(function(){var e=this.line.widgets,t=mi(this.line);if(null!=t&&e){for(var n=0;n<e.length;++n)e[n]==this&&e.splice(n--,1);e.length||(this.line.widgets=null),pi(this.line,Math.max(0,this.line.height-Un(this))),at(this.cm,t,t+1)}}),uo.prototype.changed=Bn(function(){var e=this.height;this.height=null;var t=Un(this)-e;if(t){pi(this.line,this.line.height+t);var n=mi(this.line);at(this.cm,n,n+1)}});var ho={},fo=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;ai.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;i>n;++n){var r=this.lines[n];this.height-=r.height,Xn(r),ji(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0,r=t.length;r>i;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;i>e;++e)if(n(this.lines[e]))return!0}},li.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(r>e){var o=Math.min(t,r-e),s=i.height;if(i.removeInner(e,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(t-=o))break;e=0}else e-=r}if(this.size-t<25){var a=[];this.collapse(a),this.children=[new ai(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;n>t;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],s=o.chunkSize();if(s>=e){if(o.insertInner(e,t,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=o.lines.splice(o.lines.length-25,25),l=new ai(a);o.height-=l.height,this.children.splice(i+1,0,l),l.parent=this}this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new li(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=Gi(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new li(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],s=o.chunkSize();if(s>e){var a=Math.min(t,s-e);if(o.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=s}}};var po=0,mo=e.Doc=function(e,t,n){if(!(this instanceof mo))return new mo(e,t,n);null==n&&(n=0),li.call(this,[new ai([Yn("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=bi(),this.cleanGeneration=1,this.frontier=n;var i=Bt(n,0);this.sel={from:i,to:i,head:i,anchor:i,shift:!1,extend:!1,goalColumn:null},this.id=++po,this.modeOption=t,"string"==typeof e&&(e=No(e)),si(this,{from:i,to:i,text:e},null,{head:i,anchor:i})};mo.prototype=Ki(li.prototype,{constructor:mo,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0,r=t.length;r>i;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=fi(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:function(e){var t=Bt(this.first,0),n=this.first+this.size-1;Ot(this,{from:t,to:Bt(n,di(this,n).text.length),text:No(e),origin:"setValue"},{head:t,anchor:t},!0)},replaceRange:function(e,t,n,i){t=Xt(this,t),n=n?Xt(this,n):t,Wt(this,e,t,n,i)},getRange:function(e,t,n){var i=hi(this,Xt(this,e),Xt(this,t));return n===!1?i:i.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},setLine:function(e,t){Kt(this,e)&&Wt(this,t,Bt(e,0),Xt(this,Bt(e)))},removeLine:function(e){e?Wt(this,"",Xt(this,Bt(e-1)),Xt(this,Bt(e))):Wt(this,"",Bt(0,0),Xt(this,Bt(1,0)))},getLineHandle:function(e){return Kt(this,e)?di(this,e):void 0},getLineNumber:function(e){return mi(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Xt(this,e)},getCursor:function(e){var t,n=this.sel;return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||e===!1?n.to:n.from,Yt(t)},somethingSelected:function(){return!Ut(this.sel.head,this.sel.anchor)},setCursor:ot(function(e,t,n){var i=Xt(this,"number"==typeof e?Bt(e,t||0):e);n?Qt(this,i):Jt(this,i,i)}),setSelection:ot(function(e,t){Jt(this,Xt(this,e),Xt(this,t||e))}),extendSelection:ot(function(e,t){Qt(this,Xt(this,e),t&&Xt(this,t))}),getSelection:function(e){return this.getRange(this.sel.from,this.sel.to,e)},replaceSelection:function(e,t,n){Ot(this,{from:this.sel.from,to:this.sel.to,text:No(e),origin:n},t||"around")},undo:ot(function(){Rt(this,"undo")}),redo:ot(function(){Rt(this,"redo")}),setExtending:function(e){this.sel.extend=e},historySize:function(){var e=this.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.history=bi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ti(this.history.done),undone:Ti(this.history.undone)}},setHistory:function(e){var t=this.history=bi(this.history.maxGeneration);t.done=e.done.slice(0),t.undone=e.undone.slice(0)},markText:function(e,t,n){return kn(this,Xt(this,e),Xt(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft};return e=Xt(this,e),kn(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Xt(this,e);var t=[],n=di(this,e.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(i){var r=i.text.length+1;return r>e?(t=e,!0):(e-=r,++n,void 0)}),Xt(this,Bt(n,t))},indexFromPos:function(e){e=Xt(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new mo(fi(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new mo(fi(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],i},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var i=this.linked[n];if(i.doc==t){this.linked.splice(n,1),t.unlinkDoc(this);break}}if(t.history==this.history){var r=[t.id];ci(t,function(e){r.push(e.id)},!0),t.history=bi(),t.history.done=Ti(this.history.done,r),t.history.undone=Ti(this.history.undone,r)}},iterLinkedDocs:function(e){ci(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),mo.prototype.eachLine=mo.prototype.iter;var go="iter insert remove copy getEditor".split(" ");for(var vo in mo.prototype)mo.prototype.hasOwnProperty(vo)&&Gi(go,vo)<0&&(e.prototype[vo]=function(e){return function(){return e.apply(this.doc,arguments)}}(mo.prototype[vo]));e.e_stop=Li,e.e_preventDefault=$i,e.e_stopPropagation=Ii;var yo,bo=0;e.on=Hi,e.off=Ri,e.signal=Fi;var wo=30,_o=e.Pass={toString:function(){return"CodeMirror.Pass"}};Ui.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},e.countColumn=qi;var xo=[""],Co=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ko=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;e.replaceGetRect=function(e){sr=e};var To=function(){if(Tr)return!1;var e=nr("div");return"draggable"in e||"dragDrop"in e}();xr?ar=function(e,t){return 36==e.charCodeAt(t-1)&&39==e.charCodeAt(t)}:Mr&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?ar=function(e,t){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(e.slice(t-1,t+1))}:Sr&&(ar=function(e,t){return t>1&&45==e.charCodeAt(t-1)&&/\w/.test(e.charAt(t-2))&&/[^\-?\.]/.test(e.charAt(t))?!0:/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|…[\w~`@#$%\^&*(_=+{[><]/.test(e.slice(t-1,t+1))});var So,Do,No=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;i>=t;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),t+=s+1):(n.push(o),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=No;var Eo=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},Mo=function(){var e=nr("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),$o={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};e.keyNames=$o,function(){for(var e=0;10>e;e++)$o[e+48]=String(e);for(var e=65;90>=e;e++)$o[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)$o[e+111]=$o[e+63235]="F"+e}();var Io,Ao=function(){function e(e){return 255>=e?t.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1791>=e?n.charAt(e-1536):e>=1792&&2220>=e?"r":"L"}var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,a=/[1n]/,l="L";return function(t){if(!i.test(t))return!1;for(var n,c=t.length,u=[],d=0;c>d;++d)u.push(n=e(t.charCodeAt(d)));for(var d=0,h=l;c>d;++d){var n=u[d];"m"==n?u[d]=h:h=n}for(var d=0,f=l;c>d;++d){var n=u[d];"1"==n&&"r"==f?u[d]="n":o.test(n)&&(f=n,"r"==n&&(u[d]="R"))}for(var d=1,h=u[0];c-1>d;++d){var n=u[d];"+"==n&&"1"==h&&"1"==u[d+1]?u[d]="1":","!=n||h!=u[d+1]||"1"!=h&&"n"!=h||(u[d]=h),h=n}for(var d=0;c>d;++d){var n=u[d];if(","==n)u[d]="N";else if("%"==n){for(var p=d+1;c>p&&"%"==u[p];++p);for(var m=d&&"!"==u[d-1]||c-1>p&&"1"==u[p]?"1":"N",g=d;p>g;++g)u[g]=m;d=p-1}}for(var d=0,f=l;c>d;++d){var n=u[d];"L"==f&&"1"==n?u[d]="L":o.test(n)&&(f=n)}for(var d=0;c>d;++d)if(r.test(u[d])){for(var p=d+1;c>p&&r.test(u[p]);++p);for(var v="L"==(d?u[d-1]:l),y="L"==(c-1>p?u[p]:l),m=v||y?"L":"R",g=d;p>g;++g)u[g]=m;d=p-1}for(var b,w=[],d=0;c>d;)if(s.test(u[d])){var _=d;for(++d;c>d&&s.test(u[d]);++d);w.push({from:_,to:d,level:0})}else{var x=d,C=w.length;for(++d;c>d&&"L"!=u[d];++d);for(var g=x;d>g;)if(a.test(u[g])){g>x&&w.splice(C,0,{from:x,to:g,level:1});var k=g;for(++g;d>g&&a.test(u[g]);++g);w.splice(C,0,{from:k,to:g,level:2}),x=g}else++g;d>x&&w.splice(C,0,{from:x,to:d,level:1})}return 1==w[0].level&&(b=t.match(/^\s+/))&&(w[0].from=b[0].length,w.unshift({from:0,to:b[0].length,level:0})),1==Vi(w).level&&(b=t.match(/\s+$/))&&(Vi(w).to-=b[0].length,w.push({from:c-b[0].length,to:c,level:0})),w[0].level!=Vi(w).level&&w.push({from:c,to:c,level:w[0].level}),w}}();return e.version="3.14.0",e}(),CodeMirror.defineMode("python",function(e,t){function n(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function i(e,t){if(e.sol()){var n=t.scopes[0].offset;if(e.eatSpace()){var i=e.indentation();return i>n?C="indent":n>i&&(C="dedent"),null}n>0&&s(e,t)}if(e.eatSpace())return null;var o=e.peek();if("#"===o)return e.skipToEnd(),"comment";if(e.match(/^[0-9\.]/,!1)){var a=!1;if(e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(a=!0),e.match(/^\d+\.\d*/)&&(a=!0),e.match(/^\.\d+/)&&(a=!0),a)return e.eat(/J/i),"number";var g=!1;if(e.match(/^0x[0-9a-f]+/i)&&(g=!0),e.match(/^0b[01]+/i)&&(g=!0),e.match(/^0o[0-7]+/i)&&(g=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(e.eat(/J/i),g=!0),e.match(/^0(?![\dx])/i)&&(g=!0),g)return e.eat(/L/i),"number"}return e.match(w)?(t.tokenize=r(e.current()),t.tokenize(e,t)):e.match(f)||e.match(h)?null:e.match(d)||e.match(c)||e.match(m)?"operator":e.match(u)?null:e.match(_)?"keyword":e.match(x)?"builtin":e.match(p)?"variable":(e.next(),l)}function r(e){function n(n,s){for(;!n.eol();)if(n.eatWhile(/[^'"\\]/),n.eat("\\")){if(n.next(),r&&n.eol())return o}else{if(n.match(e))return s.tokenize=i,o;n.eat(/['"]/)}if(r){if(t.singleLineStringErrors)return l;s.tokenize=i}return o}for(;"rub".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var r=1==e.length,o="string";return n.isString=!0,n}function o(t,n,i){i=i||"py";var r=0;if("py"===i){if("py"!==n.scopes[0].type)return n.scopes[0].offset=t.indentation(),void 0;for(var o=0;o<n.scopes.length;++o)if("py"===n.scopes[o].type){r=n.scopes[o].offset+e.indentUnit;break}}else r=t.column()+t.current().length;n.scopes.unshift({offset:r,type:i})}function s(e,t,n){if(n=n||"py",1!=t.scopes.length){if("py"===t.scopes[0].type){for(var i=e.indentation(),r=-1,o=0;o<t.scopes.length;++o)if(i===t.scopes[o].offset){r=o;break}if(-1===r)return!0;for(;t.scopes[0].offset!==i;)t.scopes.shift();return!1}return"py"===n?(t.scopes[0].offset=e.indentation(),!1):t.scopes[0].type!=n?!0:(t.scopes.shift(),!1)}}function a(e,t){C=null;var n=t.tokenize(e,t),i=e.current();if("."===i)return n=e.match(p,!1)?null:l,null===n&&"meta"===t.lastToken&&(n="meta"),n;if("@"===i)return e.match(p,!1)?"meta":l;"variable"!==n&&"builtin"!==n||"meta"!==t.lastToken||(n="meta"),("pass"===i||"return"===i)&&(t.dedent+=1),"lambda"===i&&(t.lambda=!0),(":"===i&&!t.lambda&&"py"==t.scopes[0].type||"indent"===C)&&o(e,t);var r="[({".indexOf(i);return-1!==r&&o(e,t,"])}".slice(r,r+1)),"dedent"===C&&s(e,t)?l:(r="])}".indexOf(i),-1!==r&&s(e,t,i)?l:(t.dedent>0&&e.eol()&&"py"==t.scopes[0].type&&(t.scopes.length>1&&t.scopes.shift(),t.dedent-=1),n))}var l="error",c=t.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),u=t.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),d=t.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),h=t.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),f=t.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),p=t.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),m=n(["and","or","not","is","in"]),g=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],v=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],y={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},b={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};if(t.version&&3===parseInt(t.version,10)){g=g.concat(b.keywords),v=v.concat(b.builtins);var w=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{g=g.concat(y.keywords),v=v.concat(y.builtins);var w=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var _=n(g),x=n(v),C=null,k={startState:function(e){return{tokenize:i,scopes:[{offset:e||0,type:"py"}],lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=a(e,t);return t.lastToken=n,e.eol()&&e.lambda&&(t.lambda=!1),n},indent:function(e){return e.tokenize!=i?e.tokenize.isString?CodeMirror.Pass:0:e.scopes[0].offset},lineComment:"#"};return k}),CodeMirror.defineMIME("text/x-python","python"),CodeMirror.runMode=function(e,t,n,i){var r=CodeMirror.getMode(CodeMirror.defaults,t),o=/MSIE \d/.test(navigator.userAgent),s=o&&(null==document.documentMode||document.documentMode<9);if(1==n.nodeType){var a=i&&i.tabSize||CodeMirror.defaults.tabSize,l=n,c=0;l.innerHTML="",n=function(e,t){if("\n"==e)return l.appendChild(document.createTextNode(s?"\r":e)),c=0,void 0;for(var n="",i=0;;){var r=e.indexOf("	",i);if(-1==r){n+=e.slice(i),c+=e.length-i;break}c+=r-i,n+=e.slice(i,r);var o=a-c%a;c+=o;for(var u=0;o>u;++u)n+=" ";i=r+1}if(t){var d=l.appendChild(document.createElement("span"));d.className="cm-"+t.replace(/ +/g," cm-"),d.appendChild(document.createTextNode(n))}else l.appendChild(document.createTextNode(n))}}for(var u=CodeMirror.splitLines(e),d=CodeMirror.startState(r),h=0,f=u.length;f>h;++h){h&&n("\n");for(var p=new CodeMirror.StringStream(u[h]);!p.eol();){var m=r.token(p,d);n(p.current(),m,h,p.start),p.start=p.pos}}},function(){function e(e,t,n){function i(t,n,i){if(t.text){var s=h?0:t.text.length-1,l=h?t.text.length:-1;if(t.text.length>a)return null;for(null!=i&&(s=i+f);s!=l;s+=f){var c=t.text.charAt(s);if(v.test(c)&&e.getTokenTypeAt(r(n,s+1))==m){var u=o[c];if(">"==u.charAt(1)==h)g.push(c);else{if(g.pop()!=u.charAt(0))return{pos:s,match:!1};if(!g.length)return{pos:s,match:!0}}}}}}var s=e.state.matchBrackets,a=s&&s.maxScanLineLength||1e4,l=t||e.getCursor(),c=e.getLineHandle(l.line),u=l.ch-1,d=u>=0&&o[c.text.charAt(u)]||o[c.text.charAt(++u)];if(!d)return null;var h=">"==d.charAt(1),f=h?1:-1;if(n&&h!=(u==l.ch))return null;for(var p,m=e.getTokenTypeAt(r(l.line,u+1)),g=[c.text.charAt(u)],v=/[(){}[\]]/,y=l.line,b=h?Math.min(y+100,e.lineCount()):Math.max(-1,y-100);y!=b&&!(p=y==l.line?i(c,y,u):i(e.getLineHandle(y),y));y+=f);return{from:r(l.line,u),to:p&&r(y,p.pos),match:p&&p.match,forward:h}}function t(t,n){var o=t.state.matchBrackets.maxHighlightLineLength||1e3,s=e(t);if(!(!s||t.getLine(s.from.line).length>o||s.to&&t.getLine(s.to.line).length>o)){var a=s.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",l=t.markText(s.from,r(s.from.line,s.from.ch+1),{className:a}),c=s.to&&t.markText(s.to,r(s.to.line,s.to.ch+1),{className:a});i&&t.state.focused&&t.display.input.focus();var u=function(){t.operation(function(){l.clear(),c&&c.clear()})};return n?(setTimeout(u,800),void 0):u}}function n(e){e.operation(function(){s&&(s(),s=null),e.somethingSelected()||(s=t(e,!1))})}var i=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),r=CodeMirror.Pos,o={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},s=null;CodeMirror.defineOption("matchBrackets",!1,function(e,t,i){i&&i!=CodeMirror.Init&&e.off("cursorActivity",n),t&&(e.state.matchBrackets="object"==typeof t?t:{},e.on("cursorActivity",n))}),CodeMirror.defineExtension("matchBrackets",function(){t(this,!0)}),CodeMirror.defineExtension("findMatchingBracket",function(t,n){return e(this,t,n)})}(),function(e){function t(e,t){return function(n){return l(e.call(this,n),t)}}function n(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function i(){}function r(e){s(this,e)}function o(e){var t=e.years||e.year||e.y||0,n=e.months||e.month||e.M||0,i=e.weeks||e.week||e.w||0,r=e.days||e.day||e.d||0,o=e.hours||e.hour||e.h||0,s=e.minutes||e.minute||e.m||0,a=e.seconds||e.second||e.s||0,l=e.milliseconds||e.millisecond||e.ms||0;this._input=e,this._milliseconds=+l+1e3*a+6e4*s+36e5*o,this._days=+r+7*i,this._months=+n+12*t,this._data={},this._bubble()}function s(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function a(e){return 0>e?Math.ceil(e):Math.floor(e)}function l(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}function c(e,t,n,i){var r,o,s=t._milliseconds,a=t._days,l=t._months;s&&e._d.setTime(+e._d+s*n),(a||l)&&(r=e.minute(),o=e.hour()),a&&e.date(e.date()+a*n),l&&e.month(e.month()+l*n),s&&!i&&H.updateOffset(e),(a||l)&&(e.minute(r),e.hour(o))}function u(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(e,t){var n,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0;for(n=0;i>n;n++)~~e[n]!==~~t[n]&&o++;return o+r}function h(e){return e?lt[e]||e.toLowerCase().replace(/(.)s$/,"$1"):e}function f(e,t){return t.abbr=e,z[e]||(z[e]=new i),z[e].set(t),z[e]}function p(e){delete z[e]}function m(e){if(!e)return H.fn._lang;if(!z[e]&&W)try{require("./lang/"+e)}catch(t){return H.fn._lang}return z[e]||H.fn._lang}function g(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function v(e){var t,n,i=e.match(q);for(t=0,n=i.length;n>t;t++)i[t]=ht[i[t]]?ht[i[t]]:g(i[t]);return function(r){var o="";for(t=0;n>t;t++)o+=i[t]instanceof Function?i[t].call(r,e):i[t];return o}}function y(e,t){return t=b(t,e.lang()),ct[t]||(ct[t]=v(t)),ct[t](e)}function b(e,t){function n(e){return t.longDateFormat(e)||e}for(var i=5;i--&&(Y.lastIndex=0,Y.test(e));)e=e.replace(Y,n);return e}function w(e,t){switch(e){case"DDDD":return G;case"YYYY":return K;case"YYYYY":return Q;case"S":case"SS":case"SSS":case"DDD":return X;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Z;case"a":case"A":return m(t._l)._meridiemParse;case"X":return tt;case"Z":case"ZZ":return J;case"T":return et;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return V;default:return new RegExp(e.replace("\\",""))}}function _(e){var t=(J.exec(e)||[])[0],n=(t+"").match(ot)||["-",0,0],i=+(60*n[1])+~~n[2];return"+"===n[0]?-i:i}function x(e,t,n){var i,r=n._a;switch(e){case"M":case"MM":null!=t&&(r[1]=~~t-1);break;case"MMM":case"MMMM":i=m(n._l).monthsParse(t),null!=i?r[1]=i:n._isValid=!1;break;case"D":case"DD":null!=t&&(r[2]=~~t);break;case"DDD":case"DDDD":null!=t&&(r[1]=0,r[2]=~~t);break;case"YY":r[0]=~~t+(~~t>68?1900:2e3);break;case"YYYY":case"YYYYY":r[0]=~~t;break;case"a":case"A":n._isPm=m(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":r[3]=~~t;break;case"m":case"mm":r[4]=~~t;break;case"s":case"ss":r[5]=~~t;break;case"S":case"SS":case"SSS":r[6]=~~(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=_(t)}null==t&&(n._isValid=!1)
}function C(e){var t,n,i,r=[];if(!e._d){for(i=T(e),t=0;3>t&&null==e._a[t];++t)e._a[t]=r[t]=i[t];for(;7>t;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];r[3]+=~~((e._tzm||0)/60),r[4]+=~~((e._tzm||0)%60),n=new Date(0),e._useUTC?(n.setUTCFullYear(r[0],r[1],r[2]),n.setUTCHours(r[3],r[4],r[5],r[6])):(n.setFullYear(r[0],r[1],r[2]),n.setHours(r[3],r[4],r[5],r[6])),e._d=n}}function k(e){var t=e._i;e._d||(e._a=[t.years||t.year||t.y,t.months||t.month||t.M,t.days||t.day||t.d,t.hours||t.hour||t.h,t.minutes||t.minute||t.m,t.seconds||t.second||t.s,t.milliseconds||t.millisecond||t.ms],C(e))}function T(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function S(e){var t,n,i,r=m(e._l),o=""+e._i;for(i=b(e._f,r).match(q),e._a=[],t=0;t<i.length;t++)n=(w(i[t],e).exec(o)||[])[0],n&&(o=o.slice(o.indexOf(n)+n.length)),ht[i[t]]&&x(i[t],n,e);o&&(e._il=o),e._isPm&&e._a[3]<12&&(e._a[3]+=12),e._isPm===!1&&12===e._a[3]&&(e._a[3]=0),C(e)}function D(e){var t,n,i,o,a,l=99;for(o=0;o<e._f.length;o++)t=s({},e),t._f=e._f[o],S(t),n=new r(t),a=d(t._a,n.toArray()),n._il&&(a+=n._il.length),l>a&&(l=a,i=n);s(e,i)}function N(e){var t,n=e._i,i=nt.exec(n);if(i){for(e._f="YYYY-MM-DD"+(i[2]||" "),t=0;4>t;t++)if(rt[t][1].exec(n)){e._f+=rt[t][0];break}J.exec(n)&&(e._f+=" Z"),S(e)}else e._d=new Date(n)}function E(t){var n=t._i,i=B.exec(n);n===e?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof n?N(t):u(n)?(t._a=n.slice(0),C(t)):n instanceof Date?t._d=new Date(+n):"object"==typeof n?k(t):t._d=new Date(n)}function M(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function $(e,t,n){var i=j(Math.abs(e)/1e3),r=j(i/60),o=j(r/60),s=j(o/24),a=j(s/365),l=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===o&&["h"]||22>o&&["hh",o]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",j(s/30)]||1===a&&["y"]||["yy",a];return l[2]=t,l[3]=e>0,l[4]=n,M.apply({},l)}function I(e,t,n){var i,r=n-t,o=n-e.day();return o>r&&(o-=7),r-7>o&&(o+=7),i=H(e).add("d",o),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function A(e){var t=e._i,n=e._f;return null===t||""===t?null:("string"==typeof t&&(e._i=t=m().preparse(t)),H.isMoment(t)?(e=s({},t),e._d=new Date(+t._d)):n?u(n)?D(e):S(e):E(e),new r(e))}function L(e,t){H.fn[e]=H.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),H.updateOffset(this),this):this._d["get"+n+t]()}}function P(e){H.duration.fn[e]=function(){return this._data[e]}}function O(e,t){H.duration.fn["as"+e]=function(){return+this/t}}for(var H,R,F="2.2.1",j=Math.round,z={},W="undefined"!=typeof module&&module.exports,B=/^\/?Date\((\-?\d+)/i,U=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,q=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,Y=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,V=/\d\d?/,X=/\d{1,3}/,G=/\d{3}/,K=/\d{1,4}/,Q=/[+\-]?\d{1,6}/,Z=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,J=/Z|[\+\-]\d\d:?\d\d/i,et=/T/i,tt=/[\+\-]?\d+(\.\d{1,3})?/,nt=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,it="YYYY-MM-DDTHH:mm:ssZ",rt=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ot=/([\+\-]|\d\d)/gi,st="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),at={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},lt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",W:"isoweek",M:"month",y:"year"},ct={},ut="DDD w W M D d".split(" "),dt="M D H h m s w W".split(" "),ht={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return l(~~(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(~~(e/60),2)+":"+l(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(~~(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};ut.length;)R=ut.pop(),ht[R+"o"]=n(ht[R],R);for(;dt.length;)R=dt.pop(),ht[R+R]=t(ht[R],2);for(ht.DDDD=t(ht.DDD,3),s(i.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=H.utc([2e3,t]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=H([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return I(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}}),H=function(e,t,n){return A({_i:e,_f:t,_l:n,_isUTC:!1})},H.utc=function(e,t,n){return A({_useUTC:!0,_isUTC:!0,_l:n,_i:e,_f:t}).utc()},H.unix=function(e){return H(1e3*e)},H.duration=function(e,t){var n,i,r=H.isDuration(e),s="number"==typeof e,a=r?e._input:s?{}:e,l=U.exec(e);return s?t?a[t]=e:a.milliseconds=e:l&&(n="-"===l[1]?-1:1,a={y:0,d:~~l[2]*n,h:~~l[3]*n,m:~~l[4]*n,s:~~l[5]*n,ms:~~l[6]*n}),i=new o(a),r&&e.hasOwnProperty("_lang")&&(i._lang=e._lang),i},H.version=F,H.defaultFormat=it,H.updateOffset=function(){},H.lang=function(e,t){return e?(e=e.toLowerCase(),e=e.replace("_","-"),t?f(e,t):null===t?(p(e),e="en"):z[e]||m(e),H.duration.fn._lang=H.fn._lang=m(e),void 0):H.fn._lang._abbr},H.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),m(e)},H.isMoment=function(e){return e instanceof r},H.isDuration=function(e){return e instanceof o},s(H.fn=r.prototype,{clone:function(){return H(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return y(H(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!d(this._a,(this._isUTC?H.utc(this._a):H(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},invalidAt:function(){var e,t=this._a,n=(this._isUTC?H.utc(this._a):H(this._a)).toArray();for(e=6;e>=0&&t[e]===n[e];--e);return e},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=y(this,e||H.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return n="string"==typeof e?H.duration(+t,e):H.duration(e,t),c(this,n,1),this},subtract:function(e,t){var n;return n="string"==typeof e?H.duration(+t,e):H.duration(e,t),c(this,n,-1),this},diff:function(e,t,n){var i,r,o=this._isUTC?H(e).zone(this._offset||0):H(e).local(),s=6e4*(this.zone()-o.zone());return t=h(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),r+=(this-H(this).startOf("month")-(o-H(o).startOf("month")))/i,r-=6e4*(this.zone()-H(this).startOf("month").zone()-(o.zone()-H(o).startOf("month").zone()))/i,"year"===t&&(r/=12)):(i=this-o,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-s)/864e5:"week"===t?(i-s)/6048e5:i),n?r:a(r)},from:function(e,t){return H.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(H(),e)},calendar:function(){var e=this.diff(H().zone(this.zone()).startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){var e=this.year();return 0===e%4&&0!==e%100||0===e%400},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?"string"==typeof e&&(e=this.lang().weekdaysParse(e),"number"!=typeof e)?this:this.add({d:e-t}):t},month:function(e){var t,n=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(t,this.daysInMonth())),H.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(e){switch(e=h(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoweek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoweek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=h(e),this.startOf(e).add("isoweek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+H(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+H(e).startOf(t)},isSame:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)===+H(e).startOf(t)},min:function(e){return e=H.apply(null,arguments),this>e?this:e},max:function(e){return e=H.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=_(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&c(this,H.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},hasAlignedHourOffset:function(e){return e=e?H(e).zone():0,0===(this.zone()-e)%60},daysInMonth:function(){return H.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(e){var t=j((H(this).startOf("day")-H(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},weekYear:function(e){var t=I(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=I(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=I(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=h(e),this[e.toLowerCase()]()},set:function(e,t){e=h(e),this[e.toLowerCase()](t)},lang:function(t){return t===e?this._lang:(this._lang=m(t),this)}}),R=0;R<st.length;R++)L(st[R].toLowerCase().replace(/s$/,""),st[R]);L("year","FullYear"),H.fn.days=H.fn.day,H.fn.months=H.fn.month,H.fn.weeks=H.fn.week,H.fn.isoWeeks=H.fn.isoWeek,H.fn.toJSON=H.fn.toISOString,s(H.duration.fn=o.prototype,{_bubble:function(){var e,t,n,i,r=this._milliseconds,o=this._days,s=this._months,l=this._data;l.milliseconds=r%1e3,e=a(r/1e3),l.seconds=e%60,t=a(e/60),l.minutes=t%60,n=a(t/60),l.hours=n%24,o+=a(n/24),l.days=o%30,s+=a(o/30),l.months=s%12,i=a(s/12),l.years=i},weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*~~(this._months/12)},humanize:function(e){var t=+this,n=$(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,t){var n=H.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=H.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=h(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=h(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:H.fn.lang});for(R in at)at.hasOwnProperty(R)&&(O(R,at[R]),P(R.toLowerCase()));O("Weeks",6048e5),H.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},H.lang("en",{ordinal:function(e){var t=e%10,n=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),W&&(module.exports=H),"undefined"==typeof ender&&(this.moment=H),"function"==typeof define&&define.amd&&define("moment",[],function(){return H})}.call(this),$(document).ready(function(){!function(){function e(e){var t=$(this),i=t.data("datetimepickerDefault");t.data("datetimepickerDefault",e),i||t.on("show",function(){var e=t.data("datetimepicker"),i=t.data("datetimepickerDefault");t.val()||(n>i||i>n)&&(e.setDate(i),e.setDate(null))})}var t=$(".datepicker, .datetimepicker");$(".datetimepicker").datetimepicker({format:"dd-MM-yyyy hh:mm",language:"en-US",collapse:!1,pickSeconds:!1,maskInput:!0}),$(".datepicker").datetimepicker({format:"dd-MM-yyyy",language:"en-US",pickTime:!1,collapse:!1,maskInput:!0});var n=new Date,i=moment().add("d",1).startOf("day").toDate(),r=moment().subtract("d",1).endOf("day").toDate();$(".datetimepicker.future-only:not(.past-only)").datetimepicker("setStartDate",n).each(function(){e.call(this,n)}),$(".datepicker.future-only:not(.past-only)").datetimepicker("setStartDate",i).each(function(){e.call(this,i)}),$(".datetimepicker.past-only:not(.future-only)").datetimepicker("setEndDate",n).each(function(){e.call(this,n)}),$(".datepicker.past-only:not(.future-only)").datetimepicker("setEndDate",r).each(function(){e.call(this,r)}),t.each(function(){var t=$(this);if(t.data("dateEnddate")){var n=moment(t.data("dateEnddate")).toDate();t.datetimepicker("setEndDate",n),e.call(this,n)}if(t.data("dateStartdate")){var n=moment(t.data("dateStartdate")).toDate();t.datetimepicker("setStartDate",n),e.call(this,n)}var i=t.data("datetimepicker").format,r=$("input",this);r.attr("placeholder")||r.attr("placeholder",i)})}(),$("*[rel=tooltip]").tooltip(),$(".colorpicker").colorpicker(),$(".selectpicker").selectpicker(),$(".delete-button").click(function(){var e=$(this).parents(".delete-confirm-control-group");$(this).hide();var t=this;$(".delete-confirm-button",e).fadeIn(),setTimeout(function(){$(".delete-confirm-button",e).hide(),$(t).fadeIn()},2e3)}),$(".btn-hover-text").hover(function(){var e=$(this);e.text(e.data("alt"))},function(){var e=$(this);e.text(e.data("original"))}),$(function(){$(".jfdiCode").each(_jfdiFormatFunc)}),$(function(){page_header=$(".page-header h1"),page_header.size()<=0||(page_name=page_header[0].innerHTML.replace(/\s/g,"-"),!page_name||page_name.indexOf("!")>0||page_name.indexOf(":")>0||(badge_count=$("#"+page_name+"_count"),badge_count.size()<=0||(new_items_seen=$(".new_"+page_name).size(),set_badge=$("#badge_"+page_name),new_items_seen>0&&set_badge.size()>0&&(update_count=badge_count.val()-new_items_seen,update_count>0?set_badge[0].innerHTML=update_count:set_badge.addClass("hidden")))))}),$(":input[type=number]").live("mousewheel",function(){$(this).blur()}),$(".control-group label.error, .control-group div.error").each(function(e,t){$(t).parents(".control-group").addClass("error")}),$("body").on("click","a.btn.disabled, a.btn[disabled]",function(e){e.preventDefault()})}),jQuery.fn.extend({validatr:function(t){function n(e,t){var n=e.parents(".control-group");n.addClass("error");var i=$(".help-inline",n);0===i.length&&(i=$('<span class="help-inline"></span>'),i.appendTo(e.parent())),i.text(t)}function i(e){var t=e.parents(".control-group");t.removeClass("error"),$(".help-inline",t).remove()}function r(e){return function(){function t(e){e?"object"==typeof e&&"function"==typeof e.promise?e.done(function(e){t(e)}):("string"==typeof e&&(e=[e]),n(o,e)):i(o)}var r=e.apply(this,arguments),o=$(this);t(r)}}function o(){$(".error",this).length>0&&e.preventDefault()}for(var s=0;s<t.length;++s){var a=t[s],l=a[0];"string"==typeof l&&(l=$(l,this)),l.change(r(a[1]))}$(this).submit(o),$('input[type="submit"]',this).click(function(){handlevalidateForm.apply($(this).parents("form")[0],arguments)})}});var _jfdiFormatFunc=function(e,t){$(t).data("jfdiFormatted")||($(t).data("jfdiFormatted",!0),$(t).hasClass("pythonCode")&&CodeMirror.runMode($(t).text(),"python",t))};String.prototype.nl2br=function(){return(this+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")},$(document).ready(function(){$(".add-ach-req").click(function(e){e.preventDefault();var t=$(this).parents("tr"),n=t.find("select :selected"),i=n.val(),r=$(this).attr("href"),o={type:"Achievement",ach_id:i};$.ajax({url:r,type:"POST",data:o,dataType:"html",success:function(e){t.before(e),n.detach(),n.prop("selected",!1),t.find("select").append(n)}})}),$(".add-asm-req").click(function(e){e.preventDefault();var t=$(this).parents("tr"),n=t.find("input.asm-min-grade-input").val(),i=t.find("select :selected"),r=i.attr("data-type"),o=i.val(),s=$(this).attr("href"),a={type:"AsmReq",asm_id:o,asm_type:r,min_grade:n};$.ajax({url:s,type:"POST",data:a,dataType:"html",success:function(e){t.before(e),i.detach(),i.prop("selected",!1),t.find("select").append(i)}})}),$(".add-lvl-req").click(function(e){e.preventDefault();var t=$(this).parents("tr"),n=t.find("select :selected"),i=n.val(),r=$(this).attr("href"),o={type:"Level",lvl_id:i};$.ajax({url:r,type:"POST",data:o,dataType:"html",success:function(e){t.before(e),n.detach(),n.prop("selected",!1),t.find("select").append(n)}})}),$(document).on("click",".remove-req",function(e){e.preventDefault(),$(this).parents("tr").remove()})}),$(document).ready(function(){$(".update-user-role").on("click",function(e){e.preventDefault();var t=$(this).parents("tr"),n=t.find("#select-role_").val(),i=t.find(".user-id").val(),r=t.find(".user-role-update-path").val(),o=$(".alert");$.ajax({url:r,type:"PUT",data:{id:i,user:{system_role_id:n}},dataType:"json",success:function(){o.slideDown(),o._removeClass("hidden"),o.slideDown(function(){setTimeout(function(){o.slideUp()},1500)})}})})}),function(){}.call(this),CodeViewer={},CodeViewer.init=function(e,t,n,i,r){function o(){function e(e){return e.stopPropagation(),$(this).hasClass("annotate")?$(this).data("lh").eq(0).click():H==$(this).data("l")&&(L=this,O=$(this).data("l")),!1}function t(){P=this,el=$(this).data("l"),L||(O=el);for(var e=el>O?O:el,t=O>el?O:el,n=0;n<I.length;++n){if(I[n].s>=e&&I[n].s<=t)return!1;if(I[n].s<=e&&I[n].s>=t)return!1;if(I[n].e>=e&&I[n].e<=t)return!1;if(I[n].e<=e&&I[n].e>=t)return!1;if(I[n].s<=e&&I[n].e>=t)return!1}H=$(this).data("l"),e=H>O?O:H,t=O>H?O:H,L&&(E.removeClass("hover").slice(e,t+1).addClass("hover"),S.removeClass("highlight").slice(e,t+1).addClass("highlight")),$(this).addClass("hover")}function n(){L||($(this).removeClass("hover"),S.removeClass("highlight"))}function i(){if(L){var e=H>O?O:H,t=O>H?O:H;E.removeClass("hover"),a(e+1,t+1,!1,!0),F&&k(),L=!1}}var r=$output.find("div.lines"),o=1;S=$output.find("pre.line"),S.each(function(){N.push(this);var e=$('<div class="line-number">'+o+"</div>");e.css("height",$(this).height()+"px").css("line-height",$(this).height()+3+"px").css("top",$(this).offset().top-q+"px").data("l",o-1).appendTo(r),++o}),E=$(".line-number").bind("mousedown",e).hover(t,n),$(document).bind("mouseup",i)}function s(){return _ca?($("#annotate-area").remove(),$ab=$('<div id="annotate-area"></div>'),$ab.append('<p class="annotate-message">Leave an annotation:</p>'),$ta=$('<textarea class="annotate-box" id="annotate-box"></textarea>').data("s",O+1).data("e",H+1).appendTo($ab),$ab.append('<button class="btn" id="annotateButton">Annotate</button>'),this.append($ab),$ta.focus(),$("#annotateButton").on("click",function(){var e=$("#annotate-box");if("disabled"==e.attr("disabled"))return!1;var t=e.val().trim(),n=e.data("s"),i=e.data("e");""==t?e.focus():(e.attr("disabled","disabled"),$.post($("#annotation_path").val(),{origin:document.URL,annotation:{annotable_id:_cid,annotable_type:"StdCodingAnswer",text:t,line_start:n,line_end:i}},function(t){e.attr("disabled",!1).val(""),m(t)}))}),void 0):!1}function a(t,n,i,r){if("view"==_vt){if(($tcb=$("#temporary-comment-box"))&&$tcb.size()&&(t!=$tcb.data("s")||n!=$tcb.data("e"))&&l.call($("#temporary-comment-box")),r="undefined"!=typeof r,"undefined"!=typeof M[t])s=M[t];else{var o=u(t,n),s=$('<div class="comment-box" '+(r?'id="temporary-comment-box"':"")+"/>");if(!N[t-1])return!1;s.appendTo(document.body),s.css("width",j+"px").css("top",$(N[t-1]).offset().top+"px").data("top",$(N[t-1]).offset().top+e.scrollTop()).css("minHeight",(n-t+1)*o.height()+"px").data("s",t).data("e",n),d(t,n,o,s),M[t]=s,r||I.push({s:t-1,e:n-1})}$.isFunction(i)&&i.call(s),r&&h(s)}}function l(){this.size()&&(delete M[this.data("s")],c(this.data("s"),this.data("e")),this.remove(),D=!1)}function c(e,t){S.slice(e-1,t).removeClass("annotate").unbind("mouseenter").unbind("mouesleave").unbind("click"),E.slice(e-1,t).removeClass("annotate").data("lh",!1)}function u(e,t){return $lh=S.slice(e-1,t).addClass("annotate"),E.slice(e-1,t).addClass("annotate").data("lh",$lh),$lh}function d(e,t,n,i){var r=S.slice(e-1,t);return r.addClass("annotate-active").bind("mouseenter",function(){n.addClass("hover"),i.addClass("hover")}).bind("mouseleave",function(){n.removeClass("hover"),i.removeClass("hover")}).click(function(){h(i)}),r}function h(e){if(e.is("#temporary-comment-box")){if(D&&D.is("#temporary-comment-box"))return l.call($("#temporary-comment-box")),D=!1,!1}else l.call($("#temporary-comment-box"));if(D)D==e?(D.animate({"max-height":"100px"},"slow"),D.removeClass("active",500),D=!1,$("#annotate-area").remove()):(D.animate({"max-height":"100px"},"slow"),D.removeClass("active",500),e.css({"max-height":"none"}),e.addClass("active",300),D=e);else{var t=$(".annotate-area",e).outerHeight(!0);e.animate({"max-height":t+1e3},"slow"),e.addClass("active",300),D=e}D==e&&(O=e.data("s")-1,H=e.data("e")-1,s.call(e)),f()}function f(){if(F)return!0;var t=e.scrollTop();return $(".comment-box").each(function(){var e=$(this),n=e.data("top");n-=t,R&&(n-=R),q>n||n+20>=Y?e.is("#temporary-comment-box")?l.call(e):e.fadeOut("fast"):(e.is(":visible")||e.fadeIn("fast"),R&&n+e.height()>Y?e.css("top","auto").css("bottom","0px"):e.css("bottom","auto").css("top",n+"px"))}),!0}function p(){e.bind("scroll",f),$output.height()<e.height()&&e.height($output.height()+"px"),$output.width(e.get(0).scrollWidth);var t=function(){var t=$(document).scroll().width()-e.offset().left-e.width();j=t};t()}function m(t){"undefined"!=typeof Comment&&Comment.parseComment(t,_cid);for(var n=0;n<t.length;++n)"undefined"==typeof A[t[n].id]&&(A[t[n].id]=!0,-1==t[n].s||a(t[n].s,t[n].e,function(){this.is("#temporary-comment-box")&&(this.attr("id",""),I.push({s:t[n].s-1,e:t[n].e-1})),b(t[n],this)}));f.call(e)}function g(e){$obj=e.find(".comment-obj"),confirm("TO DELETE: \n\n"+$obj.attr("o")+"\n\nBY: "+$obj.attr("author"))&&$.ajax({url:$("#annotation_path").val()+"/"+$obj.attr("cid"),type:"DELETE",dataType:"json",success:function(){e.hide("slow",function(){e.remove()})}})}function v(e){$edit=e.find(".comment-edit-link"),$del=e.find(".comment-del-link"),$obj=e.find(".comment-obj"),original=$obj.attr("o"),id=$obj.attr("cid");var t=e.find(".annotate-box");comment=e.find(".comment"),0==t.size()?(t=$('<textarea class="annotate-box" style="margin-bottom: 9px; display: none" />'),t.val(original),comment.empty().append(t),t.show("slow"),$edit.empty().append('<i class="icon-ok"></i>'),$del.empty().append('<i class="icon-remove"></i>'),$del.unbind("click"),$del.bind("click",function(t){t.preventDefault(),y(e)})):$.ajax({url:$("#annotation_path").val()+"/"+$obj.attr("cid"),type:"PUT",dataType:"json",data:{text:t.val()},success:function(t){$obj.attr("o",t.o),$obj.attr("c",t.c),y(e)}})}function y(e){$edit=e.find(".comment-edit-link"),$del=e.find(".comment-del-link");var t=e.find(".annotate-box");comment=e.find(".comment"),t.size()>0&&(t.hide("slow",function(){comment.empty(),comment.html(e.find(".comment-obj").attr("c").nl2br())}),$edit.attr("title","Edit Comment"),$edit.empty().append('<i class="icon-pencil"></i>'),$del.empty().append('<i class="icon-trash"></i>'),$del.attr("title","Delete Comment"),$del.unbind("click"),$del.bind("click",function(t){t.preventDefault(),g(e)}))}function b(e,t){0==t.find(".annotate-area").size()&&t.prepend('<ul class="annotate-area code-comment-box">');var n=$('<li class="comment"/>'),i=$('<div class="comment-text-container">');if(e.edit){var r=$('<input class="comment-obj" type="hidden" o="" c="" cid="" author="" >');r.attr("o",e.o),r.attr("c",e.c),r.attr("cid",e.id),r.attr("author",e.name);var o=$('<a href="#" class="comment-edit-link"><i class="icon-pencil"></i></a>').click(function(e){e.preventDefault(),v(n)}),s=$('<a href="#" class="comment-del-link"><i class="icon-trash"></i></a>').click(function(e){e.preventDefault(),g(n)}),a=$('<div class="pull-right annotation-edit">').append(o).append(s).append(r);a.appendTo(i)}i.append('<div class="commentor">'+e.u+"</div>").append('<div class="comment">'+e.c.nl2br()+"</div>").append('<div class="timestamp">'+e.t+"</div>"),n.append('<img class="small-profile-pic" src="'+e.p+'" width="32" height="32" />').append(i).appendTo(t.find(".annotate-area")),jfdiFormat(n.find(".comment").get(0))}function w(){$.get($("#annotation_path").val(),{annotation:{annotable_id:_cid,annotable_type:"StdCodingAnswer"}},function(e){m(e),setTimeout(w,4e3)})}function _(){e.wrap('<div id="wrapper-container" />'),$newWrapper=e.addClass("fullscreen").appendTo(document.body),$output.data("oheight",$output.height()),$output.height()<e.height()&&$output.height(e.height()+"px");var t;$(document.body).addClass("fullscreen").keydown(t=function(e){var n=e.which||e.keyCode;27==n&&(x(),$(this).unbind("keydown",t))}),ntopOffset=$newWrapper.find(".static-code").find("div.source").offset().top,R=q-ntopOffset,q=ntopOffset,Y=q+$newWrapper.height(),f()}function x(){e.appendTo($("#wrapper-container")).removeClass("fullscreen"),$output.height($output.data("oheight")),q=$output.find("div.source").offset().top,Y=q+e.height(),R=!1,$(document.body).removeClass("fullscreen"),$(document).scrollTop(q-40),f()}function C(){F=!0,$(".comment-box").hide()}function k(){F=!1,f(),$("#toggle-comment").removeClass("hide")}function T(){if(document.selection){var e=document.body.createTextRange();e.moveToElementText($output.find(".source").get(0)),e.select()}else if(window.getSelection){var e=document.createRange();e.selectNode($output.find(".source").get(0)),window.getSelection().addRange(e)}}var S,D=!1,N=[],E=!1,M={},I=[],A={},L=!1,P=!1,O=!1,H=!1,R=!1,F=!1,j=0;if("undefined"!=typeof r&&r){console.log(i),$('<textarea class="code" name="code" id="code"></textarea>').val(t).appendTo(e);var z=CodeMirror.fromTextArea($("#code").get(0),{mode:{name:"python",version:3,singleLineStringErrors:!1},lineNumbers:!0,tabMode:"indent",theme:"molokai",matchBrackets:!0});z.on("change",function(){$("#code_"+i).val(z.getValue())})}else{$output=$('<div class="static-code cm-s-'+n+'"/>').appendTo(e);var W=[],B=[];CodeMirror.runMode(_source_code,_language,function(e,t){"\n"==e?(str=W.join(""),""==str&&(str=" "),B.push('<pre class="line">'+str+"\n"+"</pre>"),W=[]):t?W.push('<span class="cm-'+t+'">'+e+"</span>"):W.push(e)}),W.length&&(str=W.join(""),""==str&&(str=" "),B.push('<pre class="line">'+str+"</pre>"));var U=B.join("");$output.html('<div class="lines"></div><div class="source">'+U+"</div>");var q=$output.find("div.source").offset().top,Y=q+e.height();o($("#output")),p()}return w(),$("#commentButton").click(function(){if("disabled"==$("#comment-ta").attr("disabled"))return!1;var e=$("#comment-ta").val().trim();""==e?$("#comment-ta").focus():($("#comment-ta").attr("disabled","disabled"),$.post(makelink("code/_comment"),{cid:_cid,comment:e},function(e){e=JSON.parse(e),$("#comment-ta").attr("disabled",!1).val("").focus(),m(e)}))}),{parseComments:m,checkScroll:f,fullScreen:_,unfullScreen:x,showAnnotation:k,hideAnnotation:C,selectAll:T}};var path=function(){function addslashes(e){return(e+"").replace(/[\"]/g,"&quot;")}function _appendTest(e,t,n,i){$("#"+e+"_test_tbody").append('<tr testNo="'+t+'">'+'<td><input type="text" value="'+addslashes(n)+'" onchange="path.updateTest(\''+e+"', this.parentNode.parentNode.getAttribute('testNo'), 'expression', this.value)\" /></td>"+'<td><input type="text" value="'+addslashes(i)+'" onchange="path.updateTest(\''+e+"', this.parentNode.parentNode.getAttribute('testNo'), 'expected', this.value)\" /></td>"+'<td><a  title="Delete this test" class = "btn btn-danger" onclick="path.deleteTest(this.parentNode.parentNode, \''+e+'\')"><i class="icon-trash"></i></a></td></tr>')}function _newTest(){return{expected:"",expression:""}}var saving=!1,cStep=null;return{data:{type:"do",language:"python",timeLimitInSec:"1",memoryLimitInMB:"2",included:"",prefill:"",privateTests:new Array,publicTests:new Array},savePath:function(){saving=!0,$("#coding_question_data").val(JSON.stringify(path.data))},initialize:function(){$("#savePath").click(path.savePath),cStep=path.data,""!=$("#coding_question_data").val()&&(path.data=JSON.parse($("#coding_question_data").val()),path.loadStep())},changeLang:function(e){cStep.language=e,cmPrefill.setOption("mode",e),cmIncluded.setOption("mode",e)},changePrefill:function(e){cStep.prefill=e},changeIncluded:function(e){cStep.included=e},changeMemoryLimit:function(e){cStep.memoryLimitInMB=e},changeTimeLimit:function(e){cStep.changeTimeLimit=e
},addTest:function(e){var t=null,n=cStep;"public"==e?(n.publicTests.push(_newTest()),t=n.publicTests.length):(n.privateTests.push(_newTest()),t=n.privateTests.length),_appendTest(e,t,"","")},updateTest:function(testType,testCount,expr,value){testCount--,eval("cStep."+testType+"Tests["+testCount+"]."+expr+" = value")},deleteTest:function(testDiv,testType){var i=$(testDiv).attr("testNo");$(testDiv).remove(),eval("cStep."+testType+"Tests.splice(i-1,1)"),$("#"+testType+"_test_tbody").children().each(function(e,t){$(t).attr("testNo",e+1)})},loadStep:function(){cStep=path.data,$("#timeLimit").attr("value",cStep.timeLimitInSec),$("#memoryLimit").attr("value",cStep.memoryLimitInMB),$("#public_test_tbody").html(""),$("#private_test_tbody").html("");for(var e=0;e<cStep.privateTests.length;e++)_appendTest("private",e+1,cStep.privateTests[e].expression,cStep.privateTests[e].expected);for(var e=0;e<cStep.publicTests.length;e++)_appendTest("public",e+1,cStep.publicTests[e].expression,cStep.publicTests[e].expected);cmPrefill.setValue(cStep.prefill),null==cStep.included&&(cStep.included=""),cmIncluded.setValue(cStep.included)}}}(),cmPrefill,cmIncluded;$(document).ready(function(){if(document.getElementById("pathstep_content")){var e={mode:{name:"python",version:3,singleLineStringErrors:!1},lineNumbers:!0,indentUnit:4,tabMode:"shift",matchBrackets:!0,theme:"molokai"};cmPrefill=CodeMirror.fromTextArea(document.getElementById("prefilled"),e),cmIncluded=CodeMirror.fromTextArea(document.getElementById("included"),e),cmPrefill.on("change",function(){path.changePrefill(cmPrefill.getValue())}),cmIncluded.on("change",function(){path.changeIncluded(cmIncluded.getValue())}),path.initialize()}});var Comment=function(){var e={},t={};return e.makeComment=function(e){var t=$('<li class="comment"/>');t.append('<img class="small-profile-pic" src="'+e.p+'" width="32" height="32" />');var n=$('<div class="comment-text-container">');return n.append('<div class="commentor">'+e.u+"</div>").append('<div class="comment">'+e.c.nl2br()+"</div>").append('<div class="timestamp">'+e.t+"</div>").appendTo(t),t},e.makeEditableComment=function(t,n){var i=$('<li class="comment"/>');i.append('<img class="small-profile-pic" src="'+t.p+'" width="32" height="32" />');var r=$('<div class="comment-text-container">'),o=$('<input class="comment-obj" type="hidden" o="" c="" cid="" author="" >');o.attr("o",t.o),o.attr("c",t.c),o.attr("cid",t.id),o.attr("author",t.name);var s=$('<a href="#" class="comment-edit-link" rel="tooltip" data-original-title="Edit Comment"><i class="icon-pencil"></i></a>').click(function(t){t.preventDefault(),e.edit_comment(i,n)}),a=$('<a href="#" class="comment-del-link"  rel="tooltip" data-original-title="Delete Comment"><i class="icon-trash"></i></a>').click(function(t){t.preventDefault(),e.del_comment(i,n)});return r.append($('<div class="pull-right comment-edit">').append(s).append(a)).append('<div class="commentor">'+t.u+"</div>").append('<div class="comment">'+t.c.nl2br()+"</div>").append('<div class="timestamp">'+t.t+"</div>").append(o).appendTo(i),i},e.edit_comment=function(t,n){$edit=t.find(".comment-edit-link"),$del=t.find(".comment-del-link"),$obj=t.find(".comment-obj"),original=$obj.attr("o"),id=$obj.attr("cid");var i=t.find(".annotate-box");comment=t.find(".comment"),0==i.size()?(i=$('<textarea class="annotate-box" style="margin-bottom: 9px; display: none" />'),i.val(original),comment.empty().append(i),i.show("slow"),$edit.attr("data-original-title","Save Comment"),$edit.empty().append('<i class="icon-ok"></i>'),$del.empty().append('<i class="icon-remove"></i>'),$del.attr("data-original-title","Cancel Edit"),$del.unbind("click"),$del.bind("click",function(i){i.preventDefault(),e.quit_comment_edit(t,n)})):$.ajax({url:$("#"+n+"_post_path").val()+"/"+id,type:"PUT",dataType:"json",data:{text:i.val()},success:function(i){$obj.attr("o",i.o),$obj.attr("c",i.c),e.quit_comment_edit(t,n)}})},e.quit_comment_edit=function(t,n){$edit=t.find(".comment-edit-link"),$del=t.find(".comment-del-link");var i=t.find(".annotate-box");comment=t.find(".comment"),i.size()>0&&(console.log(t.find(".comment-obj").attr("c")),i.hide("slow",function(){comment.empty(),comment.html(t.find(".comment-obj").attr("c").nl2br())}),$edit.attr("data-original-title","Edit Comment"),$edit.empty().append('<i class="icon-pencil"></i>'),$del.empty().append('<i class="icon-trash"></i>'),$del.attr("data-original-title","Delete Comment"),$del.unbind("click"),$del.bind("click",function(i){i.preventDefault(),e.del_comment(t,n)}))},e.del_comment=function(e,t){$obj=e.find(".comment-obj"),confirm("TO DELETE: \n\n"+$obj.attr("o")+"\n\nBY: "+$obj.attr("author"))&&$.ajax({url:$("#"+t+"_post_path").val()+"/"+$obj.attr("cid"),type:"DELETE",dataType:"json",success:function(){e.hide("slow",function(){e.remove()})}})},e.makeHiddenBox=function(t,n){var i=$('<li class="hidden"/>');return $a=$('<a cnt="'+t+'" class="hidden" href="#">'+t+" other comments hidden</a>").appendTo(i).one("click",function(){$.post($("#"+n+"_post_path").val()+"/get_comments",{origin:$("#submission_url_"+n).val(),comment:{topic_id:$("#"+n+"_commentable_id").val(),topic_type:$("#"+n+"_commentable_type").val()},brief:!0},function(t){e.parseComment(t,n)})}).click(function(){return!1}),i},e.makeTextarea=function(t){var n=t.attr("ecid"),i=$('<li class="textarea" />');i.append('<textarea class="annotate-box" style="margin-bottom: 9px" />');var r=$('<a href="#" class="btn">Comment</a>').click(function(t){t.preventDefault();var i=$(this).parent().find("textarea");if("disabled"==i.attr("disabled"))return!1;var r=i.val().trim();""==r?i.focus():(i.attr("disabled","disabled"),$.post($("#"+n+"_post_path").val(),{origin:$("#submission_url_"+n).val(),comment:{commentable_id:$("#"+n+"_commentable_id").val(),commentable_type:$("#"+n+"_commentable_type").val(),text:r}},function(t){i.attr("disabled",!1).val("").focus(),e.parseComment(t,n)}))});return r.appendTo(i),i},e.parseComment=function(n,i){for(var r=$('.code-comment-box[ecid="'+i+'"]'),o=!1,s=!1,a=0;a<n.length&&!o;++a)o=o||"undefined"!=typeof n[a].h;!o&&r.data("hasHidden")&&(r.find("li.comment,li.hidden").remove().data("hasHidden",!1),s=!0);for(var a=0;a<n.length;++a){var l;("undefined"==typeof n[a].id||s||"undefined"==typeof t[n[a].id])&&(t[n[a].id]=!0,("undefined"==typeof n[a].s||-1==n[a].s)&&("undefined"!=typeof n[a].h?(l=e.makeHiddenBox(n[a].h,i),r.data("hasHidden",!0)):l=n[a].edit?e.makeEditableComment(n[a],i):e.makeComment(n[a]),r.data("hasComment")?l.insertBefore(r.data("hasComment")):(console.log("appending"),l.appendTo(r)),l.find(".comment").size()&&jfdiFormat(l.find(".comment").get(0))))}},e.init=function(t,n,i){var r=$('.code-comment-box[ecid="'+t+'"]');if("undefined"!=typeof n&&n){var o=e.makeTextarea(r);r.append(o).data("hasComment",o)}},e}();$(function(){$(".mission-pending a").click(function(){var e=$(this);return $.post($("#comments_togging_path").val(),{cid:$(this).attr("cid")},function(){"Mark as pending"==e.text().trim()?e.text("Unmark as pending"):e.text("Mark as pending")}),!1})}),$(document).ready(function(){function e(){t=$("#attempting-add-student").val(),i.indexOf(t)<0?(r.hasClass("disabled")||r.attr("disabled",!0),o.attr("disabled",!1)):(r.attr("disabled",!1),o.hasClass("disabled")||o.attr("disabled",!0))}var t,n,i=Array.prototype.map.call($("#dg-std-table").find("a"),function(e){return e.id}),r=$("#mng-del-std-btn"),o=$("#mng-add-std-btn");$("#assigned-std").size()>0&&(n=$("#assigned-std").val().replace("[","").replace("]","").split(", ")),e(),o.click(function(){n.indexOf(t)>=0&&confirm("That student has already been assigned to a tutor! Are you sure you want to add him/her? \n\nTHIS WON'T REMOVE HIM/HER FROM THE CURRENT TUTOR.")}),$(document).on("change","#attempting-add-student",function(){e()})}),function(){}.call(this),$(document).ready(function(){$("#delete-course-btn").click(function(e){e.preventDefault();var t=confirm("Are you sure you want to delete this Course? You will not be able to recover its data!");t&&$("#delete-course-link").click()})}),$(document).ready(function(){function e(e,t){"use strict";var n;n=$("<form />",{action:e,method:"POST",style:"display: none;"}),"undefined"!=typeof t&&$.each(t,function(e,t){$.isArray(t)?$(t).each(function(i){$("<input />",{type:"hidden",name:e+"[]",value:t[i]}).appendTo(n)}):$("<input />",{type:"hidden",name:e,value:t}).appendTo(n)}),console.log(n),n.appendTo("body").submit()}$(".check-all").change(function(){var e=$(this).prop("checked"),t=$(this).attr("data-target");$(t).prop("checked",e),console.log(e),console.log(t)}),$(".update-selected").click(function(t){t.preventDefault();var n=$(this).attr("href");console.log(n);var i=$(this).attr("data-target"),r=$.grep($(i),function(e){return $(e).prop("checked")}),o=$.map(r,function(e){return $(e).val()}),s=$("meta[name='csrf-param']").attr("content"),a=$("meta[name='csrf-token']").attr("content"),l={};l[s]=a,l.ids=o,e(n,l)})}),function(){}.call(this),$(document).ready(function(){var e="";$(".file-uploader-trigger").click(function(){e=$(this).attr("data-target"),$("#file-upload-form").fileupload({acceptFileTypes:new RegExp($(this).attr("data-accepts-filetypes")||".*","i")});var t=$(this).attr("href");return $(t).modal("show"),!1}),$("#file-upload-form").fileupload({maxFileSize:5e7,autoUpload:!0,dropZone:$("#dropzone"),dataType:"json",url:$("#file-upload-form").attr("action"),formData:[{name:"_method",value:"POST "},{name:"_page_name",value:$("#page_name").val()}],done:function(t,n){$(e+"-input").attr("value",void 0===typeof n.result.id?n.result.url:n.result.id),$(e+"-done").css("display","block"),$(".file-uploader-insert-btn").click()}}),$(document).bind("dragover",function(e){var t=$("#dropzone"),n=window.dropZoneTimeout;n?clearTimeout(n):t.addClass("in"),e.target===t[0]?t.addClass("hover"):t.removeClass("hover"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,t.removeClass("in hover")},100)}),$(document).bind("drop dragover",function(e){e.preventDefault()})}),$(document).ready(function(){$(document).on("click",".form-submit",function(){$(".form-temp").remove()})}),$(function(){function e(e,t){return e.indexOf("?")<0?e+"?"+t:e+"&"+t}$(".view-post-btn").click(function(){var t=this;if($(t).data("loaded")||$.ajax({url:e($(t).closest("tr").find(".post-count-link").attr("href"),"raw=1&limit=10"),cache:!1,success:function(e){$(t).closest("tr").next().find(".post-details").html(e),$(t).data("loaded",!0)}}),$container=$(t).closest("tr").next(),$(".post-details-container").not($container).hide(),$(".view-post-btn").not(this).data("opened",!1).text("View"),$container.fadeToggle(),$(this).data("opened"))$(this).data("opened",!1).text("View");else{$(this).data("opened",!0).text("Hide");var n=$(this).offset().top-50;$("html, body").animate({scrollTop:n},200)}})}),forum={},$(document).ready(function(){var e,t=$("#html-editor-image-upload-tab").html();if(t){var n={html:!0,customTemplates:{image:function(){return t}}};e=function(){$(this).wysihtml5(n)}}else e=function(){$(this).wysihtml5()};$(document).on("DOMNodeInserted",function(t){$("textarea.html-editor",t.target).each(e)})}),$(document).ready(function(){var e="";$(".image-uploader-trigger").click(function(){e=$(this).attr("data-target");var t=$(this).attr("href");return $(t).modal("show"),!1}),$(document).bind("dragover",function(e){var t=$("#image-dropzone"),n=window.dropZoneTimeout;n?clearTimeout(n):t.addClass("in"),e.target===t[0]?t.addClass("hover"):t.removeClass("hover"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,t.removeClass("in hover")},100)}),$(document).bind("drop dragover",function(e){e.preventDefault()}),$("#image-upload-form").fileupload({maxFileSize:5e6,acceptFileTypes:"/(.|/)(gif|jpe?g|png)$/i",autoUpload:!0,dropZone:$("#image-dropzone"),dataType:"json",url:$("#image-upload-form").attr("action"),formData:[{name:"_method",value:"POST "}],done:function(t,n){$(".image-uploader-input-url").val(n.result.url),$(".image-uploader-preview-img").attr("src",n.result.url),$(e+"-preview").attr("src",n.result.url),$(e+"-input").attr("value",n.result.url),$(".image-uploader-insert-btn").click()}})}),$(document).ready(function(){function e(e){var t=this;this.pickers=e,e.forEach(function(e){e.onSelectionCompleted=function(){t.doneCallback.apply(t,arguments)}})}function t(){$(window).resize()}e.prototype.pick=function(){this.$modal&&this.$modal.remove(),this.$modal=$('<div class="modal hide fade" />'),this.pickers[0].pick(this.$modal[0]),this.$modal.modal()},e.prototype.doneCallback=function(e){e.forEach(function(e){$element=$(tmpl("lesson-plan-resource",e)),$("#linked_resources tbody").append($element)})};var n=new e([new MaterialsFilePicker]);$(".addresource-button").click(function(){n.pick()}),$(document).on("click",".resource-delete",null,function(){$(this).parents("tr").remove()}),$("#lesson-plan-entry-filter").change(function(){for(var e=0;e<this.options.length;++e){var n=this.options[e],i=$(n).data();n.selected?$(document.getElementsByClassName(i.entryType)).slideDown({complete:t}):$(document.getElementsByClassName(i.entryType)).slideUp({complete:t})}});var i=$(".lesson-plan-header-row-wrapper"),r=$(".lesson-plan-header-row");r.each(function(e){var t=$(r[e]),n=r[e+1],o=$(i[e]);o.height(t.outerHeight(!0)),t.scrollToFixed({marginTop:$(".navbar-inner").outerHeight(!0),limit:function(){return n?$(n).offset().top-t.outerHeight(!0)-20:$(".end-of-page").offset().top},fixed:function(){t.addClass("transparent-background")},unfixed:function(){t.removeClass("transparent-background")}})}),$("#lesson-plan-hide-all").click(function(){$(".lesson-plan-body").slideUp({complete:t}),$(".lesson-plan-body").data("hidden",!0),$(".lesson-plan-show-entries").show(),$(".lesson-plan-hide-entries").hide()}),$("#lesson-plan-show-all").click(function(){$(".lesson-plan-body").slideDown({complete:t}),$(".lesson-plan-body").data("hidden",!1),$(".lesson-plan-show-entries").hide(),$(".lesson-plan-hide-entries").show()}),$(".lesson-plan-header").click(function(){var e=$(this).parents(".lesson-plan-item"),n=$(".lesson-plan-body",e).data("hidden");n?($(".lesson-plan-body",e).slideDown({complete:t}).data("hidden",!1),$(".lesson-plan-hide-entries",this).show(),$(".lesson-plan-show-entries",this).hide()):($(".lesson-plan-body",e).slideUp({complete:t}).data("hidden",!0),$(".lesson-plan-hide-entries",this).hide(),$(".lesson-plan-show-entries",this).show())}),$(".lesson-plan-milestone-generator-form").validatr([["input#input-number-milestones",function(){var e=$(this).val();return e?0>=e?"The number of milestones to create should be a positive integer":null:"This field is required"}],["input#input-length-milestones",function(){var e=$(this).val();return e?0>=e?"The length of a milestone should be a positive integer":null:"This field is required"}],["input#input-prefix-milestones",function(){}],["input#input-start-milestones",function(){var e=$(this).val();return e?null:"This field is required"}]]),$("form.lesson-plan-milestone-generator-form").submit(function(){for(var e="DD-MM-YYYY",t=$("input#input-number-milestones").val(),n=$("input#input-length-milestones").val(),i=$("input#input-prefix-milestones").val(),r=$("input#input-start-milestones").val(),o=moment(r,e),s=[],a=0;t>a;++a)o.add("days",parseInt(n)),s.push({title:i+" "+(a+1),end_at:o.clone()});for(var l=[],a=0;a<s.length;++a){var c=s[a];l.push($.ajax({type:"POST",url:"lesson_plan/milestones.json",data:{lesson_plan_milestone:{title:c.title,description:"",end_at:c.end_at.format(e)}},dataType:"json"}))}var u=$(this).parents(".modal");return $(".modal-body",u).addClass("hidden"),$("#modal-loading",u).parent().removeClass("hidden"),$("button.btn, input.btn",u).addClass("disabled").prop("disabled",!0),$.when.apply($,l).then(function(){u.modal("hide"),location.href=location.href},function(){alert("An error occurred while processing your request."),u.modal("hide"),location.href=location.href}),!1})}),$(document).ready(function(){$(".lvl-add-more").click(function(e){e.preventDefault();var t=$(this).parents("tbody").children().length;format=["<tr>","  <td>"+t+"</td>",'  <td><input type="number" maxlength="15" name="exps[]"></td>',"</tr>"].join(""),$(this).parents("tr").before(format)})}),$(document).ready(function(){$(".repeat-exp-link").click(function(e){e.preventDefault();var t=$(this).parent().children("input").val();$(".exp-input").val(t)}),$(".select-all-achs").click(function(e){e.preventDefault(),$('table.manual-awards-achievements input[type="checkbox"]').prop("checked",!0)}),$(".deselect-all-achs").click(function(e){e.preventDefault(),$('table.manual-awards-achievements input[type="checkbox"]').prop("checked",!1)}),$(".select-all-stds").click(function(e){e.preventDefault(),$('table.manual-awards-students input[type="checkbox"]').prop("checked",!0)}),$(".deselect-all-stds").click(function(e){e.preventDefault(),$('table.manual-awards-students input[type="checkbox"]').prop("checked",!1)})}),function(){var e,t,n,i,r,o,s;t=function(){var e;return e=$("#cvs_file"),e.replaceWith(e=e.clone(!0)),$("#emails-tbody").empty()},r=function(e){var t,i;return t=e.target.files[0],t?(i=new FileReader,i.onload=function(){var e;return e=i.result,n(e)},i.readAsText(t)):alert("Failed to load file")},n=function(e){var t,n,i,r,o,s,a,l,c,u,d,h,f,p,m,g;for(r="File content format not valid!",a=[],m=e.split("\n"),c=0,h=m.length;h>c;c++)l=m[c],a.push(l.trim());if(0===a.length)return alert(r),!1;if(o=a[0].split(","),s=o.indexOf("Name"),0===o.length||0>s)return alert(r),!1;if(i=o.indexOf("E-mail 1 - Value"),0>i)return alert("Can't find email feild in the file"),!1;for(n=[],g=a.slice(1,+(a.length-2)+1||9e9),u=0,f=g.length;f>u;u++)l=g[u],n.push({name:l.split(",")[s],email:l.split(",")[i]});for(d=0,p=n.length;p>d;d++)t=n[d],$("#emails-tbody").append("<tr><td><input type='checkbox' class='checkbox-emails' checked/></td><td class='name'>"+t.name+"</td><td class='email'>"+t.email+"</td></tr>");return $("#emails-to-invite-modal").modal("toggle")},o=function(){var e,t,n,r,o,s,a;for(o=$(".check-all-emails").attr("data-target"),t=$.grep($(o),function(e){return $(e).prop("checked")}),n=$.map($(t),function(e){return $(e).parents("tr")}),r=[],s=0,a=n.length;a>s;s++)e=n[s],r.push({name:e.find(".name").html(),email:e.find(".email").html()});return i(r)},this.sendInvitationTable=function(){var e,t,n,r,o;for(n=$("#tbody-add-student tr"),e=[],r=0,o=n.length;o>r;r++)t=n[r],e.push({name:$(t).find(".name").val(),email:$(t).find(".email").val()});return i(e)},s=function(e){var t,n,i,r;return e.preventDefault(),r=$(this).attr("href"),i=$(this).attr("data-target"),t=$.grep($(i),function(e){return $(e).prop("checked")}),n=$.map($(t),function(e){return $(e).val()}),0===n.length?(alert("No student selected!"),void 0):$.ajax({url:r,type:"POST",data:{students:n},dataType:"json",success:function(){return location.reload()}})},i=function(e){var t;return t=$("#email-invitation-url").val(),$.ajax({url:t,type:"POST",data:{students:e},dataType:"json",success:function(){return location.reload()}})},this.stdRemoveRow=function(e){return $(e).remove(),0===$("#tbody-add-student tr").length?$("#add-student-table").remove():void 0},e=function(){return 0===$("#tbody-add-student").length&&$("#add-student-div").append('        <table class="table table-bordered"  id="add-student-table">          <thead><tr>            <td>Name</td>            <td>Email</td>            <td></td>          </tr></thead>          <tbody id="tbody-add-student">          </tbody>          <tfoot id="add-student-footer">          <tr>           <td colspan="3" style="text-align: right">            <a href="#" class="btn btn-primary" id="send-invitation-emails-table" onclick="sendInvitationTable()">Send Invitation Emails</a>          </td>          </tr>          </tfoot>         </table>'),$("#tbody-add-student").append('<tr><td><input type="text" class="name"/></td><td><input type="email" class="email"></td><td><a  title="Delete this test" class = "btn" onclick="stdRemoveRow(this.parentNode.parentNode)"><i class="icon-remove"></i> </a></td></tr>')},$(document).ready(function(){return $("#cvs_file").change(r),$("#emails-to-invite-modal").on("hidden",t),$(".check-all-emails").change(function(){var e,t;return t=$(this).prop("checked"),e=$(this).attr("data-target"),$(e).prop("checked",t)}),$("#send-invitation-emails").click(o),$("#manually-add-student").click(e),$(".invite-update-selected").click(s)})}.call(this),$(document).ready(function(){function e(){$(".materials-select-file-checkbox").each(function(){var e=$(this).parents(".materials-file-row");$(this).prop("checked")?e.addClass("materials-file-selected"):e.removeClass("materials-file-selected")})}var t=gon.folders;if(t){var n=parseFileJsonForJqTree(t,!1,!0),i=$("#file-tree");i.tree({data:n,autoOpen:!0,keyboardSupport:!1,onCreateLi:function(e,t){var n='<i class="icon-folder-open"></i>';t.find(".jqtree-element").prepend(n)}});var r=gon.currentFolder.id,o=i.tree("getNodeById",r);i.tree("selectNode",o),i.bind("tree.select",function(e){var t=e.node;if(t){var n=t.url;window.location.href=n}}),$("form.materials-edit-form").validatr([["input#material_filename",function(){if($(this),this.value===gon.currentMaterial.filename)return null;var e=$.Deferred();return $.post("/courses/"+gon.course.id+"/materials/subfolder/"+gon.currentFolder.id+"/"+this.value,{_method:"HEAD"}).done(function(){e.resolve("Another file with the same name already exists.")}).fail(function(t){404===t.status?e.resolve(null):t.status||e.resolve("Another file with the same name already exists.")}),e.promise()}]]),$("#materials-select-all-files").click(function(){var t=$(this).prop("checked");$(".materials-select-file-checkbox").prop("checked",t),e()}),$("#materials-download-zip-button").click(function(e){var t=[];$(".materials-select-file-checkbox").each(function(){var e=$(this),n=e.data("fileid"),i=e.prop("checked");i&&t.push(n)}),e.preventDefault(),location.href=this.href+"?"+jQuery.param({include:t})}),e(),$(".materials-file-row").click(function(e){if(!(e.target.classList.contains("btn")||"a"===e.tagName||$(e.target).parents(".btn, a").length>0)){$(this).toggleClass("materials-file-selected");var t=$(this).find(".materials-select-file-checkbox"),n=t.prop("checked");t.prop("checked",!n)}}),$(".materials-select-file-checkbox").click(function(e){e.stopPropagation();var t=$(this).parents(".materials-file-row");t.toggleClass("materials-file-selected");var n=$("#materials-select-all-files");n.prop("checked")&&n.prop("checked",!1)})}}),MaterialsFilePicker.prototype.pick=function(e){var t=gon.course.id,n=this,i='<div class="modal-header">  <h3>Select Files</h3>  </div>  <div class="modal-body">  <div id="file-picker-loading">    <h2>Loading...</h2>    <div class="progress progress-striped active">      <div class="bar" style="width: 100%;"></div>    </div>  </div>  <div id="file-picker-tree"></div>  </div>  <div class="modal-footer">    <div id="done-picking" data-dismiss="modal" class="btn btn-primary">      Done    </div>    <button data-dismiss="modal" class="btn">      Cancel    </button>  </div>';$(e).html(i),$.ajax({url:"/courses/"+t+"/materials.json",success:function(e){n.onFolderStructureReceived(e)},beforeSend:function(){$("#file-picker-loading",e).show()},complete:function(){$("#file-picker-loading",e).hide()}}),this.treeElement=$("#file-picker-tree",e),$("#done-picking",e).on("click",function(){n.onDone()})},MaterialsFilePicker.prototype.onDone=function(){var e=[];for(var t in this.selectedMaterials){var n=this.selectedMaterials[t];e.push(n)}this.onSelectionCompleted(e)},MaterialsFilePicker.prototype.onFolderStructureReceived=function(e){var t=!0,n=parseFileJsonForJqTree(e,t);this.treeElement.tree({data:n,autoOpen:0,keyboardSupport:!1,onCreateLi:function(e,t){var n="icon-file";e.isNodeFolder&&(n="icon-folder-open");var i='<i class="'+n+'"></i>';t.find(".jqtree-element").prepend(i)}});var i=this;this.treeElement.bind("tree.click",function(e){i.onNodeClicked(e)})},MaterialsFilePicker.prototype.onNodeClicked=function(e){e.preventDefault();var t=e.node,n=t.id,i=this.treeElement.tree("isNodeSelected",t),r=n.indexOf&&-1!==n.indexOf("file");if(r){var o=n.indexOf("_")+1,s=n.slice(o);if(i)this.treeElement.tree("removeFromSelection",t),delete this.selectedMaterials[s];else{this.treeElement.tree("addToSelection",t);var a=[s,"Material",t.name,t.url];this.selectedMaterials[s]=a}}},$(document).ready(function(){$("#mcq-answers .add-mcq-answer").on("click",function(e){e.preventDefault();var t=$(this).parents("tbody").children().length;format=["<tr>",'<td><input name="answers['+t+'][is_correct]" type="checkbox" /></td>',"  <td>",'    <textarea name="answers['+t+'][text]" placeholder="Answer..." /></textarea>','    <textarea name="answers['+t+'][explanation]" placeholder="Explanation..." /></textarea>',"  </td>","</tr>"].join(""),$(this).parents("tr").before(format)})}),function(){}.call(this),$(document).ready(function(){function e(e){switch($(".dump_sub").attr("disabled","disabled"),params="",e){case"mine":params="?_type=mine";break;case"phantom":params="?_type=phantom"}$.ajax({url:$("#dump_url").val()+params,type:"GET",dataType:"json",success:function(e){$(".dump_sub").removeAttr("disabled"),$(".dump_sub").val("Download Submissions"),t(e.file_url,e.file_name)}})}$("#dump_sub_mine").click(function(){e("mine"),$("#dump_sub_mine").val("Processing...")}),$("#dump_sub_all").click(function(){e("all"),$("#dump_sub_all").val("Processing...")}),$("#dump_sub_phantom").click(function(){e("phantom"),$("#dump_sub_phantom").val("Processing...")});var t=function(e,t){var n="hiddenDownloader",i=document.getElementById(n);null===i&&(i=document.createElement("a"),i.id=n,i.style.display="none",i.download=t,document.body.appendChild(i)),i.href=e,i.click()}}),window.Modernizr=function(e,t,n){function i(e){b.cssText=e}function r(e,t){return i(C.join(e+";")+(t||""))}function o(e,t){return typeof e===t}function s(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var i in e){var r=e[i];if(!s(r,"-")&&b[r]!==n)return"pfx"==t?r:!0}return!1}function l(e,t,i){for(var r in e){var s=t[e[r]];if(s!==n)return i===!1?e[r]:o(s,"function")?s.bind(i||t):s}return!1}function c(e,t,n){var i=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+T.join(i+" ")+i).split(" ");return o(t,"string")||o(t,"undefined")?a(r,t):(r=(e+" "+S.join(i+" ")+i).split(" "),l(r,t,n))}function u(){p.input=function(n){for(var i=0,r=n.length;r>i;i++)M[n[i]]=n[i]in w;return M.list&&(M.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),M}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),p.inputtypes=function(e){for(var i,r,o,s=0,a=e.length;a>s;s++)w.setAttribute("type",r=e[s]),i="text"!==w.type,i&&(w.value=_,w.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&w.style.WebkitAppearance!==n?(g.appendChild(w),o=t.defaultView,i=o.getComputedStyle&&"textfield"!==o.getComputedStyle(w,null).WebkitAppearance&&0!==w.offsetHeight,g.removeChild(w)):/^(search|tel)$/.test(r)||(i=/^(url|email)$/.test(r)?w.checkValidity&&w.checkValidity()===!1:w.value!=_)),E[e[s]]=!!i;return E}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d,h,f="2.6.2",p={},m=!0,g=t.documentElement,v="modernizr",y=t.createElement(v),b=y.style,w=t.createElement("input"),_=":)",x={}.toString,C=" -webkit- -moz- -o- -ms- ".split(" "),k="Webkit Moz O ms",T=k.split(" "),S=k.toLowerCase().split(" "),D={svg:"http://www.w3.org/2000/svg"},N={},E={},M={},$=[],I=$.slice,A=function(e,n,i,r){var o,s,a,l,c=t.createElement("div"),u=t.body,d=u||t.createElement("body");if(parseInt(i,10))for(;i--;)a=t.createElement("div"),a.id=r?r[i]:v+(i+1),c.appendChild(a);return o=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),c.id=v,(u?c:d).innerHTML+=o,d.appendChild(c),u||(d.style.background="",d.style.overflow="hidden",l=g.style.overflow,g.style.overflow="hidden",g.appendChild(d)),s=n(c,e),u?c.parentNode.removeChild(c):(d.parentNode.removeChild(d),g.style.overflow=l),!!s},L=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t).matches;var i;return A("@media "+t+" { #"+v+" { position: absolute; } }",function(t){i="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),i},P=function(){function e(e,r){r=r||t.createElement(i[e]||"div"),e="on"+e;var s=e in r;return s||(r.setAttribute||(r=t.createElement("div")),r.setAttribute&&r.removeAttribute&&(r.setAttribute(e,""),s=o(r[e],"function"),o(r[e],"undefined")||(r[e]=n),r.removeAttribute(e))),r=null,s}var i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),O={}.hasOwnProperty;h=o(O,"undefined")||o(O.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return O.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=I.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=t.prototype;var o=new r,s=t.apply(o,n.concat(I.call(arguments)));return Object(s)===s?s:o}return t.apply(e,n.concat(I.call(arguments)))};return i}),N.flexbox=function(){return c("flexWrap")},N.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},N.canvastext=function(){return!!p.canvas&&!!o(t.createElement("canvas").getContext("2d").fillText,"function")},N.webgl=function(){return!!e.WebGLRenderingContext},N.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:A(["@media (",C.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},N.geolocation=function(){return"geolocation"in navigator},N.postmessage=function(){return!!e.postMessage},N.websqldatabase=function(){return!!e.openDatabase},N.indexedDB=function(){return!!c("indexedDB",e)},N.hashchange=function(){return P("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},N.history=function(){return!!e.history&&!!history.pushState},N.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},N.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},N.rgba=function(){return i("background-color:rgba(150,255,150,.5)"),s(b.backgroundColor,"rgba")},N.hsla=function(){return i("background-color:hsla(120,40%,100%,.5)"),s(b.backgroundColor,"rgba")||s(b.backgroundColor,"hsla")},N.multiplebgs=function(){return i("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(b.background)},N.backgroundsize=function(){return c("backgroundSize")},N.borderimage=function(){return c("borderImage")},N.borderradius=function(){return c("borderRadius")},N.boxshadow=function(){return c("boxShadow")},N.textshadow=function(){return""===t.createElement("div").style.textShadow},N.opacity=function(){return r("opacity:.55"),/^0.55$/.test(b.opacity)},N.cssanimations=function(){return c("animationName")},N.csscolumns=function(){return c("columnCount")},N.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return i((e+"-webkit- ".split(" ").join(t+e)+C.join(n+e)).slice(0,-e.length)),s(b.backgroundImage,"gradient")},N.cssreflections=function(){return c("boxReflect")},N.csstransforms=function(){return!!c("transform")},N.csstransforms3d=function(){var e=!!c("perspective");return e&&"webkitPerspective"in g.style&&A("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},N.csstransitions=function(){return c("transition")},N.fontface=function(){var e;return A('@font-face {font-family:"font";src:url("https://")}',function(n,i){var r=t.getElementById("smodernizr"),o=r.sheet||r.styleSheet,s=o?o.cssRules&&o.cssRules[0]?o.cssRules[0].cssText:o.cssText||"":"";e=/src/i.test(s)&&0===s.indexOf(i.split(" ")[0])}),e},N.generatedcontent=function(){var e;return A(["#",v,"{font:0/0 a}#",v,':after{content:"',_,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},N.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(i){}return n},N.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))
}catch(i){}return n},N.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(e){return!1}},N.sessionstorage=function(){try{return sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch(e){return!1}},N.webworkers=function(){return!!e.Worker},N.applicationcache=function(){return!!e.applicationCache},N.svg=function(){return!!t.createElementNS&&!!t.createElementNS(D.svg,"svg").createSVGRect},N.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==D.svg},N.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(x.call(t.createElementNS(D.svg,"animate")))},N.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(x.call(t.createElementNS(D.svg,"clipPath")))};for(var H in N)h(N,H)&&(d=H.toLowerCase(),p[d]=N[H](),$.push((p[d]?"":"no-")+d));return p.input||u(),p.addTest=function(e,t){if("object"==typeof e)for(var i in e)h(e,i)&&p.addTest(i,e[i]);else{if(e=e.toLowerCase(),p[e]!==n)return p;t="function"==typeof t?t():t,"undefined"!=typeof m&&m&&(g.className+=" "+(t?"":"no-")+e),p[e]=t}return p},i(""),y=w=null,function(e,t){function n(e,t){var n=e.createElement("p"),i=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function r(e){var t=g[e[p]];return t||(t={},m++,e[p]=m,g[m]=t),t}function o(e,n,i){if(n||(n=t),u)return n.createElement(e);i||(i=r(n));var o;return o=i.cache[e]?i.cache[e].cloneNode():f.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e),o.canHaveChildren&&!h.test(e)?i.frag.appendChild(o):o}function s(e,n){if(e||(e=t),u)return e.createDocumentFragment();n=n||r(e);for(var o=n.frag.cloneNode(),s=0,a=i(),l=a.length;l>s;s++)o.createElement(a[s]);return o}function a(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return v.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,t.frag)}function l(e){e||(e=t);var i=r(e);return v.shivCSS&&!c&&!i.hasCSS&&(i.hasCSS=!!n(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),u||a(e,i),e}var c,u,d=e.html5||{},h=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,p="_html5shiv",m=0,g={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",c="hidden"in e,u=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){c=!0,u=!0}}();var v={elements:d.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:d.shivCSS!==!1,supportsUnknownElements:u,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:s};e.html5=v,l(t)}(this,t),p._version=f,p._prefixes=C,p._domPrefixes=S,p._cssomPrefixes=T,p.mq=L,p.hasEvent=P,p.testProp=function(e){return a([e])},p.testAllProps=c,p.testStyles=A,p.prefixed=function(e,t,n){return t?c(e,t,n):c(e,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(m?" js "+$.join(" "):""),p}(this,this.document),function(e,t,n){function i(e){return"[object Function]"==g.call(e)}function r(e){return"string"==typeof e}function o(){}function s(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function a(){var e=v.shift();y=1,e?e.t?p(function(){("c"==e.t?h.injectCss:h.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),a()):y=0}function l(e,n,i,r,o,l,c){function u(t){if(!f&&s(d.readyState)&&(b.r=f=1,!y&&a(),d.onload=d.onreadystatechange=null,t)){"img"!=e&&p(function(){_.removeChild(d)},50);for(var i in S[n])S[n].hasOwnProperty(i)&&S[n][i].onload()}}var c=c||h.errorTimeout,d=t.createElement(e),f=0,g=0,b={t:i,s:n,e:o,a:l,x:c};1===S[n]&&(g=1,S[n]=[]),"object"==e?d.data=n:(d.src=n,d.type=e),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){u.call(this,g)},v.splice(r,0,b),"img"!=e&&(g||2===S[n]?(_.insertBefore(d,w?null:m),p(u,c)):S[n].push(d))}function c(e,t,n,i,o){return y=0,t=t||"j",r(e)?l("c"==t?C:x,e,t,this.i++,n,i,o):(v.splice(this.i++,0,e),1==v.length&&a()),this}function u(){var e=h;return e.loader={load:c,i:0},e}var d,h,f=t.documentElement,p=e.setTimeout,m=t.getElementsByTagName("script")[0],g={}.toString,v=[],y=0,b="MozAppearance"in f.style,w=b&&!!t.createRange().compareNode,_=w?f:m.parentNode,f=e.opera&&"[object Opera]"==g.call(e.opera),f=!!t.attachEvent&&!f,x=b?"object":f?"script":"img",C=f?"script":x,k=Array.isArray||function(e){return"[object Array]"==g.call(e)},T=[],S={},D={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};h=function(e){function t(e){var t,n,i,e=e.split("!"),r=T.length,o=e.pop(),s=e.length,o={url:o,origUrl:o,prefixes:e};for(n=0;s>n;n++)i=e[n].split("="),(t=D[i.shift()])&&(o=t(o,i));for(n=0;r>n;n++)o=T[n](o);return o}function s(e,r,o,s,a){var l=t(e),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(r&&(r=i(r)?r:r[e]||r[s]||r[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,r,o,s,a):(S[l.url]?l.noexec=!0:S[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(i(r)||i(c))&&o.load(function(){u(),r&&r(l.origUrl,a,s),c&&c(l.origUrl,a,s),S[l.url]=2})))}function a(e,t){function n(e,n){if(e){if(r(e))n||(d=function(){var e=[].slice.call(arguments);h.apply(this,e),f()}),s(e,d,t,0,c);else if(Object(e)===e)for(l in a=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(l)&&(!n&&!--a&&(i(d)?d=function(){var e=[].slice.call(arguments);h.apply(this,e),f()}:d[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),f()}}(h[l])),s(e[l],d,t,l,c))}else!n&&f()}var a,l,c=!!e.test,u=e.load||e.both,d=e.callback||o,h=d,f=e.complete||o;n(c?e.yep:e.nope,!!u),u&&n(u)}var l,c,d=this.yepnope.loader;if(r(e))s(e,0,d,0);else if(k(e))for(l=0;l<e.length;l++)c=e[l],r(c)?s(c,0,d,0):k(c)?h(c):Object(c)===c&&a(c,d);else Object(e)===e&&a(e,d)},h.addPrefix=function(e,t){D[e]=t},h.addFilter=function(e){T.push(e)},h.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",d=function(){t.removeEventListener("DOMContentLoaded",d,0),t.readyState="complete"},0)),e.yepnope=u(),e.yepnope.executeStack=a,e.yepnope.injectJs=function(e,n,i,r,l,c){var u,d,f=t.createElement("script"),r=r||h.errorTimeout;f.src=e;for(d in i)f.setAttribute(d,i[d]);n=c?a:n||o,f.onreadystatechange=f.onload=function(){!u&&s(f.readyState)&&(u=1,n(),f.onload=f.onreadystatechange=null)},p(function(){u||(u=1,n(1))},r),l?f.onload():m.parentNode.insertBefore(f,m)},e.yepnope.injectCss=function(e,n,i,r,s,l){var c,r=t.createElement("link"),n=l?a:n||o;r.href=e,r.rel="stylesheet",r.type="text/css";for(c in i)r.setAttribute(c,i[c]);s||(m.parentNode.insertBefore(r,m),p(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},$(document).ready(function(){$("#popups .modal").modal("show"),$("#popups .popup-btn-close").click(function(){$(this).parents(".modal").modal("hide")})}),$(document).ready(function(){$(".request-del").click(function(){var e=$(this).parents("tr"),t=e.find(".user-name").html(),n=e.find(".destroy-url").val();return confirm("Are you sure you want to reject the enrol request by "+t+"?")?($.ajax({url:n,type:"DELETE",success:function(){$(e).remove()}}),!1):void 0}),$(".request-approve").click(function(){var e=$(this).parents("tr"),t=e.find(".destroy-url").val();return $.ajax({url:t,type:"DELETE",data:{approved:!0},success:function(){$(e).remove()}}),!1})}),function(){}.call(this),$(document).ready(function(){$(".btn-select-nav").click(function(e){e.preventDefault();var t=$(this).attr("data-target"),n=$(t).find(":selected").val();location=n})}),function(){}.call(this),$(document).ready(function(){$("#mission_submit").click(function(e){confirm("THIS ACTION IS IRREVERSIBLE\n\nAre you sure you want to submit? You will no longer be able to amend your submission!")||e.preventDefault()})}),$(document).ready(function(){$("#add-survey-option").on("click",function(e){e.preventDefault();var t=$(this).parents("tbody").children().length;format=["<tr>","<td>"+t+"</td>","  <td>",'<input type="hidden" name="options['+t+'][pos]" value="'+t+'">','    <textarea id="<%= i %>" name="options['+t+'][description]" placeholder="Option..." class=" span6" rows="3"/></textarea>',"  </td>","</tr>"].join(""),$(this).parents("tr").before(format)})}),$(document).ready(function(){$(".checked").change(function(){console.log("here");var e=$(".vote-count");$(this).attr("checked")?($(this).parent().parent().addClass("rune-voted"),e.text(e.text()-0+1)):($(this).parent().parent().removeClass("rune-voted"),e.text(e.text()-0-1))}),$(".survey-submit").click(function(e){var t=$("#max-allowed").val()-0,n=$(".vote-count").text()-0;n>t&&(alert("Exceeded max voting entries!"),e.preventDefault()),t>n&&(confirm("You voted less than allowed entries, are you sure?")||e.preventDefault())})}),function(){}.call(this),$(document).ready(function(){$(".btn-add-tag").click(function(e){e.preventDefault();var t=$(this).parents("tr"),n=t.find("select :selected"),i=n.val(),r=$(this).attr("href");$.ajax({url:r,type:"POST",data:{tag_id:i},dataType:"html",success:function(e){t.before(e),n.detach(),n.prop("selected",!1),t.find("select").append(n)}})}),$(document).on("click",".remove-tag",function(e){e.preventDefault(),$(this).parents("tr").remove()})}),$(document).ready(function(){function e(){if(!i){i=!0,$("#pathrun").attr("disabled",!0);var e=$("#training-step-form"),r=e.children("input[name=update_url]").val(),o=e.children("input[name=qid]").val(),s=e.children("input[name=current_step]").val(),a={backgroundColor:"#e1c1b1"},l={duration:1e3,queue:!1},c={backgroundColor:"#008000"};$.post(r,{code:n.getValue(),current_step:s,qid:o},function(e){var n=$("#eval_result");if($(document.body).scrollTop(n.offset().top+n.height()-$("#ruler").show().height()+100),$("#ruler").hide(),e.errors.length>0)n.html(t(e.errors)).animate({backgroundColor:"#e1c1b1"},l);else{var r=!0;$("#publicTestTable tbody tr").each(function(t,n){if(e.publicTests[t]){var i=$("td:last",n);i.hasClass("pathTestFail")?i.switchClass("pathTestFail","pathTestPass").animate(c,l):i.hasClass("pathTestPass")||i.addClass("pathTestPass").animate(c,l)}else{r=!1;var i=$("td:last",n);i.hasClass("pathTestPass")?i.switchClass("pathTestPass","pathTestFail").animate(a,l):i.hasClass("pathTestFail")||i.addClass("pathTestFail",1e3).animate(a,l)}});var o=0==e.privateTests.length?!0:e.privateTests.reduce(function(e,t){return e&&t});if(r){if(null!=e.privateTests&&o)return n.html("You have successfully completed this step!").animate(c,l),$("#continue-btn").removeClass("disabled"),$("#pathrun").attr("disabled",!0),void 0;n.html("Your answer failed to pass one or more of the private test cases.").animate(a,l)}else n.html("Your answer failed to pass one or more of the public test cases.").animate(a,l)}i=!1,$("#pathrun").attr("disabled",!1)},"json")}}function t(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;")}if($("#submit-btn").click(function(){$("#submit-btn").addClass("disabled");var e=$("#training-step-form"),t=e.children("input[name=update_url]").val(),n=e.children("input[name=qid]").val(),i=e.find("input.choices"),r=[],o=[],s=e.children("input[name=current_step]").val();if($.each(i,function(e,t){r.push($(t).val()),$(t).is(":checked")&&o.push($(t).val())}),o.length>0){var a={current_step:s,qid:n,aid:o,choices:r};$.post(t,a,function(e){$("#submit-btn").removeClass("disabled"),$("#explanation .result").html(e.result),$("#explanation .reason").html(e.explanation),$("#explanation").removeClass("hidden"),$("#explanation").removeClass("mcq-ans-incorrect"),$("#explanation").removeClass("mcq-ans-correct"),e.is_correct?($("#continue-btn").removeClass("disabled"),$("#continue-btn").addClass("btn-primary"),$("#submit-btn").removeClass("btn-primary"),$("#explanation").addClass("mcq-ans-correct")):$("#explanation").addClass("mcq-ans-incorrect")},"json")}return!1}),$("#continue-btn").click(function(e){$(this).hasClass("disabled")&&e.preventDefault()}),$("#pathrun").bind("click",e),document.getElementById("ans")){var n;n=CodeMirror.fromTextArea(document.getElementById("ans"),{mode:{name:"python",version:3,singleLineStringErrors:!1},lineNumbers:!0,indentUnit:4,tabMode:"shift",matchBrackets:!0,theme:"molokai"}),$(document).keydown(function(t){t.altKey&&82==t.which&&e()})}var i=!1}),$(document).ready(function(){function e(e){if(0!=e.length){message=$('<ul style="margin: 0px 0px 0px 10px"></ul>');for(var t=0;t<e.length;++t)message.append('<li type="circle">'+e[t]+"</li>");var n=$(".alert");n.text(""),n._removeClass("hidden"),n.removeClass("alert-success"),n.addClass("alert-error"),message.appendTo(n),n.slideDown()}}function t(e){return"undefined"!=typeof e?(date_time=e.split(" "),date=date_time[0],time=date_time[1],dmy=date.split("-"),day=dmy[0],month=dmy[1]-1,year=dmy[2],hms=time.split(":"),hour=hms[0],min=hms[1],sec=hms[2],new Date(year,month,day,hour,min,sec)):void 0}$("#mission-update").click(function(n){start=t($("#open_at").val()),end=t($("#close_at").val()),error_msg=[],"undefined"!=typeof start&&"undefined"!=typeof end&&start>=end&&error_msg.push("Close time should be after open time."),grade=$("#mission-max-grade"),checked=$("#mission-format-checkbox").is(":checked"),!checked||grade.val()-0&&!(grade.val()-0<=0)||error_msg.push("Please specify a proper grade."),mission_exp=$("#mission-exp").val(),IsPositive(mission_exp)||error_msg.push("Please specify a proper value for EXP."),error_msg.length>0&&($("html,body").scrollTop(0),n.preventDefault(),e(error_msg))}),$("#training-update").click(function(n){start=t($("#open_at").val()),bonus_cutoff=t($("#bonus-cutoff-time").val()),error_msg=[],"undefined"!=typeof start&&"undefined"!=typeof bonus_cutoff&&start>=bonus_cutoff&&error_msg.push("Cutoff time should be after open time."),training_exp=$("#training-exp").val(),IsPositive(training_exp)||error_msg.push("Please specify a proper value for EXP."),bonus_exp=$("#bonus-exp").val(),IsPositive(bonus_exp)||error_msg.push("Please specify a proper value for bonus EXP."),error_msg.length>0&&(n.preventDefault(),$("html,body").scrollTop(0),e(error_msg))}),$(".asm-qns").sortable({update:function(){var e=$(this).sortable("serialize"),t=$(this).attr("url");$.ajax({url:t,type:"POST",data:e});var n=$(".asm-qn-handler > h3",this.children);$.each(n,function(e,t){var n=$(t).text(),i=n.replace(/Question [0-9]+/,"Question "+(e+1).toString());$(t).text(i)})}})}),function(){}.call(this),$(document).ready(function(){function e(e){var t=$(".alert");t.slideDown(),t._removeClass("hidden"),t.removeClass("alert-success"),t.addClass("alert-error"),t.text(e),t.slideDown(function(){setTimeout(function(){t.slideUp()},1500)})}$(document).on("click",".remove-staff",function(e){e.preventDefault();var t=$(this).parents("tr"),n=t.find(".uc-url").attr("href");$.ajax({url:n,type:"DELETE",success:function(){t.remove()}})}),$(".update-staff").on("click",function(t){t.preventDefault();var n=$(this).parents("tr"),i=n.find(".change-role").val(),r=n.find(".change-name"),o=n.find(".change-email"),s=n.find(".change-phantom"),a=n.find(".old-name"),l=$(".alert"),c=r.val().trim(),u=o.val().trim();if(l.size()>1&&l[0].parentNode.removeChild(l[0]),0==c.length)return e("User name can't be empty!"),r.val(a.val()),void 0;if("undefined"!=typeof o&&!o[0].validity.valid)return e("Please input valid email address!"),void 0;a.val(c),r.val(c),o.val(u);var d=n.find(".uc-url").attr("href");l.addClass("alert-success"),l.removeClass("alert-error"),l.text("Update user info successful!"),$.ajax({url:d,type:"PUT",data:{role_id:i,is_phantom:s[0].checked,name:c,email:u},dataType:"json",success:function(e){"OK"!=e.status?(l.addClass("alert-error"),l.text("Email entered is already taken!"),l.slideDown(),l._removeClass("hidden"),l.slideDown(function(){setTimeout(function(){l.slideUp()},4400)})):(l.slideDown(),l._removeClass("hidden"),l.slideDown(function(){setTimeout(function(){l.slideUp()},1500)}))}})})}),function(){jQuery(function(){return $(".best_in_place").best_in_place()})}.call(this);